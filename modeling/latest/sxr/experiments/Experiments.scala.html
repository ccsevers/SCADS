<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>experiments/Experiments.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> edu.berkeley.cs
<span class="keyword">package</span> scads
<span class="keyword">package</span> piql
<span class="keyword">package</span> modeling

<span class="keyword">import</span> comm._
<span class="keyword">import</span> storage._
<span class="keyword">import</span> perf._
<span class="keyword">import</span> deploylib.ec2._
<span class="keyword">import</span> deploylib.mesos._
<span class="keyword">import</span> piql.debug._
<span class="keyword">import</span> piql.scadr._
<span class="keyword">import</span> perf.scadr._
<span class="keyword">import</span> avro.marker._
<span class="keyword">import</span> avro.runtime._
<span class="keyword">import</span> collection.TraversableOnce

 <span class="keyword">import</span> org.apache.avro.generic._
 <span class="keyword">import</span> org.apache.avro.file.<span class="delimiter">{</span>DataFileReader, DataFileWriter, CodecFactory<span class="delimiter">}</span>
 <span class="keyword">import</span> java.io.File

<span class="keyword">object</span> <a title="object edu.berkeley.cs.scads.piql.modeling.Experiments" id="10338">Experiments</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">var</span> <a title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode" id="14681">resultClusterAddress</a> = <span title="(uri: String)edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">ZooKeeperNode</span><span class="delimiter">(</span><span title="java.lang.String(&quot;zk://zoo1.millennium.berkeley.edu,zoo2.millennium.berkeley.edu,zoo3.millennium.berkeley.edu/home/marmbrus/vldb12&quot;)" class="string">&quot;zk://zoo1.millennium.berkeley.edu,zoo2.millennium.berkeley.edu,zoo3.millennium.berkeley.edu/home/marmbrus/vldb12&quot;</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="deploylib.mesos.Cluster" id="14683">cluster</a> = <span title="deploylib.mesos.Cluster" class="keyword">new</span> <span title="deploylib.mesos.Cluster">Cluster</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="=&gt; edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode" id="14685">zooKeeperRoot</a> = <a href="#14683" title="=&gt; deploylib.mesos.Cluster">cluster</a>.<span title="=&gt; edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">zooKeeperRoot</span>
  <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.ScadsCluster" id="14686">resultsCluster</a> = <span title="edu.berkeley.cs.scads.storage.ScadsCluster" class="keyword">new</span> <span title="edu.berkeley.cs.scads.storage.ScadsCluster">ScadsCluster</span><span class="delimiter">(</span><a href="#14681" title="=&gt; edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">resultClusterAddress</a><span class="delimiter">)</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="=&gt; Seq[deploylib.mesos.S3CachedJar]" id="14688">classSource</a> = <a href="#14683" title="=&gt; deploylib.mesos.Cluster">cluster</a>.<span title="=&gt; Seq[deploylib.mesos.S3CachedJar]">classSource</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="=&gt; deploylib.mesos.RemoteServiceScheduler" id="14689">serviceScheduler</a> = <a href="#14683" title="=&gt; deploylib.mesos.Cluster">cluster</a>.<span title="=&gt; deploylib.mesos.RemoteServiceScheduler">serviceScheduler</span>
  <span class="keyword">def</span> <a title="=&gt; edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode" id="14690">traceRoot</a> = <a href="#14685" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode" id="18755">zooKeeperRoot</a>.<a href="#18755" title="Int" id="18757">getOrCreate</a><span class="delimiter">(</span><a title="java.lang.String(&quot;traceCollection&quot;)" id="18756" class="string">&quot;traceCollection&quot;</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; Unit" id="14691">watchServiceScheduler</a> = <a href="#14683" title="=&gt; deploylib.mesos.Cluster">cluster</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance">firstMaster</span>.<span title="(remoteFile: java.io.File)Unit">watch</span><span class="delimiter">(</span><span title="implicit deploylib.mesos.package.toFile : (str: String)java.io.File" class="string">&quot;/root/serviceScheduler.log&quot;</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(pkg: String)Unit" id="14692">debug</a><span class="delimiter">(</span><a title="String" id="28785">pkg</a>: <span title="String">String</span><span class="delimiter">)</span> = net.lag.logging.<span title="(name: String)net.lag.logging.Logger">Logger</span><span class="delimiter">(</span><a href="#28785" title="String">pkg</a><span class="delimiter">)</span>.<span title="(level: java.util.logging.Level)Unit">setLevel</span><span class="delimiter">(</span>java.util.logging.<span title="object java.util.logging.Level">Level</span>.<span title="java.util.logging.Level">FINEST</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(expId: Int)edu.berkeley.cs.scads.storage.ScadsCluster" id="14693">expCluster</a><span class="delimiter">(</span><a title="Int" id="29360">expId</a>: <span title="Int">Int</span><span class="delimiter">)</span> = 
    <span title="edu.berkeley.cs.scads.storage.ScadsCluster" class="keyword">new</span> <span title="edu.berkeley.cs.scads.storage.ScadsCluster">ScadsCluster</span><span class="delimiter">(</span>
      <span title="(uri: String)edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">ZooKeeperNode</span><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;zk://zoo.knowsql.org/home/marmbrus/scads/experimentCluster%010d&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#29360" title="Int">expId</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(expId: Int)edu.berkeley.cs.scads.piql.scadr.ScadrClient" id="14694">scadrClient</a><span class="delimiter">(</span><a title="Int" id="29368">expId</a>: <span title="Int">Int</span><span class="delimiter">)</span> = 
    <span title="edu.berkeley.cs.scads.piql.scadr.ScadrClient" class="keyword">new</span> <span title="edu.berkeley.cs.scads.piql.scadr.ScadrClient">ScadrClient</span><span class="delimiter">(</span><a href="#14693" title="(expId: Int)edu.berkeley.cs.scads.storage.ScadsCluster">expCluster</a><span class="delimiter">(</span><a href="#29368" title="Int">expId</a><span class="delimiter">)</span>, <span title="edu.berkeley.cs.scads.piql.exec.ParallelExecutor" class="keyword">new</span> <span title="edu.berkeley.cs.scads.piql.exec.ParallelExecutor">ParallelExecutor</span><span class="delimiter">)</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.tpcw.TpcwClient" id="14696">testTpcwClient</a> =
    <span title="edu.berkeley.cs.scads.piql.tpcw.TpcwClient" class="keyword">new</span> piql.tpcw.<span title="edu.berkeley.cs.scads.piql.tpcw.TpcwClient">TpcwClient</span><span class="delimiter">(</span><span title="edu.berkeley.cs.scads.piql.tpcw.TpcwLoaderTask" class="keyword">new</span> piql.tpcw.<span title="edu.berkeley.cs.scads.piql.tpcw.TpcwLoaderTask">TpcwLoaderTask</span><span class="delimiter">(</span><span title="Int(10)" class="int">10</span>,<span title="Int(5)" class="int">5</span>,<span title="Double(10.0)" class="int">10</span>,<span title="Int(10000)" class="int">10000</span>,<span title="Int(2)" class="int">2</span><span class="delimiter">)</span>.<span title="()edu.berkeley.cs.scads.storage.ScadsCluster">newTestCluster</span>, <a href="#18706" title="edu.berkeley.cs.scads.piql.exec.ParallelExecutor with edu.berkeley.cs.scads.piql.debug.DebugExecutor" class="keyword">new</a> <a title="anonymous class $anon extends edu.berkeley.cs.scads.piql.exec.ParallelExecutor with edu.berkeley.cs.scads.piql.debug.DebugExecutor" id="18706">ParallelExecutor</a> <span class="keyword">with</span> <span title="edu.berkeley.cs.scads.piql.debug.DebugExecutor">DebugExecutor</span><span class="delimiter">)</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.ScadsCluster" id="14698">scadsCluster</a> = <span title="edu.berkeley.cs.scads.storage.ScadsCluster" class="keyword">new</span> <span title="edu.berkeley.cs.scads.storage.ScadsCluster">ScadsCluster</span><span class="delimiter">(</span><a href="#14690" title="=&gt; edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">traceRoot</a><span class="delimiter">)</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.scadr.ScadrClient" id="14700">scadrClient</a> = <span title="edu.berkeley.cs.scads.piql.scadr.ScadrClient" class="keyword">new</span> piql.scadr.<span title="edu.berkeley.cs.scads.piql.scadr.ScadrClient">ScadrClient</span><span class="delimiter">(</span><a href="#14697" title="=&gt; edu.berkeley.cs.scads.storage.ScadsCluster">scadsCluster</a>, <span title="edu.berkeley.cs.scads.piql.exec.ParallelExecutor" class="keyword">new</span> <span title="edu.berkeley.cs.scads.piql.exec.ParallelExecutor">ParallelExecutor</span><span class="delimiter">)</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.scadr.ScadrClient" id="14702">testScadrClient</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.ManagedScadsCluster" id="18795">cluster</a> = <span title="object edu.berkeley.cs.scads.storage.TestScalaEngine">TestScalaEngine</span>.<span title="(numNodes: Int)edu.berkeley.cs.scads.storage.ManagedScadsCluster">newScadsCluster</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.scadr.ScadrClient" id="18796">client</a> = <span title="edu.berkeley.cs.scads.piql.scadr.ScadrClient" class="keyword">new</span> piql.scadr.<span title="edu.berkeley.cs.scads.piql.scadr.ScadrClient">ScadrClient</span><span class="delimiter">(</span><a href="#18795" title="edu.berkeley.cs.scads.storage.ManagedScadsCluster">cluster</a>, <a href="#18825" title="edu.berkeley.cs.scads.piql.exec.ParallelExecutor with edu.berkeley.cs.scads.piql.debug.DebugExecutor" class="keyword">new</a> <a title="anonymous class $anon extends edu.berkeley.cs.scads.piql.exec.ParallelExecutor with edu.berkeley.cs.scads.piql.debug.DebugExecutor" id="18825">ParallelExecutor</a> <span class="keyword">with</span> <span title="edu.berkeley.cs.scads.piql.debug.DebugExecutor">DebugExecutor</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.scadr.ScadrLoader" id="18797">loader</a> = <span title="edu.berkeley.cs.scads.piql.scadr.ScadrLoader" class="keyword">new</span> piql.scadr.<span title="edu.berkeley.cs.scads.piql.scadr.ScadrLoader">ScadrLoader</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>, <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    <a href="#18797" title="edu.berkeley.cs.scads.piql.scadr.ScadrLoader">loader</a>.<span title="(clientId: Int)loader.ScadrData">getData</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<span title="(client: edu.berkeley.cs.scads.piql.scadr.ScadrClient)Unit">load</span><span class="delimiter">(</span><a href="#18796" title="edu.berkeley.cs.scads.piql.scadr.ScadrClient">client</a><span class="delimiter">)</span>
    <a href="#18796" title="edu.berkeley.cs.scads.piql.scadr.ScadrClient">client</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; List[edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance#RemoteJavaProcess]" id="14703">clients</a> = <a href="#14683" title="=&gt; deploylib.mesos.Cluster">cluster</a>.<span title="(itr: Iterable[edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance])deploylib.ParallelSeq[edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance]">slaves</span>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance =&gt; Iterable[edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance#RemoteJavaProcess])List[edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance#RemoteJavaProcess]">pflatMap</span><span class="delimiter">(</span><a href="#31825" title="edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance">_</a>.<span title="=&gt; Seq[x$1.RemoteJavaProcess]">jps</span><span class="delimiter">)</span>.<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance#RemoteJavaProcess =&gt; Boolean)List[edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance#RemoteJavaProcess]">filter</span><span class="delimiter">(</span><a href="#32028" title="edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance#RemoteJavaProcess">_</a>.<span title="=&gt; String">main</span> <span title="(x$1: Any)Boolean">equals</span> <span title="java.lang.String(&quot;AvroTaskMain&quot;)" class="string">&quot;AvroTaskMain&quot;</span><span class="delimiter">)</span>.<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance#RemoteJavaProcess =&gt; Boolean)List[edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance#RemoteJavaProcess]">filterNot</span><span class="delimiter">(</span><a href="#32034" title="edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance#RemoteJavaProcess">_</a>.<span title="=&gt; String">stack</span> <span title="(x$1: java.lang.CharSequence)Boolean">contains</span> <span title="java.lang.String(&quot;ScalaEngineTask&quot;)" class="string">&quot;ScalaEngineTask&quot;</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; List[edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance#RemoteJavaProcess]" id="14704">laggards</a> = <a href="#14703" title="(itr: Iterable[edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance#RemoteJavaProcess])deploylib.ParallelSeq[edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance#RemoteJavaProcess]">clients</a>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance#RemoteJavaProcess =&gt; Boolean)List[edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance#RemoteJavaProcess]">pfilterNot</span><span class="delimiter">(</span><a href="#32254" title="edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance#RemoteJavaProcess">_</a>.<span title="=&gt; String">stack</span> <span title="(x$1: java.lang.CharSequence)Boolean">contains</span> <span title="java.lang.String(&quot;awaitChild&quot;)" class="string">&quot;awaitChild&quot;</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; Unit" id="14705">tagClients</a> = <a href="#14703" title="=&gt; List[edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance#RemoteJavaProcess]">clients</a>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance#RemoteJavaProcess =&gt; deploylib.ec2.package.EC2Instance)(implicit bf: scala.collection.generic.CanBuildFrom[List[edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance#RemoteJavaProcess],deploylib.ec2.package.EC2Instance,List[deploylib.ec2.package.EC2Instance]])List[deploylib.ec2.package.EC2Instance]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,deploylib.ec2.package.EC2Instance,List[deploylib.ec2.package.EC2Instance]]" class="delimiter">(</span><a href="#32277" title="edu.berkeley.cs.scads.piql.modeling.Experiments.cluster.region.EC2Instance#RemoteJavaProcess">_</a>.<span title="=&gt; deploylib.RemoteMachine">remoteMachine</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="deploylib.ec2.package.EC2Instance" class="delimiter">[</span><span title="deploylib.ec2.package.EC2Instance">EC2Instance</span><span class="delimiter">]</span><span class="delimiter">)</span>.<span title="(f: deploylib.ec2.package.EC2Instance =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#32447" title="deploylib.ec2.package.EC2Instance">_</a>.<span title="object x$6.tags">tags</span> <span title="(key: String, value: String)Unit">+=</span> <span class="delimiter">(</span><span title="java.lang.String(&quot;task&quot;)" class="string">&quot;task&quot;</span>, <span title="java.lang.String(&quot;client&quot;)" class="string">&quot;client&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(id: String)Unit" id="14706">killTask</a><span class="delimiter">(</span><a title="String" id="33732">id</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#14683" title="=&gt; deploylib.mesos.Cluster">cluster</a>.<a title="deploylib.mesos.RemoteServiceScheduler" id="33736">serviceScheduler</a> <a href="#33736" title="Int" id="33779">!?</a> <span title="(taskId: String)deploylib.mesos.KillTaskRequest">KillTaskRequest</span><a title="deploylib.mesos.KillTaskRequest" id="33778" class="delimiter">(</a><a href="#33732" title="String">id</a><span class="delimiter">)</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit edu.berkeley.cs.scads.piql.modeling.Experiments.productSeqToExcel : (lines: Seq[Product])java.lang.Object{def toExcel: Unit}" id="14707">productSeqToExcel</a><span class="delimiter">(</span><a title="Seq[Product]" id="33780">lines</a>: <span title="Seq[Product]">Seq</span><span class="delimiter">[</span>Product<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#33783" title="java.lang.Object{def toExcel: Unit}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object" id="33783" class="delimiter">{</a>
    <span class="keyword">import</span> java.io._
    <span class="keyword">def</span> <a title="=&gt; Unit" id="33786">toExcel</a>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.io.File" id="33788">file</a> = <span title="object java.io.File">File</span>.<span title="(x$1: java.lang.String, x$2: java.lang.String)java.io.File">createTempFile</span><span class="delimiter">(</span><span title="java.lang.String(&quot;scadsOut&quot;)" class="string">&quot;scadsOut&quot;</span>, <span title="java.lang.String(&quot;.csv&quot;)" class="string">&quot;.csv&quot;</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="java.io.FileWriter" id="33789">writer</a> = <span title="(x$1: java.io.File)java.io.FileWriter" class="keyword">new</span> <span title="java.io.FileWriter">FileWriter</span><span class="delimiter">(</span><a href="#33788" title="java.io.File">file</a><span class="delimiter">)</span>

      <a href="#33780" title="Seq[Product]">lines</a>.<span title="(f: Product =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[Product],java.lang.String,Seq[java.lang.String]])Seq[java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,java.lang.String,Seq[java.lang.String]]" class="delimiter">(</span><a href="#33902" title="Product">_</a>.<span title="=&gt; Iterator[Any]">productIterator</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>.<span title="(f: java.lang.String =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#33789" title="java.io.FileWriter">writer</a>.<a href="#34234" title="(x$1: java.lang.String)Unit">write</a><span class="delimiter">)</span>
      <a href="#33789" title="java.io.FileWriter">writer</a>.<span title="()Unit">close</span>

      <span title="object java.lang.Runtime">Runtime</span>.<span title="()java.lang.Runtime">getRuntime</span>.<span title="(x$1: Array[java.lang.String])java.lang.Process">exec</span><span title="Unit" class="delimiter">(</span><span title="(xs: java.lang.String*)(implicit evidence$2: scala.reflect.ClassManifest[java.lang.String])Array[java.lang.String]">Array</span><span title="(clazz: java.lang.Class[_])scala.reflect.ClassManifest[java.lang.String]" class="delimiter">(</span><span title="java.lang.String(&quot;/usr/bin/open&quot;)" class="string">&quot;/usr/bin/open&quot;</span>, <a href="#33788" title="java.io.File">file</a>.<span title="()java.lang.String">getCanonicalPath</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[RecordType &lt;: org.apache.avro.generic.GenericContainer](iter: Iterator[RecordType])java.lang.Object{def toAvroFile(file: java.io.File,codec: Option[org.apache.avro.file.CodecFactory])(implicit schema: edu.berkeley.cs.avro.runtime.package.TypedSchema[RecordType]): Unit; def toAvroFile$default$2: Option[org.apache.avro.file.CodecFactory]}" id="14708">avroIterWriter</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.apache.avro.generic.GenericContainer" id="14710">RecordType</a> &lt;: GenericContainer<span class="delimiter">]</span><span class="delimiter">(</span><a title="Iterator[RecordType]" id="34485">iter</a>: <span title="Iterator[RecordType]">Iterator</span><span class="delimiter">[</span>RecordType<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#34488" title="java.lang.Object{def toAvroFile(file: java.io.File,codec: Option[org.apache.avro.file.CodecFactory])(implicit schema: edu.berkeley.cs.avro.runtime.package.TypedSchema[RecordType]): Unit; def toAvroFile$default$2: Option[org.apache.avro.file.CodecFactory] @scala.annotation.unchecked.uncheckedVariance}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object" id="34488" class="delimiter">{</a>
     <span class="keyword">def</span> <a title="(file: java.io.File, codec: Option[org.apache.avro.file.CodecFactory])(implicit schema: edu.berkeley.cs.avro.runtime.package.TypedSchema[RecordType])Unit" id="34490">toAvroFile</a><span class="delimiter">(</span><a title="java.io.File" id="34491">file</a>: <span title="java.io.File">File</span>, <a title="Option[org.apache.avro.file.CodecFactory]" id="34494">codec</a>: <span title="Option[org.apache.avro.file.CodecFactory]">Option</span><span class="delimiter">[</span>CodecFactory<span class="delimiter">]</span> = <span title="object None">None</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="edu.berkeley.cs.avro.runtime.package.TypedSchema[RecordType]" id="34493">schema</a>: <span title="edu.berkeley.cs.avro.runtime.package.TypedSchema[RecordType]">TypedSchema</span><span class="delimiter">[</span>RecordType<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
       <span class="keyword">val</span> <a title="org.apache.avro.file.DataFileWriter[RecordType]" id="34495">outfile</a> = <span title="[RecordType &lt;: org.apache.avro.generic.GenericContainer](file: java.io.File, codec: Option[org.apache.avro.file.CodecFactory])(implicit schema: edu.berkeley.cs.avro.runtime.package.TypedSchema[RecordType])org.apache.avro.file.DataFileWriter[RecordType]">AvroOutFile</span><span title="(file: java.io.File, codec: Option[org.apache.avro.file.CodecFactory])(implicit schema: edu.berkeley.cs.avro.runtime.package.TypedSchema[RecordType])org.apache.avro.file.DataFileWriter[RecordType]" class="delimiter">[</span><a href="#14710" title="RecordType">RecordType</a><span class="delimiter">]</span><a href="#34493" title="edu.berkeley.cs.avro.runtime.package.TypedSchema[RecordType]" class="delimiter">(</a><a href="#34491" title="java.io.File">file</a>, <a href="#34494" title="Option[org.apache.avro.file.CodecFactory]">codec</a><span class="delimiter">)</span>
       <a href="#34485" title="Iterator[RecordType]">iter</a>.<span title="(f: RecordType =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#34495" title="org.apache.avro.file.DataFileWriter[RecordType]">outfile</a>.<a href="#34731" title="(x$1: RecordType)Unit">append</a><span class="delimiter">)</span>
       <a href="#34495" title="org.apache.avro.file.DataFileWriter[RecordType]">outfile</a>.<span title="()Unit">close</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

  <span class="keyword">object</span> <a title="object edu.berkeley.cs.scads.piql.modeling.Experiments.QueryRunner" id="14711">QueryRunner</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.modeling.Result]" id="34780">results</a> = <a href="#14686" title="=&gt; edu.berkeley.cs.scads.storage.ScadsCluster">resultsCluster</a>.<span title="[PairType &lt;: edu.berkeley.cs.avro.marker.AvroPair](ns: String)(implicit evidence$7: Manifest[PairType])edu.berkeley.cs.scads.storage.PairNamespace[PairType]">getNamespace</span><span title="(ns: String)(implicit evidence$7: Manifest[edu.berkeley.cs.scads.piql.modeling.Result])edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.modeling.Result]" class="delimiter">[</span><a href="collection/QueryRunnerTask.scala.html#43883" title="edu.berkeley.cs.scads.piql.modeling.Result">Result</a><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[edu.berkeley.cs.scads.piql.modeling.Result]" class="delimiter">(</span><span title="java.lang.String(&quot;queryRunnerResults&quot;)" class="string">&quot;queryRunnerResults&quot;</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="=&gt; Unit" id="34782">downloadResults</a>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="org.apache.avro.file.DataFileWriter[edu.berkeley.cs.scads.piql.modeling.Result]" id="35284">outfile</a> = <span title="[RecordType &lt;: org.apache.avro.generic.GenericContainer](file: java.io.File, codec: Option[org.apache.avro.file.CodecFactory])(implicit schema: edu.berkeley.cs.avro.runtime.package.TypedSchema[RecordType])org.apache.avro.file.DataFileWriter[RecordType]">AvroOutFile</span><span title="(file: java.io.File, codec: Option[org.apache.avro.file.CodecFactory])(implicit schema: edu.berkeley.cs.avro.runtime.package.TypedSchema[edu.berkeley.cs.scads.piql.modeling.Result])org.apache.avro.file.DataFileWriter[edu.berkeley.cs.scads.piql.modeling.Result]" class="delimiter">[</span><a href="collection/QueryRunnerTask.scala.html#43883" title="edu.berkeley.cs.scads.piql.modeling.Result">Result</a><span class="delimiter">]</span><span title="(implicit r: Manifest[edu.berkeley.cs.scads.piql.modeling.Result])edu.berkeley.cs.avro.runtime.package.TypedSchema[edu.berkeley.cs.scads.piql.modeling.Result]" class="delimiter">(</span><span title="implicit deploylib.mesos.package.toFile : (str: String)java.io.File" class="string">&quot;QueryRunnerResults.avro&quot;</span><span class="delimiter">)</span>
      <a href="#34780" title="=&gt; edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.modeling.Result]">results</a>.<span title="(startKey: Option[org.apache.avro.generic.IndexedRecord], endKey: Option[org.apache.avro.generic.IndexedRecord])Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">iterateOverRange</span><span class="delimiter">(</span><span title="object None">None</span>, <span title="object None">None</span><span class="delimiter">)</span>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Result =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#35284" title="org.apache.avro.file.DataFileWriter[edu.berkeley.cs.scads.piql.modeling.Result]">outfile</a>.<a href="#35318" title="(x$1: edu.berkeley.cs.scads.piql.modeling.Result)Unit">append</a><span class="delimiter">)</span>
      <a href="#35284" title="org.apache.avro.file.DataFileWriter[edu.berkeley.cs.scads.piql.modeling.Result]">outfile</a>.<span title="()Unit">close</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; org.apache.avro.file.DataFileReader[edu.berkeley.cs.scads.piql.modeling.Result] with Iterator[edu.berkeley.cs.scads.piql.modeling.Result]" id="34783">allResults</a> = <span title="[RecordType &lt;: org.apache.avro.generic.GenericContainer](file: java.io.File)(implicit schema: edu.berkeley.cs.avro.runtime.package.TypedSchema[RecordType])org.apache.avro.file.DataFileReader[RecordType] with Iterator[RecordType]">AvroInFile</span><span title="(file: java.io.File)(implicit schema: edu.berkeley.cs.avro.runtime.package.TypedSchema[edu.berkeley.cs.scads.piql.modeling.Result])org.apache.avro.file.DataFileReader[edu.berkeley.cs.scads.piql.modeling.Result] with Iterator[edu.berkeley.cs.scads.piql.modeling.Result]" class="delimiter">[</span><a href="collection/QueryRunnerTask.scala.html#43883" title="edu.berkeley.cs.scads.piql.modeling.Result">Result</a><span class="delimiter">]</span><span title="(implicit r: Manifest[edu.berkeley.cs.scads.piql.modeling.Result])edu.berkeley.cs.avro.runtime.package.TypedSchema[edu.berkeley.cs.scads.piql.modeling.Result]" class="delimiter">(</span><span title="implicit deploylib.mesos.package.toFile : (str: String)java.io.File" class="string">&quot;QueryRunnerResults.avro&quot;</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="=&gt; Iterator[edu.berkeley.cs.scads.piql.modeling.Result]" id="34784">goodResults</a> = <a href="#34783" title="=&gt; org.apache.avro.file.DataFileReader[edu.berkeley.cs.scads.piql.modeling.Result] with Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">allResults</a>.<span title="(p: edu.berkeley.cs.scads.piql.modeling.Result =&gt; Boolean)Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">filter</span><span class="delimiter">(</span><a href="#35472" title="edu.berkeley.cs.scads.piql.modeling.Result">_</a>.<a href="collection/QueryRunnerTask.scala.html#38501" title="=&gt; Int">failedQueries</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(200)" class="int">200</span><span class="delimiter">)</span>
      .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Result =&gt; Boolean)Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">filterNot</span><span class="delimiter">(</span><a href="#35479" title="edu.berkeley.cs.scads.piql.modeling.Result">_</a>.<a href="collection/QueryRunnerTask.scala.html#38492" title="=&gt; Int">iteration</a> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
      .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Result =&gt; Boolean)Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">filter</span><span class="delimiter">(</span><a href="#35487" title="edu.berkeley.cs.scads.piql.modeling.Result">_</a>.<a href="collection/QueryRunnerTask.scala.html#38495" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">clientConfig</a>.<a href="collection/QueryRunnerTask.scala.html#43865" title="=&gt; Int">iterationLengthMin</a> <span title="(x: Int)Boolean">==</span> <span title="Int(10)" class="int">10</span><span class="delimiter">)</span>
      .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Result =&gt; Boolean)Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">filter</span><span class="delimiter">(</span><a href="#35528" title="edu.berkeley.cs.scads.piql.modeling.Result">_</a>.<a href="collection/QueryRunnerTask.scala.html#38495" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">clientConfig</a>.<a href="collection/QueryRunnerTask.scala.html#43844" title="=&gt; Int">numClients</a> <span title="(x: Int)Boolean">==</span> <span title="Int(50)" class="int">50</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(results: Seq[edu.berkeley.cs.scads.piql.modeling.Result], quantile: Double)scala.collection.immutable.Map[edu.berkeley.cs.scads.piql.modeling.QueryDescription,Option[Int]]" id="34785">queryTypeQuantile</a><span class="delimiter">(</span><a title="Seq[edu.berkeley.cs.scads.piql.modeling.Result]" id="35539">results</a>: <span title="Seq[edu.berkeley.cs.scads.piql.modeling.Result]">Seq</span><span class="delimiter">[</span>Result<span class="delimiter">]</span> = <a href="#34784" title="=&gt; Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">goodResults</a>.<span title="=&gt; Seq[edu.berkeley.cs.scads.piql.modeling.Result]">toSeq</span>, <a title="Double" id="35540">quantile</a>: <span title="Double">Double</span> = <span title="Double(0.9)" class="double">0.90</span><span class="delimiter">)</span> =
      <a href="#35539" title="Seq[edu.berkeley.cs.scads.piql.modeling.Result]">results</a>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Result =&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription)scala.collection.immutable.Map[edu.berkeley.cs.scads.piql.modeling.QueryDescription,Seq[edu.berkeley.cs.scads.piql.modeling.Result]]">groupBy</span><span class="delimiter">(</span><a href="#35764" title="edu.berkeley.cs.scads.piql.modeling.Result">_</a>.<a href="collection/QueryRunnerTask.scala.html#43127" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">queryDesc</a><span class="delimiter">)</span>.<span title="(f: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Seq[edu.berkeley.cs.scads.piql.modeling.Result]) =&gt; (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Option[Int]))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[edu.berkeley.cs.scads.piql.modeling.QueryDescription,Seq[edu.berkeley.cs.scads.piql.modeling.Result]],(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Option[Int]),scala.collection.immutable.Map[edu.berkeley.cs.scads.piql.modeling.QueryDescription,Option[Int]]])scala.collection.immutable.Map[edu.berkeley.cs.scads.piql.modeling.QueryDescription,Option[Int]]">map</span> <a href="#36133" title="(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Option[Int])" class="delimiter">{</a>
        <span class="keyword">case</span> <span title="(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Option[Int])" class="delimiter">(</span><a title="edu.berkeley.cs.scads.piql.modeling.QueryDescription" id="36149">queryDesc</a>, <a title="Seq[edu.berkeley.cs.scads.piql.modeling.Result]" id="36150">results</a><span class="delimiter">)</span> =&gt; <span title="(_1: edu.berkeley.cs.scads.piql.modeling.QueryDescription, _2: Option[Int])(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Option[Int])" class="delimiter">(</span><a href="#36149" title="edu.berkeley.cs.scads.piql.modeling.QueryDescription">queryDesc</a>, <a href="#36150" title="Seq[edu.berkeley.cs.scads.piql.modeling.Result]">results</a>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Result =&gt; edu.berkeley.cs.scads.perf.Histogram)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[edu.berkeley.cs.scads.piql.modeling.Result],edu.berkeley.cs.scads.perf.Histogram,Seq[edu.berkeley.cs.scads.perf.Histogram]])Seq[edu.berkeley.cs.scads.perf.Histogram]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,edu.berkeley.cs.scads.perf.Histogram,Seq[edu.berkeley.cs.scads.perf.Histogram]]" class="delimiter">(</span><a href="#36171" title="edu.berkeley.cs.scads.piql.modeling.Result">_</a>.<a href="collection/QueryRunnerTask.scala.html#38498" title="=&gt; edu.berkeley.cs.scads.perf.Histogram">responseTimes</a><span class="delimiter">)</span>
          .<span title="(op: (edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram) =&gt; edu.berkeley.cs.scads.perf.Histogram)edu.berkeley.cs.scads.perf.Histogram">reduceLeft</span><span title="(a: edu.berkeley.cs.scads.perf.Histogram)Option[edu.berkeley.cs.scads.perf.Histogram]" class="delimiter">(</span><a href="#36302" title="edu.berkeley.cs.scads.perf.Histogram">_</a> <span title="(left: edu.berkeley.cs.scads.perf.Histogram)edu.berkeley.cs.scads.perf.Histogram">+</span> <a href="#36303" title="edu.berkeley.cs.scads.perf.Histogram">_</a><span class="delimiter">)</span>
          .<span title="(f: edu.berkeley.cs.scads.perf.Histogram =&gt; Int)Option[Int]">map</span><span class="delimiter">(</span><a href="#36396" title="edu.berkeley.cs.scads.perf.Histogram">_</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><a href="#35540" title="Double">quantile</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; scala.collection.immutable.Map[edu.berkeley.cs.scads.piql.modeling.QueryDescription,Option[Int]]" id="34786">thoughtstreamGraph</a> =
      <a href="#34785" title="(results: Seq[edu.berkeley.cs.scads.piql.modeling.Result], quantile: Double)scala.collection.immutable.Map[edu.berkeley.cs.scads.piql.modeling.QueryDescription,Option[Int]]">queryTypeQuantile</a><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(p: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Option[Int]) =&gt; Boolean)scala.collection.immutable.Map[edu.berkeley.cs.scads.piql.modeling.QueryDescription,Option[Int]]">filter</span><span class="delimiter">(</span><a href="#36866" title="(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Option[Int])">_</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">_1</span>.<a href="collection/QueryRunnerTask.scala.html#42464" title="=&gt; String">queryName</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;thoughtstream&quot;)" class="string">&quot;thoughtstream&quot;</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(queryName: String)scala.collection.immutable.Iterable[Unit]" id="34787">quantileCsv</a><span class="delimiter">(</span><a title="String" id="36872">queryName</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Map[edu.berkeley.cs.scads.piql.modeling.QueryDescription,Option[Int]]" id="36875">quantiles</a> = <a href="#34785" title="(results: Seq[edu.berkeley.cs.scads.piql.modeling.Result], quantile: Double)scala.collection.immutable.Map[edu.berkeley.cs.scads.piql.modeling.QueryDescription,Option[Int]]">queryTypeQuantile</a><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(p: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Option[Int]) =&gt; Boolean)scala.collection.immutable.Map[edu.berkeley.cs.scads.piql.modeling.QueryDescription,Option[Int]]">filter</span><span class="delimiter">(</span><a href="#36881" title="(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Option[Int])">_</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">_1</span>.<a href="collection/QueryRunnerTask.scala.html#42464" title="=&gt; String">queryName</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#36872" title="String">queryName</a><span class="delimiter">)</span>

      <a href="#36875" title="scala.collection.immutable.Map[edu.berkeley.cs.scads.piql.modeling.QueryDescription,Option[Int]]">quantiles</a>.<span title="(f: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Option[Int]) =&gt; Unit)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[edu.berkeley.cs.scads.piql.modeling.QueryDescription,Option[Int]],Unit,scala.collection.immutable.Iterable[Unit]])scala.collection.immutable.Iterable[Unit]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Iterable.Coll,Unit,scala.collection.immutable.Iterable[Unit]]" class="delimiter">(</span><a title="(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Option[Int])" id="36903">i</a> =&gt; <span class="delimiter">{</span>
        <span class="keyword">var</span> <a title="List[String]" id="36904">line</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="object Nil">Nil</span>
        <a href="#36904" title="List[String]">line</a> = <a href="#36903" title="(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Option[Int])">i</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">_1</span>.<a href="collection/QueryRunnerTask.scala.html#42464" title="=&gt; String">queryName</a> <a href="#36936" title="(x: String)List[String]">::</a> <a href="#36904" title="List[String]">line</a>

        <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</span> <span title="(end: Int)scala.collection.immutable.Range.Inclusive">to</span> <a href="#36903" title="(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Option[Int])">i</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">_1</span>.<a href="collection/QueryRunnerTask.scala.html#42465" title="=&gt; Seq[Int]">parameters</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span>.<span title="(f: Int =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a title="Int" id="37545">j</a> =&gt;
          <a href="#36904" title="List[String]">line</a> = <a href="#36903" title="(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Option[Int])">i</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">_1</span>.<a href="collection/QueryRunnerTask.scala.html#42465" title="(idx: Int)Int">parameters</a><span class="delimiter">(</span><a href="#37545" title="Int">j</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<span title="()java.lang.String">toString</span> <a href="#37546" title="(x: String)List[String]">::</a> <a href="#36904" title="List[String]">line</a>
        <span class="delimiter">)</span>

        <a href="#36904" title="List[String]">line</a> = <a href="#36903" title="(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Option[Int])">i</a>.<span title="=&gt; Option[Int]">_2</span>.<span title="=&gt; Int">get</span>.<span title="()java.lang.String">toString</span> <a href="#37563" title="(x: String)List[String]">::</a> <a href="#36904" title="List[String]">line</a>
        <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><a href="#36904" title="List[String]">line</a>.<span title="=&gt; List[String]">reverse</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; scala.collection.immutable.Iterable[Unit]" id="34788">thoughtstreamQuantileCsv</a> = <span class="delimiter">{</span>
		  <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;queryName,numSubscriptions,numPerPage,latency&quot;)" class="string">&quot;queryName,numSubscriptions,numPerPage,latency&quot;</span><span class="delimiter">)</span>
		  <a href="#34787" title="(queryName: String)scala.collection.immutable.Iterable[Unit]">quantileCsv</a><span class="delimiter">(</span><span title="java.lang.String(&quot;thoughtstream&quot;)" class="string">&quot;thoughtstream&quot;</span><span class="delimiter">)</span>
		<span class="delimiter">}</span>
		
		<span class="keyword">def</span> <a title="=&gt; scala.collection.immutable.Iterable[Unit]" id="34789">myThoughtsQuantileCsv</a> = <span class="delimiter">{</span>
		  <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;queryName,numPerPage,latency&quot;)" class="string">&quot;queryName,numPerPage,latency&quot;</span><span class="delimiter">)</span>
		  <a href="#34787" title="(queryName: String)scala.collection.immutable.Iterable[Unit]">quantileCsv</a><span class="delimiter">(</span><span title="java.lang.String(&quot;myThoughts&quot;)" class="string">&quot;myThoughts&quot;</span><span class="delimiter">)</span>
		<span class="delimiter">}</span>

		<span class="keyword">def</span> <a title="=&gt; scala.collection.immutable.Iterable[Unit]" id="34790">usersFollowedByQuantileCsv</a> = <span class="delimiter">{</span>
		  <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;queryName,numSubscriptions,latency&quot;)" class="string">&quot;queryName,numSubscriptions,latency&quot;</span><span class="delimiter">)</span>
		  <a href="#34787" title="(queryName: String)scala.collection.immutable.Iterable[Unit]">quantileCsv</a><span class="delimiter">(</span><span title="java.lang.String(&quot;usersFollowedBy&quot;)" class="string">&quot;usersFollowedBy&quot;</span><span class="delimiter">)</span>
		<span class="delimiter">}</span>
		
    <span class="keyword">def</span> <a title="=&gt; edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask" id="34791">defaultScadr</a> = <span title="(numServers: Int, numLoaders: Int, followingCardinality: Int, replicationFactor: Int, usersPerServer: Int, thoughtsPerUser: Int)edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask">ScadrLoaderTask</span><span class="delimiter">(</span>numServers=<span title="Int(10)" class="int">10</span>,
				       numLoaders=<span title="Int(5)" class="int">5</span>,
				       followingCardinality=<span title="Int(500)" class="int">500</span>,
				       replicationFactor=<span title="Int(2)" class="int">2</span>,
				       usersPerServer=<span title="Int(20000)" class="int">20000</span>,
				       thoughtsPerUser=<span title="Int(100)" class="int">100</span>
				     <span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="=&gt; edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask" id="34792">testScadrCluster</a> = <span title="(numServers: Int, numLoaders: Int, followingCardinality: Int, replicationFactor: Int, usersPerServer: Int, thoughtsPerUser: Int)edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask">ScadrLoaderTask</span><span class="delimiter">(</span>numServers=<span title="Int(10)" class="int">10</span>,
				  numLoaders=<span title="Int(10)" class="int">10</span>,
				  followingCardinality=<span title="Int(100)" class="int">100</span>,
				  replicationFactor=<span title="Int(2)" class="int">2</span>,
				  usersPerServer=<span title="Int(100)" class="int">100</span>,
				  thoughtsPerUser=<span title="Int(100)" class="int">100</span>
				 <span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask" id="34793">defaultRunner</a> = 
      <a href="collection/QueryRunnerTask.scala.html#43879" title="(numClients: Int, queryProvider: String, traceIterators: Boolean, traceMessages: Boolean, traceQueries: Boolean, iterations: Int, iterationLengthMin: Int, threads: Int)edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">QueryRunnerTask</a><span class="delimiter">(</span><a title="Int(5)" id="35221" class="int">5</a>,
		      <a title="java.lang.String(&quot;edu.berkeley.cs.scads.piql.modeling.ScadrQueryProvider&quot;)" id="35222" class="string">&quot;edu.berkeley.cs.scads.piql.modeling.ScadrQueryProvider&quot;</a>,
		      iterations=<span class="int">10</span><a title="Int(60)" id="35223">*</a><span class="int">6</span>,
		      iterationLengthMin=<a title="Int(10)" id="35224" class="int">10</a>,
		      threads=<a title="Int(5)" id="35225" class="int">5</a>,
		      traceIterators=<a title="Boolean(false)" id="35226" class="keyword">false</a>,
		      traceMessages=<a title="Boolean(false)" id="35227" class="keyword">false</a>,
		      traceQueries=<a title="Boolean(false)" id="35228" class="keyword">false</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="=&gt; Unit" id="34795">testReplicationEffect</a>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.ScadsCluster" id="37856">rep</a> = <a href="#34791" title="edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask" id="37858">defaultScadr</a>.<a href="#37858" title="Int" id="37864">copy</a><span class="delimiter">(</span>replicationFactor=<a title="Int(2)" id="37859" class="int">2</a><span class="delimiter">)</span>.<a href="#14688" title="(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit scheduler: deploylib.mesos.ExperimentScheduler, implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)edu.berkeley.cs.scads.storage.ScadsCluster">newCluster</a>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.ScadsCluster" id="37857">noRep</a> = <a href="#34791" title="=&gt; edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask">defaultScadr</a>.<a href="#14688" title="(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit scheduler: deploylib.mesos.ExperimentScheduler, implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)edu.berkeley.cs.scads.storage.ScadsCluster">newCluster</a>
      <a href="#34812" title="(cluster: edu.berkeley.cs.scads.storage.ScadsCluster)edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">benchmarkScadr</a><span class="delimiter">(</span><a href="#37856" title="edu.berkeley.cs.scads.storage.ScadsCluster">rep</a><span class="delimiter">)</span>
      <a href="#34812" title="(cluster: edu.berkeley.cs.scads.storage.ScadsCluster)edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">benchmarkScadr</a><span title="Unit" class="delimiter">(</span><a href="#37857" title="edu.berkeley.cs.scads.storage.ScadsCluster">noRep</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; Unit" id="34796">testGenericRunner</a>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.ScadsCluster" id="37888">cluster</a> = <a href="collection/GenericRelationQueryProvider.scala.html#38229" title="(numServers: Int, numLoaders: Int, replicationFactor: Int, tuplesPerServer: Int, dataSize: Int, maxCardinality: Int)edu.berkeley.cs.scads.piql.modeling.GenericRelationLoaderTask">GenericRelationLoaderTask</a><span class="delimiter">(</span><span title="Int(4)" class="int">4</span>,<span title="Int(2)" class="int">2</span>,<span title="Int(2)" class="int">2</span>,<span title="Int(10)" class="int">10</span>,<span title="Int(1)" class="int">1</span>,<span title="Int(500)" class="int">500</span><span class="delimiter">)</span>.<span title="()edu.berkeley.cs.scads.storage.ScadsCluster">newTestCluster</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask" id="37889">runner</a> = <a href="collection/QueryRunnerTask.scala.html#43879" title="(numClients: Int, queryProvider: String, traceIterators: Boolean, traceMessages: Boolean, traceQueries: Boolean, iterations: Int, iterationLengthMin: Int, threads: Int)edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">QueryRunnerTask</a><span class="delimiter">(</span><a title="Int(1)" id="37991" class="int">1</a>,
		      <a title="java.lang.String(&quot;edu.berkeley.cs.scads.piql.modeling.GenericQueryProvider&quot;)" id="37992" class="string">&quot;edu.berkeley.cs.scads.piql.modeling.GenericQueryProvider&quot;</a>,
		      iterations=<a title="Int(10)" id="37993" class="int">10</a>,
		      iterationLengthMin=<a title="Int(1)" id="37994" class="int">1</a>,
		      threads=<a title="Int(2)" id="37995" class="int">2</a>,
		      traceIterators=<a title="Boolean(false)" id="37996" class="keyword">false</a>,
		      traceMessages=<a title="Boolean(false)" id="37997" class="keyword">false</a>,
		      traceQueries=<a title="Boolean(false)" id="37998" class="keyword">false</a><span class="delimiter">)</span>
      <a href="#37889" title="edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">runner</a>.<a href="collection/QueryRunnerTask.scala.html#38580" title="(x$1: String)Unit">clusterAddress</a> = <a href="#37888" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>.<span title="=&gt; edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">root</span>.<span title="=&gt; java.lang.String">canonicalAddress</span>
      <a href="#37889" title="edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">runner</a>.<a href="collection/QueryRunnerTask.scala.html#38586" title="(x$1: String)Unit">experimentAddress</a> = <a href="#37888" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>.<span title="=&gt; edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">root</span>.<span title="=&gt; java.lang.String">canonicalAddress</span>
      <a href="#37889" title="edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">runner</a>.<a href="collection/QueryRunnerTask.scala.html#38583" title="(x$1: String)Unit">resultClusterAddress</a> = <a href="#37888" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>.<span title="=&gt; edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">root</span>.<span title="=&gt; java.lang.String">canonicalAddress</span>
      <span title="Unit" class="keyword">while</span><span class="delimiter">(</span><a href="#37888" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>.<span title="()List[edu.berkeley.cs.scads.storage.StorageService]">getAvailableServers</span>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="object java.lang.Thread">Thread</span>.<span title="(x$1: Long)Unit">sleep</span><a href="#37891" title="()Unit" class="delimiter">(</a><span title="Long(100L)" class="int">100</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="java.lang.Thread" id="37890">thread</a> = <span title="(x$1: java.lang.Runnable)java.lang.Thread" class="keyword">new</span> <span title="java.lang.Thread">Thread</span><span class="delimiter">(</span><a href="#37889" title="edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">runner</a><span class="delimiter">)</span>
      <a href="#37890" title="java.lang.Thread">thread</a>.<span title="()Unit">start</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; edu.berkeley.cs.scads.piql.modeling.GenericRelationLoaderTask" id="34797">genericCluster</a> = 
      <a href="collection/GenericRelationQueryProvider.scala.html#38229" title="(numServers: Int, numLoaders: Int, replicationFactor: Int, tuplesPerServer: Int, dataSize: Int, maxCardinality: Int)edu.berkeley.cs.scads.piql.modeling.GenericRelationLoaderTask">GenericRelationLoaderTask</a><span class="delimiter">(</span>
	      numServers=<span title="Int(10)" class="int">10</span>,
	      numLoaders=<span title="Int(10)" class="int">10</span>,
	      replicationFactor=<span title="Int(2)" class="int">2</span>,
	      tuplesPerServer=<span title="Int(10000)" class="int">10000</span>,
	      dataSize=<span title="Int(10)" class="int">10</span>,
	      maxCardinality=<span title="Int(500)" class="int">500</span><span class="delimiter">)</span>
    
    <span class="keyword">def</span> <a title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask" id="34798">defaultGenericRunner</a> =
       <a href="collection/QueryRunnerTask.scala.html#43879" title="(numClients: Int, queryProvider: String, traceIterators: Boolean, traceMessages: Boolean, traceQueries: Boolean, iterations: Int, iterationLengthMin: Int, threads: Int)edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">QueryRunnerTask</a><span class="delimiter">(</span>numClients=<a title="Int(10)" id="38526" class="int">10</a>,
		      <a title="java.lang.String(&quot;edu.berkeley.cs.scads.piql.modeling.GenericQueryProvider&quot;)" id="38527" class="string">&quot;edu.berkeley.cs.scads.piql.modeling.GenericQueryProvider&quot;</a>,
		      iterations=<a title="Int(30)" id="38528" class="int">30</a>,
		      iterationLengthMin=<a title="Int(10)" id="38529" class="int">10</a>,
		      threads=<a title="Int(2)" id="38530" class="int">2</a>,
		      traceIterators=<a title="Boolean(false)" id="38531" class="keyword">false</a>,
		      traceMessages=<a title="Boolean(false)" id="38532" class="keyword">false</a>,
		      traceQueries=<a title="Boolean(false)" id="38533" class="keyword">false</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask" id="34799">scadrGenericBenchmark</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.ScadsCluster" id="38537">clust30</a> = <a href="#34797" title="edu.berkeley.cs.scads.piql.modeling.GenericRelationLoaderTask" id="38540">genericCluster</a>.<a href="collection/GenericRelationQueryProvider.scala.html#38211" title="Int" id="38546">copy</a><span class="delimiter">(</span>dataSize=<a title="Int(30)" id="38541" class="int">30</a><span class="delimiter">)</span>.<a href="#14688" title="(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit scheduler: deploylib.mesos.ExperimentScheduler, implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)edu.berkeley.cs.scads.storage.ScadsCluster">newCluster</a>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.ScadsCluster" id="38538">clust40</a> = <a href="#34797" title="edu.berkeley.cs.scads.piql.modeling.GenericRelationLoaderTask" id="38547">genericCluster</a>.<a href="collection/GenericRelationQueryProvider.scala.html#38211" title="Int" id="38553">copy</a><span class="delimiter">(</span>dataSize=<a title="Int(40)" id="38548" class="int">40</a><span class="delimiter">)</span>.<a href="#14688" title="(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit scheduler: deploylib.mesos.ExperimentScheduler, implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)edu.berkeley.cs.scads.storage.ScadsCluster">newCluster</a>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.ScadsCluster" id="38539">scadrCluster</a> = <a href="#34791" title="=&gt; edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask">defaultScadr</a>.<a href="#14688" title="(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit scheduler: deploylib.mesos.ExperimentScheduler, implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)edu.berkeley.cs.scads.storage.ScadsCluster">newCluster</a>

      <a href="#34811" title="(cluster: edu.berkeley.cs.scads.storage.ScadsCluster)edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">genericBenchmark</a><span class="delimiter">(</span><a href="#38537" title="edu.berkeley.cs.scads.storage.ScadsCluster">clust30</a><span class="delimiter">)</span>
      <a href="#34811" title="(cluster: edu.berkeley.cs.scads.storage.ScadsCluster)edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">genericBenchmark</a><span class="delimiter">(</span><a href="#38538" title="edu.berkeley.cs.scads.storage.ScadsCluster">clust40</a><span class="delimiter">)</span>
      <a href="#34812" title="(cluster: edu.berkeley.cs.scads.storage.ScadsCluster)edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">benchmarkScadr</a><span class="delimiter">(</span><a href="#38539" title="edu.berkeley.cs.scads.storage.ScadsCluster">scadrCluster</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="Int" id="34800">numClients</a> = <span title="Int(5)" class="int">5</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.tpcw.TpcwLoaderTask" id="34802">tpcwCluster</a> = tpcw.<span title="(numServers: Int, numLoaders: Int, numEBs: Double, numItems: Int, replicationFactor: Int)edu.berkeley.cs.scads.piql.tpcw.TpcwLoaderTask">TpcwLoaderTask</span><span class="delimiter">(</span><span title="Int(10)" class="int">10</span>, <a href="#34800" title="=&gt; Int">numClients</a>, numEBs=<span title="Int(150)" class="int">150</span><span title="=&gt; Double">*</span><a href="#34800" title="=&gt; Int">numClients</a>, numItems=<span title="Int(10000)" class="int">10000</span>, <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask" id="34804">tpcwRunner</a> =
      <a href="collection/QueryRunnerTask.scala.html#43879" title="(numClients: Int, queryProvider: String, traceIterators: Boolean, traceMessages: Boolean, traceQueries: Boolean, iterations: Int, iterationLengthMin: Int, threads: Int)edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">QueryRunnerTask</a><span class="delimiter">(</span>numClients=<a title="Int(10)" id="35262" class="int">10</a>,
        <a title="java.lang.String(&quot;edu.berkeley.cs.scads.piql.modeling.TpcwQueryProvider&quot;)" id="35263" class="string">&quot;edu.berkeley.cs.scads.piql.modeling.TpcwQueryProvider&quot;</a>,
        iterations=<a title="Int(30)" id="35264" class="int">30</a>,
        iterationLengthMin=<a title="Int(10)" id="35265" class="int">10</a>,
        threads=<a title="Int(2)" id="35266" class="int">2</a>,
        traceIterators=<a title="Boolean(false)" id="35267" class="keyword">false</a>,
        traceMessages=<a title="Boolean(false)" id="35268" class="keyword">false</a>,
        traceQueries=<a title="Boolean(false)" id="35269" class="keyword">false</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask" id="34806">defaultTpcwRunner</a> =
      <a href="collection/QueryRunnerTask.scala.html#43879" title="(numClients: Int, queryProvider: String, traceIterators: Boolean, traceMessages: Boolean, traceQueries: Boolean, iterations: Int, iterationLengthMin: Int, threads: Int)edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">QueryRunnerTask</a><span class="delimiter">(</span><a href="#34800" title="Int" id="35274">numClients</a>,
		      <a title="java.lang.String(&quot;edu.berkeley.cs.scads.piql.modeling.TpcwQueryProvider&quot;)" id="35275" class="string">&quot;edu.berkeley.cs.scads.piql.modeling.TpcwQueryProvider&quot;</a>,
		      iterations=<span class="int">10</span><a title="Int(60)" id="35276">*</a><span class="int">6</span>,
		      iterationLengthMin=<a title="Int(10)" id="35277" class="int">10</a>,
		      threads=<a title="Int(10)" id="35278" class="int">10</a>,
		      traceIterators=<a title="Boolean(false)" id="35279" class="keyword">false</a>,
		      traceMessages=<a title="Boolean(false)" id="35280" class="keyword">false</a>,
		      traceQueries=<a title="Boolean(false)" id="35281" class="keyword">false</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask" id="34808">tpcwBenchmark</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.ScadsCluster" id="38571">cluster</a> = <a href="#34802" title="=&gt; edu.berkeley.cs.scads.piql.tpcw.TpcwLoaderTask">tpcwCluster</a>.<a href="#14688" title="(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit scheduler: deploylib.mesos.ExperimentScheduler, implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)edu.berkeley.cs.scads.storage.ScadsCluster">newCluster</a>
      <a href="#34806" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">defaultTpcwRunner</a>.<span title="(cluster: edu.berkeley.cs.scads.storage.ScadsCluster, resultCluster: edu.berkeley.cs.scads.storage.ScadsCluster)(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit scheduler: deploylib.mesos.ExperimentScheduler, implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)edu.berkeley.cs.scads.piql.modeling.Experiments.QueryRunner.defaultTpcwRunner.type">schedule</span><a href="#14688" title="=&gt; Seq[deploylib.mesos.S3CachedJar]" class="delimiter">(</a><a href="#38571" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>, <a href="#14686" title="=&gt; edu.berkeley.cs.scads.storage.ScadsCluster">resultsCluster</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; Unit" id="34809">rocTpcwBenchmark</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.ScadsCluster" id="38575">cluster</a> = <a href="#34802" title="=&gt; edu.berkeley.cs.scads.piql.tpcw.TpcwLoaderTask">tpcwCluster</a>.<a href="#14688" title="(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit scheduler: deploylib.mesos.ExperimentScheduler, implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)edu.berkeley.cs.scads.storage.ScadsCluster">newCluster</a>
      <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</span> <span title="(end: Int)scala.collection.immutable.Range.Inclusive">to</span> <span title="Int(100)" class="int">100</span><span class="delimiter">)</span>.<span title="(f: Int =&gt; edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask)Unit">foreach</span><span class="delimiter">(</span><a title="Int" id="38675">_</a> =&gt; <a href="#34806" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">defaultTpcwRunner</a>.<a href="collection/QueryRunnerTask.scala.html#43844" title="Int" id="38683">copy</a><span class="delimiter">(</span>iterations=<a title="Int(5)" id="38676" class="int">5</a><span class="delimiter">)</span>.<span title="(cluster: edu.berkeley.cs.scads.storage.ScadsCluster, resultCluster: edu.berkeley.cs.scads.storage.ScadsCluster)(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit scheduler: deploylib.mesos.ExperimentScheduler, implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">schedule</span><a href="#14688" title="=&gt; Seq[deploylib.mesos.S3CachedJar]" class="delimiter">(</a><a href="#38575" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>,<a href="#14686" title="=&gt; edu.berkeley.cs.scads.storage.ScadsCluster">resultsCluster</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; Unit" id="34810">testTpcwRunner</a>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.ScadsCluster" id="38692">cluster</a> = tpcw.<span title="(numServers: Int, numLoaders: Int, numEBs: Double, numItems: Int, replicationFactor: Int)edu.berkeley.cs.scads.piql.tpcw.TpcwLoaderTask">TpcwLoaderTask</span><span class="delimiter">(</span><span title="Int(2)" class="int">2</span>, <span title="Int(2)" class="int">2</span>, <span title="Double(10.0)" class="int">10</span>, <span title="Int(1000)" class="int">1000</span>, <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>.<span title="()edu.berkeley.cs.scads.storage.ScadsCluster">newTestCluster</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask" id="38693">runner</a> = <a href="collection/QueryRunnerTask.scala.html#43879" title="(numClients: Int, queryProvider: String, traceIterators: Boolean, traceMessages: Boolean, traceQueries: Boolean, iterations: Int, iterationLengthMin: Int, threads: Int)edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">QueryRunnerTask</a><span class="delimiter">(</span><a title="Int(1)" id="38696" class="int">1</a>,
		      <a title="java.lang.String(&quot;edu.berkeley.cs.scads.piql.modeling.TpcwQueryProvider&quot;)" id="38697" class="string">&quot;edu.berkeley.cs.scads.piql.modeling.TpcwQueryProvider&quot;</a>,
		      iterations=<a title="Int(10)" id="38698" class="int">10</a>,
		      iterationLengthMin=<a title="Int(1)" id="38699" class="int">1</a>,
		      threads=<a title="Int(2)" id="38700" class="int">2</a>,
		      traceIterators=<a title="Boolean(false)" id="38701" class="keyword">false</a>,
		      traceMessages=<a title="Boolean(false)" id="38702" class="keyword">false</a>,
		      traceQueries=<a title="Boolean(false)" id="38703" class="keyword">false</a><span class="delimiter">)</span>
      <a href="#38693" title="edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">runner</a>.<a href="collection/QueryRunnerTask.scala.html#38580" title="(x$1: String)Unit">clusterAddress</a> = <a href="#38692" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>.<span title="=&gt; edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">root</span>.<span title="=&gt; java.lang.String">canonicalAddress</span>
      <a href="#38693" title="edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">runner</a>.<a href="collection/QueryRunnerTask.scala.html#38586" title="(x$1: String)Unit">experimentAddress</a> = <a href="#38692" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>.<span title="=&gt; edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">root</span>.<span title="=&gt; java.lang.String">canonicalAddress</span>
      <a href="#38693" title="edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">runner</a>.<a href="collection/QueryRunnerTask.scala.html#38583" title="(x$1: String)Unit">resultClusterAddress</a> = <a href="#38692" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>.<span title="=&gt; edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">root</span>.<span title="=&gt; java.lang.String">canonicalAddress</span>
      <span title="Unit" class="keyword">while</span><span class="delimiter">(</span><a href="#38692" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>.<span title="()List[edu.berkeley.cs.scads.storage.StorageService]">getAvailableServers</span>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="object java.lang.Thread">Thread</span>.<span title="(x$1: Long)Unit">sleep</span><a href="#38695" title="()Unit" class="delimiter">(</a><span title="Long(100L)" class="int">100</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="java.lang.Thread" id="38694">thread</a> = <span title="(x$1: java.lang.Runnable)java.lang.Thread" class="keyword">new</span> <span title="java.lang.Thread">Thread</span><span class="delimiter">(</span><a href="#38693" title="edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">runner</a><span class="delimiter">)</span>
      <a href="#38694" title="java.lang.Thread">thread</a>.<span title="()Unit">start</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(cluster: edu.berkeley.cs.scads.storage.ScadsCluster)edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask" id="34811">genericBenchmark</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.storage.ScadsCluster" id="38557">cluster</a>: <span title="edu.berkeley.cs.scads.storage.ScadsCluster">ScadsCluster</span> = <a href="#34797" title="=&gt; edu.berkeley.cs.scads.piql.modeling.GenericRelationLoaderTask">genericCluster</a>.<a href="#14688" title="(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit scheduler: deploylib.mesos.ExperimentScheduler, implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)edu.berkeley.cs.scads.storage.ScadsCluster">newCluster</a><span class="delimiter">)</span> =
      <a href="#34798" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">defaultGenericRunner</a>.<span title="(cluster: edu.berkeley.cs.scads.storage.ScadsCluster, resultCluster: edu.berkeley.cs.scads.storage.ScadsCluster)(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit scheduler: deploylib.mesos.ExperimentScheduler, implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">schedule</span><a href="#14688" title="=&gt; Seq[deploylib.mesos.S3CachedJar]" class="delimiter">(</a><a href="#38557" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>, <a href="#14686" title="=&gt; edu.berkeley.cs.scads.storage.ScadsCluster">resultsCluster</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(cluster: edu.berkeley.cs.scads.storage.ScadsCluster)edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask" id="34812">benchmarkScadr</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.storage.ScadsCluster" id="37885">cluster</a>: <span title="edu.berkeley.cs.scads.storage.ScadsCluster">ScadsCluster</span> = <a href="#34791" title="=&gt; edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask">defaultScadr</a>.<a href="#14688" title="(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit scheduler: deploylib.mesos.ExperimentScheduler, implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)edu.berkeley.cs.scads.storage.ScadsCluster">newCluster</a><span class="delimiter">)</span> =
      <a href="#34793" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">defaultRunner</a>.<span title="(cluster: edu.berkeley.cs.scads.storage.ScadsCluster, resultCluster: edu.berkeley.cs.scads.storage.ScadsCluster)(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit scheduler: deploylib.mesos.ExperimentScheduler, implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)edu.berkeley.cs.scads.piql.modeling.Experiments.QueryRunner.defaultRunner.type">schedule</span><a href="#14688" title="=&gt; Seq[deploylib.mesos.S3CachedJar]" class="delimiter">(</a><a href="#37885" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>,<a href="#14686" title="=&gt; edu.berkeley.cs.scads.storage.ScadsCluster">resultsCluster</a><span class="delimiter">)</span>
      
    <span class="keyword">def</span> <a title="(cluster: edu.berkeley.cs.scads.storage.ScadsCluster)Unit" id="34813">rocBenchmarkScadr</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.storage.ScadsCluster" id="38720">cluster</a>: <span title="edu.berkeley.cs.scads.storage.ScadsCluster">ScadsCluster</span> = <a href="#34791" title="=&gt; edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask">defaultScadr</a>.<a href="#14688" title="(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit scheduler: deploylib.mesos.ExperimentScheduler, implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)edu.berkeley.cs.scads.storage.ScadsCluster">newCluster</a><span class="delimiter">)</span> = 
      <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</span> <span title="(end: Int)scala.collection.immutable.Range.Inclusive">to</span> <span title="Int(100)" class="int">100</span><span class="delimiter">)</span>.<span title="(f: Int =&gt; edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask)Unit">foreach</span><span class="delimiter">(</span><a title="Int" id="38820">_</a> =&gt; <a href="#34793" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">defaultRunner</a>.<a href="collection/QueryRunnerTask.scala.html#43844" title="Int" id="38828">copy</a><span class="delimiter">(</span>iterations=<a title="Int(2)" id="38821" class="int">2</a><span class="delimiter">)</span>.<span title="(cluster: edu.berkeley.cs.scads.storage.ScadsCluster, resultCluster: edu.berkeley.cs.scads.storage.ScadsCluster)(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit scheduler: deploylib.mesos.ExperimentScheduler, implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">schedule</span><a href="#14688" title="=&gt; Seq[deploylib.mesos.S3CachedJar]" class="delimiter">(</a><a href="#38720" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>,<a href="#14686" title="=&gt; edu.berkeley.cs.scads.storage.ScadsCluster">resultsCluster</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">object</span> <a title="object edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment" id="14713">TpcwScaleExperiment</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="keyword">import</span> piql.tpcw._
    <span class="keyword">import</span> scale._
    <span class="keyword">type</span> <a title="edu.berkeley.cs.scads.piql.tpcw.scale.Result" id="38840">Result</a> = piql.tpcw.scale.<span title="edu.berkeley.cs.scads.piql.tpcw.scale.Result">Result</span>

    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]" id="38841">results</a> = <a href="#14686" title="=&gt; edu.berkeley.cs.scads.storage.ScadsCluster">resultsCluster</a>.<span title="[PairType &lt;: edu.berkeley.cs.avro.marker.AvroPair](ns: String)(implicit evidence$7: Manifest[PairType])edu.berkeley.cs.scads.storage.PairNamespace[PairType]">getNamespace</span><span title="(ns: String)(implicit evidence$7: Manifest[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result])edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]" class="delimiter">[</span><span title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">Result</span><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]" class="delimiter">(</span><span title="java.lang.String(&quot;tpcwScaleResults&quot;)" class="string">&quot;tpcwScaleResults&quot;</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="=&gt; Unit" id="38843">backup</a> = <a href="#38841" title="=&gt; edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">results</a>.<span title="(startKey: Option[org.apache.avro.generic.IndexedRecord], endKey: Option[org.apache.avro.generic.IndexedRecord])Iterator[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">iterateOverRange</span><a href="#14708" title="avroIterWriter extends java.lang.Object" id="39105" class="delimiter">(</a><span title="object None">None</span>,<span title="object None">None</span><span class="delimiter">)</span>.<a href="#39104" title="Option[org.apache.avro.file.CodecFactory]" id="39417">toAvroFile</a><span title="(implicit r: Manifest[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result])edu.berkeley.cs.avro.runtime.package.TypedSchema[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]" class="delimiter">(</span><a title="java.io.File" id="39416" class="keyword">new</a> java.io.<span title="java.io.File">File</span><span class="delimiter">(</span><span title="java.lang.String(&quot;tpcwScale.&quot;)" class="string">&quot;tpcwScale.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.avro&quot;)" class="string">&quot;.avro&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(dataPoints: Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result])Seq[(Int, Long, Int, Double, Int, String, Int, Int, Int, Int, Int, String)]" id="38844">scaleResultsIter</a><span class="delimiter">(</span><a title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]" id="39437">dataPoints</a>: <span title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">Seq</span><span class="delimiter">[</span>Result<span class="delimiter">]</span> = <a href="#38841" title="=&gt; edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">results</a>.<span title="(startKey: Option[org.apache.avro.generic.IndexedRecord], endKey: Option[org.apache.avro.generic.IndexedRecord])Iterator[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">iterateOverRange</span><span class="delimiter">(</span><span title="object None">None</span>, <span title="object None">None</span><span class="delimiter">)</span>.<span title="=&gt; Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">toSeq</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#39437" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">dataPoints</a>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#39441" title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.tpcw.TpcwLoaderTask">loaderConfig</span>.<span title="=&gt; Int">replicationFactor</span> <span title="(x: Int)Boolean">==</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#39462" title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.tpcw.scale.TpcwWorkflowTask">clientConfig</span>.<span title="=&gt; Int">iterations</span> <span title="(x: Int)Boolean">==</span> <span title="Int(4)" class="int">4</span><span class="delimiter">)</span>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#39559" title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.tpcw.scale.TpcwWorkflowTask">clientConfig</span>.<span title="=&gt; Int">numThreads</span> <span title="(x: Int)Boolean">==</span> <span title="Int(10)" class="int">10</span><span class="delimiter">)</span>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#39570" title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.tpcw.scale.TpcwWorkflowTask">clientConfig</span>.<span title="=&gt; Int">runLengthMin</span> <span title="(x: Int)Boolean">==</span> <span title="Int(5)" class="int">5</span><span class="delimiter">)</span>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#39581" title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">_</a>.<span title="=&gt; Int">iteration</span> <span title="(x: Int)Boolean">!=</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<span title="=&gt; Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">toSeq</span>
        .<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result =&gt; (String, Int))scala.collection.immutable.Map[(String, Int),Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]]">groupBy</span><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result" id="39598">r</a> =&gt; <span title="(_1: String, _2: Int)(String, Int)" class="delimiter">(</span><a href="#39598" title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">r</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.tpcw.scale.TpcwWorkflowTask">clientConfig</span>.<span title="=&gt; String">clusterAddress</span>, <a href="#39598" title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">r</a>.<span title="=&gt; Int">iteration</span><span class="delimiter">)</span><span class="delimiter">)</span>
        .<span title="(f: ((String, Int), Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]) =&gt; (Int, Long, Int, Double, Int, String, Int, Int, Int, Int, Int, String))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[(String, Int),Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]],(Int, Long, Int, Double, Int, String, Int, Int, Int, Int, Int, String),scala.collection.immutable.Iterable[(Int, Long, Int, Double, Int, String, Int, Int, Int, Int, Int, String)]])scala.collection.immutable.Iterable[(Int, Long, Int, Double, Int, String, Int, Int, Int, Int, Int, String)]">map</span> <a href="#39642" title="(Int, Long, Int, Double, Int, String, Int, Int, Int, Int, Int, String)" class="delimiter">{</a>
        <span class="keyword">case</span> <span title="(Int, Long, Int, Double, Int, String, Int, Int, Int, Int, Int, String)" class="delimiter">(</span><span class="delimiter">(</span><a title="String" id="39647">exp</a>, <a title="Int" id="39648">iter</a><span class="delimiter">)</span>, <a title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]" id="39649">results</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="39650">aggHist</a> = <a href="#39649" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">results</a>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result =&gt; edu.berkeley.cs.scads.perf.Histogram)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result],edu.berkeley.cs.scads.perf.Histogram,Seq[edu.berkeley.cs.scads.perf.Histogram]])Seq[edu.berkeley.cs.scads.perf.Histogram]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,edu.berkeley.cs.scads.perf.Histogram,Seq[edu.berkeley.cs.scads.perf.Histogram]]" class="delimiter">(</span><a href="#39671" title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.Histogram">times</span><span class="delimiter">)</span>.<span title="(op: (edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram) =&gt; edu.berkeley.cs.scads.perf.Histogram)edu.berkeley.cs.scads.perf.Histogram">reduceLeft</span><span class="delimiter">(</span><a href="#39696" title="edu.berkeley.cs.scads.perf.Histogram">_</a> <span title="(left: edu.berkeley.cs.scads.perf.Histogram)edu.berkeley.cs.scads.perf.Histogram">+</span> <a href="#39697" title="edu.berkeley.cs.scads.perf.Histogram">_</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Int" id="39651">skips</a> = <a href="#39649" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">results</a>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result],Int,Seq[Int]])Seq[Int]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,Int,Seq[Int]]" class="delimiter">(</span><a href="#39708" title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">_</a>.<span title="=&gt; Int">skips</span><span class="delimiter">)</span>.<span title="(implicit num: Numeric[Int])Int">sum</span>
          <span class="keyword">val</span> <a title="Int" id="39652">failures</a> = <a href="#39649" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">results</a>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result],Int,Seq[Int]])Seq[Int]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,Int,Seq[Int]]" class="delimiter">(</span><a href="#41631" title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">_</a>.<span title="=&gt; Int">failures</span><span class="delimiter">)</span>.<span title="(implicit num: Numeric[Int])Int">sum</span>
          <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.tpcw.TpcwLoaderTask" id="39653">loaderConfig</a> = <a href="#39649" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">results</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">head</span>.<span title="=&gt; edu.berkeley.cs.scads.piql.tpcw.TpcwLoaderTask">loaderConfig</span>
          <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.tpcw.scale.TpcwWorkflowTask" id="39654">clientConfig</a> = <a href="#39649" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">results</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">head</span>.<span title="=&gt; edu.berkeley.cs.scads.piql.tpcw.scale.TpcwWorkflowTask">clientConfig</span>
          <span title="(_1: Int, _2: Long, _3: Int, _4: Double, _5: Int, _6: String, _7: Int, _8: Int, _9: Int, _10: Int, _11: Int, _12: String)(Int, Long, Int, Double, Int, String, Int, Int, Int, Int, Int, String)" class="delimiter">(</span><a href="#39653" title="edu.berkeley.cs.scads.piql.tpcw.TpcwLoaderTask">loaderConfig</a>.<span title="=&gt; Int">numServers</span>, <a href="#39650" title="edu.berkeley.cs.scads.perf.Histogram">aggHist</a>.<span title="=&gt; Long">totalRequests</span>, <a href="#39650" title="edu.berkeley.cs.scads.perf.Histogram">aggHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>, <a href="#39650" title="edu.berkeley.cs.scads.perf.Histogram">aggHist</a>.<span title="=&gt; Double">stddev</span>, <a href="#39654" title="edu.berkeley.cs.scads.piql.tpcw.scale.TpcwWorkflowTask">clientConfig</a>.<span title="=&gt; Int">numClients</span>, <a href="#39654" title="edu.berkeley.cs.scads.piql.tpcw.scale.TpcwWorkflowTask">clientConfig</a>.<span title="=&gt; String">executorClass</span>, <a href="#39648" title="Int">iter</a>, <a href="#39650" title="edu.berkeley.cs.scads.perf.Histogram">aggHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.9)" class="double">0.90</span><span class="delimiter">)</span>, <a href="#39651" title="Int">skips</a>, <a href="#39652" title="Int">failures</a>, <a href="#39649" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">results</a>.<span title="=&gt; Int">size</span>, <a href="#39647" title="String">exp</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>.<span title="=&gt; Seq[(Int, Long, Int, Double, Int, String, Int, Int, Int, Int, Int, String)]">toSeq</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(dataPoints: Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result])Seq[(Int, Long, Int, Double, Int, String, Int, Int, Int, Int)]" id="38845">scaleResults</a><span class="delimiter">(</span><a title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]" id="42104">dataPoints</a>: <span title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">Seq</span><span class="delimiter">[</span>Result<span class="delimiter">]</span> = <a href="#38841" title="=&gt; edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">results</a>.<span title="(startKey: Option[org.apache.avro.generic.IndexedRecord], endKey: Option[org.apache.avro.generic.IndexedRecord])Iterator[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">iterateOverRange</span><span class="delimiter">(</span><span title="object None">None</span>, <span title="object None">None</span><span class="delimiter">)</span>.<span title="=&gt; Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">toSeq</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#42104" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">dataPoints</a>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#42108" title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.tpcw.TpcwLoaderTask">loaderConfig</span>.<span title="=&gt; Int">replicationFactor</span> <span title="(x: Int)Boolean">==</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#42119" title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.tpcw.scale.TpcwWorkflowTask">clientConfig</span>.<span title="=&gt; Int">iterations</span> <span title="(x: Int)Boolean">==</span> <span title="Int(4)" class="int">4</span><span class="delimiter">)</span>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#42130" title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.tpcw.scale.TpcwWorkflowTask">clientConfig</span>.<span title="=&gt; Int">numThreads</span> <span title="(x: Int)Boolean">==</span> <span title="Int(10)" class="int">10</span><span class="delimiter">)</span>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#42141" title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.tpcw.scale.TpcwWorkflowTask">clientConfig</span>.<span title="=&gt; Int">runLengthMin</span> <span title="(x: Int)Boolean">==</span> <span title="Int(5)" class="int">5</span><span class="delimiter">)</span>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result" id="42152">r</a> =&gt; <a href="#42152" title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">r</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.tpcw.TpcwLoaderTask">loaderConfig</span>.<span title="=&gt; Int">numServers</span> <span title="(x: Int)Int">/</span> <span title="Int(2)" class="int">2</span> <span title="(x: Int)Boolean">==</span> <a href="#42152" title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">r</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.tpcw.scale.TpcwWorkflowTask">clientConfig</span>.<span title="=&gt; Int">numClients</span><span class="delimiter">)</span>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#42169" title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">_</a>.<span title="=&gt; Int">iteration</span> <span title="(x: Int)Boolean">!=</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<span title="=&gt; Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">toSeq</span>
        .<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result =&gt; Int)scala.collection.immutable.Map[Int,Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]]">groupBy</span><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result" id="42184">r</a> =&gt; <a href="#42184" title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">r</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.tpcw.TpcwLoaderTask">loaderConfig</span>.<span title="=&gt; Int">numServers</span><span class="delimiter">)</span>
        .<span title="(f: (Int, Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]) =&gt; (Int, Long, Int, Double, Int, String, Int, Int, Int, Int))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[Int,Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]],(Int, Long, Int, Double, Int, String, Int, Int, Int, Int),scala.collection.immutable.Iterable[(Int, Long, Int, Double, Int, String, Int, Int, Int, Int)]])scala.collection.immutable.Iterable[(Int, Long, Int, Double, Int, String, Int, Int, Int, Int)]">map</span> <a href="#42222" title="(Int, Long, Int, Double, Int, String, Int, Int, Int, Int)" class="delimiter">{</a>
        <span class="keyword">case</span> <span title="(Int, Long, Int, Double, Int, String, Int, Int, Int, Int)" class="delimiter">(</span><a title="Int" id="42225">numServers</a>, <a title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]" id="42226">results</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="42227">aggHist</a> = <a href="#42226" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">results</a>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result =&gt; edu.berkeley.cs.scads.perf.Histogram)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result],edu.berkeley.cs.scads.perf.Histogram,Seq[edu.berkeley.cs.scads.perf.Histogram]])Seq[edu.berkeley.cs.scads.perf.Histogram]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,edu.berkeley.cs.scads.perf.Histogram,Seq[edu.berkeley.cs.scads.perf.Histogram]]" class="delimiter">(</span><a href="#42248" title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.Histogram">times</span><span class="delimiter">)</span>.<span title="(op: (edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram) =&gt; edu.berkeley.cs.scads.perf.Histogram)edu.berkeley.cs.scads.perf.Histogram">reduceLeft</span><span class="delimiter">(</span><a href="#42273" title="edu.berkeley.cs.scads.perf.Histogram">_</a> <span title="(left: edu.berkeley.cs.scads.perf.Histogram)edu.berkeley.cs.scads.perf.Histogram">+</span> <a href="#42274" title="edu.berkeley.cs.scads.perf.Histogram">_</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Int" id="42228">skips</a> = <a href="#42226" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">results</a>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result],Int,Seq[Int]])Seq[Int]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,Int,Seq[Int]]" class="delimiter">(</span><a href="#42285" title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">_</a>.<span title="=&gt; Int">skips</span><span class="delimiter">)</span>.<span title="(implicit num: Numeric[Int])Int">sum</span>
          <span class="keyword">val</span> <a title="Int" id="42229">failures</a> = <a href="#42226" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">results</a>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result],Int,Seq[Int]])Seq[Int]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,Int,Seq[Int]]" class="delimiter">(</span><a href="#42327" title="edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">_</a>.<span title="=&gt; Int">failures</span><span class="delimiter">)</span>.<span title="(implicit num: Numeric[Int])Int">sum</span>
          <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.tpcw.TpcwLoaderTask" id="42230">loaderConfig</a> = <a href="#42226" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">results</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">head</span>.<span title="=&gt; edu.berkeley.cs.scads.piql.tpcw.TpcwLoaderTask">loaderConfig</span>
          <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.tpcw.scale.TpcwWorkflowTask" id="42231">clientConfig</a> = <a href="#42226" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">results</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result">head</span>.<span title="=&gt; edu.berkeley.cs.scads.piql.tpcw.scale.TpcwWorkflowTask">clientConfig</span>
          <span title="(_1: Int, _2: Long, _3: Int, _4: Double, _5: Int, _6: String, _7: Int, _8: Int, _9: Int, _10: Int)(Int, Long, Int, Double, Int, String, Int, Int, Int, Int)" class="delimiter">(</span><a href="#42230" title="edu.berkeley.cs.scads.piql.tpcw.TpcwLoaderTask">loaderConfig</a>.<span title="=&gt; Int">numServers</span>, <a href="#42227" title="edu.berkeley.cs.scads.perf.Histogram">aggHist</a>.<span title="=&gt; Long">totalRequests</span>, <a href="#42227" title="edu.berkeley.cs.scads.perf.Histogram">aggHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>, <a href="#42227" title="edu.berkeley.cs.scads.perf.Histogram">aggHist</a>.<span title="=&gt; Double">stddev</span>, <a href="#42231" title="edu.berkeley.cs.scads.piql.tpcw.scale.TpcwWorkflowTask">clientConfig</a>.<span title="=&gt; Int">numClients</span>, <a href="#42231" title="edu.berkeley.cs.scads.piql.tpcw.scale.TpcwWorkflowTask">clientConfig</a>.<span title="=&gt; String">executorClass</span>, <a href="#42227" title="edu.berkeley.cs.scads.perf.Histogram">aggHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.9)" class="double">0.90</span><span class="delimiter">)</span>, <a href="#42228" title="Int">skips</a>, <a href="#42229" title="Int">failures</a>, <a href="#42226" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.TpcwScaleExperiment.Result]">results</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>.<span title="=&gt; Seq[(Int, Long, Int, Double, Int, String, Int, Int, Int, Int)]">toSeq</span>
    <span class="delimiter">}</span>


    <span class="keyword">def</span> <a title="=&gt; edu.berkeley.cs.scads.storage.ScadsCluster" id="38846">test</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.ScadsCluster" id="42694">cluster</a> = <span title="(numServers: Int, numLoaders: Int, numEBs: Double, numItems: Int, replicationFactor: Int)edu.berkeley.cs.scads.piql.tpcw.TpcwLoaderTask">TpcwLoaderTask</span><span class="delimiter">(</span><span title="Int(2)" class="int">2</span>,<span title="Int(2)" class="int">2</span>,<span title="Double(10.0)" class="int">10</span>, <span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>.<span title="()edu.berkeley.cs.scads.storage.ScadsCluster">newTestCluster</span>

      <span title="(numClients: Int, executorClass: String, numThreads: Int, iterations: Int, runLengthMin: Int)edu.berkeley.cs.scads.piql.tpcw.scale.TpcwWorkflowTask">TpcwWorkflowTask</span><span class="delimiter">(</span>
        numClients=<span title="Int(1)" class="int">1</span>,
        executorClass=<span title="java.lang.String(&quot;edu.berkeley.cs.scads.piql.ParallelExecutor&quot;)" class="string">&quot;edu.berkeley.cs.scads.piql.ParallelExecutor&quot;</span>
      <span class="delimiter">)</span>.<span title="(cluster: edu.berkeley.cs.scads.storage.ScadsCluster)scala.collection.immutable.IndexedSeq[java.lang.Thread]">testLocally</span><span class="delimiter">(</span><a href="#42694" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a><span class="delimiter">)</span>

      <a href="#42694" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(numServers: Int, executor: String)Unit" id="38847">runScaleTest</a><span class="delimiter">(</span><a title="Int" id="42715">numServers</a>: <span title="Int">Int</span>, <a title="String" id="42716">executor</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a href="#42720" title="(Seq[deploylib.mesos.JvmTask], edu.berkeley.cs.scads.storage.ScadsCluster)" class="delimiter">(</a><a href="#42719" title="Seq[deploylib.mesos.JvmTask]" id="42720">scadsTasks</a>, <a href="#42719" title="edu.berkeley.cs.scads.storage.ScadsCluster" id="42721">cluster</a><span class="delimiter">)</span> = <span title="(numServers: Int, numLoaders: Int, numEBs: Double, numItems: Int, replicationFactor: Int)edu.berkeley.cs.scads.piql.tpcw.TpcwLoaderTask">TpcwLoaderTask</span><span class="delimiter">(</span><a href="#42715" title="Int" id="42745">numServers</a>, <a href="#42715" title="Int">numServers</a><a title="Int" id="42746">/</a><span title="Int(2)" class="int">2</span>, replicationFactor=<a title="Int(2)" id="42747" class="int">2</a>, numEBs = <span title="Int(150)" class="int">150</span> <span title="(x: Int)Int">*</span> <a href="#42715" title="Int">numServers</a><a title="Double" id="42748">/</a><span title="Int(2)" class="int">2</span>, numItems = <a title="Int(10000)" id="42749" class="int">10000</a><span class="delimiter">)</span>.<a href="#14688" title="(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)(Seq[deploylib.mesos.JvmTask], edu.berkeley.cs.scads.storage.ScadsCluster)">delayedCluster</a>

      <span class="keyword">val</span> <a title="Seq[deploylib.mesos.JvmTask]" id="42722">tpcwTasks</a> = <a title="Int" id="42784">TpcwWorkflowTask</a><span class="delimiter">(</span>
        <a href="#42715" title="Int">numServers</a><a title="Int" id="42780">/</a><span title="Int(2)" class="int">2</span>,
        <a href="#42716" title="String" id="42781">executor</a>,
        iterations = <a title="Int(4)" id="42782" class="int">4</a>,
        runLengthMin = <a title="Int(5)" id="42783" class="int">5</a>
      <span class="delimiter">)</span>.<span title="(cluster: edu.berkeley.cs.scads.storage.ScadsCluster, resultCluster: edu.berkeley.cs.scads.storage.ScadsCluster)(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)Seq[deploylib.mesos.JvmTask]">delayedSchedule</span><a href="#14688" title="=&gt; Seq[deploylib.mesos.S3CachedJar]" class="delimiter">(</a><a href="#42721" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>, <a href="#14686" title="=&gt; edu.berkeley.cs.scads.storage.ScadsCluster">resultsCluster</a><span class="delimiter">)</span>

      <a href="#14689" title="=&gt; deploylib.mesos.RemoteServiceScheduler">serviceScheduler</a>.<span title="(processes: Seq[deploylib.mesos.JvmTask])Unit">scheduleExperiment</span><span class="delimiter">(</span><a href="#42720" title="Seq[deploylib.mesos.JvmTask]">scadsTasks</a> <span title="(that: scala.collection.GenTraversableOnce[deploylib.mesos.JvmTask])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[deploylib.mesos.JvmTask],deploylib.mesos.JvmTask,Seq[deploylib.mesos.JvmTask]])Seq[deploylib.mesos.JvmTask]">++</span> <a href="#42722" title="Seq[deploylib.mesos.JvmTask]">tpcwTasks</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">object</span> <a title="object edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment" id="14715">ScadrScaleExperiment</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="keyword">import</span> perf.scadr._
    <span class="keyword">import</span> scale._
    <span class="keyword">type</span> <a title="edu.berkeley.cs.scads.perf.scadr.scale.Result" id="42844">Result</a> = perf.scadr.scale.<span title="edu.berkeley.cs.scads.perf.scadr.scale.Result">Result</span>

    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]" id="42845">results</a> = <a href="#14686" title="=&gt; edu.berkeley.cs.scads.storage.ScadsCluster">resultsCluster</a>.<span title="[PairType &lt;: edu.berkeley.cs.avro.marker.AvroPair](ns: String)(implicit evidence$7: Manifest[PairType])edu.berkeley.cs.scads.storage.PairNamespace[PairType]">getNamespace</span><span title="(ns: String)(implicit evidence$7: Manifest[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result])edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]" class="delimiter">[</span><span title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">Result</span><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]" class="delimiter">(</span><span title="java.lang.String(&quot;scadrScaleResults&quot;)" class="string">&quot;scadrScaleResults&quot;</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="=&gt; Unit" id="42847">backup</a>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="org.apache.avro.file.DataFileWriter[edu.berkeley.cs.scads.perf.scadr.scale.Result]" id="42982">outfile</a> = <span title="[RecordType &lt;: org.apache.avro.generic.GenericContainer](file: java.io.File, codec: Option[org.apache.avro.file.CodecFactory])(implicit schema: edu.berkeley.cs.avro.runtime.package.TypedSchema[RecordType])org.apache.avro.file.DataFileWriter[RecordType]">AvroOutFile</span><span title="(file: java.io.File, codec: Option[org.apache.avro.file.CodecFactory])(implicit schema: edu.berkeley.cs.avro.runtime.package.TypedSchema[edu.berkeley.cs.scads.perf.scadr.scale.Result])org.apache.avro.file.DataFileWriter[edu.berkeley.cs.scads.perf.scadr.scale.Result]" class="delimiter">[</span>perf.scadr.scale.<span title="edu.berkeley.cs.scads.perf.scadr.scale.Result">Result</span><span class="delimiter">]</span><span title="(implicit r: Manifest[edu.berkeley.cs.scads.perf.scadr.scale.Result])edu.berkeley.cs.avro.runtime.package.TypedSchema[edu.berkeley.cs.scads.perf.scadr.scale.Result]" class="delimiter">(</span><span title="java.lang.String(&quot;scadrScale.&quot;)" class="string">&quot;scadrScale.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span> <span title="implicit deploylib.mesos.package.toFile : (str: String)java.io.File">+</span> <span title="java.lang.String(&quot;.avro&quot;)" class="string">&quot;.avro&quot;</span><span class="delimiter">)</span>
      <a href="#42845" title="=&gt; edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">results</a>.<span title="(startKey: Option[org.apache.avro.generic.IndexedRecord], endKey: Option[org.apache.avro.generic.IndexedRecord])Iterator[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">iterateOverRange</span><span class="delimiter">(</span><span title="object None">None</span>,<span title="object None">None</span><span class="delimiter">)</span>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#42982" title="org.apache.avro.file.DataFileWriter[edu.berkeley.cs.scads.perf.scadr.scale.Result]">outfile</a>.<a href="#43011" title="(x$1: edu.berkeley.cs.scads.perf.scadr.scale.Result)Unit">append</a><span class="delimiter">)</span>
      <a href="#42982" title="org.apache.avro.file.DataFileWriter[edu.berkeley.cs.scads.perf.scadr.scale.Result]">outfile</a>.<span title="()Unit">close</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; edu.berkeley.cs.scads.perf.ScatterPlot" id="42848">dataSizeResults</a> =
      <a title="Option[String]" id="43445" class="keyword">new</a> <span title="object edu.berkeley.cs.scads.perf.ScatterPlot">ScatterPlot</span><span class="delimiter">(</span>
        <a href="#42845" title="=&gt; edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">results</a>.<span title="(start: Option[org.apache.avro.generic.IndexedRecord], end: Option[org.apache.avro.generic.IndexedRecord], limit: Option[Int], offset: Option[Int], ascending: Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">getRange</span><span class="delimiter">(</span><span title="object None">None</span>, <span title="object None">None</span><span class="delimiter">)</span>
          .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#43142" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; Int">iteration</span> <span title="(x: Int)Boolean">!=</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
          .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#43153" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">clientConfig</span>.<span title="=&gt; Int">threads</span> <span title="(x: Int)Boolean">==</span> <span title="Int(20)" class="int">20</span><span class="delimiter">)</span>
          .<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; (Int, String))scala.collection.immutable.Map[(Int, String),Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]]">groupBy</span><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result" id="43273">e</a> =&gt; <span title="(_1: Int, _2: String)(Int, String)" class="delimiter">(</span><a href="#43273" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">e</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask">loaderConfig</span>.<span title="=&gt; Int">usersPerServer</span>, <a href="#43273" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">e</a>.<span title="=&gt; String">clusterAddress</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Seq[((Int, String), Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result])]">toSeq</span>
          .<span title="(f: ((Int, String), Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]) =&gt; (Int, Int))(implicit bf: scala.collection.generic.CanBuildFrom[Seq[((Int, String), Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result])],(Int, Int),Seq[(Int, Int)]])Seq[(Int, Int)]">map</span> <a href="#43325" title="(Int, Int)" class="delimiter">{</a>
          <span class="keyword">case</span> <span title="(Int, Int)" class="delimiter">(</span><span class="delimiter">(</span><a title="Int" id="43330">users</a>,_<span class="delimiter">)</span>, <a title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]" id="43331">results</a><span class="delimiter">)</span> =&gt;
            <span title="(_1: Int, _2: Int)(Int, Int)" class="delimiter">(</span><a href="#43330" title="Int">users</a>, <a href="#43331" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">results</a>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; edu.berkeley.cs.scads.perf.Histogram)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result],edu.berkeley.cs.scads.perf.Histogram,Seq[edu.berkeley.cs.scads.perf.Histogram]])Seq[edu.berkeley.cs.scads.perf.Histogram]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,edu.berkeley.cs.scads.perf.Histogram,Seq[edu.berkeley.cs.scads.perf.Histogram]]" class="delimiter">(</span><a href="#43352" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.Histogram">times</span><span class="delimiter">)</span>
              .<span title="(op: (edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram) =&gt; edu.berkeley.cs.scads.perf.Histogram)edu.berkeley.cs.scads.perf.Histogram">reduceLeft</span><span class="delimiter">(</span><a href="#43377" title="edu.berkeley.cs.scads.perf.Histogram">_</a> <span title="(left: edu.berkeley.cs.scads.perf.Histogram)edu.berkeley.cs.scads.perf.Histogram">+</span> <a href="#43378" title="edu.berkeley.cs.scads.perf.Histogram">_</a><span class="delimiter">)</span>
              .<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.99)" class="double">.99</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>.<a title="Seq[(Int, Int)]" id="43439">toSeq</a>,
        title = <a title="Option[java.lang.String]" id="43440" class="string">&quot;Users/Server vs. Response Time&quot;</a>,
        xaxis = <a title="Option[java.lang.String]" id="43441" class="string">&quot;Users per server&quot;</a>,
        yaxis = <a title="Option[java.lang.String]" id="43442" class="string">&quot;99th Percentile Response Time&quot;</a>,
        xunit = <a title="Option[java.lang.String]" id="43443" class="string">&quot;users/server&quot;</a>,
        yunit = <a title="Option[java.lang.String]" id="43444" class="string">&quot;milliseconds&quot;</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="=&gt; edu.berkeley.cs.scads.perf.ScatterPlot" id="42849">threadCountResults</a> =
      <a title="Option[String]" id="43683" class="keyword">new</a> <span title="object edu.berkeley.cs.scads.perf.ScatterPlot">ScatterPlot</span><span class="delimiter">(</span><a href="#42845" title="=&gt; edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">results</a>.<span title="(startKey: Option[org.apache.avro.generic.IndexedRecord], endKey: Option[org.apache.avro.generic.IndexedRecord])Iterator[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">iterateOverRange</span><span class="delimiter">(</span><span title="object None">None</span>, <span title="object None">None</span><span class="delimiter">)</span>
			     .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Boolean)Iterator[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#43451" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; Int">iteration</span> <span title="(x: Int)Boolean">!=</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<span title="=&gt; Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">toSeq</span>
			     .<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Int)scala.collection.immutable.Map[Int,Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]]">groupBy</span><span class="delimiter">(</span><a href="#43466" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">clientConfig</span>.<span title="=&gt; Int">threads</span><span class="delimiter">)</span>
			     .<span title="(f: (Int, Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]) =&gt; (Int, Int))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[Int,Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]],(Int, Int),scala.collection.immutable.Map[Int,Int]])scala.collection.immutable.Map[Int,Int]">map</span> <a href="#43501" title="(Int, Int)" class="delimiter">{</a>
			       <span class="keyword">case</span> <span title="(Int, Int)" class="delimiter">(</span><a title="Int" id="43504">threads</a>, <a title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]" id="43505">results</a><span class="delimiter">)</span> =&gt; 
				 <span title="(_1: Int, _2: Int)(Int, Int)" class="delimiter">(</span><a href="#43504" title="Int">threads</a>, <a href="#43505" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">results</a>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; edu.berkeley.cs.scads.perf.Histogram)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result],edu.berkeley.cs.scads.perf.Histogram,Seq[edu.berkeley.cs.scads.perf.Histogram]])Seq[edu.berkeley.cs.scads.perf.Histogram]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,edu.berkeley.cs.scads.perf.Histogram,Seq[edu.berkeley.cs.scads.perf.Histogram]]" class="delimiter">(</span><a href="#43526" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.Histogram">times</span><span class="delimiter">)</span>
           .<span title="(op: (edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram) =&gt; edu.berkeley.cs.scads.perf.Histogram)edu.berkeley.cs.scads.perf.Histogram">reduceLeft</span><span class="delimiter">(</span><a href="#43551" title="edu.berkeley.cs.scads.perf.Histogram">_</a> <span title="(left: edu.berkeley.cs.scads.perf.Histogram)edu.berkeley.cs.scads.perf.Histogram">+</span> <a href="#43552" title="edu.berkeley.cs.scads.perf.Histogram">_</a><span class="delimiter">)</span>
           .<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.99)" class="double">.99</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>.<a title="Seq[(Int, Int)]" id="43677">toSeq</a>,
        title = <a title="Option[java.lang.String]" id="43678" class="string">&quot;ThreadCount vs. Responsetime&quot;</a>,
        xaxis = <a title="Option[java.lang.String]" id="43679" class="string">&quot;Number of threads per application server&quot;</a>,
        yaxis = <a title="Option[java.lang.String]" id="43680" class="string">&quot;99th Percentile ResponseTime&quot;</a>,
        xunit = <a title="Option[java.lang.String]" id="43681" class="string">&quot;threads&quot;</a>,
        yunit = <a title="Option[java.lang.String]" id="43682" class="string">&quot;milliseconds&quot;</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(sizes: Seq[Int])Seq[edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask]" id="42850">runDataSizes</a><span class="delimiter">(</span><a title="Seq[Int]" id="43687">sizes</a>: <span title="Seq[Int]">Seq</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">2</span> <span title="(end: Int)scala.collection.immutable.Range.Inclusive">to</span> <span title="Int(20)" class="int">20</span> <span title="(step: Int)scala.collection.immutable.Range">by</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>.<span title="(f: Int =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Int],Int,Seq[Int]])Seq[Int]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq.Coll,Int,scala.collection.immutable.IndexedSeq[Int]]" class="delimiter">(</span><a href="#43916" title="Int">_</a> <span title="(x: Int)Int">*</span> <span title="Int(10000)" class="int">10000</span><span class="delimiter">)</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#43687" title="Seq[Int]">sizes</a>.<span title="(f: Int =&gt; edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[Int],edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask,Seq[edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask]])Seq[edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask,Seq[edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask]]" class="delimiter">(</span><a title="Int" id="43704">numUsers</a> =&gt;
        <a title="Int" id="43725">ScadrScaleTask</a><span class="delimiter">(</span><a title="Int(10)" id="43719" class="int">10</a>,
          <a title="java.lang.String(&quot;edu.berkeley.cs.scads.piql.ParallelExecutor&quot;)" id="43720" class="string">&quot;edu.berkeley.cs.scads.piql.ParallelExecutor&quot;</a>,
          <a title="Double(0.01)" id="43721" class="double">0.01</a>,
          iterations = <a title="Int(2)" id="43722" class="int">2</a>,
          runLengthMin = <a title="Int(2)" id="43723" class="int">2</a>,
          threads = <a title="Int(20)" id="43724" class="int">20</a><span class="delimiter">)</span>
          .<span title="(cluster: edu.berkeley.cs.scads.storage.ScadsCluster, resultCluster: edu.berkeley.cs.scads.storage.ScadsCluster)(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit scheduler: deploylib.mesos.ExperimentScheduler, implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">schedule</span><a href="#14688" title="=&gt; Seq[deploylib.mesos.S3CachedJar]" class="delimiter">(</a><a title="Int" id="43748">ScadrLoaderTask</a><span class="delimiter">(</span><a title="Int(10)" id="43743" class="int">10</a>, <a title="Int(10)" id="43744" class="int">10</a>, usersPerServer=<a href="#43704" title="Int" id="43745">numUsers</a>, replicationFactor=<a title="Int(1)" id="43746" class="int">1</a>, followingCardinality=<a title="Int(10)" id="43747" class="int">10</a><span class="delimiter">)</span>.<a href="#14688" title="(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit scheduler: deploylib.mesos.ExperimentScheduler, implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)edu.berkeley.cs.scads.storage.ScadsCluster">newCluster</a>,
          <a href="#14686" title="=&gt; edu.berkeley.cs.scads.storage.ScadsCluster">resultsCluster</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(numThreads: Seq[Int])Seq[edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask]" id="42851">runThreads</a><span class="delimiter">(</span><a title="Seq[Int]" id="44033">numThreads</a>: <span title="Seq[Int]">Seq</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">10</span> <span title="(end: Int)scala.collection.immutable.Range.Inclusive">to</span> <span title="Int(100)" class="int">100</span> <span title="(step: Int)scala.collection.immutable.Range">by</span> <span title="Int(10)" class="int">10</span><span class="delimiter">)</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#44033" title="Seq[Int]">numThreads</a>.<span title="(f: Int =&gt; edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[Int],edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask,Seq[edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask]])Seq[edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask,Seq[edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask]]" class="delimiter">(</span><a title="Int" id="44050">numThreads</a> =&gt;
        <a title="Int" id="44071">ScadrScaleTask</a><span class="delimiter">(</span><a title="Int(10)" id="44065" class="int">10</a>,
          <a title="java.lang.String(&quot;edu.berkeley.cs.scads.piql.ParallelExecutor&quot;)" id="44066" class="string">&quot;edu.berkeley.cs.scads.piql.ParallelExecutor&quot;</a>,
          <a title="Double(0.01)" id="44067" class="double">0.01</a>,
          iterations = <a title="Int(2)" id="44068" class="int">2</a>,
          runLengthMin = <a title="Int(2)" id="44069" class="int">2</a>,
          threads = <a href="#44050" title="Int" id="44070">numThreads</a><span class="delimiter">)</span>
          .<span title="(cluster: edu.berkeley.cs.scads.storage.ScadsCluster, resultCluster: edu.berkeley.cs.scads.storage.ScadsCluster)(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit scheduler: deploylib.mesos.ExperimentScheduler, implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">schedule</span><a href="#14688" title="=&gt; Seq[deploylib.mesos.S3CachedJar]" class="delimiter">(</a><a title="Int" id="44089">ScadrLoaderTask</a><span class="delimiter">(</span><a title="Int(10)" id="44084" class="int">10</a>, <a title="Int(10)" id="44085" class="int">10</a>, replicationFactor=<a title="Int(2)" id="44086" class="int">2</a>, followingCardinality=<a title="Int(10)" id="44087" class="int">10</a><span class="delimiter">)</span>.<a href="#14688" title="(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit scheduler: deploylib.mesos.ExperimentScheduler, implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)edu.berkeley.cs.scads.storage.ScadsCluster">newCluster</a>,
          <a href="#14686" title="=&gt; edu.berkeley.cs.scads.storage.ScadsCluster">resultsCluster</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(dataPoints: Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result])Seq[(Int, Long, Int, Int, String, Int, Int, Int, Int)]" id="42852">scaleResultsIter</a><span class="delimiter">(</span><a title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]" id="44192">dataPoints</a>: <span title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">Seq</span><span class="delimiter">[</span>Result<span class="delimiter">]</span> = <a href="#42845" title="=&gt; edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">results</a>.<span title="(startKey: Option[org.apache.avro.generic.IndexedRecord], endKey: Option[org.apache.avro.generic.IndexedRecord])Iterator[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">iterateOverRange</span><span class="delimiter">(</span><span title="object None">None</span>, <span title="object None">None</span><span class="delimiter">)</span>.<span title="=&gt; Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">toSeq</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#44192" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">dataPoints</a>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#44196" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask">loaderConfig</span>.<span title="=&gt; Int">replicationFactor</span> <span title="(x: Int)Boolean">==</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#44207" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask">loaderConfig</span>.<span title="=&gt; Int">usersPerServer</span> <span title="(x: Int)Boolean">==</span> <span title="Int(60000)" class="int">60000</span><span class="delimiter">)</span>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#44218" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">clientConfig</span>.<span title="=&gt; Int">iterations</span> <span title="(x: Int)Boolean">==</span> <span title="Int(4)" class="int">4</span><span class="delimiter">)</span>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#44229" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">clientConfig</span>.<span title="=&gt; Int">threads</span> <span title="(x: Int)Boolean">==</span> <span title="Int(10)" class="int">10</span><span class="delimiter">)</span>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#44240" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">clientConfig</span>.<span title="=&gt; Int">runLengthMin</span> <span title="(x: Int)Boolean">==</span> <span title="Int(5)" class="int">5</span><span class="delimiter">)</span>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#44251" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; Int">iteration</span> <span title="(x: Int)Boolean">!=</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<span title="=&gt; Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">toSeq</span>
        .<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; (String, Int))scala.collection.immutable.Map[(String, Int),Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]]">groupBy</span><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result" id="44268">r</a> =&gt; <span title="(_1: String, _2: Int)(String, Int)" class="delimiter">(</span><a href="#44268" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">r</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">clientConfig</span>.<span title="=&gt; String">clusterAddress</span>, <a href="#44268" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">r</a>.<span title="=&gt; Int">iteration</span><span class="delimiter">)</span><span class="delimiter">)</span>
        .<span title="(f: ((String, Int), Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]) =&gt; (Int, Long, Int, Int, String, Int, Int, Int, Int))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[(String, Int),Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]],(Int, Long, Int, Int, String, Int, Int, Int, Int),scala.collection.immutable.Iterable[(Int, Long, Int, Int, String, Int, Int, Int, Int)]])scala.collection.immutable.Iterable[(Int, Long, Int, Int, String, Int, Int, Int, Int)]">map</span> <a href="#44310" title="(Int, Long, Int, Int, String, Int, Int, Int, Int)" class="delimiter">{</a>
        <span class="keyword">case</span> <span title="(Int, Long, Int, Int, String, Int, Int, Int, Int)" class="delimiter">(</span><span class="delimiter">(</span><a title="String" id="44315">exp</a>, <a title="Int" id="44316">iter</a><span class="delimiter">)</span>, <a title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]" id="44317">results</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="44318">aggHist</a> = <a href="#44317" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">results</a>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; edu.berkeley.cs.scads.perf.Histogram)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result],edu.berkeley.cs.scads.perf.Histogram,Seq[edu.berkeley.cs.scads.perf.Histogram]])Seq[edu.berkeley.cs.scads.perf.Histogram]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,edu.berkeley.cs.scads.perf.Histogram,Seq[edu.berkeley.cs.scads.perf.Histogram]]" class="delimiter">(</span><a href="#44338" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.Histogram">times</span><span class="delimiter">)</span>.<span title="(op: (edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram) =&gt; edu.berkeley.cs.scads.perf.Histogram)edu.berkeley.cs.scads.perf.Histogram">reduceLeft</span><span class="delimiter">(</span><a href="#44363" title="edu.berkeley.cs.scads.perf.Histogram">_</a> <span title="(left: edu.berkeley.cs.scads.perf.Histogram)edu.berkeley.cs.scads.perf.Histogram">+</span> <a href="#44364" title="edu.berkeley.cs.scads.perf.Histogram">_</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Int" id="44319">skips</a> = <a href="#44317" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">results</a>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result],Int,Seq[Int]])Seq[Int]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,Int,Seq[Int]]" class="delimiter">(</span><a href="#44375" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; Int">skips</span><span class="delimiter">)</span>.<span title="(implicit num: Numeric[Int])Int">sum</span>
          <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask" id="44320">loaderConfig</a> = <a href="#44317" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">results</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">head</span>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask">loaderConfig</span>
          <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask" id="44321">clientConfig</a> = <a href="#44317" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">results</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">head</span>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">clientConfig</span>
          <span title="(_1: Int, _2: Long, _3: Int, _4: Int, _5: String, _6: Int, _7: Int, _8: Int, _9: Int)(Int, Long, Int, Int, String, Int, Int, Int, Int)" class="delimiter">(</span><a href="#44320" title="edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask">loaderConfig</a>.<span title="=&gt; Int">numServers</span>, <a href="#44318" title="edu.berkeley.cs.scads.perf.Histogram">aggHist</a>.<span title="=&gt; Long">totalRequests</span>, <a href="#44318" title="edu.berkeley.cs.scads.perf.Histogram">aggHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>, <a href="#44321" title="edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">clientConfig</a>.<span title="=&gt; Int">numClients</span>, <a href="#44321" title="edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">clientConfig</a>.<span title="=&gt; String">executorClass</span>, <a href="#44316" title="Int">iter</a>, <a href="#44318" title="edu.berkeley.cs.scads.perf.Histogram">aggHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.9)" class="double">0.90</span><span class="delimiter">)</span>, <a href="#44319" title="Int">skips</a>, <a href="#44317" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">results</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>.<span title="=&gt; Seq[(Int, Long, Int, Int, String, Int, Int, Int, Int)]">toSeq</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(dataPoints: Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result])Seq[(Int, Long, Int, Double, Int, String, Int, Int, Int)]" id="42853">scaleResults</a><span class="delimiter">(</span><a title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]" id="44521">dataPoints</a>: <span title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">Seq</span><span class="delimiter">[</span>Result<span class="delimiter">]</span> = <a href="#42845" title="=&gt; edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">results</a>.<span title="(startKey: Option[org.apache.avro.generic.IndexedRecord], endKey: Option[org.apache.avro.generic.IndexedRecord])Iterator[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">iterateOverRange</span><span class="delimiter">(</span><span title="object None">None</span>, <span title="object None">None</span><span class="delimiter">)</span>.<span title="=&gt; Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">toSeq</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#44521" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">dataPoints</a>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#44525" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask">loaderConfig</span>.<span title="=&gt; Int">replicationFactor</span> <span title="(x: Int)Boolean">==</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#44536" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask">loaderConfig</span>.<span title="=&gt; Int">usersPerServer</span> <span title="(x: Int)Boolean">==</span> <span title="Int(60000)" class="int">60000</span><span class="delimiter">)</span>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#44547" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">clientConfig</span>.<span title="=&gt; Int">iterations</span> <span title="(x: Int)Boolean">==</span> <span title="Int(4)" class="int">4</span><span class="delimiter">)</span>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#44558" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">clientConfig</span>.<span title="=&gt; Int">threads</span> <span title="(x: Int)Boolean">==</span> <span title="Int(10)" class="int">10</span><span class="delimiter">)</span>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#44569" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">clientConfig</span>.<span title="=&gt; Int">runLengthMin</span> <span title="(x: Int)Boolean">==</span> <span title="Int(5)" class="int">5</span><span class="delimiter">)</span>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Boolean)Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#44580" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; Int">iteration</span> <span title="(x: Int)Boolean">!=</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<span title="=&gt; Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">toSeq</span>
        .<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Int)scala.collection.immutable.Map[Int,Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]]">groupBy</span><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result" id="44595">r</a> =&gt; <a href="#44595" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">r</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask">loaderConfig</span>.<span title="=&gt; Int">numServers</span><span class="delimiter">)</span>
        .<span title="(f: (Int, Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]) =&gt; (Int, Long, Int, Double, Int, String, Int, Int, Int))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[Int,Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]],(Int, Long, Int, Double, Int, String, Int, Int, Int),scala.collection.immutable.Iterable[(Int, Long, Int, Double, Int, String, Int, Int, Int)]])scala.collection.immutable.Iterable[(Int, Long, Int, Double, Int, String, Int, Int, Int)]">map</span> <a href="#44617" title="(Int, Long, Int, Double, Int, String, Int, Int, Int)" class="delimiter">{</a>
        <span class="keyword">case</span> <span title="(Int, Long, Int, Double, Int, String, Int, Int, Int)" class="delimiter">(</span><a title="Int" id="44620">numServers</a>, <a title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]" id="44621">results</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="44622">aggHist</a> = <a href="#44621" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">results</a>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; edu.berkeley.cs.scads.perf.Histogram)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result],edu.berkeley.cs.scads.perf.Histogram,Seq[edu.berkeley.cs.scads.perf.Histogram]])Seq[edu.berkeley.cs.scads.perf.Histogram]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,edu.berkeley.cs.scads.perf.Histogram,Seq[edu.berkeley.cs.scads.perf.Histogram]]" class="delimiter">(</span><a href="#44642" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.Histogram">times</span><span class="delimiter">)</span>.<span title="(op: (edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram) =&gt; edu.berkeley.cs.scads.perf.Histogram)edu.berkeley.cs.scads.perf.Histogram">reduceLeft</span><span class="delimiter">(</span><a href="#44667" title="edu.berkeley.cs.scads.perf.Histogram">_</a> <span title="(left: edu.berkeley.cs.scads.perf.Histogram)edu.berkeley.cs.scads.perf.Histogram">+</span> <a href="#44668" title="edu.berkeley.cs.scads.perf.Histogram">_</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Int" id="44623">skips</a> = <a href="#44621" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">results</a>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result],Int,Seq[Int]])Seq[Int]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,Int,Seq[Int]]" class="delimiter">(</span><a href="#44679" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; Int">skips</span><span class="delimiter">)</span>.<span title="(implicit num: Numeric[Int])Int">sum</span>
          <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask" id="44624">loaderConfig</a> = <a href="#44621" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">results</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">head</span>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask">loaderConfig</span>
          <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask" id="44625">clientConfig</a> = <a href="#44621" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">results</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">head</span>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">clientConfig</span>

          <span title="(_1: Int, _2: Long, _3: Int, _4: Double, _5: Int, _6: String, _7: Int, _8: Int, _9: Int)(Int, Long, Int, Double, Int, String, Int, Int, Int)" class="delimiter">(</span><a href="#44624" title="edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask">loaderConfig</a>.<span title="=&gt; Int">numServers</span>, <a href="#44622" title="edu.berkeley.cs.scads.perf.Histogram">aggHist</a>.<span title="=&gt; Long">totalRequests</span>, <a href="#44622" title="edu.berkeley.cs.scads.perf.Histogram">aggHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>, <a href="#44622" title="edu.berkeley.cs.scads.perf.Histogram">aggHist</a>.<span title="=&gt; Double">stddev</span>, <a href="#44625" title="edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">clientConfig</a>.<span title="=&gt; Int">numClients</span>, <a href="#44625" title="edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">clientConfig</a>.<span title="=&gt; String">executorClass</span>, <a href="#44622" title="edu.berkeley.cs.scads.perf.Histogram">aggHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.9)" class="double">0.90</span><span class="delimiter">)</span>, <a href="#44623" title="Int">skips</a>, <a href="#44621" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">results</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>.<span title="=&gt; Seq[(Int, Long, Int, Double, Int, String, Int, Int, Int)]">toSeq</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(numServers: Int, executor: String)Unit" id="42854">runScaleTest</a><span class="delimiter">(</span><a title="Int" id="44788">numServers</a>: <span title="Int">Int</span>, <a title="String" id="44789">executor</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a href="#44793" title="(Seq[deploylib.mesos.JvmTask], edu.berkeley.cs.scads.storage.ScadsCluster)" class="delimiter">(</a><a href="#44792" title="Seq[deploylib.mesos.JvmTask]" id="44793">engineTasks</a>, <a href="#44792" title="edu.berkeley.cs.scads.storage.ScadsCluster" id="44794">cluster</a><span class="delimiter">)</span> = <a title="Int" id="44817">ScadrLoaderTask</a><span class="delimiter">(</span><a href="#44788" title="Int" id="44812">numServers</a>, <a href="#44788" title="Int">numServers</a><a title="Int" id="44813">/</a><span title="Int(2)" class="int">2</span>, replicationFactor=<a title="Int(2)" id="44814" class="int">2</a>, followingCardinality=<a title="Int(50)" id="44815" class="int">50</a>, usersPerServer = <a title="Int(60000)" id="44816" class="int">60000</a><span class="delimiter">)</span>.<a href="#14688" title="(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)(Seq[deploylib.mesos.JvmTask], edu.berkeley.cs.scads.storage.ScadsCluster)">delayedCluster</a>

      <span class="keyword">val</span> <a title="Seq[deploylib.mesos.JvmTask]" id="44795">workloadTasks</a> = <a title="Int" id="44852">ScadrScaleTask</a><span class="delimiter">(</span>
        <a href="#44788" title="Int">numServers</a><a title="Int" id="44846">/</a><span title="Int(2)" class="int">2</span>,
        <a href="#44789" title="String" id="44847">executor</a>,
        <a title="Double(0.01)" id="44848" class="double">0.01</a>,
        iterations = <a title="Int(4)" id="44849" class="int">4</a>,
        runLengthMin = <a title="Int(5)" id="44850" class="int">5</a>,
        threads = <a title="Int(10)" id="44851" class="int">10</a>
      <span class="delimiter">)</span>.<span title="(cluster: edu.berkeley.cs.scads.storage.ScadsCluster, resultCluster: edu.berkeley.cs.scads.storage.ScadsCluster)(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)Seq[deploylib.mesos.JvmTask]">delayedSchedule</span><a href="#14688" title="=&gt; Seq[deploylib.mesos.S3CachedJar]" class="delimiter">(</a><a href="#44794" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>, <a href="#14686" title="=&gt; edu.berkeley.cs.scads.storage.ScadsCluster">resultsCluster</a><span class="delimiter">)</span>

      <a href="#14689" title="=&gt; deploylib.mesos.RemoteServiceScheduler">serviceScheduler</a>.<span title="(processes: Seq[deploylib.mesos.JvmTask])Unit">scheduleExperiment</span><span class="delimiter">(</span><a href="#44793" title="Seq[deploylib.mesos.JvmTask]">engineTasks</a> <span title="(that: scala.collection.GenTraversableOnce[deploylib.mesos.JvmTask])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[deploylib.mesos.JvmTask],deploylib.mesos.JvmTask,Seq[deploylib.mesos.JvmTask]])Seq[deploylib.mesos.JvmTask]">++</span> <a href="#44795" title="Seq[deploylib.mesos.JvmTask]">workloadTasks</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; edu.berkeley.cs.scads.piql.scadr.ScadrClient" id="42855">test</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.ScadsCluster" id="44893">cluster</a> = <a title="Int" id="44911">ScadrLoaderTask</a><span class="delimiter">(</span><a title="Int(10)" id="44906" class="int">10</a>, <a title="Int(10)" id="44907" class="int">10</a>, replicationFactor = <a title="Int(2)" id="44908" class="int">2</a>, followingCardinality = <a title="Int(10)" id="44909" class="int">10</a>, usersPerServer = <a title="Int(1000)" id="44910" class="int">1000</a><span class="delimiter">)</span>.<span title="()edu.berkeley.cs.scads.storage.ScadsCluster">newTestCluster</span>
      <a title="Int" id="44932">ScadrScaleTask</a><span class="delimiter">(</span>
        <a title="Int(5)" id="44926" class="int">5</a>,
        <a title="java.lang.String(&quot;edu.berkeley.cs.scads.piql.ParallelExecutor&quot;)" id="44927" class="string">&quot;edu.berkeley.cs.scads.piql.ParallelExecutor&quot;</a>,
        <a title="Double(0.01)" id="44928" class="double">0.01</a>,
        iterations = <a title="Int(1)" id="44929" class="int">1</a>,
        runLengthMin = <a title="Int(5)" id="44930" class="int">5</a>,
        threads=<a title="Int(10)" id="44931" class="int">10</a>
      <span class="delimiter">)</span>.<span title="(cluster: edu.berkeley.cs.scads.storage.ScadsCluster)scala.collection.immutable.IndexedSeq[java.lang.Thread]">testLocally</span><span class="delimiter">(</span><a href="#44893" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a><span class="delimiter">)</span>

      <span title="edu.berkeley.cs.scads.piql.scadr.ScadrClient" class="keyword">new</span> <span title="edu.berkeley.cs.scads.piql.scadr.ScadrClient">ScadrClient</span><span class="delimiter">(</span><a href="#44893" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>, <a href="#44933" title="edu.berkeley.cs.scads.piql.exec.ParallelExecutor with edu.berkeley.cs.scads.piql.debug.DebugExecutor" class="keyword">new</a> <a title="anonymous class $anon extends edu.berkeley.cs.scads.piql.exec.ParallelExecutor with edu.berkeley.cs.scads.piql.debug.DebugExecutor" id="44933">ParallelExecutor</a> <span class="keyword">with</span> <span title="edu.berkeley.cs.scads.piql.debug.DebugExecutor">DebugExecutor</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; Seq[(Int, Int, Int, Int, Int, Int, Double)]" id="42856">sweetSpotResults</a> = <span class="delimiter">{</span>
      <a href="#42845" title="=&gt; edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">results</a>.<span title="(startKey: Option[org.apache.avro.generic.IndexedRecord], endKey: Option[org.apache.avro.generic.IndexedRecord])Iterator[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">iterateOverRange</span><span class="delimiter">(</span><span title="object None">None</span>, <span title="object None">None</span><span class="delimiter">)</span>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Boolean)Iterator[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#44943" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask">loaderConfig</span>.<span title="=&gt; Int">numServers</span> <span title="(x: Int)Boolean">==</span> <span title="Int(10)" class="int">10</span><span class="delimiter">)</span>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Boolean)Iterator[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#44952" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask">loaderConfig</span>.<span title="=&gt; Int">usersPerServer</span> <span title="(x: Int)Boolean">==</span> <span title="Int(60000)" class="int">60000</span><span class="delimiter">)</span>
        .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Boolean)Iterator[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#44959" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">clientConfig</span>.<span title="=&gt; Int">iterations</span> <span title="(x: Int)Boolean">==</span> <span title="Int(3)" class="int">3</span><span class="delimiter">)</span>.<span title="=&gt; Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">toSeq</span>
        .<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; (String, Int))scala.collection.immutable.Map[(String, Int),Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]]">groupBy</span><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result" id="44974">r</a> =&gt; <span title="(_1: String, _2: Int)(String, Int)" class="delimiter">(</span><a href="#44974" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">r</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">clientConfig</span>.<span title="=&gt; String">experimentAddress</span>, <a href="#44974" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">r</a>.<span title="=&gt; Int">iteration</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Seq[((String, Int), Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result])]">toSeq</span>
        .<span title="(f: ((String, Int), Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]) =&gt; (Int, Int, Int, Int, Int, Int, Double))(implicit bf: scala.collection.generic.CanBuildFrom[Seq[((String, Int), Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result])],(Int, Int, Int, Int, Int, Int, Double),Seq[(Int, Int, Int, Int, Int, Int, Double)]])Seq[(Int, Int, Int, Int, Int, Int, Double)]">map</span> <a href="#45009" title="(Int, Int, Int, Int, Int, Int, Double)" class="delimiter">{</a>
        <span class="keyword">case</span> <span title="(Int, Int, Int, Int, Int, Int, Double)" class="delimiter">(</span><a title="(String, Int)" id="45012">resultId</a>, <a title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]" id="45013">perThreadData</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="45014">aggregateTimes</a> = <a href="#45013" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">perThreadData</a>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; edu.berkeley.cs.scads.perf.Histogram)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result],edu.berkeley.cs.scads.perf.Histogram,Seq[edu.berkeley.cs.scads.perf.Histogram]])Seq[edu.berkeley.cs.scads.perf.Histogram]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,edu.berkeley.cs.scads.perf.Histogram,Seq[edu.berkeley.cs.scads.perf.Histogram]]" class="delimiter">(</span><a href="#45033" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.Histogram">times</span><span class="delimiter">)</span>.<span title="(op: (edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram) =&gt; edu.berkeley.cs.scads.perf.Histogram)edu.berkeley.cs.scads.perf.Histogram">reduceLeft</span><span class="delimiter">(</span><a href="#45058" title="edu.berkeley.cs.scads.perf.Histogram">_</a> <span title="(left: edu.berkeley.cs.scads.perf.Histogram)edu.berkeley.cs.scads.perf.Histogram">+</span> <a href="#45059" title="edu.berkeley.cs.scads.perf.Histogram">_</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask" id="45015">clientConfig</a> = <a href="#45013" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">perThreadData</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">head</span>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">clientConfig</span>
          <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask" id="45016">loaderConfig</a> = <a href="#45013" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">perThreadData</a>.<span title="=&gt; edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">head</span>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask">loaderConfig</span>
          <span title="(_1: Int, _2: Int, _3: Int, _4: Int, _5: Int, _6: Int, _7: Double)(Int, Int, Int, Int, Int, Int, Double)" class="delimiter">(</span><a href="#45015" title="edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">clientConfig</a>.<span title="=&gt; Int">numClients</span>, <a href="#45015" title="edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">clientConfig</a>.<span title="=&gt; Int">threads</span>, <a href="#45016" title="edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask">loaderConfig</a>.<span title="=&gt; Int">replicationFactor</span>, <a href="#45014" title="edu.berkeley.cs.scads.perf.Histogram">aggregateTimes</a>.<span title="=&gt; Long">totalRequests</span>.<span title="=&gt; Int">toInt</span>, <a href="#45014" title="edu.berkeley.cs.scads.perf.Histogram">aggregateTimes</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.9)" class="double">0.90</span><span class="delimiter">)</span>, <a href="#45014" title="edu.berkeley.cs.scads.perf.Histogram">aggregateTimes</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>, <a href="#45014" title="edu.berkeley.cs.scads.perf.Histogram">aggregateTimes</a>.<span title="=&gt; Double">stddev</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; edu.berkeley.cs.scads.perf.ScatterPlot" id="42857">sweetSpotGraph</a> =
      <a title="Option[String]" id="45308" class="keyword">new</a> <span title="object edu.berkeley.cs.scads.perf.ScatterPlot">ScatterPlot</span><span class="delimiter">(</span>
        <a href="#42845" title="=&gt; edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">results</a>.<span title="(startKey: Option[org.apache.avro.generic.IndexedRecord], endKey: Option[org.apache.avro.generic.IndexedRecord])Iterator[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">iterateOverRange</span><span class="delimiter">(</span><span title="object None">None</span>, <span title="object None">None</span><span class="delimiter">)</span>
          .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Boolean)Iterator[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#45133" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask">loaderConfig</span>.<span title="=&gt; Int">numServers</span> <span title="(x: Int)Boolean">==</span> <span title="Int(10)" class="int">10</span><span class="delimiter">)</span>
          .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Boolean)Iterator[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#45142" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.ScadrLoaderTask">loaderConfig</span>.<span title="=&gt; Int">usersPerServer</span> <span title="(x: Int)Boolean">==</span> <span title="Int(60000)" class="int">60000</span><span class="delimiter">)</span>
          .<span title="(p: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; Boolean)Iterator[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">filter</span><span class="delimiter">(</span><a href="#45149" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">clientConfig</span>.<span title="=&gt; Int">iterations</span> <span title="(x: Int)Boolean">==</span> <span title="Int(3)" class="int">3</span><span class="delimiter">)</span>.<span title="=&gt; Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">toSeq</span>
          .<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; (String, Int))scala.collection.immutable.Map[(String, Int),Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]]">groupBy</span><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result" id="45164">r</a> =&gt; <span title="(_1: String, _2: Int)(String, Int)" class="delimiter">(</span><a href="#45164" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">r</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">clientConfig</span>.<span title="=&gt; String">experimentAddress</span>, <a href="#45164" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">r</a>.<span title="=&gt; Int">iteration</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Seq[((String, Int), Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result])]">toSeq</span>
          .<span title="(f: ((String, Int), Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]) =&gt; (Int, Int))(implicit bf: scala.collection.generic.CanBuildFrom[Seq[((String, Int), Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result])],(Int, Int),Seq[(Int, Int)]])Seq[(Int, Int)]">map</span> <a href="#45198" title="Seq[(Int, Int)]" id="45302" class="delimiter">{</a>
          <span class="keyword">case</span> <span title="(Int, Int)" class="delimiter">(</span><a title="(String, Int)" id="45201">resultId</a>, <a title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]" id="45202">perThreadData</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="45203">aggregateTimes</a> = <a href="#45202" title="Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result]">perThreadData</a>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result =&gt; edu.berkeley.cs.scads.perf.Histogram)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result],edu.berkeley.cs.scads.perf.Histogram,Seq[edu.berkeley.cs.scads.perf.Histogram]])Seq[edu.berkeley.cs.scads.perf.Histogram]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,edu.berkeley.cs.scads.perf.Histogram,Seq[edu.berkeley.cs.scads.perf.Histogram]]" class="delimiter">(</span><a href="#45220" title="edu.berkeley.cs.scads.piql.modeling.Experiments.ScadrScaleExperiment.Result">_</a>.<span title="=&gt; edu.berkeley.cs.scads.perf.Histogram">times</span><span class="delimiter">)</span>.<span title="(op: (edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram) =&gt; edu.berkeley.cs.scads.perf.Histogram)edu.berkeley.cs.scads.perf.Histogram">reduceLeft</span><span class="delimiter">(</span><a href="#45245" title="edu.berkeley.cs.scads.perf.Histogram">_</a> <span title="(left: edu.berkeley.cs.scads.perf.Histogram)edu.berkeley.cs.scads.perf.Histogram">+</span> <a href="#45246" title="edu.berkeley.cs.scads.perf.Histogram">_</a><span class="delimiter">)</span>
            <span title="(_1: Int, _2: Int)(Int, Int)" class="delimiter">(</span><a href="#45203" title="edu.berkeley.cs.scads.perf.Histogram">aggregateTimes</a>.<span title="=&gt; Long">totalRequests</span>.<span title="=&gt; Int">toInt</span>, <a href="#45203" title="edu.berkeley.cs.scads.perf.Histogram">aggregateTimes</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>,
        title = <a title="Option[java.lang.String]" id="45303" class="string">&quot;TotalReuqests vs. 99thth percentile responsetime&quot;</a>,
        xaxis = <a title="Option[java.lang.String]" id="45304" class="string">&quot;total Scadr Requests &quot;</a>,
        yaxis = <a title="Option[java.lang.String]" id="45305" class="string">&quot;99th Percentile ResponseTime&quot;</a>,
        xunit = <a title="Option[java.lang.String]" id="45306" class="string">&quot;requests&quot;</a>,
        yunit = <a title="Option[java.lang.String]" id="45307" class="string">&quot;milliseconds&quot;</a><span class="delimiter">)</span>


    <span class="keyword">def</span> <a title="=&gt; Unit" id="42858">findSweetSpot</a>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Int" id="45311">storageNodes</a> = <span title="Int(10)" class="int">10</span>
      <span class="keyword">val</span> <a title="Int" id="45312">usersPerServer</a> = <span title="Int(60000)" class="int">60000</span>

      <span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>, <span title="Int(5)" class="int">5</span>, <span title="Int(10)" class="int">10</span><span class="delimiter">)</span>.<span title="(f: Int =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a title="Int" id="45371">numClients</a> =&gt; <span class="delimiter">{</span>
        <span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><span title="Int(10)" class="int">10</span>, <span title="Int(20)" class="int">20</span>, <span title="Int(30)" class="int">30</span><span class="delimiter">)</span>.<span title="(f: Int =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a title="Int" id="45400">numThreads</a> =&gt; <span class="delimiter">{</span>
          <span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>, <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>.<span title="(f: Int =&gt; edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask)Unit">foreach</span><span class="delimiter">(</span><a title="Int" id="45429">replication</a> =&gt; <span class="delimiter">{</span>
            <a title="Int" id="45450">ScadrScaleTask</a><span class="delimiter">(</span>
              <a href="#45371" title="Int" id="45444">numClients</a>,
              <a title="java.lang.String(&quot;edu.berkeley.cs.scads.piql.ParallelExecutor&quot;)" id="45445" class="string">&quot;edu.berkeley.cs.scads.piql.ParallelExecutor&quot;</a>,
              <a title="Double(0.01)" id="45446" class="double">0.01</a>,
              iterations = <a title="Int(3)" id="45447" class="int">3</a>,
              runLengthMin = <a title="Int(3)" id="45448" class="int">3</a>,
              threads = <a href="#45400" title="Int" id="45449">numThreads</a><span class="delimiter">)</span>
              .<span title="(cluster: edu.berkeley.cs.scads.storage.ScadsCluster, resultCluster: edu.berkeley.cs.scads.storage.ScadsCluster)(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit scheduler: deploylib.mesos.ExperimentScheduler, implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)edu.berkeley.cs.scads.perf.scadr.scale.ScadrScaleTask">schedule</span><a href="#14688" title="=&gt; Seq[deploylib.mesos.S3CachedJar]" class="delimiter">(</a>
              <a title="Int" id="45468">ScadrLoaderTask</a><span class="delimiter">(</span>
                numServers = <a title="Int(10)" id="45463" class="int">10</a>,
                numLoaders = <a title="Int(10)" id="45464" class="int">10</a>,
                usersPerServer = <a href="#45312" title="Int" id="45465">usersPerServer</a>,
                replicationFactor = <a href="#45429" title="Int" id="45466">replication</a>,
                followingCardinality = <a title="Int(10)" id="45467" class="int">10</a><span class="delimiter">)</span>.<a href="#14688" title="(implicit classpath: Seq[deploylib.mesos.ClassSource], implicit scheduler: deploylib.mesos.ExperimentScheduler, implicit zookeeperRoot: edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode)edu.berkeley.cs.scads.storage.ScadsCluster">newCluster</a>,
              <a href="#14686" title="=&gt; edu.berkeley.cs.scads.storage.ScadsCluster">resultsCluster</a><span class="delimiter">)</span>
          <span class="delimiter">}</span><span class="delimiter">)</span>
        <span class="delimiter">}</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>