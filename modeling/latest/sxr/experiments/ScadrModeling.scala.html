<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>experiments/ScadrModeling.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> edu.berkeley.cs
<span class="keyword">package</span> scads
<span class="keyword">package</span> piql
<span class="keyword">package</span> modeling

<span class="keyword">import</span> comm._
<span class="keyword">import</span> storage._
<span class="keyword">import</span> perf._
<span class="keyword">import</span> deploylib.ec2._
<span class="keyword">import</span> deploylib.mesos._
<span class="keyword">import</span> piql.scadr._
<span class="keyword">import</span> perf.scadr._
<span class="keyword">import</span> avro.marker._
<span class="keyword">import</span> avro.runtime._
<span class="keyword">import</span> <a href="ExperimentUtil.scala.html#10183" title="object edu.berkeley.cs.scads.piql.modeling.ExperimentUtil">ExperimentUtil</a>._
<span class="keyword">import</span> scala.collection.mutable.ArrayBuffer

<span class="keyword">object</span> <a title="object edu.berkeley.cs.scads.piql.modeling.ScadrModeling" id="10236">ScadrModeling</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">object</span> <a title="object edu.berkeley.cs.scads.piql.modeling.ScadrModeling.ScadrData" id="68213">ScadrData</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="comment">/*
    val clusterAddress1 = &quot;zk://ec2-50-17-12-53.compute-1.amazonaws.com:2181,ec2-184-72-171-124.compute-1.amazonaws.com:2181,ec2-174-129-157-147.compute-1.amazonaws.com:2181/scads/experimentCluster0000000063&quot;
    val clusterAddress2 = &quot;zk://ec2-50-17-12-53.compute-1.amazonaws.com:2181,ec2-184-72-171-124.compute-1.amazonaws.com:2181,ec2-174-129-157-147.compute-1.amazonaws.com:2181/scads/experimentCluster0000000067&quot;
    val clusterAddress3 = &quot;zk://ec2-50-17-12-53.compute-1.amazonaws.com:2181,ec2-184-72-171-124.compute-1.amazonaws.com:2181,ec2-174-129-157-147.compute-1.amazonaws.com:2181/scads/experimentCluster0000000069&quot;

    def experimentResults1 = allResults.filter(_.clientConfig.clusterAddress == clusterAddress1)
    def experimentResults2 = allResults.filter(_.clientConfig.clusterAddress == clusterAddress2)
    def experimentResults3 = allResults.filter(_.clientConfig.clusterAddress == clusterAddress3)
    
    val numIntervals1 = 6
    def goodExperimentResults1 = experimentResults1.filter(r =&gt; r.iteration &gt; 1 &amp;&amp; r.iteration &lt;= numIntervals1)

    val numIntervals2 = 10
    def goodExperimentResults2 = experimentResults2.filter(r =&gt; r.iteration &gt; 1 &amp;&amp; r.iteration &lt;= numIntervals2).map(r =&gt; {
        r.iteration += numIntervals1 - 1
        r 
      })

    val numIntervals3 = 20
    def goodExperimentResults3 = experimentResults3.filter(r =&gt; r.iteration &gt; 1 &amp;&amp; r.iteration &lt;= numIntervals3).map(r =&gt; {
        r.iteration += numIntervals1 + numIntervals2 - 2
        r
      })
    
    // combine goodExperimentResults1-3
    val numIntervals = numIntervals1 + numIntervals2 + numIntervals3 - 2
    def goodExperimentResults = goodExperimentResults1.toSeq ++ goodExperimentResults2.toSeq ++ goodExperimentResults3.toSeq
    */</span>
    
    <span class="comment">// data from evening of 5.30.11</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="68225">clusterAddress1</a> = <span title="java.lang.String(&quot;zk://ec2-50-17-12-53.compute-1.amazonaws.com:2181,ec2-184-72-171-124.compute-1.amazonaws.com:2181,ec2-174-129-157-147.compute-1.amazonaws.com:2181/scads/experimentCluster0000000071&quot;)" class="string">&quot;zk://ec2-50-17-12-53.compute-1.amazonaws.com:2181,ec2-184-72-171-124.compute-1.amazonaws.com:2181,ec2-174-129-157-147.compute-1.amazonaws.com:2181/scads/experimentCluster0000000071&quot;</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="68227">clusterAddress2</a> = <span title="java.lang.String(&quot;zk://ec2-50-17-12-53.compute-1.amazonaws.com:2181,ec2-184-72-171-124.compute-1.amazonaws.com:2181,ec2-174-129-157-147.compute-1.amazonaws.com:2181/scads/experimentCluster0000000072&quot;)" class="string">&quot;zk://ec2-50-17-12-53.compute-1.amazonaws.com:2181,ec2-184-72-171-124.compute-1.amazonaws.com:2181,ec2-174-129-157-147.compute-1.amazonaws.com:2181/scads/experimentCluster0000000072&quot;</span>

    <span class="keyword">def</span> <a title="=&gt; Iterator[edu.berkeley.cs.scads.piql.modeling.Result]" id="68229">experimentResults1</a> = <a href="ExperimentUtil.scala.html#49981" title="=&gt; org.apache.avro.file.DataFileReader[edu.berkeley.cs.scads.piql.modeling.Result] with Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">allResults</a>.<span title="(p: edu.berkeley.cs.scads.piql.modeling.Result =&gt; Boolean)Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">filter</span><span class="delimiter">(</span><a href="#68264" title="edu.berkeley.cs.scads.piql.modeling.Result">_</a>.<a href="../collection/QueryRunnerTask.scala.html#37914" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">clientConfig</a>.<a href="../collection/QueryRunnerTask.scala.html#37999" title="=&gt; String">clusterAddress</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#68225" title="=&gt; java.lang.String">clusterAddress1</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; Iterator[edu.berkeley.cs.scads.piql.modeling.Result]" id="68230">experimentResults2</a> = <a href="ExperimentUtil.scala.html#49981" title="=&gt; org.apache.avro.file.DataFileReader[edu.berkeley.cs.scads.piql.modeling.Result] with Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">allResults</a>.<span title="(p: edu.berkeley.cs.scads.piql.modeling.Result =&gt; Boolean)Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">filter</span><span class="delimiter">(</span><a href="#68320" title="edu.berkeley.cs.scads.piql.modeling.Result">_</a>.<a href="../collection/QueryRunnerTask.scala.html#37914" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">clientConfig</a>.<a href="../collection/QueryRunnerTask.scala.html#37999" title="=&gt; String">clusterAddress</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#68227" title="=&gt; java.lang.String">clusterAddress2</a><span class="delimiter">)</span>
    
    <span class="keyword">val</span> <a title="Int" id="68231">numIntervals1</a> = <span title="Int(21)" class="int">21</span>
    <span class="keyword">def</span> <a title="=&gt; Iterator[edu.berkeley.cs.scads.piql.modeling.Result]" id="68233">goodExperimentResults1</a> = <a href="#68229" title="=&gt; Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">experimentResults1</a>.<span title="(p: edu.berkeley.cs.scads.piql.modeling.Result =&gt; Boolean)Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">filter</span><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.piql.modeling.Result" id="68273">r</a> =&gt; <a href="#68273" title="edu.berkeley.cs.scads.piql.modeling.Result">r</a>.<a href="../collection/QueryRunnerTask.scala.html#37911" title="=&gt; Int">iteration</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(1)" class="int">1</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#68273" title="edu.berkeley.cs.scads.piql.modeling.Result">r</a>.<a href="../collection/QueryRunnerTask.scala.html#37911" title="=&gt; Int">iteration</a> <span title="(x: Int)Boolean">&lt;=</span> <a href="#68231" title="=&gt; Int">numIntervals1</a><span class="delimiter">)</span>
    
    <span class="keyword">val</span> <a title="Int" id="68234">numIntervals2</a> = <span title="Int(16)" class="int">16</span>
    <span class="keyword">def</span> <a title="=&gt; Iterator[edu.berkeley.cs.scads.piql.modeling.Result]" id="68236">goodExperimentResults2</a> = <a href="#68230" title="=&gt; Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">experimentResults2</a>.<span title="(p: edu.berkeley.cs.scads.piql.modeling.Result =&gt; Boolean)Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">filter</span><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.piql.modeling.Result" id="68329">r</a> =&gt; <a href="#68329" title="edu.berkeley.cs.scads.piql.modeling.Result">r</a>.<a href="../collection/QueryRunnerTask.scala.html#37911" title="=&gt; Int">iteration</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(1)" class="int">1</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#68329" title="edu.berkeley.cs.scads.piql.modeling.Result">r</a>.<a href="../collection/QueryRunnerTask.scala.html#37911" title="=&gt; Int">iteration</a> <span title="(x: Int)Boolean">&lt;=</span> <a href="#68234" title="=&gt; Int">numIntervals2</a><span class="delimiter">)</span>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Result =&gt; edu.berkeley.cs.scads.piql.modeling.Result)Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">map</span><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.piql.modeling.Result" id="68342">r</a> =&gt; <span class="delimiter">{</span>
      <a href="#68342" title="edu.berkeley.cs.scads.piql.modeling.Result">r</a>.<a href="../collection/QueryRunnerTask.scala.html#37912" title="(x$1: Int)Unit">iteration</a> <span title="(x: Int)Int">+=</span> <a href="#68231" title="=&gt; Int">numIntervals1</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span>
      <a href="#68342" title="edu.berkeley.cs.scads.piql.modeling.Result">r</a>
    <span class="delimiter">}</span><span class="delimiter">)</span>
    
    <span class="keyword">val</span> <a title="Int" id="68237">numIntervals</a> = <a href="#68231" title="=&gt; Int">numIntervals1</a> <span title="(x: Int)Int">+</span> <a href="#68234" title="=&gt; Int">numIntervals2</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span>
    <span class="keyword">def</span> <a title="=&gt; Seq[edu.berkeley.cs.scads.piql.modeling.Result]" id="68239">goodExperimentResults</a> = <a href="#68233" title="=&gt; Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">goodExperimentResults1</a>.<span title="=&gt; Seq[edu.berkeley.cs.scads.piql.modeling.Result]">toSeq</span> <span title="(that: scala.collection.GenTraversableOnce[edu.berkeley.cs.scads.piql.modeling.Result])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[edu.berkeley.cs.scads.piql.modeling.Result],edu.berkeley.cs.scads.piql.modeling.Result,Seq[edu.berkeley.cs.scads.piql.modeling.Result]])Seq[edu.berkeley.cs.scads.piql.modeling.Result]">++</span> <a href="#68236" title="=&gt; Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">goodExperimentResults2</a>.<span title="=&gt; Seq[edu.berkeley.cs.scads.piql.modeling.Result]">toSeq</span>
    
    <span class="keyword">val</span> <a title="scala.collection.immutable.Map[edu.berkeley.cs.scads.piql.modeling.QueryDescription,edu.berkeley.cs.scads.perf.Histogram]" id="68240">histogramsScadr</a> = <a href="ExperimentUtil.scala.html#49994" title="(results: Seq[edu.berkeley.cs.scads.piql.modeling.Result])scala.collection.immutable.Map[edu.berkeley.cs.scads.piql.modeling.QueryDescription,edu.berkeley.cs.scads.perf.Histogram]">queryTypeHistogram</a><span class="delimiter">(</span><a href="#68239" title="=&gt; Seq[edu.berkeley.cs.scads.piql.modeling.Result]">goodExperimentResults</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.collection.immutable.Map[(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int),edu.berkeley.cs.scads.perf.Histogram]" id="68242">perIterationHistograms</a> = <a href="ExperimentUtil.scala.html#49997" title="(results: Seq[edu.berkeley.cs.scads.piql.modeling.Result])scala.collection.immutable.Map[(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int),edu.berkeley.cs.scads.perf.Histogram]">queryTypePerIterationHistograms</a><span class="delimiter">(</span><a href="#68239" title="=&gt; Seq[edu.berkeley.cs.scads.piql.modeling.Result]">goodExperimentResults</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/*
  object ModelFindSubscription {
    import ScadrData._
    
    val findSubscription = QueryDescription(&quot;findSubscription&quot;, List(), 1)
    val findSubscriptionHist = histogramsScadr(findSubscription)
    
    //scala&gt; res1.findSubscription.physicalPlan
    //res6: edu.berkeley.cs.scads.piql.QueryPlan = IndexLookup(&lt;Namespace: subscriptions&gt;,ArrayBuffer(ParameterValue(0), ParameterValue(1)))
    
    val indexLookupSubscriptions = QueryDescription(&quot;indexLookupSubscriptions&quot;, List(), 1)
  }
  */</span>
  
  <span class="keyword">object</span> <a title="object edu.berkeley.cs.scads.piql.modeling.ScadrModeling.ModelFindUser" id="68215">ModelFindUser</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#68213" title="object edu.berkeley.cs.scads.piql.modeling.ScadrModeling.ScadrData">ScadrData</a>._
    
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryDescription" id="68377">findUser</a> = <a href="../collection/QueryRunnerTask.scala.html#37838" title="(queryName: String, parameters: Seq[Int], resultCardinality: Int)edu.berkeley.cs.scads.piql.modeling.QueryDescription">QueryDescription</a><span class="delimiter">(</span><span title="java.lang.String(&quot;findUser&quot;)" class="string">&quot;findUser&quot;</span>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>, <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="68379">findUserHist</a> = <a href="#68240" title="(key: edu.berkeley.cs.scads.piql.modeling.QueryDescription)edu.berkeley.cs.scads.perf.Histogram">histogramsScadr</a><span class="delimiter">(</span><a href="#68377" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">findUser</a><span class="delimiter">)</span>
    
    <span class="comment">//scala&gt; res1.findUser.physicalPlan</span>
    <span class="comment">//res2: edu.berkeley.cs.scads.piql.QueryPlan = IndexLookup(&lt;Namespace: users&gt;,ArrayBuffer(ParameterValue(0)))</span>
    
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryDescription" id="68381">indexLookupUsers</a> = <a href="../collection/QueryRunnerTask.scala.html#37838" title="(queryName: String, parameters: Seq[Int], resultCardinality: Int)edu.berkeley.cs.scads.piql.modeling.QueryDescription">QueryDescription</a><span class="delimiter">(</span><span title="java.lang.String(&quot;indexLookupUsers&quot;)" class="string">&quot;indexLookupUsers&quot;</span>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>, <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="68383">indexLookupUsersHist</a> = <a href="#68240" title="(key: edu.berkeley.cs.scads.piql.modeling.QueryDescription)edu.berkeley.cs.scads.perf.Histogram">histogramsScadr</a><span class="delimiter">(</span><a href="#68381" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">indexLookupUsers</a><span class="delimiter">)</span>
    
    <span class="keyword">val</span> <a title="Int" id="68385">actual99th</a> = <a href="#68379" title="=&gt; edu.berkeley.cs.scads.perf.Histogram">findUserHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="68387">predicted99th</a> = <a href="#68383" title="=&gt; edu.berkeley.cs.scads.perf.Histogram">indexLookupUsersHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>
   
    <span class="keyword">def</span> <a title="(i: Int, desiredQuantile: Double)Int" id="68389">predictOneInterval</a><span class="delimiter">(</span><a title="Int" id="68442">i</a>: <span title="Int">Int</span>, <a title="Double" id="68443">desiredQuantile</a>: <span title="Double">Double</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="68445">indexLookupUsersHist</a> = <a href="#68242" title="(key: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int))edu.berkeley.cs.scads.perf.Histogram">perIterationHistograms</a><span class="delimiter">(</span><span title="(_1: edu.berkeley.cs.scads.piql.modeling.QueryDescription, _2: Int)(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int)" class="delimiter">(</span><a href="#68381" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">indexLookupUsers</a>, <a href="#68442" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#68445" title="edu.berkeley.cs.scads.perf.Histogram">indexLookupUsersHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><a href="#68443" title="Double">desiredQuantile</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(quantile: Double)(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" id="68390">getPerIntervalPrediction</a><span class="delimiter">(</span><a title="Double" id="68481">quantile</a>: <span title="Double">Double</span> = <span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>:<span title="(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" class="delimiter">(</span>Histogram, Histogram<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="68482">actualQuantileHist</a> = <span title="(bucketSize: Int, bucketCount: Int)edu.berkeley.cs.scads.perf.Histogram">Histogram</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>,<span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="68483">predictedQuantileHist</a> = <span title="(bucketSize: Int, bucketCount: Int)edu.berkeley.cs.scads.perf.Histogram">Histogram</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>,<span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>

      <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;interval, actualQuantile, predictedQuantile&quot;)" class="string">&quot;interval, actualQuantile, predictedQuantile&quot;</span><span class="delimiter">)</span>

      <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">2</span> <span title="(end: Int)scala.collection.immutable.Range.Inclusive">to</span> <a href="#68237" title="=&gt; Int">numIntervals</a><span class="delimiter">)</span>.<span title="(f: Int =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a title="Int" id="68650">i</a> =&gt; <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="68651">actualHist</a> = <a href="#68242" title="(key: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int))edu.berkeley.cs.scads.perf.Histogram">perIterationHistograms</a><span class="delimiter">(</span><span title="(_1: edu.berkeley.cs.scads.piql.modeling.QueryDescription, _2: Int)(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int)" class="delimiter">(</span><a href="#68377" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">findUser</a>, <a href="#68650" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Int" id="68652">actualQuantile</a> = <a href="#68651" title="edu.berkeley.cs.scads.perf.Histogram">actualHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><a href="#68481" title="Double">quantile</a><span class="delimiter">)</span>
        <a href="#68482" title="edu.berkeley.cs.scads.perf.Histogram">actualQuantileHist</a> <span title="(value: Long)Unit">+=</span> <a href="#68652" title="=&gt; Long">actualQuantile</a>

        <span class="keyword">val</span> <a title="Int" id="68653">predictedQuantile</a> = <a href="#68389" title="(i: Int, desiredQuantile: Double)Int">predictOneInterval</a><span class="delimiter">(</span><a href="#68650" title="Int">i</a>, <a href="#68481" title="Double">quantile</a><span class="delimiter">)</span>
        <a href="#68483" title="edu.berkeley.cs.scads.perf.Histogram">predictedQuantileHist</a> <span title="(value: Long)Unit">+=</span> <a href="#68653" title="=&gt; Long">predictedQuantile</a>

        <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><a href="#68650" title="Int">i</a>, <a href="#68652" title="Int">actualQuantile</a>, <a href="#68653" title="Int">predictedQuantile</a><span class="delimiter">)</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>

      <span title="(_1: edu.berkeley.cs.scads.perf.Histogram, _2: edu.berkeley.cs.scads.perf.Histogram)(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" class="delimiter">(</span><a href="#68482" title="edu.berkeley.cs.scads.perf.Histogram">actualQuantileHist</a>, <a href="#68483" title="edu.berkeley.cs.scads.perf.Histogram">predictedQuantileHist</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">object</span> <a title="object edu.berkeley.cs.scads.piql.modeling.ScadrModeling.ModelMyThoughts" id="68217">ModelMyThoughts</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#68213" title="object edu.berkeley.cs.scads.piql.modeling.ScadrModeling.ScadrData">ScadrData</a>._
    
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryDescription" id="68698">myThoughts</a> = <a href="../collection/QueryRunnerTask.scala.html#37838" title="(queryName: String, parameters: Seq[Int], resultCardinality: Int)edu.berkeley.cs.scads.piql.modeling.QueryDescription">QueryDescription</a><span class="delimiter">(</span><span title="java.lang.String(&quot;myThoughts&quot;)" class="string">&quot;myThoughts&quot;</span>, <span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><span title="Int(10)" class="int">10</span><span class="delimiter">)</span>, <span title="Int(10)" class="int">10</span><span class="delimiter">)</span> <span class="comment">// TODO:  choose cardinality here</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="68700">myThoughtsHist</a> = <a href="#68240" title="(key: edu.berkeley.cs.scads.piql.modeling.QueryDescription)edu.berkeley.cs.scads.perf.Histogram">histogramsScadr</a><span class="delimiter">(</span><a href="#68698" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">myThoughts</a><span class="delimiter">)</span>
    
    <span class="comment">//scala&gt; res1.myThoughts.physicalPlan</span>
    <span class="comment">//res3: edu.berkeley.cs.scads.piql.QueryPlan = LocalStopAfter(ParameterLimit(1,10000),</span>
    <span class="comment">//                                             IndexScan(&lt;Namespace: thoughts&gt;,ArrayBuffer(ParameterValue(0)),ParameterLimit(1,10000),false))</span>
    
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryDescription" id="68702">indexScanThoughts</a> = <a href="../collection/QueryRunnerTask.scala.html#37838" title="(queryName: String, parameters: Seq[Int], resultCardinality: Int)edu.berkeley.cs.scads.piql.modeling.QueryDescription">QueryDescription</a><span class="delimiter">(</span><span title="java.lang.String(&quot;indexScanThoughts&quot;)" class="string">&quot;indexScanThoughts&quot;</span>, <span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><span title="Int(10)" class="int">10</span><span class="delimiter">)</span>, <span title="Int(10)" class="int">10</span><span class="delimiter">)</span> <span class="comment">// TODO:  make this match cardinality for myThoughts</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="68704">indexScanThoughtsHist</a> = <a href="#68240" title="(key: edu.berkeley.cs.scads.piql.modeling.QueryDescription)edu.berkeley.cs.scads.perf.Histogram">histogramsScadr</a><span class="delimiter">(</span><a href="#68698" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">myThoughts</a><span class="delimiter">)</span>
    
    <span class="keyword">val</span> <a title="Int" id="68706">actual99th</a> = <a href="#68700" title="=&gt; edu.berkeley.cs.scads.perf.Histogram">myThoughtsHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="68708">predicted99th</a> = <a href="#68704" title="=&gt; edu.berkeley.cs.scads.perf.Histogram">indexScanThoughtsHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>
    
    <span class="keyword">def</span> <a title="(i: Int, desiredQuantile: Double)Int" id="68710">predictOneInterval</a><span class="delimiter">(</span><a title="Int" id="68757">i</a>: <span title="Int">Int</span>, <a title="Double" id="68758">desiredQuantile</a>: <span title="Double">Double</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="68760">indexScanThoughtsHist</a> = <a href="#68242" title="(key: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int))edu.berkeley.cs.scads.perf.Histogram">perIterationHistograms</a><span class="delimiter">(</span><span title="(_1: edu.berkeley.cs.scads.piql.modeling.QueryDescription, _2: Int)(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int)" class="delimiter">(</span><a href="#68702" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">indexScanThoughts</a>, <a href="#68757" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#68760" title="edu.berkeley.cs.scads.perf.Histogram">indexScanThoughtsHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><a href="#68758" title="Double">desiredQuantile</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    
    <span class="keyword">def</span> <a title="(quantile: Double)(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" id="68711">getPerIntervalPrediction</a><span class="delimiter">(</span><a title="Double" id="68784">quantile</a>: <span title="Double">Double</span> = <span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>:<span title="(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" class="delimiter">(</span>Histogram, Histogram<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="68785">actualQuantileHist</a> = <span title="(bucketSize: Int, bucketCount: Int)edu.berkeley.cs.scads.perf.Histogram">Histogram</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>,<span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="68786">predictedQuantileHist</a> = <span title="(bucketSize: Int, bucketCount: Int)edu.berkeley.cs.scads.perf.Histogram">Histogram</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>,<span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>

      <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;interval, actualQuantile, predictedQuantile&quot;)" class="string">&quot;interval, actualQuantile, predictedQuantile&quot;</span><span class="delimiter">)</span>

      <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">2</span> <span title="(end: Int)scala.collection.immutable.Range.Inclusive">to</span> <a href="#68237" title="=&gt; Int">numIntervals</a><span class="delimiter">)</span>.<span title="(f: Int =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a title="Int" id="68917">i</a> =&gt; <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="68918">actualHist</a> = <a href="#68242" title="(key: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int))edu.berkeley.cs.scads.perf.Histogram">perIterationHistograms</a><span class="delimiter">(</span><span title="(_1: edu.berkeley.cs.scads.piql.modeling.QueryDescription, _2: Int)(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int)" class="delimiter">(</span><a href="#68698" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">myThoughts</a>, <a href="#68917" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Int" id="68919">actualQuantile</a> = <a href="#68918" title="edu.berkeley.cs.scads.perf.Histogram">actualHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><a href="#68784" title="Double">quantile</a><span class="delimiter">)</span>
        <a href="#68785" title="edu.berkeley.cs.scads.perf.Histogram">actualQuantileHist</a> <span title="(value: Long)Unit">+=</span> <a href="#68919" title="=&gt; Long">actualQuantile</a>

        <span class="keyword">val</span> <a title="Int" id="68920">predictedQuantile</a> = <a href="#68710" title="(i: Int, desiredQuantile: Double)Int">predictOneInterval</a><span class="delimiter">(</span><a href="#68917" title="Int">i</a>, <a href="#68784" title="Double">quantile</a><span class="delimiter">)</span>
        <a href="#68786" title="edu.berkeley.cs.scads.perf.Histogram">predictedQuantileHist</a> <span title="(value: Long)Unit">+=</span> <a href="#68920" title="=&gt; Long">predictedQuantile</a>

        <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><a href="#68917" title="Int">i</a>, <a href="#68919" title="Int">actualQuantile</a>, <a href="#68920" title="Int">predictedQuantile</a><span class="delimiter">)</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>

      <span title="(_1: edu.berkeley.cs.scads.perf.Histogram, _2: edu.berkeley.cs.scads.perf.Histogram)(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" class="delimiter">(</span><a href="#68785" title="edu.berkeley.cs.scads.perf.Histogram">actualQuantileHist</a>, <a href="#68786" title="edu.berkeley.cs.scads.perf.Histogram">predictedQuantileHist</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">object</span> <a title="object edu.berkeley.cs.scads.piql.modeling.ScadrModeling.ModelThoughtstream" id="68219">ModelThoughtstream</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#68213" title="object edu.berkeley.cs.scads.piql.modeling.ScadrModeling.ScadrData">ScadrData</a>._
    <span class="keyword">import</span> <a href="TpcwModeling.scala.html#10252" title="object edu.berkeley.cs.scads.piql.modeling.TpcwModeling">TpcwModeling</a>.<a href="TpcwModeling.scala.html#68987" title="object edu.berkeley.cs.scads.piql.modeling.TpcwModeling.Util">Util</a>._
    
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryDescription" id="68966">thoughtstream</a> = <a href="../collection/QueryRunnerTask.scala.html#37838" title="(queryName: String, parameters: Seq[Int], resultCardinality: Int)edu.berkeley.cs.scads.piql.modeling.QueryDescription">QueryDescription</a><span class="delimiter">(</span><span title="java.lang.String(&quot;thoughtstream&quot;)" class="string">&quot;thoughtstream&quot;</span>, <span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><span title="Int(50)" class="int">50</span>, <span title="Int(10)" class="int">10</span><span class="delimiter">)</span>, <span title="Int(10)" class="int">10</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="68968">thoughtstreamHist</a> = <a href="#68240" title="(key: edu.berkeley.cs.scads.piql.modeling.QueryDescription)edu.berkeley.cs.scads.perf.Histogram">histogramsScadr</a><span class="delimiter">(</span><a href="#68966" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">thoughtstream</a><span class="delimiter">)</span>
    
    <span class="comment">//scala&gt; res1.thoughtstream.physicalPlan  </span>
    <span class="comment">//res5: edu.berkeley.cs.scads.piql.QueryPlan = LocalStopAfter(ParameterLimit(1,10000),</span>
    <span class="comment">//                                             IndexMergeJoin(&lt;Namespace: thoughts&gt;,ArrayBuffer(AttributeValue(0,1)),List(AttributeValue(1,1)),ParameterLimit(1,10000),false,</span>
    <span class="comment">//                                             IndexScan(&lt;Namespace: subscriptions&gt;,ArrayBuffer(ParameterValue(0)),FixedLimit(10000),true)))</span>
    
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryDescription" id="68970">indexMergeJoinThoughts</a> = <a href="../collection/QueryRunnerTask.scala.html#37838" title="(queryName: String, parameters: Seq[Int], resultCardinality: Int)edu.berkeley.cs.scads.piql.modeling.QueryDescription">QueryDescription</a><span class="delimiter">(</span><span title="java.lang.String(&quot;indexMergeJoinThoughts&quot;)" class="string">&quot;indexMergeJoinThoughts&quot;</span>, <span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><span title="Int(50)" class="int">50</span>, <span title="Int(10)" class="int">10</span><span class="delimiter">)</span>, <span title="Int(10)" class="int">10</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]" id="68972">indexMergeJoinThoughtsHist</a> = <a href="#68240" title="(key: edu.berkeley.cs.scads.piql.modeling.QueryDescription)edu.berkeley.cs.scads.perf.Histogram">histogramsScadr</a><span class="delimiter">(</span><a href="#68970" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">indexMergeJoinThoughts</a><span class="delimiter">)</span>.<span title="=&gt; scala.collection.mutable.ArrayBuffer[Long]">buckets</span>.<span title="(f: Long =&gt; scala.math.BigInt)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[Long],scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]])scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer.Coll,scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]]" class="delimiter">(</span><span title="(l: Long)scala.math.BigInt">BigInt</span><span class="delimiter">(</span><a href="#69081" title="Long">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryDescription" id="68974">indexScanSubscriptions</a> = <a href="../collection/QueryRunnerTask.scala.html#37838" title="(queryName: String, parameters: Seq[Int], resultCardinality: Int)edu.berkeley.cs.scads.piql.modeling.QueryDescription">QueryDescription</a><span class="delimiter">(</span><span title="java.lang.String(&quot;indexScanSubscriptions&quot;)" class="string">&quot;indexScanSubscriptions&quot;</span>, <span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><span title="Int(50)" class="int">50</span><span class="delimiter">)</span>, <span title="Int(50)" class="int">50</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]" id="68976">indexScanSubscriptionsHist</a> = <a href="#68240" title="(key: edu.berkeley.cs.scads.piql.modeling.QueryDescription)edu.berkeley.cs.scads.perf.Histogram">histogramsScadr</a><span class="delimiter">(</span><a href="#68974" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">indexScanSubscriptions</a><span class="delimiter">)</span>.<span title="=&gt; scala.collection.mutable.ArrayBuffer[Long]">buckets</span>.<span title="(f: Long =&gt; scala.math.BigInt)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[Long],scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]])scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer.Coll,scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]]" class="delimiter">(</span><span title="(l: Long)scala.math.BigInt">BigInt</span><span class="delimiter">(</span><a href="#69599" title="Long">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    
    <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.ArrayBuffer[BigInt]" id="68978">predictHist</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[BigInt]" id="69649">res</a> = <a href="TpcwModeling.scala.html#69013" title="(hist1: scala.collection.mutable.ArrayBuffer[BigInt], hist2: scala.collection.mutable.ArrayBuffer[BigInt])scala.collection.mutable.ArrayBuffer[BigInt]">convolve</a><span class="delimiter">(</span><a href="#68976" title="=&gt; scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">indexScanSubscriptionsHist</a>, <a href="#68972" title="=&gt; scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">indexMergeJoinThoughtsHist</a><span class="delimiter">)</span>
      <a href="#69649" title="scala.collection.mutable.ArrayBuffer[BigInt]">res</a>
    <span class="delimiter">}</span>
    
    <span class="keyword">val</span> <a title="Int" id="68979">actual99th</a> = <a href="#68968" title="=&gt; edu.berkeley.cs.scads.perf.Histogram">thoughtstreamHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="68981">predicted99th</a> = <a href="TpcwModeling.scala.html#69016" title="(hist: scala.collection.mutable.ArrayBuffer[BigInt], quantile: Double)Int">quantile</a><span class="delimiter">(</span><a href="#68978" title="=&gt; scala.collection.mutable.ArrayBuffer[BigInt]">predictHist</a>, <span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>
    
    <span class="keyword">def</span> <a title="(i: Int, desiredQuantile: Double)Int" id="68983">predictOneInterval</a><span class="delimiter">(</span><a title="Int" id="69653">i</a>: <span title="Int">Int</span>, <a title="Double" id="69654">desiredQuantile</a>: <span title="Double">Double</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]" id="69656">indexScanSubscriptionsHist</a> = <a href="#68242" title="(key: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int))edu.berkeley.cs.scads.perf.Histogram">perIterationHistograms</a><span class="delimiter">(</span><span title="(_1: edu.berkeley.cs.scads.piql.modeling.QueryDescription, _2: Int)(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int)" class="delimiter">(</span><a href="#68974" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">indexScanSubscriptions</a>, <a href="#69653" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; scala.collection.mutable.ArrayBuffer[Long]">buckets</span>.<span title="(f: Long =&gt; scala.math.BigInt)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[Long],scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]])scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer.Coll,scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]]" class="delimiter">(</span><span title="(l: Long)scala.math.BigInt">BigInt</span><span class="delimiter">(</span><a href="#69699" title="Long">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]" id="69657">indexMergeJoinThoughtsHist</a> = <a href="#68242" title="(key: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int))edu.berkeley.cs.scads.perf.Histogram">perIterationHistograms</a><span class="delimiter">(</span><span title="(_1: edu.berkeley.cs.scads.piql.modeling.QueryDescription, _2: Int)(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int)" class="delimiter">(</span><a href="#68970" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">indexMergeJoinThoughts</a>, <a href="#69653" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; scala.collection.mutable.ArrayBuffer[Long]">buckets</span>.<span title="(f: Long =&gt; scala.math.BigInt)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[Long],scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]])scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer.Coll,scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]]" class="delimiter">(</span><span title="(l: Long)scala.math.BigInt">BigInt</span><span class="delimiter">(</span><a href="#69783" title="Long">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
      
      <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[BigInt]" id="69658">res</a> = <a href="TpcwModeling.scala.html#69013" title="(hist1: scala.collection.mutable.ArrayBuffer[BigInt], hist2: scala.collection.mutable.ArrayBuffer[BigInt])scala.collection.mutable.ArrayBuffer[BigInt]">convolve</a><span class="delimiter">(</span><a href="#69656" title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">indexScanSubscriptionsHist</a>, <a href="#69657" title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">indexMergeJoinThoughtsHist</a><span class="delimiter">)</span>

      <a href="TpcwModeling.scala.html#69016" title="(hist: scala.collection.mutable.ArrayBuffer[BigInt], quantile: Double)Int">quantile</a><span class="delimiter">(</span><a href="#69658" title="scala.collection.mutable.ArrayBuffer[BigInt]">res</a>, <a href="#69654" title="Double">desiredQuantile</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    
    <span class="keyword">def</span> <a title="(quantile: Double)(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" id="68984">getPerIntervalPrediction</a><span class="delimiter">(</span><a title="Double" id="69829">quantile</a>: <span title="Double">Double</span> = <span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>:<span title="(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" class="delimiter">(</span>Histogram, Histogram<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="69830">actualQuantileHist</a> = <span title="(bucketSize: Int, bucketCount: Int)edu.berkeley.cs.scads.perf.Histogram">Histogram</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>,<span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="69831">predictedQuantileHist</a> = <span title="(bucketSize: Int, bucketCount: Int)edu.berkeley.cs.scads.perf.Histogram">Histogram</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>,<span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>
      
      <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;interval, actualQuantile, predictedQuantile&quot;)" class="string">&quot;interval, actualQuantile, predictedQuantile&quot;</span><span class="delimiter">)</span>
      
      <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">2</span> <span title="(end: Int)scala.collection.immutable.Range.Inclusive">to</span> <a href="#68237" title="=&gt; Int">numIntervals</a><span class="delimiter">)</span>.<span title="(f: Int =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a title="Int" id="69962">i</a> =&gt; <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="69963">actualHist</a> = <a href="#68242" title="(key: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int))edu.berkeley.cs.scads.perf.Histogram">perIterationHistograms</a><span class="delimiter">(</span><span title="(_1: edu.berkeley.cs.scads.piql.modeling.QueryDescription, _2: Int)(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int)" class="delimiter">(</span><a href="#68966" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">thoughtstream</a>, <a href="#69962" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Int" id="69964">actualQuantile</a> = <a href="#69963" title="edu.berkeley.cs.scads.perf.Histogram">actualHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><a href="#69829" title="Double">quantile</a><span class="delimiter">)</span>
        <a href="#69830" title="edu.berkeley.cs.scads.perf.Histogram">actualQuantileHist</a> <span title="(value: Long)Unit">+=</span> <a href="#69964" title="=&gt; Long">actualQuantile</a>
        
        <span class="keyword">val</span> <a title="Int" id="69965">predictedQuantile</a> = <a href="#68983" title="(i: Int, desiredQuantile: Double)Int">predictOneInterval</a><span class="delimiter">(</span><a href="#69962" title="Int">i</a>, <a href="#69829" title="Double">quantile</a><span class="delimiter">)</span>
        <a href="#69831" title="edu.berkeley.cs.scads.perf.Histogram">predictedQuantileHist</a> <span title="(value: Long)Unit">+=</span> <a href="#69965" title="=&gt; Long">predictedQuantile</a>
        
        <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><a href="#69962" title="Int">i</a>, <a href="#69964" title="Int">actualQuantile</a>, <a href="#69965" title="Int">predictedQuantile</a><span class="delimiter">)</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
      
      <span title="(_1: edu.berkeley.cs.scads.perf.Histogram, _2: edu.berkeley.cs.scads.perf.Histogram)(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" class="delimiter">(</span><a href="#69830" title="edu.berkeley.cs.scads.perf.Histogram">actualQuantileHist</a>, <a href="#69831" title="edu.berkeley.cs.scads.perf.Histogram">predictedQuantileHist</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    
  <span class="delimiter">}</span>
  
  <span class="keyword">object</span> <a title="object edu.berkeley.cs.scads.piql.modeling.ScadrModeling.ModelUsersFollowedBy" id="68221">ModelUsersFollowedBy</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#68213" title="object edu.berkeley.cs.scads.piql.modeling.ScadrModeling.ScadrData">ScadrData</a>._
    <span class="keyword">import</span> <a href="TpcwModeling.scala.html#10252" title="object edu.berkeley.cs.scads.piql.modeling.TpcwModeling">TpcwModeling</a>.<a href="TpcwModeling.scala.html#68987" title="object edu.berkeley.cs.scads.piql.modeling.TpcwModeling.Util">Util</a>._
    
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryDescription" id="70011">usersFollowedBy</a> = <a href="../collection/QueryRunnerTask.scala.html#37838" title="(queryName: String, parameters: Seq[Int], resultCardinality: Int)edu.berkeley.cs.scads.piql.modeling.QueryDescription">QueryDescription</a><span class="delimiter">(</span><span title="java.lang.String(&quot;usersFollowedBy&quot;)" class="string">&quot;usersFollowedBy&quot;</span>, <span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><span title="Int(10)" class="int">10</span><span class="delimiter">)</span>, <span title="Int(10)" class="int">10</span><span class="delimiter">)</span> <span class="comment">// TODO:  choose cardinality here</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="70013">usersFollowedByHist</a> = <a href="#68240" title="(key: edu.berkeley.cs.scads.piql.modeling.QueryDescription)edu.berkeley.cs.scads.perf.Histogram">histogramsScadr</a><span class="delimiter">(</span><a href="#70011" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">usersFollowedBy</a><span class="delimiter">)</span>
    
    <span class="comment">//scala&gt; res1.usersFollowedBy.physicalPlan</span>
    <span class="comment">//res4: edu.berkeley.cs.scads.piql.QueryPlan = IndexLookupJoin(&lt;Namespace: users&gt;,ArrayBuffer(AttributeValue(0,1)),</span>
    <span class="comment">//                                             LocalStopAfter(ParameterLimit(1,10000),</span>
    <span class="comment">//                                             IndexScan(&lt;Namespace: subscriptions&gt;,ArrayBuffer(ParameterValue(0)),ParameterLimit(1,10000),true)))</span>
    
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryDescription" id="70015">indexLookupJoinUsers</a> = <a href="../collection/QueryRunnerTask.scala.html#37838" title="(queryName: String, parameters: Seq[Int], resultCardinality: Int)edu.berkeley.cs.scads.piql.modeling.QueryDescription">QueryDescription</a><span class="delimiter">(</span><span title="java.lang.String(&quot;indexLookupJoinUsers&quot;)" class="string">&quot;indexLookupJoinUsers&quot;</span>, <span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><span title="Int(10)" class="int">10</span><span class="delimiter">)</span>, <span title="Int(10)" class="int">10</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]" id="70017">indexLookupJoinUsersHist</a> = <a href="#68240" title="(key: edu.berkeley.cs.scads.piql.modeling.QueryDescription)edu.berkeley.cs.scads.perf.Histogram">histogramsScadr</a><span class="delimiter">(</span><a href="#70015" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">indexLookupJoinUsers</a><span class="delimiter">)</span>.<span title="=&gt; scala.collection.mutable.ArrayBuffer[Long]">buckets</span>.<span title="(f: Long =&gt; scala.math.BigInt)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[Long],scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]])scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer.Coll,scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]]" class="delimiter">(</span><span title="(l: Long)scala.math.BigInt">BigInt</span><span class="delimiter">(</span><a href="#70094" title="Long">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryDescription" id="70019">indexScanSubscriptions</a> = <a href="../collection/QueryRunnerTask.scala.html#37838" title="(queryName: String, parameters: Seq[Int], resultCardinality: Int)edu.berkeley.cs.scads.piql.modeling.QueryDescription">QueryDescription</a><span class="delimiter">(</span><span title="java.lang.String(&quot;indexScanSubscriptions&quot;)" class="string">&quot;indexScanSubscriptions&quot;</span>, <span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><span title="Int(10)" class="int">10</span><span class="delimiter">)</span>, <span title="Int(10)" class="int">10</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]" id="70021">indexScanSubscriptionsHist</a> = <a href="#68240" title="(key: edu.berkeley.cs.scads.piql.modeling.QueryDescription)edu.berkeley.cs.scads.perf.Histogram">histogramsScadr</a><span class="delimiter">(</span><a href="#70019" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">indexScanSubscriptions</a><span class="delimiter">)</span>.<span title="=&gt; scala.collection.mutable.ArrayBuffer[Long]">buckets</span>.<span title="(f: Long =&gt; scala.math.BigInt)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[Long],scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]])scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer.Coll,scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]]" class="delimiter">(</span><span title="(l: Long)scala.math.BigInt">BigInt</span><span class="delimiter">(</span><a href="#70179" title="Long">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    
    <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.ArrayBuffer[BigInt]" id="70023">predictHist</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[BigInt]" id="70226">res</a> = <a href="TpcwModeling.scala.html#69013" title="(hist1: scala.collection.mutable.ArrayBuffer[BigInt], hist2: scala.collection.mutable.ArrayBuffer[BigInt])scala.collection.mutable.ArrayBuffer[BigInt]">convolve</a><span class="delimiter">(</span><a href="#70021" title="=&gt; scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">indexScanSubscriptionsHist</a>, <a href="#70017" title="=&gt; scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">indexLookupJoinUsersHist</a><span class="delimiter">)</span>
      <a href="#70226" title="scala.collection.mutable.ArrayBuffer[BigInt]">res</a>
    <span class="delimiter">}</span>
    
    <span class="keyword">val</span> <a title="Int" id="70024">actual99th</a> = <a href="#70013" title="=&gt; edu.berkeley.cs.scads.perf.Histogram">usersFollowedByHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="70026">predicted99th</a> = <a href="TpcwModeling.scala.html#69016" title="(hist: scala.collection.mutable.ArrayBuffer[BigInt], quantile: Double)Int">quantile</a><span class="delimiter">(</span><a href="#70023" title="=&gt; scala.collection.mutable.ArrayBuffer[BigInt]">predictHist</a>, <span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(i: Int, desiredQuantile: Double)Int" id="70028">predictOneInterval</a><span class="delimiter">(</span><a title="Int" id="70227">i</a>: <span title="Int">Int</span>, <a title="Double" id="70228">desiredQuantile</a>: <span title="Double">Double</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]" id="70230">indexScanSubscriptionsHist</a> = <a href="#68242" title="(key: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int))edu.berkeley.cs.scads.perf.Histogram">perIterationHistograms</a><span class="delimiter">(</span><span title="(_1: edu.berkeley.cs.scads.piql.modeling.QueryDescription, _2: Int)(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int)" class="delimiter">(</span><a href="#70019" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">indexScanSubscriptions</a>, <a href="#70227" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; scala.collection.mutable.ArrayBuffer[Long]">buckets</span>.<span title="(f: Long =&gt; scala.math.BigInt)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[Long],scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]])scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer.Coll,scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]]" class="delimiter">(</span><span title="(l: Long)scala.math.BigInt">BigInt</span><span class="delimiter">(</span><a href="#70273" title="Long">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]" id="70231">indexLookupJoinUsersHist</a> = <a href="#68242" title="(key: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int))edu.berkeley.cs.scads.perf.Histogram">perIterationHistograms</a><span class="delimiter">(</span><span title="(_1: edu.berkeley.cs.scads.piql.modeling.QueryDescription, _2: Int)(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int)" class="delimiter">(</span><a href="#70015" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">indexLookupJoinUsers</a>, <a href="#70227" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; scala.collection.mutable.ArrayBuffer[Long]">buckets</span>.<span title="(f: Long =&gt; scala.math.BigInt)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[Long],scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]])scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer.Coll,scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]]" class="delimiter">(</span><span title="(l: Long)scala.math.BigInt">BigInt</span><span class="delimiter">(</span><a href="#70357" title="Long">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
      
      <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[BigInt]" id="70232">res</a> = <a href="TpcwModeling.scala.html#69013" title="(hist1: scala.collection.mutable.ArrayBuffer[BigInt], hist2: scala.collection.mutable.ArrayBuffer[BigInt])scala.collection.mutable.ArrayBuffer[BigInt]">convolve</a><span class="delimiter">(</span><a href="#70230" title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">indexScanSubscriptionsHist</a>, <a href="#70231" title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">indexLookupJoinUsersHist</a><span class="delimiter">)</span>

      <a href="TpcwModeling.scala.html#69016" title="(hist: scala.collection.mutable.ArrayBuffer[BigInt], quantile: Double)Int">quantile</a><span class="delimiter">(</span><a href="#70232" title="scala.collection.mutable.ArrayBuffer[BigInt]">res</a>, <a href="#70228" title="Double">desiredQuantile</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    
    <span class="keyword">def</span> <a title="(quantile: Double)(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" id="70029">getPerIntervalPrediction</a><span class="delimiter">(</span><a title="Double" id="70403">quantile</a>: <span title="Double">Double</span> = <span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>:<span title="(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" class="delimiter">(</span>Histogram, Histogram<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="70404">actualQuantileHist</a> = <span title="(bucketSize: Int, bucketCount: Int)edu.berkeley.cs.scads.perf.Histogram">Histogram</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>,<span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="70405">predictedQuantileHist</a> = <span title="(bucketSize: Int, bucketCount: Int)edu.berkeley.cs.scads.perf.Histogram">Histogram</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>,<span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>
      
      <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;interval, actualQuantile, predictedQuantile&quot;)" class="string">&quot;interval, actualQuantile, predictedQuantile&quot;</span><span class="delimiter">)</span>
      
      <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">2</span> <span title="(end: Int)scala.collection.immutable.Range.Inclusive">to</span> <a href="#68237" title="=&gt; Int">numIntervals</a><span class="delimiter">)</span>.<span title="(f: Int =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a title="Int" id="70536">i</a> =&gt; <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="70537">actualHist</a> = <a href="#68242" title="(key: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int))edu.berkeley.cs.scads.perf.Histogram">perIterationHistograms</a><span class="delimiter">(</span><span title="(_1: edu.berkeley.cs.scads.piql.modeling.QueryDescription, _2: Int)(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int)" class="delimiter">(</span><a href="#70011" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">usersFollowedBy</a>, <a href="#70536" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Int" id="70538">actualQuantile</a> = <a href="#70537" title="edu.berkeley.cs.scads.perf.Histogram">actualHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><a href="#70403" title="Double">quantile</a><span class="delimiter">)</span>
        <a href="#70404" title="edu.berkeley.cs.scads.perf.Histogram">actualQuantileHist</a> <span title="(value: Long)Unit">+=</span> <a href="#70538" title="=&gt; Long">actualQuantile</a>
        
        <span class="keyword">val</span> <a title="Int" id="70539">predictedQuantile</a> = <a href="#70028" title="(i: Int, desiredQuantile: Double)Int">predictOneInterval</a><span class="delimiter">(</span><a href="#70536" title="Int">i</a>, <a href="#70403" title="Double">quantile</a><span class="delimiter">)</span>
        <a href="#70405" title="edu.berkeley.cs.scads.perf.Histogram">predictedQuantileHist</a> <span title="(value: Long)Unit">+=</span> <a href="#70539" title="=&gt; Long">predictedQuantile</a>
        
        <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><a href="#70536" title="Int">i</a>, <a href="#70538" title="Int">actualQuantile</a>, <a href="#70539" title="Int">predictedQuantile</a><span class="delimiter">)</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
      
      <span title="(_1: edu.berkeley.cs.scads.perf.Histogram, _2: edu.berkeley.cs.scads.perf.Histogram)(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" class="delimiter">(</span><a href="#70404" title="edu.berkeley.cs.scads.perf.Histogram">actualQuantileHist</a>, <a href="#70405" title="edu.berkeley.cs.scads.perf.Histogram">predictedQuantileHist</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
<span class="delimiter">}</span>
        </pre>
    </body>
</html>