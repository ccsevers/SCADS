<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>experiments/ScadrModeling.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> edu.berkeley.cs
<span class="keyword">package</span> scads
<span class="keyword">package</span> piql
<span class="keyword">package</span> modeling

<span class="keyword">import</span> comm._
<span class="keyword">import</span> storage._
<span class="keyword">import</span> perf._
<span class="keyword">import</span> deploylib.ec2._
<span class="keyword">import</span> deploylib.mesos._
<span class="keyword">import</span> piql.scadr._
<span class="keyword">import</span> perf.scadr._
<span class="keyword">import</span> avro.marker._
<span class="keyword">import</span> avro.runtime._
<span class="keyword">import</span> <a href="ExperimentUtil.scala.html#9691" title="object edu.berkeley.cs.scads.piql.modeling.ExperimentUtil">ExperimentUtil</a>._
<span class="keyword">import</span> scala.collection.mutable.ArrayBuffer

<span class="keyword">object</span> <a title="object edu.berkeley.cs.scads.piql.modeling.ScadrModeling" id="9746">ScadrModeling</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">object</span> <a title="object edu.berkeley.cs.scads.piql.modeling.ScadrModeling.ScadrData" id="68432">ScadrData</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="comment">/*
    val clusterAddress1 = &quot;zk://ec2-50-17-12-53.compute-1.amazonaws.com:2181,ec2-184-72-171-124.compute-1.amazonaws.com:2181,ec2-174-129-157-147.compute-1.amazonaws.com:2181/scads/experimentCluster0000000063&quot;
    val clusterAddress2 = &quot;zk://ec2-50-17-12-53.compute-1.amazonaws.com:2181,ec2-184-72-171-124.compute-1.amazonaws.com:2181,ec2-174-129-157-147.compute-1.amazonaws.com:2181/scads/experimentCluster0000000067&quot;
    val clusterAddress3 = &quot;zk://ec2-50-17-12-53.compute-1.amazonaws.com:2181,ec2-184-72-171-124.compute-1.amazonaws.com:2181,ec2-174-129-157-147.compute-1.amazonaws.com:2181/scads/experimentCluster0000000069&quot;

    def experimentResults1 = allResults.filter(_.clientConfig.clusterAddress == clusterAddress1)
    def experimentResults2 = allResults.filter(_.clientConfig.clusterAddress == clusterAddress2)
    def experimentResults3 = allResults.filter(_.clientConfig.clusterAddress == clusterAddress3)
    
    val numIntervals1 = 6
    def goodExperimentResults1 = experimentResults1.filter(r =&gt; r.iteration &gt; 1 &amp;&amp; r.iteration &lt;= numIntervals1)

    val numIntervals2 = 10
    def goodExperimentResults2 = experimentResults2.filter(r =&gt; r.iteration &gt; 1 &amp;&amp; r.iteration &lt;= numIntervals2).map(r =&gt; {
        r.iteration += numIntervals1 - 1
        r 
      })

    val numIntervals3 = 20
    def goodExperimentResults3 = experimentResults3.filter(r =&gt; r.iteration &gt; 1 &amp;&amp; r.iteration &lt;= numIntervals3).map(r =&gt; {
        r.iteration += numIntervals1 + numIntervals2 - 2
        r
      })
    
    // combine goodExperimentResults1-3
    val numIntervals = numIntervals1 + numIntervals2 + numIntervals3 - 2
    def goodExperimentResults = goodExperimentResults1.toSeq ++ goodExperimentResults2.toSeq ++ goodExperimentResults3.toSeq
    */</span>
    
    <span class="comment">// data from evening of 5.30.11</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="68444">clusterAddress1</a> = <span title="java.lang.String(&quot;zk://ec2-50-17-12-53.compute-1.amazonaws.com:2181,ec2-184-72-171-124.compute-1.amazonaws.com:2181,ec2-174-129-157-147.compute-1.amazonaws.com:2181/scads/experimentCluster0000000071&quot;)" class="string">&quot;zk://ec2-50-17-12-53.compute-1.amazonaws.com:2181,ec2-184-72-171-124.compute-1.amazonaws.com:2181,ec2-174-129-157-147.compute-1.amazonaws.com:2181/scads/experimentCluster0000000071&quot;</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="68446">clusterAddress2</a> = <span title="java.lang.String(&quot;zk://ec2-50-17-12-53.compute-1.amazonaws.com:2181,ec2-184-72-171-124.compute-1.amazonaws.com:2181,ec2-174-129-157-147.compute-1.amazonaws.com:2181/scads/experimentCluster0000000072&quot;)" class="string">&quot;zk://ec2-50-17-12-53.compute-1.amazonaws.com:2181,ec2-184-72-171-124.compute-1.amazonaws.com:2181,ec2-174-129-157-147.compute-1.amazonaws.com:2181/scads/experimentCluster0000000072&quot;</span>

    <span class="keyword">def</span> <a title="=&gt; Iterator[edu.berkeley.cs.scads.piql.modeling.Result]" id="68448">experimentResults1</a> = <a href="ExperimentUtil.scala.html#50204" title="=&gt; org.apache.avro.file.DataFileReader[edu.berkeley.cs.scads.piql.modeling.Result] with Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">allResults</a>.<span title="(p: edu.berkeley.cs.scads.piql.modeling.Result =&gt; Boolean)Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">filter</span><span class="delimiter">(</span><a href="#68483" title="edu.berkeley.cs.scads.piql.modeling.Result">_</a>.<a href="../collection/QueryRunnerTask.scala.html#37925" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">clientConfig</a>.<a href="../collection/QueryRunnerTask.scala.html#38010" title="=&gt; String">clusterAddress</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#68444" title="=&gt; java.lang.String">clusterAddress1</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; Iterator[edu.berkeley.cs.scads.piql.modeling.Result]" id="68449">experimentResults2</a> = <a href="ExperimentUtil.scala.html#50204" title="=&gt; org.apache.avro.file.DataFileReader[edu.berkeley.cs.scads.piql.modeling.Result] with Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">allResults</a>.<span title="(p: edu.berkeley.cs.scads.piql.modeling.Result =&gt; Boolean)Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">filter</span><span class="delimiter">(</span><a href="#68539" title="edu.berkeley.cs.scads.piql.modeling.Result">_</a>.<a href="../collection/QueryRunnerTask.scala.html#37925" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryRunnerTask">clientConfig</a>.<a href="../collection/QueryRunnerTask.scala.html#38010" title="=&gt; String">clusterAddress</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#68446" title="=&gt; java.lang.String">clusterAddress2</a><span class="delimiter">)</span>
    
    <span class="keyword">val</span> <a title="Int" id="68450">numIntervals1</a> = <span title="Int(21)" class="int">21</span>
    <span class="keyword">def</span> <a title="=&gt; Iterator[edu.berkeley.cs.scads.piql.modeling.Result]" id="68452">goodExperimentResults1</a> = <a href="#68448" title="=&gt; Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">experimentResults1</a>.<span title="(p: edu.berkeley.cs.scads.piql.modeling.Result =&gt; Boolean)Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">filter</span><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.piql.modeling.Result" id="68492">r</a> =&gt; <a href="#68492" title="edu.berkeley.cs.scads.piql.modeling.Result">r</a>.<a href="../collection/QueryRunnerTask.scala.html#37922" title="=&gt; Int">iteration</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(1)" class="int">1</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#68492" title="edu.berkeley.cs.scads.piql.modeling.Result">r</a>.<a href="../collection/QueryRunnerTask.scala.html#37922" title="=&gt; Int">iteration</a> <span title="(x: Int)Boolean">&lt;=</span> <a href="#68450" title="=&gt; Int">numIntervals1</a><span class="delimiter">)</span>
    
    <span class="keyword">val</span> <a title="Int" id="68453">numIntervals2</a> = <span title="Int(16)" class="int">16</span>
    <span class="keyword">def</span> <a title="=&gt; Iterator[edu.berkeley.cs.scads.piql.modeling.Result]" id="68455">goodExperimentResults2</a> = <a href="#68449" title="=&gt; Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">experimentResults2</a>.<span title="(p: edu.berkeley.cs.scads.piql.modeling.Result =&gt; Boolean)Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">filter</span><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.piql.modeling.Result" id="68548">r</a> =&gt; <a href="#68548" title="edu.berkeley.cs.scads.piql.modeling.Result">r</a>.<a href="../collection/QueryRunnerTask.scala.html#37922" title="=&gt; Int">iteration</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(1)" class="int">1</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#68548" title="edu.berkeley.cs.scads.piql.modeling.Result">r</a>.<a href="../collection/QueryRunnerTask.scala.html#37922" title="=&gt; Int">iteration</a> <span title="(x: Int)Boolean">&lt;=</span> <a href="#68453" title="=&gt; Int">numIntervals2</a><span class="delimiter">)</span>.<span title="(f: edu.berkeley.cs.scads.piql.modeling.Result =&gt; edu.berkeley.cs.scads.piql.modeling.Result)Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">map</span><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.piql.modeling.Result" id="68561">r</a> =&gt; <span class="delimiter">{</span>
      <a href="#68561" title="edu.berkeley.cs.scads.piql.modeling.Result">r</a>.<a href="../collection/QueryRunnerTask.scala.html#37923" title="(x$1: Int)Unit">iteration</a> <span title="(x: Int)Int">+=</span> <a href="#68450" title="=&gt; Int">numIntervals1</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span>
      <a href="#68561" title="edu.berkeley.cs.scads.piql.modeling.Result">r</a>
    <span class="delimiter">}</span><span class="delimiter">)</span>
    
    <span class="keyword">val</span> <a title="Int" id="68456">numIntervals</a> = <a href="#68450" title="=&gt; Int">numIntervals1</a> <span title="(x: Int)Int">+</span> <a href="#68453" title="=&gt; Int">numIntervals2</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span>
    <span class="keyword">def</span> <a title="=&gt; Seq[edu.berkeley.cs.scads.piql.modeling.Result]" id="68458">goodExperimentResults</a> = <a href="#68452" title="=&gt; Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">goodExperimentResults1</a>.<span title="=&gt; Seq[edu.berkeley.cs.scads.piql.modeling.Result]">toSeq</span> <span title="(that: scala.collection.GenTraversableOnce[edu.berkeley.cs.scads.piql.modeling.Result])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[edu.berkeley.cs.scads.piql.modeling.Result],edu.berkeley.cs.scads.piql.modeling.Result,Seq[edu.berkeley.cs.scads.piql.modeling.Result]])Seq[edu.berkeley.cs.scads.piql.modeling.Result]">++</span> <a href="#68455" title="=&gt; Iterator[edu.berkeley.cs.scads.piql.modeling.Result]">goodExperimentResults2</a>.<span title="=&gt; Seq[edu.berkeley.cs.scads.piql.modeling.Result]">toSeq</span>
    
    <span class="keyword">val</span> <a title="scala.collection.immutable.Map[edu.berkeley.cs.scads.piql.modeling.QueryDescription,edu.berkeley.cs.scads.perf.Histogram]" id="68459">histogramsScadr</a> = <a href="ExperimentUtil.scala.html#50217" title="(results: Seq[edu.berkeley.cs.scads.piql.modeling.Result])scala.collection.immutable.Map[edu.berkeley.cs.scads.piql.modeling.QueryDescription,edu.berkeley.cs.scads.perf.Histogram]">queryTypeHistogram</a><span class="delimiter">(</span><a href="#68458" title="=&gt; Seq[edu.berkeley.cs.scads.piql.modeling.Result]">goodExperimentResults</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.collection.immutable.Map[(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int),edu.berkeley.cs.scads.perf.Histogram]" id="68461">perIterationHistograms</a> = <a href="ExperimentUtil.scala.html#50220" title="(results: Seq[edu.berkeley.cs.scads.piql.modeling.Result])scala.collection.immutable.Map[(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int),edu.berkeley.cs.scads.perf.Histogram]">queryTypePerIterationHistograms</a><span class="delimiter">(</span><a href="#68458" title="=&gt; Seq[edu.berkeley.cs.scads.piql.modeling.Result]">goodExperimentResults</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/*
  object ModelFindSubscription {
    import ScadrData._
    
    val findSubscription = QueryDescription(&quot;findSubscription&quot;, List(), 1)
    val findSubscriptionHist = histogramsScadr(findSubscription)
    
    //scala&gt; res1.findSubscription.physicalPlan
    //res6: edu.berkeley.cs.scads.piql.QueryPlan = IndexLookup(&lt;Namespace: subscriptions&gt;,ArrayBuffer(ParameterValue(0), ParameterValue(1)))
    
    val indexLookupSubscriptions = QueryDescription(&quot;indexLookupSubscriptions&quot;, List(), 1)
  }
  */</span>
  
  <span class="keyword">object</span> <a title="object edu.berkeley.cs.scads.piql.modeling.ScadrModeling.ModelFindUser" id="68434">ModelFindUser</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#68432" title="object edu.berkeley.cs.scads.piql.modeling.ScadrModeling.ScadrData">ScadrData</a>._
    
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryDescription" id="68596">findUser</a> = <a href="../collection/QueryRunnerTask.scala.html#37849" title="(queryName: String, parameters: Seq[Int], resultCardinality: Int)edu.berkeley.cs.scads.piql.modeling.QueryDescription">QueryDescription</a><span class="delimiter">(</span><span title="java.lang.String(&quot;findUser&quot;)" class="string">&quot;findUser&quot;</span>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>, <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="68598">findUserHist</a> = <a href="#68459" title="(key: edu.berkeley.cs.scads.piql.modeling.QueryDescription)edu.berkeley.cs.scads.perf.Histogram">histogramsScadr</a><span class="delimiter">(</span><a href="#68596" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">findUser</a><span class="delimiter">)</span>
    
    <span class="comment">//scala&gt; res1.findUser.physicalPlan</span>
    <span class="comment">//res2: edu.berkeley.cs.scads.piql.QueryPlan = IndexLookup(&lt;Namespace: users&gt;,ArrayBuffer(ParameterValue(0)))</span>
    
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryDescription" id="68600">indexLookupUsers</a> = <a href="../collection/QueryRunnerTask.scala.html#37849" title="(queryName: String, parameters: Seq[Int], resultCardinality: Int)edu.berkeley.cs.scads.piql.modeling.QueryDescription">QueryDescription</a><span class="delimiter">(</span><span title="java.lang.String(&quot;indexLookupUsers&quot;)" class="string">&quot;indexLookupUsers&quot;</span>, List<span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>, <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="68602">indexLookupUsersHist</a> = <a href="#68459" title="(key: edu.berkeley.cs.scads.piql.modeling.QueryDescription)edu.berkeley.cs.scads.perf.Histogram">histogramsScadr</a><span class="delimiter">(</span><a href="#68600" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">indexLookupUsers</a><span class="delimiter">)</span>
    
    <span class="keyword">val</span> <a title="Int" id="68604">actual99th</a> = <a href="#68598" title="=&gt; edu.berkeley.cs.scads.perf.Histogram">findUserHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="68606">predicted99th</a> = <a href="#68602" title="=&gt; edu.berkeley.cs.scads.perf.Histogram">indexLookupUsersHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>
   
    <span class="keyword">def</span> <a title="(i: Int, desiredQuantile: Double)Int" id="68608">predictOneInterval</a><span class="delimiter">(</span><a title="Int" id="68661">i</a>: <span title="Int">Int</span>, <a title="Double" id="68662">desiredQuantile</a>: <span title="Double">Double</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="68664">indexLookupUsersHist</a> = <a href="#68461" title="(key: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int))edu.berkeley.cs.scads.perf.Histogram">perIterationHistograms</a><span class="delimiter">(</span><span title="(_1: edu.berkeley.cs.scads.piql.modeling.QueryDescription, _2: Int)(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int)" class="delimiter">(</span><a href="#68600" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">indexLookupUsers</a>, <a href="#68661" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#68664" title="edu.berkeley.cs.scads.perf.Histogram">indexLookupUsersHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><a href="#68662" title="Double">desiredQuantile</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(quantile: Double)(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" id="68609">getPerIntervalPrediction</a><span class="delimiter">(</span><a title="Double" id="68700">quantile</a>: <span title="Double">Double</span> = <span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>:<span title="(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" class="delimiter">(</span>Histogram, Histogram<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="68701">actualQuantileHist</a> = <span title="(bucketSize: Int, bucketCount: Int)edu.berkeley.cs.scads.perf.Histogram">Histogram</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>,<span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="68702">predictedQuantileHist</a> = <span title="(bucketSize: Int, bucketCount: Int)edu.berkeley.cs.scads.perf.Histogram">Histogram</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>,<span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>

      <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;interval, actualQuantile, predictedQuantile&quot;)" class="string">&quot;interval, actualQuantile, predictedQuantile&quot;</span><span class="delimiter">)</span>

      <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">2</span> <span title="(end: Int)scala.collection.immutable.Range.Inclusive">to</span> <a href="#68456" title="=&gt; Int">numIntervals</a><span class="delimiter">)</span>.<span title="(f: Int =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a title="Int" id="68869">i</a> =&gt; <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="68870">actualHist</a> = <a href="#68461" title="(key: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int))edu.berkeley.cs.scads.perf.Histogram">perIterationHistograms</a><span class="delimiter">(</span><span title="(_1: edu.berkeley.cs.scads.piql.modeling.QueryDescription, _2: Int)(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int)" class="delimiter">(</span><a href="#68596" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">findUser</a>, <a href="#68869" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Int" id="68871">actualQuantile</a> = <a href="#68870" title="edu.berkeley.cs.scads.perf.Histogram">actualHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><a href="#68700" title="Double">quantile</a><span class="delimiter">)</span>
        <a href="#68701" title="edu.berkeley.cs.scads.perf.Histogram">actualQuantileHist</a> <span title="(value: Long)Unit">+=</span> <a href="#68871" title="=&gt; Long">actualQuantile</a>

        <span class="keyword">val</span> <a title="Int" id="68872">predictedQuantile</a> = <a href="#68608" title="(i: Int, desiredQuantile: Double)Int">predictOneInterval</a><span class="delimiter">(</span><a href="#68869" title="Int">i</a>, <a href="#68700" title="Double">quantile</a><span class="delimiter">)</span>
        <a href="#68702" title="edu.berkeley.cs.scads.perf.Histogram">predictedQuantileHist</a> <span title="(value: Long)Unit">+=</span> <a href="#68872" title="=&gt; Long">predictedQuantile</a>

        <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><a href="#68869" title="Int">i</a>, <a href="#68871" title="Int">actualQuantile</a>, <a href="#68872" title="Int">predictedQuantile</a><span class="delimiter">)</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>

      <span title="(_1: edu.berkeley.cs.scads.perf.Histogram, _2: edu.berkeley.cs.scads.perf.Histogram)(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" class="delimiter">(</span><a href="#68701" title="edu.berkeley.cs.scads.perf.Histogram">actualQuantileHist</a>, <a href="#68702" title="edu.berkeley.cs.scads.perf.Histogram">predictedQuantileHist</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">object</span> <a title="object edu.berkeley.cs.scads.piql.modeling.ScadrModeling.ModelMyThoughts" id="68436">ModelMyThoughts</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#68432" title="object edu.berkeley.cs.scads.piql.modeling.ScadrModeling.ScadrData">ScadrData</a>._
    
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryDescription" id="68917">myThoughts</a> = <a href="../collection/QueryRunnerTask.scala.html#37849" title="(queryName: String, parameters: Seq[Int], resultCardinality: Int)edu.berkeley.cs.scads.piql.modeling.QueryDescription">QueryDescription</a><span class="delimiter">(</span><span title="java.lang.String(&quot;myThoughts&quot;)" class="string">&quot;myThoughts&quot;</span>, <span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><span title="Int(10)" class="int">10</span><span class="delimiter">)</span>, <span title="Int(10)" class="int">10</span><span class="delimiter">)</span> <span class="comment">// TODO:  choose cardinality here</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="68919">myThoughtsHist</a> = <a href="#68459" title="(key: edu.berkeley.cs.scads.piql.modeling.QueryDescription)edu.berkeley.cs.scads.perf.Histogram">histogramsScadr</a><span class="delimiter">(</span><a href="#68917" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">myThoughts</a><span class="delimiter">)</span>
    
    <span class="comment">//scala&gt; res1.myThoughts.physicalPlan</span>
    <span class="comment">//res3: edu.berkeley.cs.scads.piql.QueryPlan = LocalStopAfter(ParameterLimit(1,10000),</span>
    <span class="comment">//                                             IndexScan(&lt;Namespace: thoughts&gt;,ArrayBuffer(ParameterValue(0)),ParameterLimit(1,10000),false))</span>
    
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryDescription" id="68921">indexScanThoughts</a> = <a href="../collection/QueryRunnerTask.scala.html#37849" title="(queryName: String, parameters: Seq[Int], resultCardinality: Int)edu.berkeley.cs.scads.piql.modeling.QueryDescription">QueryDescription</a><span class="delimiter">(</span><span title="java.lang.String(&quot;indexScanThoughts&quot;)" class="string">&quot;indexScanThoughts&quot;</span>, <span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><span title="Int(10)" class="int">10</span><span class="delimiter">)</span>, <span title="Int(10)" class="int">10</span><span class="delimiter">)</span> <span class="comment">// TODO:  make this match cardinality for myThoughts</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="68923">indexScanThoughtsHist</a> = <a href="#68459" title="(key: edu.berkeley.cs.scads.piql.modeling.QueryDescription)edu.berkeley.cs.scads.perf.Histogram">histogramsScadr</a><span class="delimiter">(</span><a href="#68917" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">myThoughts</a><span class="delimiter">)</span>
    
    <span class="keyword">val</span> <a title="Int" id="68925">actual99th</a> = <a href="#68919" title="=&gt; edu.berkeley.cs.scads.perf.Histogram">myThoughtsHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="68927">predicted99th</a> = <a href="#68923" title="=&gt; edu.berkeley.cs.scads.perf.Histogram">indexScanThoughtsHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>
    
    <span class="keyword">def</span> <a title="(i: Int, desiredQuantile: Double)Int" id="68929">predictOneInterval</a><span class="delimiter">(</span><a title="Int" id="68976">i</a>: <span title="Int">Int</span>, <a title="Double" id="68977">desiredQuantile</a>: <span title="Double">Double</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="68979">indexScanThoughtsHist</a> = <a href="#68461" title="(key: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int))edu.berkeley.cs.scads.perf.Histogram">perIterationHistograms</a><span class="delimiter">(</span><span title="(_1: edu.berkeley.cs.scads.piql.modeling.QueryDescription, _2: Int)(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int)" class="delimiter">(</span><a href="#68921" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">indexScanThoughts</a>, <a href="#68976" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#68979" title="edu.berkeley.cs.scads.perf.Histogram">indexScanThoughtsHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><a href="#68977" title="Double">desiredQuantile</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    
    <span class="keyword">def</span> <a title="(quantile: Double)(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" id="68930">getPerIntervalPrediction</a><span class="delimiter">(</span><a title="Double" id="69003">quantile</a>: <span title="Double">Double</span> = <span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>:<span title="(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" class="delimiter">(</span>Histogram, Histogram<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="69004">actualQuantileHist</a> = <span title="(bucketSize: Int, bucketCount: Int)edu.berkeley.cs.scads.perf.Histogram">Histogram</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>,<span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="69005">predictedQuantileHist</a> = <span title="(bucketSize: Int, bucketCount: Int)edu.berkeley.cs.scads.perf.Histogram">Histogram</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>,<span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>

      <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;interval, actualQuantile, predictedQuantile&quot;)" class="string">&quot;interval, actualQuantile, predictedQuantile&quot;</span><span class="delimiter">)</span>

      <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">2</span> <span title="(end: Int)scala.collection.immutable.Range.Inclusive">to</span> <a href="#68456" title="=&gt; Int">numIntervals</a><span class="delimiter">)</span>.<span title="(f: Int =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a title="Int" id="69136">i</a> =&gt; <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="69137">actualHist</a> = <a href="#68461" title="(key: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int))edu.berkeley.cs.scads.perf.Histogram">perIterationHistograms</a><span class="delimiter">(</span><span title="(_1: edu.berkeley.cs.scads.piql.modeling.QueryDescription, _2: Int)(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int)" class="delimiter">(</span><a href="#68917" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">myThoughts</a>, <a href="#69136" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Int" id="69138">actualQuantile</a> = <a href="#69137" title="edu.berkeley.cs.scads.perf.Histogram">actualHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><a href="#69003" title="Double">quantile</a><span class="delimiter">)</span>
        <a href="#69004" title="edu.berkeley.cs.scads.perf.Histogram">actualQuantileHist</a> <span title="(value: Long)Unit">+=</span> <a href="#69138" title="=&gt; Long">actualQuantile</a>

        <span class="keyword">val</span> <a title="Int" id="69139">predictedQuantile</a> = <a href="#68929" title="(i: Int, desiredQuantile: Double)Int">predictOneInterval</a><span class="delimiter">(</span><a href="#69136" title="Int">i</a>, <a href="#69003" title="Double">quantile</a><span class="delimiter">)</span>
        <a href="#69005" title="edu.berkeley.cs.scads.perf.Histogram">predictedQuantileHist</a> <span title="(value: Long)Unit">+=</span> <a href="#69139" title="=&gt; Long">predictedQuantile</a>

        <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><a href="#69136" title="Int">i</a>, <a href="#69138" title="Int">actualQuantile</a>, <a href="#69139" title="Int">predictedQuantile</a><span class="delimiter">)</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>

      <span title="(_1: edu.berkeley.cs.scads.perf.Histogram, _2: edu.berkeley.cs.scads.perf.Histogram)(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" class="delimiter">(</span><a href="#69004" title="edu.berkeley.cs.scads.perf.Histogram">actualQuantileHist</a>, <a href="#69005" title="edu.berkeley.cs.scads.perf.Histogram">predictedQuantileHist</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">object</span> <a title="object edu.berkeley.cs.scads.piql.modeling.ScadrModeling.ModelThoughtstream" id="68438">ModelThoughtstream</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#68432" title="object edu.berkeley.cs.scads.piql.modeling.ScadrModeling.ScadrData">ScadrData</a>._
    <span class="keyword">import</span> <a href="TpcwModeling.scala.html#9762" title="object edu.berkeley.cs.scads.piql.modeling.TpcwModeling">TpcwModeling</a>.<a href="TpcwModeling.scala.html#69206" title="object edu.berkeley.cs.scads.piql.modeling.TpcwModeling.Util">Util</a>._
    
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryDescription" id="69185">thoughtstream</a> = <a href="../collection/QueryRunnerTask.scala.html#37849" title="(queryName: String, parameters: Seq[Int], resultCardinality: Int)edu.berkeley.cs.scads.piql.modeling.QueryDescription">QueryDescription</a><span class="delimiter">(</span><span title="java.lang.String(&quot;thoughtstream&quot;)" class="string">&quot;thoughtstream&quot;</span>, <span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><span title="Int(50)" class="int">50</span>, <span title="Int(10)" class="int">10</span><span class="delimiter">)</span>, <span title="Int(10)" class="int">10</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="69187">thoughtstreamHist</a> = <a href="#68459" title="(key: edu.berkeley.cs.scads.piql.modeling.QueryDescription)edu.berkeley.cs.scads.perf.Histogram">histogramsScadr</a><span class="delimiter">(</span><a href="#69185" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">thoughtstream</a><span class="delimiter">)</span>
    
    <span class="comment">//scala&gt; res1.thoughtstream.physicalPlan  </span>
    <span class="comment">//res5: edu.berkeley.cs.scads.piql.QueryPlan = LocalStopAfter(ParameterLimit(1,10000),</span>
    <span class="comment">//                                             IndexMergeJoin(&lt;Namespace: thoughts&gt;,ArrayBuffer(AttributeValue(0,1)),List(AttributeValue(1,1)),ParameterLimit(1,10000),false,</span>
    <span class="comment">//                                             IndexScan(&lt;Namespace: subscriptions&gt;,ArrayBuffer(ParameterValue(0)),FixedLimit(10000),true)))</span>
    
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryDescription" id="69189">indexMergeJoinThoughts</a> = <a href="../collection/QueryRunnerTask.scala.html#37849" title="(queryName: String, parameters: Seq[Int], resultCardinality: Int)edu.berkeley.cs.scads.piql.modeling.QueryDescription">QueryDescription</a><span class="delimiter">(</span><span title="java.lang.String(&quot;indexMergeJoinThoughts&quot;)" class="string">&quot;indexMergeJoinThoughts&quot;</span>, <span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><span title="Int(50)" class="int">50</span>, <span title="Int(10)" class="int">10</span><span class="delimiter">)</span>, <span title="Int(10)" class="int">10</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]" id="69191">indexMergeJoinThoughtsHist</a> = <a href="#68459" title="(key: edu.berkeley.cs.scads.piql.modeling.QueryDescription)edu.berkeley.cs.scads.perf.Histogram">histogramsScadr</a><span class="delimiter">(</span><a href="#69189" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">indexMergeJoinThoughts</a><span class="delimiter">)</span>.<span title="=&gt; scala.collection.mutable.ArrayBuffer[Long]">buckets</span>.<span title="(f: Long =&gt; scala.math.BigInt)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[Long],scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]])scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer.Coll,scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]]" class="delimiter">(</span><span title="(l: Long)scala.math.BigInt">BigInt</span><span class="delimiter">(</span><a href="#69300" title="Long">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryDescription" id="69193">indexScanSubscriptions</a> = <a href="../collection/QueryRunnerTask.scala.html#37849" title="(queryName: String, parameters: Seq[Int], resultCardinality: Int)edu.berkeley.cs.scads.piql.modeling.QueryDescription">QueryDescription</a><span class="delimiter">(</span><span title="java.lang.String(&quot;indexScanSubscriptions&quot;)" class="string">&quot;indexScanSubscriptions&quot;</span>, <span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><span title="Int(50)" class="int">50</span><span class="delimiter">)</span>, <span title="Int(50)" class="int">50</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]" id="69195">indexScanSubscriptionsHist</a> = <a href="#68459" title="(key: edu.berkeley.cs.scads.piql.modeling.QueryDescription)edu.berkeley.cs.scads.perf.Histogram">histogramsScadr</a><span class="delimiter">(</span><a href="#69193" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">indexScanSubscriptions</a><span class="delimiter">)</span>.<span title="=&gt; scala.collection.mutable.ArrayBuffer[Long]">buckets</span>.<span title="(f: Long =&gt; scala.math.BigInt)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[Long],scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]])scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer.Coll,scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]]" class="delimiter">(</span><span title="(l: Long)scala.math.BigInt">BigInt</span><span class="delimiter">(</span><a href="#69818" title="Long">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    
    <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.ArrayBuffer[BigInt]" id="69197">predictHist</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[BigInt]" id="69868">res</a> = <a href="TpcwModeling.scala.html#69232" title="(hist1: scala.collection.mutable.ArrayBuffer[BigInt], hist2: scala.collection.mutable.ArrayBuffer[BigInt])scala.collection.mutable.ArrayBuffer[BigInt]">convolve</a><span class="delimiter">(</span><a href="#69195" title="=&gt; scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">indexScanSubscriptionsHist</a>, <a href="#69191" title="=&gt; scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">indexMergeJoinThoughtsHist</a><span class="delimiter">)</span>
      <a href="#69868" title="scala.collection.mutable.ArrayBuffer[BigInt]">res</a>
    <span class="delimiter">}</span>
    
    <span class="keyword">val</span> <a title="Int" id="69198">actual99th</a> = <a href="#69187" title="=&gt; edu.berkeley.cs.scads.perf.Histogram">thoughtstreamHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="69200">predicted99th</a> = <a href="TpcwModeling.scala.html#69235" title="(hist: scala.collection.mutable.ArrayBuffer[BigInt], quantile: Double)Int">quantile</a><span class="delimiter">(</span><a href="#69197" title="=&gt; scala.collection.mutable.ArrayBuffer[BigInt]">predictHist</a>, <span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>
    
    <span class="keyword">def</span> <a title="(i: Int, desiredQuantile: Double)Int" id="69202">predictOneInterval</a><span class="delimiter">(</span><a title="Int" id="69872">i</a>: <span title="Int">Int</span>, <a title="Double" id="69873">desiredQuantile</a>: <span title="Double">Double</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]" id="69875">indexScanSubscriptionsHist</a> = <a href="#68461" title="(key: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int))edu.berkeley.cs.scads.perf.Histogram">perIterationHistograms</a><span class="delimiter">(</span><span title="(_1: edu.berkeley.cs.scads.piql.modeling.QueryDescription, _2: Int)(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int)" class="delimiter">(</span><a href="#69193" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">indexScanSubscriptions</a>, <a href="#69872" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; scala.collection.mutable.ArrayBuffer[Long]">buckets</span>.<span title="(f: Long =&gt; scala.math.BigInt)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[Long],scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]])scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer.Coll,scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]]" class="delimiter">(</span><span title="(l: Long)scala.math.BigInt">BigInt</span><span class="delimiter">(</span><a href="#69918" title="Long">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]" id="69876">indexMergeJoinThoughtsHist</a> = <a href="#68461" title="(key: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int))edu.berkeley.cs.scads.perf.Histogram">perIterationHistograms</a><span class="delimiter">(</span><span title="(_1: edu.berkeley.cs.scads.piql.modeling.QueryDescription, _2: Int)(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int)" class="delimiter">(</span><a href="#69189" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">indexMergeJoinThoughts</a>, <a href="#69872" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; scala.collection.mutable.ArrayBuffer[Long]">buckets</span>.<span title="(f: Long =&gt; scala.math.BigInt)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[Long],scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]])scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer.Coll,scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]]" class="delimiter">(</span><span title="(l: Long)scala.math.BigInt">BigInt</span><span class="delimiter">(</span><a href="#70002" title="Long">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
      
      <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[BigInt]" id="69877">res</a> = <a href="TpcwModeling.scala.html#69232" title="(hist1: scala.collection.mutable.ArrayBuffer[BigInt], hist2: scala.collection.mutable.ArrayBuffer[BigInt])scala.collection.mutable.ArrayBuffer[BigInt]">convolve</a><span class="delimiter">(</span><a href="#69875" title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">indexScanSubscriptionsHist</a>, <a href="#69876" title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">indexMergeJoinThoughtsHist</a><span class="delimiter">)</span>

      <a href="TpcwModeling.scala.html#69235" title="(hist: scala.collection.mutable.ArrayBuffer[BigInt], quantile: Double)Int">quantile</a><span class="delimiter">(</span><a href="#69877" title="scala.collection.mutable.ArrayBuffer[BigInt]">res</a>, <a href="#69873" title="Double">desiredQuantile</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    
    <span class="keyword">def</span> <a title="(quantile: Double)(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" id="69203">getPerIntervalPrediction</a><span class="delimiter">(</span><a title="Double" id="70048">quantile</a>: <span title="Double">Double</span> = <span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>:<span title="(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" class="delimiter">(</span>Histogram, Histogram<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="70049">actualQuantileHist</a> = <span title="(bucketSize: Int, bucketCount: Int)edu.berkeley.cs.scads.perf.Histogram">Histogram</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>,<span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="70050">predictedQuantileHist</a> = <span title="(bucketSize: Int, bucketCount: Int)edu.berkeley.cs.scads.perf.Histogram">Histogram</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>,<span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>
      
      <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;interval, actualQuantile, predictedQuantile&quot;)" class="string">&quot;interval, actualQuantile, predictedQuantile&quot;</span><span class="delimiter">)</span>
      
      <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">2</span> <span title="(end: Int)scala.collection.immutable.Range.Inclusive">to</span> <a href="#68456" title="=&gt; Int">numIntervals</a><span class="delimiter">)</span>.<span title="(f: Int =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a title="Int" id="70181">i</a> =&gt; <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="70182">actualHist</a> = <a href="#68461" title="(key: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int))edu.berkeley.cs.scads.perf.Histogram">perIterationHistograms</a><span class="delimiter">(</span><span title="(_1: edu.berkeley.cs.scads.piql.modeling.QueryDescription, _2: Int)(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int)" class="delimiter">(</span><a href="#69185" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">thoughtstream</a>, <a href="#70181" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Int" id="70183">actualQuantile</a> = <a href="#70182" title="edu.berkeley.cs.scads.perf.Histogram">actualHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><a href="#70048" title="Double">quantile</a><span class="delimiter">)</span>
        <a href="#70049" title="edu.berkeley.cs.scads.perf.Histogram">actualQuantileHist</a> <span title="(value: Long)Unit">+=</span> <a href="#70183" title="=&gt; Long">actualQuantile</a>
        
        <span class="keyword">val</span> <a title="Int" id="70184">predictedQuantile</a> = <a href="#69202" title="(i: Int, desiredQuantile: Double)Int">predictOneInterval</a><span class="delimiter">(</span><a href="#70181" title="Int">i</a>, <a href="#70048" title="Double">quantile</a><span class="delimiter">)</span>
        <a href="#70050" title="edu.berkeley.cs.scads.perf.Histogram">predictedQuantileHist</a> <span title="(value: Long)Unit">+=</span> <a href="#70184" title="=&gt; Long">predictedQuantile</a>
        
        <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><a href="#70181" title="Int">i</a>, <a href="#70183" title="Int">actualQuantile</a>, <a href="#70184" title="Int">predictedQuantile</a><span class="delimiter">)</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
      
      <span title="(_1: edu.berkeley.cs.scads.perf.Histogram, _2: edu.berkeley.cs.scads.perf.Histogram)(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" class="delimiter">(</span><a href="#70049" title="edu.berkeley.cs.scads.perf.Histogram">actualQuantileHist</a>, <a href="#70050" title="edu.berkeley.cs.scads.perf.Histogram">predictedQuantileHist</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    
  <span class="delimiter">}</span>
  
  <span class="keyword">object</span> <a title="object edu.berkeley.cs.scads.piql.modeling.ScadrModeling.ModelUsersFollowedBy" id="68440">ModelUsersFollowedBy</a> <span title="ScalaObject" class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#68432" title="object edu.berkeley.cs.scads.piql.modeling.ScadrModeling.ScadrData">ScadrData</a>._
    <span class="keyword">import</span> <a href="TpcwModeling.scala.html#9762" title="object edu.berkeley.cs.scads.piql.modeling.TpcwModeling">TpcwModeling</a>.<a href="TpcwModeling.scala.html#69206" title="object edu.berkeley.cs.scads.piql.modeling.TpcwModeling.Util">Util</a>._
    
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryDescription" id="70230">usersFollowedBy</a> = <a href="../collection/QueryRunnerTask.scala.html#37849" title="(queryName: String, parameters: Seq[Int], resultCardinality: Int)edu.berkeley.cs.scads.piql.modeling.QueryDescription">QueryDescription</a><span class="delimiter">(</span><span title="java.lang.String(&quot;usersFollowedBy&quot;)" class="string">&quot;usersFollowedBy&quot;</span>, <span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><span title="Int(10)" class="int">10</span><span class="delimiter">)</span>, <span title="Int(10)" class="int">10</span><span class="delimiter">)</span> <span class="comment">// TODO:  choose cardinality here</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="70232">usersFollowedByHist</a> = <a href="#68459" title="(key: edu.berkeley.cs.scads.piql.modeling.QueryDescription)edu.berkeley.cs.scads.perf.Histogram">histogramsScadr</a><span class="delimiter">(</span><a href="#70230" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">usersFollowedBy</a><span class="delimiter">)</span>
    
    <span class="comment">//scala&gt; res1.usersFollowedBy.physicalPlan</span>
    <span class="comment">//res4: edu.berkeley.cs.scads.piql.QueryPlan = IndexLookupJoin(&lt;Namespace: users&gt;,ArrayBuffer(AttributeValue(0,1)),</span>
    <span class="comment">//                                             LocalStopAfter(ParameterLimit(1,10000),</span>
    <span class="comment">//                                             IndexScan(&lt;Namespace: subscriptions&gt;,ArrayBuffer(ParameterValue(0)),ParameterLimit(1,10000),true)))</span>
    
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryDescription" id="70234">indexLookupJoinUsers</a> = <a href="../collection/QueryRunnerTask.scala.html#37849" title="(queryName: String, parameters: Seq[Int], resultCardinality: Int)edu.berkeley.cs.scads.piql.modeling.QueryDescription">QueryDescription</a><span class="delimiter">(</span><span title="java.lang.String(&quot;indexLookupJoinUsers&quot;)" class="string">&quot;indexLookupJoinUsers&quot;</span>, <span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><span title="Int(10)" class="int">10</span><span class="delimiter">)</span>, <span title="Int(10)" class="int">10</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]" id="70236">indexLookupJoinUsersHist</a> = <a href="#68459" title="(key: edu.berkeley.cs.scads.piql.modeling.QueryDescription)edu.berkeley.cs.scads.perf.Histogram">histogramsScadr</a><span class="delimiter">(</span><a href="#70234" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">indexLookupJoinUsers</a><span class="delimiter">)</span>.<span title="=&gt; scala.collection.mutable.ArrayBuffer[Long]">buckets</span>.<span title="(f: Long =&gt; scala.math.BigInt)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[Long],scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]])scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer.Coll,scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]]" class="delimiter">(</span><span title="(l: Long)scala.math.BigInt">BigInt</span><span class="delimiter">(</span><a href="#70313" title="Long">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.modeling.QueryDescription" id="70238">indexScanSubscriptions</a> = <a href="../collection/QueryRunnerTask.scala.html#37849" title="(queryName: String, parameters: Seq[Int], resultCardinality: Int)edu.berkeley.cs.scads.piql.modeling.QueryDescription">QueryDescription</a><span class="delimiter">(</span><span title="java.lang.String(&quot;indexScanSubscriptions&quot;)" class="string">&quot;indexScanSubscriptions&quot;</span>, <span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><span title="Int(10)" class="int">10</span><span class="delimiter">)</span>, <span title="Int(10)" class="int">10</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]" id="70240">indexScanSubscriptionsHist</a> = <a href="#68459" title="(key: edu.berkeley.cs.scads.piql.modeling.QueryDescription)edu.berkeley.cs.scads.perf.Histogram">histogramsScadr</a><span class="delimiter">(</span><a href="#70238" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">indexScanSubscriptions</a><span class="delimiter">)</span>.<span title="=&gt; scala.collection.mutable.ArrayBuffer[Long]">buckets</span>.<span title="(f: Long =&gt; scala.math.BigInt)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[Long],scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]])scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer.Coll,scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]]" class="delimiter">(</span><span title="(l: Long)scala.math.BigInt">BigInt</span><span class="delimiter">(</span><a href="#70398" title="Long">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    
    <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.ArrayBuffer[BigInt]" id="70242">predictHist</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[BigInt]" id="70445">res</a> = <a href="TpcwModeling.scala.html#69232" title="(hist1: scala.collection.mutable.ArrayBuffer[BigInt], hist2: scala.collection.mutable.ArrayBuffer[BigInt])scala.collection.mutable.ArrayBuffer[BigInt]">convolve</a><span class="delimiter">(</span><a href="#70240" title="=&gt; scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">indexScanSubscriptionsHist</a>, <a href="#70236" title="=&gt; scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">indexLookupJoinUsersHist</a><span class="delimiter">)</span>
      <a href="#70445" title="scala.collection.mutable.ArrayBuffer[BigInt]">res</a>
    <span class="delimiter">}</span>
    
    <span class="keyword">val</span> <a title="Int" id="70243">actual99th</a> = <a href="#70232" title="=&gt; edu.berkeley.cs.scads.perf.Histogram">usersFollowedByHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="70245">predicted99th</a> = <a href="TpcwModeling.scala.html#69235" title="(hist: scala.collection.mutable.ArrayBuffer[BigInt], quantile: Double)Int">quantile</a><span class="delimiter">(</span><a href="#70242" title="=&gt; scala.collection.mutable.ArrayBuffer[BigInt]">predictHist</a>, <span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(i: Int, desiredQuantile: Double)Int" id="70247">predictOneInterval</a><span class="delimiter">(</span><a title="Int" id="70446">i</a>: <span title="Int">Int</span>, <a title="Double" id="70447">desiredQuantile</a>: <span title="Double">Double</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]" id="70449">indexScanSubscriptionsHist</a> = <a href="#68461" title="(key: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int))edu.berkeley.cs.scads.perf.Histogram">perIterationHistograms</a><span class="delimiter">(</span><span title="(_1: edu.berkeley.cs.scads.piql.modeling.QueryDescription, _2: Int)(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int)" class="delimiter">(</span><a href="#70238" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">indexScanSubscriptions</a>, <a href="#70446" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; scala.collection.mutable.ArrayBuffer[Long]">buckets</span>.<span title="(f: Long =&gt; scala.math.BigInt)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[Long],scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]])scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer.Coll,scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]]" class="delimiter">(</span><span title="(l: Long)scala.math.BigInt">BigInt</span><span class="delimiter">(</span><a href="#70492" title="Long">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]" id="70450">indexLookupJoinUsersHist</a> = <a href="#68461" title="(key: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int))edu.berkeley.cs.scads.perf.Histogram">perIterationHistograms</a><span class="delimiter">(</span><span title="(_1: edu.berkeley.cs.scads.piql.modeling.QueryDescription, _2: Int)(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int)" class="delimiter">(</span><a href="#70234" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">indexLookupJoinUsers</a>, <a href="#70446" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; scala.collection.mutable.ArrayBuffer[Long]">buckets</span>.<span title="(f: Long =&gt; scala.math.BigInt)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer[Long],scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]])scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.ArrayBuffer.Coll,scala.math.BigInt,scala.collection.mutable.ArrayBuffer[scala.math.BigInt]]" class="delimiter">(</span><span title="(l: Long)scala.math.BigInt">BigInt</span><span class="delimiter">(</span><a href="#70576" title="Long">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
      
      <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[BigInt]" id="70451">res</a> = <a href="TpcwModeling.scala.html#69232" title="(hist1: scala.collection.mutable.ArrayBuffer[BigInt], hist2: scala.collection.mutable.ArrayBuffer[BigInt])scala.collection.mutable.ArrayBuffer[BigInt]">convolve</a><span class="delimiter">(</span><a href="#70449" title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">indexScanSubscriptionsHist</a>, <a href="#70450" title="scala.collection.mutable.ArrayBuffer[scala.math.BigInt]">indexLookupJoinUsersHist</a><span class="delimiter">)</span>

      <a href="TpcwModeling.scala.html#69235" title="(hist: scala.collection.mutable.ArrayBuffer[BigInt], quantile: Double)Int">quantile</a><span class="delimiter">(</span><a href="#70451" title="scala.collection.mutable.ArrayBuffer[BigInt]">res</a>, <a href="#70447" title="Double">desiredQuantile</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    
    <span class="keyword">def</span> <a title="(quantile: Double)(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" id="70248">getPerIntervalPrediction</a><span class="delimiter">(</span><a title="Double" id="70622">quantile</a>: <span title="Double">Double</span> = <span title="Double(0.99)" class="double">0.99</span><span class="delimiter">)</span>:<span title="(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" class="delimiter">(</span>Histogram, Histogram<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="70623">actualQuantileHist</a> = <span title="(bucketSize: Int, bucketCount: Int)edu.berkeley.cs.scads.perf.Histogram">Histogram</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>,<span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="70624">predictedQuantileHist</a> = <span title="(bucketSize: Int, bucketCount: Int)edu.berkeley.cs.scads.perf.Histogram">Histogram</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>,<span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>
      
      <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="java.lang.String(&quot;interval, actualQuantile, predictedQuantile&quot;)" class="string">&quot;interval, actualQuantile, predictedQuantile&quot;</span><span class="delimiter">)</span>
      
      <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">2</span> <span title="(end: Int)scala.collection.immutable.Range.Inclusive">to</span> <a href="#68456" title="=&gt; Int">numIntervals</a><span class="delimiter">)</span>.<span title="(f: Int =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a title="Int" id="70755">i</a> =&gt; <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="70756">actualHist</a> = <a href="#68461" title="(key: (edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int))edu.berkeley.cs.scads.perf.Histogram">perIterationHistograms</a><span class="delimiter">(</span><span title="(_1: edu.berkeley.cs.scads.piql.modeling.QueryDescription, _2: Int)(edu.berkeley.cs.scads.piql.modeling.QueryDescription, Int)" class="delimiter">(</span><a href="#70230" title="=&gt; edu.berkeley.cs.scads.piql.modeling.QueryDescription">usersFollowedBy</a>, <a href="#70755" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Int" id="70757">actualQuantile</a> = <a href="#70756" title="edu.berkeley.cs.scads.perf.Histogram">actualHist</a>.<span title="(fraction: Double)Int">quantile</span><span class="delimiter">(</span><a href="#70622" title="Double">quantile</a><span class="delimiter">)</span>
        <a href="#70623" title="edu.berkeley.cs.scads.perf.Histogram">actualQuantileHist</a> <span title="(value: Long)Unit">+=</span> <a href="#70757" title="=&gt; Long">actualQuantile</a>
        
        <span class="keyword">val</span> <a title="Int" id="70758">predictedQuantile</a> = <a href="#70247" title="(i: Int, desiredQuantile: Double)Int">predictOneInterval</a><span class="delimiter">(</span><a href="#70755" title="Int">i</a>, <a href="#70622" title="Double">quantile</a><span class="delimiter">)</span>
        <a href="#70624" title="edu.berkeley.cs.scads.perf.Histogram">predictedQuantileHist</a> <span title="(value: Long)Unit">+=</span> <a href="#70758" title="=&gt; Long">predictedQuantile</a>
        
        <span title="(x: Any)Unit">println</span><span class="delimiter">(</span><span title="(xs: Int*)List[Int]">List</span><span class="delimiter">(</span><a href="#70755" title="Int">i</a>, <a href="#70757" title="Int">actualQuantile</a>, <a href="#70758" title="Int">predictedQuantile</a><span class="delimiter">)</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
      
      <span title="(_1: edu.berkeley.cs.scads.perf.Histogram, _2: edu.berkeley.cs.scads.perf.Histogram)(edu.berkeley.cs.scads.perf.Histogram, edu.berkeley.cs.scads.perf.Histogram)" class="delimiter">(</span><a href="#70623" title="edu.berkeley.cs.scads.perf.Histogram">actualQuantileHist</a>, <a href="#70624" title="edu.berkeley.cs.scads.perf.Histogram">predictedQuantileHist</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
<span class="delimiter">}</span>
        </pre>
    </body>
</html>