<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>util/TraceS3Cache.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> edu.berkeley.cs
<span class="keyword">package</span> scads
<span class="keyword">package</span> piql
<span class="keyword">package</span> modeling

<span class="keyword">import</span> deploylib._
<span class="keyword">import</span> deploylib.ec2._
<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> net.lag.logging.Logger
<span class="keyword">import</span> org.jets3t.service.model.S3Object
<span class="keyword">import</span> org.jets3t.service.impl.rest.httpclient.RestS3Service
<span class="keyword">import</span> org.jets3t.service.security.AWSCredentials
<span class="keyword">import</span> org.jets3t.service.acl.AccessControlList

<span class="keyword">object</span> <a title="object edu.berkeley.cs.scads.piql.modeling.TraceS3Cache" id="9839">TraceS3Cache</a> <span title="ScalaObject" class="keyword">extends</span> <span title="deploylib.ec2.AWSConnection">AWSConnection</span> <span class="delimiter">{</span>
  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="net.lag.logging.Logger" id="43397">logger</a> = <span title="()net.lag.logging.Logger">Logger</span><span class="delimiter">(</span><span class="delimiter">)</span>
   <span class="keyword">protected</span> <span class="keyword">val</span> <a title="org.jets3t.service.security.AWSCredentials" id="43399">s3Credentials</a> = <span title="org.jets3t.service.security.AWSCredentials" class="keyword">new</span> <span title="org.jets3t.service.security.AWSCredentials">AWSCredentials</span><span class="delimiter">(</span><span title="=&gt; java.lang.String">accessKeyId</span>, <span title="=&gt; java.lang.String">secretAccessKey</span><span class="delimiter">)</span> <span class="comment">// your credentials here</span>
  <span class="keyword">val</span> <a title="org.jets3t.service.impl.rest.httpclient.RestS3Service" id="43401">s3Service</a> = <span title="org.jets3t.service.impl.rest.httpclient.RestS3Service" class="keyword">new</span> <span title="org.jets3t.service.impl.rest.httpclient.RestS3Service">RestS3Service</span><span class="delimiter">(</span><a href="#43399" title="=&gt; org.jets3t.service.security.AWSCredentials">s3Credentials</a><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="43403">bucketName</a> = <span title="java.lang.String(&quot;piql-modeling-marmbrus&quot;)" class="string">&quot;piql-modeling-marmbrus&quot;</span> <span class="comment">// make this your bucket name</span>
  <span class="keyword">val</span> <a title="org.jets3t.service.model.S3Bucket" id="43405">bucket</a> = <a href="#43401" title="=&gt; org.jets3t.service.impl.rest.httpclient.RestS3Service">s3Service</a>.<span title="(x$1: java.lang.String)org.jets3t.service.model.S3Bucket">createBucket</span><span class="delimiter">(</span><a href="#43403" title="=&gt; java.lang.String">bucketName</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(file: java.io.File, prefix: String, suffix: String)Unit" id="43407">uploadFile</a><span class="delimiter">(</span><a title="java.io.File" id="43408">file</a>: <span title="java.io.File">File</span>, <a title="String" id="43412">prefix</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <a title="String" id="43413">suffix</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.jets3t.service.model.S3Object" id="82223">obj</a> = <span title="(x$1: java.io.File)org.jets3t.service.model.S3Object" class="keyword">new</span> <span title="org.jets3t.service.model.S3Object">S3Object</span><span class="delimiter">(</span><a href="#43408" title="java.io.File">file</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="82224">key</a> = <a href="#43412" title="String">prefix</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#43408" title="java.io.File">file</a>.<span title="()java.lang.String">getName</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;-&quot;)" class="string">&quot;-&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#43413" title="String">suffix</a>

    <a href="#43397" title="=&gt; net.lag.logging.Logger">logger</a>.<span title="(msg: String, items: Any*)Unit">info</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Uploading file %s to s3://%s/%s&quot;)" class="string">&quot;Uploading file %s to s3://%s/%s&quot;</span>, <a href="#43408" title="java.io.File">file</a>, <a href="#43403" title="=&gt; java.lang.String">bucketName</a>, <a href="#82224" title="java.lang.String">key</a><span class="delimiter">)</span> 
    <a href="#82223" title="org.jets3t.service.model.S3Object">obj</a>.<span title="(x$1: java.lang.String)Unit">setKey</span><span class="delimiter">(</span><a href="#82224" title="java.lang.String">key</a><span class="delimiter">)</span>
    <a href="#82223" title="org.jets3t.service.model.S3Object">obj</a>.<span title="(x$1: org.jets3t.service.acl.AccessControlList)Unit">setAcl</span><span class="delimiter">(</span><span title="object org.jets3t.service.acl.AccessControlList">AccessControlList</span>.<span title="org.jets3t.service.acl.AccessControlList">REST_CANNED_PUBLIC_READ</span><span class="delimiter">)</span>
    <a href="#43401" title="=&gt; org.jets3t.service.impl.rest.httpclient.RestS3Service">s3Service</a>.<span title="(x$1: org.jets3t.service.model.S3Bucket, x$2: org.jets3t.service.model.S3Object)org.jets3t.service.model.S3Object">putObject</span><span title="Unit" class="delimiter">(</span><a href="#43405" title="=&gt; org.jets3t.service.model.S3Bucket">bucket</a>, <a href="#82223" title="org.jets3t.service.model.S3Object">obj</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>