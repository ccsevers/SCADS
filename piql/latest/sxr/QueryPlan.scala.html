<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>QueryPlan.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> edu.berkeley.cs.scads.piql

<span class="keyword">import</span> org.apache.avro.generic.<span class="delimiter">{</span>GenericData, IndexedRecord<span class="delimiter">}</span>

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Value extends java.lang.Object with ScalaObject" id="9577">Value</a> <a href="#9577" title="ScalaObject" class="delimiter">{</a>
  <span class="keyword">def</span> <a title="(value: edu.berkeley.cs.scads.piql.Value)edu.berkeley.cs.scads.piql.EqualityPredicate" id="24973">===</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.piql.Value" id="50491">value</a>: <a href="#9577" title="edu.berkeley.cs.scads.piql.Value">Value</a><span class="delimiter">)</span> = <a href="#51493" title="(v1: edu.berkeley.cs.scads.piql.Value, v2: edu.berkeley.cs.scads.piql.Value)edu.berkeley.cs.scads.piql.EqualityPredicate">EqualityPredicate</a><span class="delimiter">(</span><a href="#9577" title="edu.berkeley.cs.scads.piql.Value" class="keyword">this</a>, <a href="#50491" title="edu.berkeley.cs.scads.piql.Value">value</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(value: edu.berkeley.cs.scads.piql.Value)edu.berkeley.cs.scads.piql.LikePredicate" id="24974">like</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.piql.Value" id="50496">value</a>: <a href="#9577" title="edu.berkeley.cs.scads.piql.Value">Value</a><span class="delimiter">)</span> = <a href="#51489" title="(v1: edu.berkeley.cs.scads.piql.Value, v2: edu.berkeley.cs.scads.piql.Value)edu.berkeley.cs.scads.piql.LikePredicate">LikePredicate</a><span class="delimiter">(</span><a href="#9577" title="edu.berkeley.cs.scads.piql.Value" class="keyword">this</a>, <a href="#50496" title="edu.berkeley.cs.scads.piql.Value">value</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/* Fixed Values.  i.e. Values that arent depended on a specific tuple */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class FixedValue extends edu.berkeley.cs.scads.piql.Value with ScalaObject" id="9578">FixedValue</a> <a href="#9578" title="ScalaObject" class="keyword">extends</a> <a href="#9577" title="edu.berkeley.cs.scads.piql.Value">Value</a>
case <span class="keyword">class</span> <a title="class ConstantValue extends edu.berkeley.cs.scads.piql.FixedValue with ScalaObject with Product with Serializable" id="51517">ConstantValue</a><a href="#51517" title="ScalaObject" class="delimiter">(</a><a title="Any" id="24982">v</a>: <span title="Any">Any</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9578" title="edu.berkeley.cs.scads.piql.FixedValue">FixedValue</a>
case <span class="keyword">class</span> <a title="class ParameterValue extends edu.berkeley.cs.scads.piql.FixedValue with ScalaObject with Product with Serializable" id="51513">ParameterValue</a><a href="#51513" title="ScalaObject" class="delimiter">(</a><a title="Int" id="25001">ordinal</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9578" title="edu.berkeley.cs.scads.piql.FixedValue">FixedValue</a>

<span class="comment">/* Attibute Values */</span>
case <span class="keyword">class</span> <a title="class AttributeValue extends edu.berkeley.cs.scads.piql.Value with ScalaObject with Product with Serializable" id="51509">AttributeValue</a><a href="#51509" title="ScalaObject" class="delimiter">(</a><a title="Int" id="48281">recordPosition</a>: <span title="Int">Int</span>, <a title="Int" id="48282">fieldPosition</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9577" title="edu.berkeley.cs.scads.piql.Value">Value</a>
case <span class="keyword">class</span> <a title="class UnboundAttributeValue extends edu.berkeley.cs.scads.piql.Value with ScalaObject with Product with Serializable" id="51505">UnboundAttributeValue</a><a href="#51505" title="ScalaObject" class="delimiter">(</a><a title="String" id="25032">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9577" title="edu.berkeley.cs.scads.piql.Value">Value</a> <span class="delimiter">{</span>
  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="scala.util.matching.Regex" id="25026">qualifiedAttribute</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;([^\.]+)\.([^\.]+)&quot;&quot;&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>
  <span class="keyword">def</span> <a title="=&gt; Option[String]" id="25028">relationName</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#25032" title="=&gt; String">name</a> <span title="Option[String]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="#25026" title="Some[String]">qualifiedAttribute</a><span class="delimiter">(</span><a title="String" id="50611">r</a>,<a title="String" id="50612">f</a><span class="delimiter">)</span> =&gt; <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#50611" title="String">r</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="None.type">_</span> =&gt; <span title="object None">None</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="=&gt; String" id="25029">unqualifiedName</a>: <span title="String">String</span>  = <a href="#25032" title="=&gt; String">name</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="#25026" title="String">qualifiedAttribute</a><span class="delimiter">(</span><a title="String" id="50617">r</a>,<a title="String" id="50618">f</a><span class="delimiter">)</span> =&gt; <a href="#50618" title="String">f</a>
    <span class="keyword">case</span> <span title="String">_</span> =&gt; <a href="#25032" title="=&gt; String">name</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Limit extends java.lang.Object with ScalaObject" id="9591">Limit</a>
case <span class="keyword">class</span> <a title="class FixedLimit extends edu.berkeley.cs.scads.piql.Limit with ScalaObject with Product with Serializable" id="51501">FixedLimit</a><a href="#51501" title="ScalaObject" class="delimiter">(</a><a title="Int" id="43705">count</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9591" title="edu.berkeley.cs.scads.piql.Limit">Limit</a>
case <span class="keyword">class</span> <a title="class ParameterLimit extends edu.berkeley.cs.scads.piql.Limit with ScalaObject with Product with Serializable" id="51497">ParameterLimit</a><a href="#51497" title="ScalaObject" class="delimiter">(</a><a title="Int" id="43713">ordinal</a>: <span title="Int">Int</span>, <a title="Int" id="43714">max</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9591" title="edu.berkeley.cs.scads.piql.Limit">Limit</a>

<span class="keyword">trait</span> <a title="trait Predicate extends java.lang.Object" id="9598">Predicate</a>
case <span class="keyword">class</span> <a title="class EqualityPredicate extends java.lang.Object with edu.berkeley.cs.scads.piql.Predicate with ScalaObject with Product with Serializable" id="51493">EqualityPredicate</a><a href="#51493" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.Value" id="49086">v1</a>: <a href="#9577" title="edu.berkeley.cs.scads.piql.Value">Value</a>, <a title="edu.berkeley.cs.scads.piql.Value" id="49087">v2</a>: <a href="#9577" title="edu.berkeley.cs.scads.piql.Value">Value</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9598" title="edu.berkeley.cs.scads.piql.Predicate">Predicate</a>
case <span class="keyword">class</span> <a title="class LikePredicate extends java.lang.Object with edu.berkeley.cs.scads.piql.Predicate with ScalaObject with Product with Serializable" id="51489">LikePredicate</a><a href="#51489" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.Value" id="50511">v1</a>: <a href="#9577" title="edu.berkeley.cs.scads.piql.Value">Value</a>, <a title="edu.berkeley.cs.scads.piql.Value" id="50512">v2</a>: <a href="#9577" title="edu.berkeley.cs.scads.piql.Value">Value</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9598" title="edu.berkeley.cs.scads.piql.Predicate">Predicate</a>
case <span class="keyword">class</span> <a title="class InPredicate extends java.lang.Object with edu.berkeley.cs.scads.piql.Predicate with ScalaObject with Product with Serializable" id="51485">InPredicate</a><a href="#51485" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.Value" id="51480">v1</a>: <a href="#9577" title="edu.berkeley.cs.scads.piql.Value">Value</a>, <a title="edu.berkeley.cs.scads.piql.Value" id="51481">v2</a>: <a href="#9577" title="edu.berkeley.cs.scads.piql.Value">Value</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9598" title="edu.berkeley.cs.scads.piql.Predicate">Predicate</a>

<span class="comment">/* Physical Query Plan Nodes */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class QueryPlan extends java.lang.Object with ScalaObject" id="9608">QueryPlan</a>
<a href="#9608" title="edu.berkeley.cs.scads.piql.QueryPlan" class="keyword">abstract</a> <span class="keyword">class</span> <a title="class RemotePlan extends edu.berkeley.cs.scads.piql.QueryPlan with ScalaObject" id="9609">RemotePlan</a> <a href="#9609" title="ScalaObject" class="keyword">extends</a> <a href="#9608" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a> <span class="delimiter">{</span> <span class="keyword">val</span> <a title="=&gt; edu.berkeley.cs.scads.piql.package.Namespace" id="33210">namespace</a>: <a href="package.scala.html#25135" title="edu.berkeley.cs.scads.piql.package.Namespace">Namespace</a> <span class="delimiter">}</span>

case <span class="keyword">class</span> <a title="class IndexLookup extends edu.berkeley.cs.scads.piql.QueryPlan with ScalaObject with Product with Serializable" id="51476">IndexLookup</a><a href="#51476" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.package.Namespace" id="46782">namespace</a>: <a href="package.scala.html#25135" title="edu.berkeley.cs.scads.piql.package.Namespace">Namespace</a>, <a title="edu.berkeley.cs.scads.piql.package.KeyGenerator" id="46783">key</a>: <span title="edu.berkeley.cs.scads.piql.package.KeyGenerator">KeyGenerator</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9608" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a>

case <span class="keyword">class</span> <a title="class IndexScan extends edu.berkeley.cs.scads.piql.RemotePlan with ScalaObject with Product with Serializable" id="51472">IndexScan</a><a href="#51472" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.package.Namespace" id="46875">namespace</a>: <a href="package.scala.html#25135" title="edu.berkeley.cs.scads.piql.package.Namespace">Namespace</a>, <a title="edu.berkeley.cs.scads.piql.package.KeyGenerator" id="46876">keyPrefix</a>: <span title="edu.berkeley.cs.scads.piql.package.KeyGenerator">KeyGenerator</span>, <a title="edu.berkeley.cs.scads.piql.Limit" id="46877">limit</a>: <a href="#9591" title="edu.berkeley.cs.scads.piql.Limit">Limit</a>, <a title="Boolean" id="46878">ascending</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9609" title="edu.berkeley.cs.scads.piql.RemotePlan">RemotePlan</a>
case <span class="keyword">class</span> <a title="class IndexLookupJoin extends edu.berkeley.cs.scads.piql.RemotePlan with ScalaObject with Product with Serializable" id="51468">IndexLookupJoin</a><a href="#51468" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.package.Namespace" id="47420">namespace</a>: <a href="package.scala.html#25135" title="edu.berkeley.cs.scads.piql.package.Namespace">Namespace</a>, <a title="edu.berkeley.cs.scads.piql.package.KeyGenerator" id="47421">key</a>: <span title="edu.berkeley.cs.scads.piql.package.KeyGenerator">KeyGenerator</span>, <a title="edu.berkeley.cs.scads.piql.QueryPlan" id="47422">child</a>: <a href="#9608" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9609" title="edu.berkeley.cs.scads.piql.RemotePlan">RemotePlan</a>
case <span class="keyword">class</span> <a title="class IndexScanJoin extends edu.berkeley.cs.scads.piql.RemotePlan with ScalaObject with Product with Serializable" id="51464">IndexScanJoin</a><a href="#51464" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.package.Namespace" id="47759">namespace</a>: <a href="package.scala.html#25135" title="edu.berkeley.cs.scads.piql.package.Namespace">Namespace</a>, <a title="edu.berkeley.cs.scads.piql.package.KeyGenerator" id="47760">keyPrefix</a>: <span title="edu.berkeley.cs.scads.piql.package.KeyGenerator">KeyGenerator</span>, <a title="edu.berkeley.cs.scads.piql.Limit" id="47761">limit</a>: <a href="#9591" title="edu.berkeley.cs.scads.piql.Limit">Limit</a>, <a title="Boolean" id="47762">ascending</a>: <span title="Boolean">Boolean</span>, <a title="edu.berkeley.cs.scads.piql.QueryPlan" id="47763">child</a>: <a href="#9608" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9609" title="edu.berkeley.cs.scads.piql.RemotePlan">RemotePlan</a>
case <span class="keyword">class</span> <a title="class IndexMergeJoin extends edu.berkeley.cs.scads.piql.RemotePlan with ScalaObject with Product with Serializable" id="51460">IndexMergeJoin</a><a href="#51460" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.package.Namespace" id="47605">namespace</a>: <a href="package.scala.html#25135" title="edu.berkeley.cs.scads.piql.package.Namespace">Namespace</a>, <a title="edu.berkeley.cs.scads.piql.package.KeyGenerator" id="47606">keyPrefix</a>: <span title="edu.berkeley.cs.scads.piql.package.KeyGenerator">KeyGenerator</span>, <a title="Seq[edu.berkeley.cs.scads.piql.Value]" id="47607">sortFields</a>: <span title="Seq[edu.berkeley.cs.scads.piql.Value]">Seq</span><span class="delimiter">[</span>Value<span class="delimiter">]</span>, <a title="edu.berkeley.cs.scads.piql.Limit" id="47608">limit</a>: <a href="#9591" title="edu.berkeley.cs.scads.piql.Limit">Limit</a>, <a title="Boolean" id="47609">ascending</a>: <span title="Boolean">Boolean</span>, <a title="edu.berkeley.cs.scads.piql.QueryPlan" id="47610">child</a>: <a href="#9608" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9609" title="edu.berkeley.cs.scads.piql.RemotePlan">RemotePlan</a>

case <span class="keyword">class</span> <a title="class LocalSelection extends edu.berkeley.cs.scads.piql.QueryPlan with ScalaObject with Product with Serializable" id="51456">LocalSelection</a><a href="#51456" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.Predicate" id="47816">predicate</a>: <a href="#9598" title="edu.berkeley.cs.scads.piql.Predicate">Predicate</a>, <a title="edu.berkeley.cs.scads.piql.QueryPlan" id="47817">child</a>: <a href="#9608" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9608" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a>
case <span class="keyword">class</span> <a title="class LocalSort extends edu.berkeley.cs.scads.piql.QueryPlan with ScalaObject with Product with Serializable" id="51452">LocalSort</a><a href="#51452" title="ScalaObject" class="delimiter">(</a><a title="Seq[edu.berkeley.cs.scads.piql.Value]" id="51445">sortFields</a>: <span title="Seq[edu.berkeley.cs.scads.piql.Value]">Seq</span><span class="delimiter">[</span>Value<span class="delimiter">]</span>, <a title="Boolean" id="51446">ascending</a>: <span title="Boolean">Boolean</span>, <a title="edu.berkeley.cs.scads.piql.QueryPlan" id="51447">child</a>: <a href="#9608" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9608" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a>
case <span class="keyword">class</span> <a title="class LocalStopAfter extends edu.berkeley.cs.scads.piql.QueryPlan with ScalaObject with Product with Serializable" id="51441">LocalStopAfter</a><a href="#51441" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.Limit" id="46888">count</a>: <a href="#9591" title="edu.berkeley.cs.scads.piql.Limit">Limit</a>, <a title="edu.berkeley.cs.scads.piql.QueryPlan" id="46889">child</a>: <a href="#9608" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9608" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a>

<span class="comment">/* Testing iterator that simply emits tuples from an iterator that is passed to the query as a parameter */</span>
case <span class="keyword">class</span> <a title="class LocalIterator extends edu.berkeley.cs.scads.piql.QueryPlan with ScalaObject with Product with Serializable" id="51437">LocalIterator</a><a href="#51437" title="ScalaObject" class="delimiter">(</a><a title="Int" id="51429">parameterOrdinal</a>: <span title="Int">Int</span>, <a title="Boolean" id="51434">wrap</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9608" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a>


case <span class="keyword">class</span> <a title="class Union extends edu.berkeley.cs.scads.piql.QueryPlan with ScalaObject with Product with Serializable" id="51423">Union</a><a href="#51423" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.QueryPlan" id="51416">child1</a> : <a href="#9608" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a>, <a title="edu.berkeley.cs.scads.piql.QueryPlan" id="51417">child2</a> : <a href="#9608" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a>, <a title="edu.berkeley.cs.scads.piql.AttributeValue" id="51418">eqField</a> : <a href="#51509" title="edu.berkeley.cs.scads.piql.AttributeValue">AttributeValue</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9608" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a>

        </pre>
    </body>
</html>