<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>QueryPlan.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> edu.berkeley.cs.scads.piql

<span class="keyword">import</span> org.apache.avro.generic.<span class="delimiter">{</span>GenericData, IndexedRecord<span class="delimiter">}</span>

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Value extends java.lang.Object with ScalaObject" id="9579">Value</a> <a href="#9579" title="ScalaObject" class="delimiter">{</a>
  <span class="keyword">def</span> <a title="(value: edu.berkeley.cs.scads.piql.Value)edu.berkeley.cs.scads.piql.EqualityPredicate" id="24977">===</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.piql.Value" id="50495">value</a>: <a href="#9579" title="edu.berkeley.cs.scads.piql.Value">Value</a><span class="delimiter">)</span> = <a href="#51497" title="(v1: edu.berkeley.cs.scads.piql.Value, v2: edu.berkeley.cs.scads.piql.Value)edu.berkeley.cs.scads.piql.EqualityPredicate">EqualityPredicate</a><span class="delimiter">(</span><a href="#9579" title="edu.berkeley.cs.scads.piql.Value" class="keyword">this</a>, <a href="#50495" title="edu.berkeley.cs.scads.piql.Value">value</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(value: edu.berkeley.cs.scads.piql.Value)edu.berkeley.cs.scads.piql.LikePredicate" id="24978">like</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.piql.Value" id="50500">value</a>: <a href="#9579" title="edu.berkeley.cs.scads.piql.Value">Value</a><span class="delimiter">)</span> = <a href="#51493" title="(v1: edu.berkeley.cs.scads.piql.Value, v2: edu.berkeley.cs.scads.piql.Value)edu.berkeley.cs.scads.piql.LikePredicate">LikePredicate</a><span class="delimiter">(</span><a href="#9579" title="edu.berkeley.cs.scads.piql.Value" class="keyword">this</a>, <a href="#50500" title="edu.berkeley.cs.scads.piql.Value">value</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="comment">/* Fixed Values.  i.e. Values that arent depended on a specific tuple */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class FixedValue extends edu.berkeley.cs.scads.piql.Value with ScalaObject" id="9580">FixedValue</a> <a href="#9580" title="ScalaObject" class="keyword">extends</a> <a href="#9579" title="edu.berkeley.cs.scads.piql.Value">Value</a>
case <span class="keyword">class</span> <a title="class ConstantValue extends edu.berkeley.cs.scads.piql.FixedValue with ScalaObject with Product with Serializable" id="51521">ConstantValue</a><a href="#51521" title="ScalaObject" class="delimiter">(</a><a title="Any" id="24986">v</a>: <span title="Any">Any</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9580" title="edu.berkeley.cs.scads.piql.FixedValue">FixedValue</a>
case <span class="keyword">class</span> <a title="class ParameterValue extends edu.berkeley.cs.scads.piql.FixedValue with ScalaObject with Product with Serializable" id="51517">ParameterValue</a><a href="#51517" title="ScalaObject" class="delimiter">(</a><a title="Int" id="25005">ordinal</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9580" title="edu.berkeley.cs.scads.piql.FixedValue">FixedValue</a>

<span class="comment">/* Attibute Values */</span>
case <span class="keyword">class</span> <a title="class AttributeValue extends edu.berkeley.cs.scads.piql.Value with ScalaObject with Product with Serializable" id="51513">AttributeValue</a><a href="#51513" title="ScalaObject" class="delimiter">(</a><a title="Int" id="48285">recordPosition</a>: <span title="Int">Int</span>, <a title="Int" id="48286">fieldPosition</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9579" title="edu.berkeley.cs.scads.piql.Value">Value</a>
case <span class="keyword">class</span> <a title="class UnboundAttributeValue extends edu.berkeley.cs.scads.piql.Value with ScalaObject with Product with Serializable" id="51509">UnboundAttributeValue</a><a href="#51509" title="ScalaObject" class="delimiter">(</a><a title="String" id="25036">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9579" title="edu.berkeley.cs.scads.piql.Value">Value</a> <span class="delimiter">{</span>
  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="scala.util.matching.Regex" id="25030">qualifiedAttribute</a> = <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;([^\.]+)\.([^\.]+)&quot;&quot;&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>
  <span class="keyword">def</span> <a title="=&gt; Option[String]" id="25032">relationName</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#25036" title="=&gt; String">name</a> <span title="Option[String]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="#25030" title="Some[String]">qualifiedAttribute</a><span class="delimiter">(</span><a title="String" id="50615">r</a>,<a title="String" id="50616">f</a><span class="delimiter">)</span> =&gt; <span title="(x: String)Some[String]">Some</span><span class="delimiter">(</span><a href="#50615" title="String">r</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="None.type">_</span> =&gt; <span title="object None">None</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="=&gt; String" id="25033">unqualifiedName</a>: <span title="String">String</span>  = <a href="#25036" title="=&gt; String">name</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="#25030" title="String">qualifiedAttribute</a><span class="delimiter">(</span><a title="String" id="50621">r</a>,<a title="String" id="50622">f</a><span class="delimiter">)</span> =&gt; <a href="#50622" title="String">f</a>
    <span class="keyword">case</span> <span title="String">_</span> =&gt; <a href="#25036" title="=&gt; String">name</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Limit extends java.lang.Object with ScalaObject" id="9593">Limit</a>
case <span class="keyword">class</span> <a title="class FixedLimit extends edu.berkeley.cs.scads.piql.Limit with ScalaObject with Product with Serializable" id="51505">FixedLimit</a><a href="#51505" title="ScalaObject" class="delimiter">(</a><a title="Int" id="43709">count</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9593" title="edu.berkeley.cs.scads.piql.Limit">Limit</a>
case <span class="keyword">class</span> <a title="class ParameterLimit extends edu.berkeley.cs.scads.piql.Limit with ScalaObject with Product with Serializable" id="51501">ParameterLimit</a><a href="#51501" title="ScalaObject" class="delimiter">(</a><a title="Int" id="43717">ordinal</a>: <span title="Int">Int</span>, <a title="Int" id="43718">max</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9593" title="edu.berkeley.cs.scads.piql.Limit">Limit</a>

<span class="keyword">trait</span> <a title="trait Predicate extends java.lang.Object" id="9600">Predicate</a>
case <span class="keyword">class</span> <a title="class EqualityPredicate extends java.lang.Object with edu.berkeley.cs.scads.piql.Predicate with ScalaObject with Product with Serializable" id="51497">EqualityPredicate</a><a href="#51497" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.Value" id="49090">v1</a>: <a href="#9579" title="edu.berkeley.cs.scads.piql.Value">Value</a>, <a title="edu.berkeley.cs.scads.piql.Value" id="49091">v2</a>: <a href="#9579" title="edu.berkeley.cs.scads.piql.Value">Value</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9600" title="edu.berkeley.cs.scads.piql.Predicate">Predicate</a>
case <span class="keyword">class</span> <a title="class LikePredicate extends java.lang.Object with edu.berkeley.cs.scads.piql.Predicate with ScalaObject with Product with Serializable" id="51493">LikePredicate</a><a href="#51493" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.Value" id="50515">v1</a>: <a href="#9579" title="edu.berkeley.cs.scads.piql.Value">Value</a>, <a title="edu.berkeley.cs.scads.piql.Value" id="50516">v2</a>: <a href="#9579" title="edu.berkeley.cs.scads.piql.Value">Value</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9600" title="edu.berkeley.cs.scads.piql.Predicate">Predicate</a>
case <span class="keyword">class</span> <a title="class InPredicate extends java.lang.Object with edu.berkeley.cs.scads.piql.Predicate with ScalaObject with Product with Serializable" id="51489">InPredicate</a><a href="#51489" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.Value" id="51484">v1</a>: <a href="#9579" title="edu.berkeley.cs.scads.piql.Value">Value</a>, <a title="edu.berkeley.cs.scads.piql.Value" id="51485">v2</a>: <a href="#9579" title="edu.berkeley.cs.scads.piql.Value">Value</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9600" title="edu.berkeley.cs.scads.piql.Predicate">Predicate</a>

<span class="comment">/* Physical Query Plan Nodes */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class QueryPlan extends java.lang.Object with ScalaObject" id="9610">QueryPlan</a>
<a href="#9610" title="edu.berkeley.cs.scads.piql.QueryPlan" class="keyword">abstract</a> <span class="keyword">class</span> <a title="class RemotePlan extends edu.berkeley.cs.scads.piql.QueryPlan with ScalaObject" id="9611">RemotePlan</a> <a href="#9611" title="ScalaObject" class="keyword">extends</a> <a href="#9610" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a> <span class="delimiter">{</span> <span class="keyword">val</span> <a title="=&gt; edu.berkeley.cs.scads.piql.package.Namespace" id="33214">namespace</a>: <a href="package.scala.html#25139" title="edu.berkeley.cs.scads.piql.package.Namespace">Namespace</a> <span class="delimiter">}</span>

case <span class="keyword">class</span> <a title="class IndexLookup extends edu.berkeley.cs.scads.piql.QueryPlan with ScalaObject with Product with Serializable" id="51480">IndexLookup</a><a href="#51480" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.package.Namespace" id="46786">namespace</a>: <a href="package.scala.html#25139" title="edu.berkeley.cs.scads.piql.package.Namespace">Namespace</a>, <a title="edu.berkeley.cs.scads.piql.package.KeyGenerator" id="46787">key</a>: <span title="edu.berkeley.cs.scads.piql.package.KeyGenerator">KeyGenerator</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9610" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a>

case <span class="keyword">class</span> <a title="class IndexScan extends edu.berkeley.cs.scads.piql.RemotePlan with ScalaObject with Product with Serializable" id="51476">IndexScan</a><a href="#51476" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.package.Namespace" id="46879">namespace</a>: <a href="package.scala.html#25139" title="edu.berkeley.cs.scads.piql.package.Namespace">Namespace</a>, <a title="edu.berkeley.cs.scads.piql.package.KeyGenerator" id="46880">keyPrefix</a>: <span title="edu.berkeley.cs.scads.piql.package.KeyGenerator">KeyGenerator</span>, <a title="edu.berkeley.cs.scads.piql.Limit" id="46881">limit</a>: <a href="#9593" title="edu.berkeley.cs.scads.piql.Limit">Limit</a>, <a title="Boolean" id="46882">ascending</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9611" title="edu.berkeley.cs.scads.piql.RemotePlan">RemotePlan</a>
case <span class="keyword">class</span> <a title="class IndexLookupJoin extends edu.berkeley.cs.scads.piql.RemotePlan with ScalaObject with Product with Serializable" id="51472">IndexLookupJoin</a><a href="#51472" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.package.Namespace" id="47424">namespace</a>: <a href="package.scala.html#25139" title="edu.berkeley.cs.scads.piql.package.Namespace">Namespace</a>, <a title="edu.berkeley.cs.scads.piql.package.KeyGenerator" id="47425">key</a>: <span title="edu.berkeley.cs.scads.piql.package.KeyGenerator">KeyGenerator</span>, <a title="edu.berkeley.cs.scads.piql.QueryPlan" id="47426">child</a>: <a href="#9610" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9611" title="edu.berkeley.cs.scads.piql.RemotePlan">RemotePlan</a>
case <span class="keyword">class</span> <a title="class IndexScanJoin extends edu.berkeley.cs.scads.piql.RemotePlan with ScalaObject with Product with Serializable" id="51468">IndexScanJoin</a><a href="#51468" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.package.Namespace" id="47763">namespace</a>: <a href="package.scala.html#25139" title="edu.berkeley.cs.scads.piql.package.Namespace">Namespace</a>, <a title="edu.berkeley.cs.scads.piql.package.KeyGenerator" id="47764">keyPrefix</a>: <span title="edu.berkeley.cs.scads.piql.package.KeyGenerator">KeyGenerator</span>, <a title="edu.berkeley.cs.scads.piql.Limit" id="47765">limit</a>: <a href="#9593" title="edu.berkeley.cs.scads.piql.Limit">Limit</a>, <a title="Boolean" id="47766">ascending</a>: <span title="Boolean">Boolean</span>, <a title="edu.berkeley.cs.scads.piql.QueryPlan" id="47767">child</a>: <a href="#9610" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9611" title="edu.berkeley.cs.scads.piql.RemotePlan">RemotePlan</a>
case <span class="keyword">class</span> <a title="class IndexMergeJoin extends edu.berkeley.cs.scads.piql.RemotePlan with ScalaObject with Product with Serializable" id="51464">IndexMergeJoin</a><a href="#51464" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.package.Namespace" id="47609">namespace</a>: <a href="package.scala.html#25139" title="edu.berkeley.cs.scads.piql.package.Namespace">Namespace</a>, <a title="edu.berkeley.cs.scads.piql.package.KeyGenerator" id="47610">keyPrefix</a>: <span title="edu.berkeley.cs.scads.piql.package.KeyGenerator">KeyGenerator</span>, <a title="Seq[edu.berkeley.cs.scads.piql.Value]" id="47611">sortFields</a>: <span title="Seq[edu.berkeley.cs.scads.piql.Value]">Seq</span><span class="delimiter">[</span>Value<span class="delimiter">]</span>, <a title="edu.berkeley.cs.scads.piql.Limit" id="47612">limit</a>: <a href="#9593" title="edu.berkeley.cs.scads.piql.Limit">Limit</a>, <a title="Boolean" id="47613">ascending</a>: <span title="Boolean">Boolean</span>, <a title="edu.berkeley.cs.scads.piql.QueryPlan" id="47614">child</a>: <a href="#9610" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9611" title="edu.berkeley.cs.scads.piql.RemotePlan">RemotePlan</a>

case <span class="keyword">class</span> <a title="class LocalSelection extends edu.berkeley.cs.scads.piql.QueryPlan with ScalaObject with Product with Serializable" id="51460">LocalSelection</a><a href="#51460" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.Predicate" id="47820">predicate</a>: <a href="#9600" title="edu.berkeley.cs.scads.piql.Predicate">Predicate</a>, <a title="edu.berkeley.cs.scads.piql.QueryPlan" id="47821">child</a>: <a href="#9610" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9610" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a>
case <span class="keyword">class</span> <a title="class LocalSort extends edu.berkeley.cs.scads.piql.QueryPlan with ScalaObject with Product with Serializable" id="51456">LocalSort</a><a href="#51456" title="ScalaObject" class="delimiter">(</a><a title="Seq[edu.berkeley.cs.scads.piql.Value]" id="51449">sortFields</a>: <span title="Seq[edu.berkeley.cs.scads.piql.Value]">Seq</span><span class="delimiter">[</span>Value<span class="delimiter">]</span>, <a title="Boolean" id="51450">ascending</a>: <span title="Boolean">Boolean</span>, <a title="edu.berkeley.cs.scads.piql.QueryPlan" id="51451">child</a>: <a href="#9610" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9610" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a>
case <span class="keyword">class</span> <a title="class LocalStopAfter extends edu.berkeley.cs.scads.piql.QueryPlan with ScalaObject with Product with Serializable" id="51445">LocalStopAfter</a><a href="#51445" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.Limit" id="46892">count</a>: <a href="#9593" title="edu.berkeley.cs.scads.piql.Limit">Limit</a>, <a title="edu.berkeley.cs.scads.piql.QueryPlan" id="46893">child</a>: <a href="#9610" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9610" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a>

<span class="comment">/* Testing iterator that simply emits tuples from an iterator that is passed to the query as a parameter */</span>
case <span class="keyword">class</span> <a title="class LocalIterator extends edu.berkeley.cs.scads.piql.QueryPlan with ScalaObject with Product with Serializable" id="51441">LocalIterator</a><a href="#51441" title="ScalaObject" class="delimiter">(</a><a title="Int" id="51433">parameterOrdinal</a>: <span title="Int">Int</span>, <a title="Boolean" id="51438">wrap</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9610" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a>


case <span class="keyword">class</span> <a title="class Union extends edu.berkeley.cs.scads.piql.QueryPlan with ScalaObject with Product with Serializable" id="51427">Union</a><a href="#51427" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.QueryPlan" id="51420">child1</a> : <a href="#9610" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a>, <a title="edu.berkeley.cs.scads.piql.QueryPlan" id="51421">child2</a> : <a href="#9610" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a>, <a title="edu.berkeley.cs.scads.piql.AttributeValue" id="51422">eqField</a> : <a href="#51513" title="edu.berkeley.cs.scads.piql.AttributeValue">AttributeValue</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9610" title="edu.berkeley.cs.scads.piql.QueryPlan">QueryPlan</a>

        </pre>
    </body>
</html>