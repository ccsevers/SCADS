<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>package.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> edu.berkeley.cs
<span class="keyword">package</span> scads

<span class="keyword">import</span> org.apache.avro.generic.IndexedRecord
<span class="keyword">import</span> net.lag.logging.Logger

<span class="keyword">import</span> avro.marker._
<span class="keyword">import</span> storage._
<span class="keyword">import</span> storage.client._


<span class="keyword">package</span> <span class="keyword">object</span> <a title="object edu.berkeley.cs.scads.piql.package" id="9689">piql</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">import</span> language._
  <span class="keyword">import</span> exec._
  <span class="keyword">import</span> opt._
  <span class="keyword">import</span> plans._

  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="net.lag.logging.Logger" id="9696">logger</a> = <span title="()net.lag.logging.Logger">Logger</span><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">type</span> <a title="package extends edu.berkeley.cs.scads.storage.Namespace with edu.berkeley.cs.scads.storage.RecordStore[org.apache.avro.generic.IndexedRecord] with edu.berkeley.cs.scads.storage.GlobalMetadata" id="9698">Namespace</a> = storage.<a href="#25169" title="package extends edu.berkeley.cs.scads.storage.Namespace with edu.berkeley.cs.scads.storage.RecordStore[org.apache.avro.generic.IndexedRecord] with edu.berkeley.cs.scads.storage.GlobalMetadata">Namespace</a> <span class="keyword">with</span> RecordStore<span class="delimiter">[</span>IndexedRecord<span class="delimiter">]</span> <span class="keyword">with</span> GlobalMetadata
  <span class="keyword">type</span> <a title="package extends edu.berkeley.cs.scads.storage.Namespace with edu.berkeley.cs.scads.storage.RecordStore[edu.berkeley.cs.avro.marker.AvroPair] with edu.berkeley.cs.scads.storage.GlobalMetadata with edu.berkeley.cs.scads.storage.client.index.IndexManager[edu.berkeley.cs.avro.marker.AvroPair]" id="9699">IndexedNamespace</a> = storage.<a href="#47099" title="package extends edu.berkeley.cs.scads.storage.Namespace with edu.berkeley.cs.scads.storage.RecordStore[edu.berkeley.cs.avro.marker.AvroPair] with edu.berkeley.cs.scads.storage.GlobalMetadata with edu.berkeley.cs.scads.storage.client.index.IndexManager[edu.berkeley.cs.avro.marker.AvroPair]">Namespace</a> <span class="keyword">with</span> RecordStore<span class="delimiter">[</span>AvroPair<span class="delimiter">]</span> <span class="keyword">with</span> GlobalMetadata <span class="keyword">with</span> index.IndexManager<span class="delimiter">[</span>AvroPair<span class="delimiter">]</span>

  <span class="keyword">type</span> <a title="Seq[edu.berkeley.cs.scads.piql.plans.Value]" id="9700">KeyGenerator</a> = <span title="Seq[edu.berkeley.cs.scads.piql.plans.Value]">Seq</span><span class="delimiter">[</span>Value<span class="delimiter">]</span>

  <span class="keyword">type</span> <a title="org.apache.avro.generic.IndexedRecord" id="9701">Key</a> = <span title="org.apache.avro.generic.IndexedRecord">IndexedRecord</span>
  <span class="keyword">type</span> <a title="org.apache.avro.generic.IndexedRecord" id="9702">Record</a> = <span title="org.apache.avro.generic.IndexedRecord">IndexedRecord</span>
  <span class="keyword">type</span> <a title="IndexedSeq[edu.berkeley.cs.scads.piql.package.Record]" id="9703">Tuple</a> = <span title="IndexedSeq[edu.berkeley.cs.scads.piql.package.Record]">IndexedSeq</span><span class="delimiter">[</span>Record<span class="delimiter">]</span>
  <span class="keyword">type</span> <a title="Seq[edu.berkeley.cs.scads.piql.package.Namespace]" id="9704">TupleSchema</a> = <span title="Seq[edu.berkeley.cs.scads.piql.package.Namespace]">Seq</span><span class="delimiter">[</span>Namespace<span class="delimiter">]</span>

  <span class="keyword">type</span> <a title="Seq[edu.berkeley.cs.scads.piql.package.Tuple]" id="9705">QueryResult</a> = <span title="Seq[edu.berkeley.cs.scads.piql.package.Tuple]">Seq</span><span class="delimiter">[</span>Tuple<span class="delimiter">]</span>
  <span class="keyword">type</span> <a title="edu.berkeley.cs.scads.piql.opt.OptimizedQuery" id="9706">OptimizedQuery</a> = opt.<a href="Optimizer.scala.html#9587" title="edu.berkeley.cs.scads.piql.opt.OptimizedQuery">OptimizedQuery</a>
  <span class="keyword">type</span> <a title="edu.berkeley.cs.scads.piql.exec.QueryExecutor" id="9707">QueryExecutor</a> = exec.<a href="Iterators.scala.html#9532" title="edu.berkeley.cs.scads.piql.exec.QueryExecutor">QueryExecutor</a>
  <span class="keyword">type</span> <a title="edu.berkeley.cs.scads.piql.exec.ParallelExecutor" id="9708">ParallelExecutor</a> = exec.<a href="Iterators.scala.html#9534" title="edu.berkeley.cs.scads.piql.exec.ParallelExecutor">ParallelExecutor</a>

  <span class="comment">//Query State Serailization</span>
  <span class="keyword">type</span> <a title="Seq[Any]" id="9709">CursorPosition</a> = <span title="Seq[Any]">Seq</span><span class="delimiter">[</span>Any<span class="delimiter">]</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit edu.berkeley.cs.scads.piql.package.toRichTuple : (t: edu.berkeley.cs.scads.piql.package.Tuple)edu.berkeley.cs.scads.piql.debug.RichTuple" id="9710">toRichTuple</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.piql.package.Tuple" id="25855">t</a>: <span title="edu.berkeley.cs.scads.piql.package.Tuple">Tuple</span><span class="delimiter">)</span> = <span title="edu.berkeley.cs.scads.piql.debug.RichTuple" class="keyword">new</span> debug.<a href="Debug.scala.html#9513" title="edu.berkeley.cs.scads.piql.debug.RichTuple">RichTuple</a><span class="delimiter">(</span><a href="#25855" title="edu.berkeley.cs.scads.piql.package.Tuple">t</a><span class="delimiter">)</span>

  <span class="comment">//TODO: Remove hack</span>
  <span class="comment">//HACK: to deal with problem in namespace variance</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T &lt;: edu.berkeley.cs.avro.marker.AvroPair](ns: edu.berkeley.cs.scads.storage.PairNamespace[T])edu.berkeley.cs.scads.piql.package.Namespace" id="9711">pairToNamespace</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: edu.berkeley.cs.avro.marker.AvroPair" id="9713">T</a> &lt;: AvroPair<span class="delimiter">]</span><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.storage.PairNamespace[T]" id="25851">ns</a>: <span title="edu.berkeley.cs.scads.storage.PairNamespace[T]">PairNamespace</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#25851" title="edu.berkeley.cs.scads.storage.PairNamespace[T]">ns</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="edu.berkeley.cs.scads.piql.package.Namespace" class="delimiter">[</span><a href="#25169" title="edu.berkeley.cs.scads.piql.package.Namespace">Namespace</a><span class="delimiter">]</span>

  <span class="comment">//PIQL Scala Language Integration</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T &lt;: edu.berkeley.cs.avro.marker.AvroPair](ns: edu.berkeley.cs.scads.storage.PairNamespace[T])edu.berkeley.cs.scads.piql.plans.Relation" id="9714">namespaceToRelation</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: edu.berkeley.cs.avro.marker.AvroPair" id="9716">T</a> &lt;: AvroPair<span class="delimiter">]</span><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.storage.PairNamespace[T]" id="25078">ns</a>: <span title="edu.berkeley.cs.scads.storage.PairNamespace[T]">PairNamespace</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="LogicalPlan.scala.html#25172" title="(ns: edu.berkeley.cs.scads.piql.package.Namespace)edu.berkeley.cs.scads.piql.plans.Relation">Relation</a><span class="delimiter">(</span><a href="#25078" title="edu.berkeley.cs.scads.storage.PairNamespace[T]">ns</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="edu.berkeley.cs.scads.piql.package.Namespace" class="delimiter">[</span><a href="#25169" title="edu.berkeley.cs.scads.piql.package.Namespace">Namespace</a><span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit edu.berkeley.cs.scads.piql.package.toAttr : (s: String)java.lang.Object{def a: edu.berkeley.cs.scads.piql.plans.UnboundAttributeValue}" id="9717">toAttr</a><span class="delimiter">(</span><a title="String" id="25046">s</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#25049" title="java.lang.Object{def a: edu.berkeley.cs.scads.piql.plans.UnboundAttributeValue}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object" id="25049" class="delimiter">{</a>
    <span class="keyword">def</span> <a title="=&gt; edu.berkeley.cs.scads.piql.plans.UnboundAttributeValue" id="25051">a</a> = <a href="QueryPlan.scala.html#25054" title="(name: String)edu.berkeley.cs.scads.piql.plans.UnboundAttributeValue">UnboundAttributeValue</a><span class="delimiter">(</span><a href="#25046" title="String">s</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit edu.berkeley.cs.scads.piql.package.toParameter : (o: Double)java.lang.Object{def ?: edu.berkeley.cs.scads.piql.plans.ParameterValue}" id="9718">toParameter</a><span class="delimiter">(</span><a title="Double" id="25018">o</a>: <span title="Double">Double</span><span class="delimiter">)</span> = <a href="#25021" title="java.lang.Object{def ?: edu.berkeley.cs.scads.piql.plans.ParameterValue}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object" id="25021" class="delimiter">{</a>
    <span class="keyword">def</span> <a title="=&gt; edu.berkeley.cs.scads.piql.plans.ParameterValue" id="25023">?</a> = <a href="QueryPlan.scala.html#25026" title="(ordinal: Int)edu.berkeley.cs.scads.piql.plans.ParameterValue">ParameterValue</a><span class="delimiter">(</span><a href="#25018" title="Double">o</a>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit edu.berkeley.cs.scads.piql.package.toConstantValue : (a: Any)edu.berkeley.cs.scads.piql.plans.ConstantValue" id="9719">toConstantValue</a><span class="delimiter">(</span><a title="Any" id="24994">a</a>: <span title="Any">Any</span><span class="delimiter">)</span> = <a href="QueryPlan.scala.html#25002" title="(v: Any)edu.berkeley.cs.scads.piql.plans.ConstantValue">ConstantValue</a><span class="delimiter">(</span><a href="#24994" title="Any">a</a><span class="delimiter">)</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[A](a: A)Option[A]" id="9720">toOption</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="9722">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A" id="24987">a</a>: <a href="#9722" title="A">A</a><span class="delimiter">)</span> = <span title="(x: A)Option[A]">Option</span><span class="delimiter">(</span><a href="#24987" title="A">a</a><span class="delimiter">)</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit edu.berkeley.cs.scads.piql.package.toPiql : (logicalPlan: edu.berkeley.cs.scads.piql.plans.LogicalPlan)(implicit executor: edu.berkeley.cs.scads.piql.package.QueryExecutor)java.lang.Object{def toPiql(queryName: Option[String]): edu.berkeley.cs.scads.piql.opt.OptimizedQuery; def toPiql$default$1: Option[String]}" id="9723">toPiql</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.piql.plans.LogicalPlan" id="17468">logicalPlan</a>: <a href="LogicalPlan.scala.html#9549" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan">LogicalPlan</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="edu.berkeley.cs.scads.piql.package.QueryExecutor" id="17469">executor</a>: <a href="Iterators.scala.html#9532" title="edu.berkeley.cs.scads.piql.package.QueryExecutor">QueryExecutor</a><span class="delimiter">)</span> = <a href="#17472" title="java.lang.Object{def toPiql(queryName: Option[String]): edu.berkeley.cs.scads.piql.opt.OptimizedQuery; def toPiql$default$1: Option[String] @scala.annotation.unchecked.uncheckedVariance}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object" id="17472" class="delimiter">{</a>
    <span class="keyword">def</span> <a title="(queryName: Option[String])edu.berkeley.cs.scads.piql.opt.OptimizedQuery" id="17474">toPiql</a><span class="delimiter">(</span><a title="Option[String]" id="17476">queryName</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="object None">None</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#9696" title="=&gt; net.lag.logging.Logger">logger</a>.<span title="(msg: String, items: Any*)Unit">info</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Begining Optimization of query %s: %s&quot;)" class="string">&quot;Begining Optimization of query %s: %s&quot;</span>, <a href="#17476" title="Option[String]">queryName</a>, <a href="#17468" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan">logicalPlan</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.plans.QueryPlan" id="17477">physicalPlan</a> = <a href="Optimizer.scala.html#23814" title="(logicalPlan: edu.berkeley.cs.scads.piql.plans.LogicalPlan)edu.berkeley.cs.scads.piql.opt.Optimizer.OptimizedSubPlan">Optimizer</a><span class="delimiter">(</span><a href="#17468" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan">logicalPlan</a><span class="delimiter">)</span>.<a href="Optimizer.scala.html#24918" title="=&gt; edu.berkeley.cs.scads.piql.plans.QueryPlan">physicalPlan</a>
      <a href="#9696" title="=&gt; net.lag.logging.Logger">logger</a>.<span title="(msg: String, items: Any*)Unit">info</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Optimized piql query %s: %s&quot;)" class="string">&quot;Optimized piql query %s: %s&quot;</span>, <a href="#17476" title="Option[String]">queryName</a>, <a href="#17477" title="edu.berkeley.cs.scads.piql.plans.QueryPlan">physicalPlan</a><span class="delimiter">)</span>
      <span title="edu.berkeley.cs.scads.piql.opt.OptimizedQuery" class="keyword">new</span> <a href="#9706" title="edu.berkeley.cs.scads.piql.opt.OptimizedQuery">OptimizedQuery</a><span class="delimiter">(</span><a href="#17476" title="Option[String]">queryName</a>, <a href="#17477" title="edu.berkeley.cs.scads.piql.plans.QueryPlan">physicalPlan</a>, <a href="#17469" title="edu.berkeley.cs.scads.piql.package.QueryExecutor">executor</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>