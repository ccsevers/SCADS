<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>LogicalPlan.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> edu.berkeley.cs
<span class="keyword">package</span> scads
<span class="keyword">package</span> piql
<span class="keyword">package</span> plans

<span class="keyword">import</span> language.Queryable

<span class="comment">/**
 * A node in a logical query plan.
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class LogicalPlan extends java.lang.Object with edu.berkeley.cs.scads.piql.language.Queryable with ScalaObject" id="9547">LogicalPlan</a> <a href="#9547" title="ScalaObject" class="keyword">extends</a> <a href="Language.scala.html#9540" title="edu.berkeley.cs.scads.piql.language.Queryable">Queryable</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="[A](f: edu.berkeley.cs.scads.piql.plans.LogicalPlan =&gt; A)A" id="23978">walkPlan</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="23980">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.piql.plans.LogicalPlan =&gt; A" id="43984">f</a>: LogicalPlan =&gt; A<span class="delimiter">)</span>: <a href="#23980" title="A">A</a> = <span class="delimiter">{</span>
    <a href="#9547" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan" class="keyword">this</a> <span title="A" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="A" id="43987">in</a>: <a href="#9548" title="edu.berkeley.cs.scads.piql.plans.InnerNode">InnerNode</a> =&gt; <span class="delimiter">{</span>
        <a href="#43984" title="(v1: edu.berkeley.cs.scads.piql.plans.LogicalPlan)A">f</a><span class="delimiter">(</span><a href="#9547" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan" class="keyword">this</a><span class="delimiter">)</span>
        <a href="#43987" title="&lt;none&gt; extends edu.berkeley.cs.scads.piql.plans.LogicalPlan with edu.berkeley.cs.scads.piql.plans.InnerNode">in</a>.<a href="#43836" title="=&gt; edu.berkeley.cs.scads.piql.plans.LogicalPlan">child</a>.<a href="#23978" title="(f: edu.berkeley.cs.scads.piql.plans.LogicalPlan =&gt; A)A">walkPlan</a><span class="delimiter">(</span><a href="#43984" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan =&gt; A">f</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="A" id="43993">leaf</a> =&gt; <a href="#43984" title="(v1: edu.berkeley.cs.scads.piql.plans.LogicalPlan)A">f</a><span class="delimiter">(</span><a href="#43993" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan">leaf</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[A](f: PartialFunction[edu.berkeley.cs.scads.piql.plans.LogicalPlan,A])(Seq[A], Option[edu.berkeley.cs.scads.piql.plans.LogicalPlan])" id="23981">gatherUntil</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="23983">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="PartialFunction[edu.berkeley.cs.scads.piql.plans.LogicalPlan,A]" id="43994">f</a>: <span title="PartialFunction[edu.berkeley.cs.scads.piql.plans.LogicalPlan,A]">PartialFunction</span><span class="delimiter">[</span>LogicalPlan, A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="(Seq[A], Option[edu.berkeley.cs.scads.piql.plans.LogicalPlan])" class="delimiter">(</span>Seq<span class="delimiter">[</span>A<span class="delimiter">]</span>, Option<span class="delimiter">[</span>LogicalPlan<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#43994" title="PartialFunction[edu.berkeley.cs.scads.piql.plans.LogicalPlan,A]">f</a>.<span title="(x: edu.berkeley.cs.scads.piql.plans.LogicalPlan)Boolean">isDefinedAt</span><span class="delimiter">(</span><a href="#9547" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan" class="keyword">this</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">==</span> <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">return</span> <span title="(_1: scala.collection.immutable.Nil.type, _2: Some[edu.berkeley.cs.scads.piql.plans.LogicalPlan])(scala.collection.immutable.Nil.type, Some[edu.berkeley.cs.scads.piql.plans.LogicalPlan])" class="delimiter">(</span><span title="object Nil">Nil</span>, <span title="(x: edu.berkeley.cs.scads.piql.plans.LogicalPlan)Some[edu.berkeley.cs.scads.piql.plans.LogicalPlan]">Some</span><span class="delimiter">(</span><a href="#9547" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="#9547" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan" class="keyword">this</a> <span title="(Seq[A], Option[edu.berkeley.cs.scads.piql.plans.LogicalPlan])" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="(Seq[A], Option[edu.berkeley.cs.scads.piql.plans.LogicalPlan])" id="44016">in</a>: <a href="#9548" title="edu.berkeley.cs.scads.piql.plans.InnerNode">InnerNode</a> =&gt; <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="(Seq[A], Option[edu.berkeley.cs.scads.piql.plans.LogicalPlan])" id="44018">childRes</a> = <a href="#44016" title="&lt;none&gt; extends edu.berkeley.cs.scads.piql.plans.LogicalPlan with edu.berkeley.cs.scads.piql.plans.InnerNode">in</a>.<a href="#43836" title="=&gt; edu.berkeley.cs.scads.piql.plans.LogicalPlan">child</a>.<a href="#23981" title="(f: PartialFunction[edu.berkeley.cs.scads.piql.plans.LogicalPlan,A])(Seq[A], Option[edu.berkeley.cs.scads.piql.plans.LogicalPlan])">gatherUntil</a><span class="delimiter">(</span><a href="#43994" title="PartialFunction[edu.berkeley.cs.scads.piql.plans.LogicalPlan,A]">f</a><span class="delimiter">)</span>
        <span title="(_1: Seq[A], _2: Option[edu.berkeley.cs.scads.piql.plans.LogicalPlan])(Seq[A], Option[edu.berkeley.cs.scads.piql.plans.LogicalPlan])" class="delimiter">(</span><a href="#43994" title="(v1: edu.berkeley.cs.scads.piql.plans.LogicalPlan)A">f</a><span class="delimiter">(</span><a href="#9547" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan" class="keyword">this</a><span class="delimiter">)</span> <a href="#44026" title="(elem: A)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[A],A,Seq[A]])Seq[A]">+:</a> <a href="#44018" title="(Seq[A], Option[edu.berkeley.cs.scads.piql.plans.LogicalPlan])">childRes</a>.<span title="=&gt; Seq[A]">_1</span>, <a href="#44018" title="(Seq[A], Option[edu.berkeley.cs.scads.piql.plans.LogicalPlan])">childRes</a>.<span title="=&gt; Option[edu.berkeley.cs.scads.piql.plans.LogicalPlan]">_2</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="(List[A], None.type)" id="44075">leaf</a> =&gt; <span title="(_1: List[A], _2: None.type)(List[A], None.type)" class="delimiter">(</span><a href="#43994" title="(v1: edu.berkeley.cs.scads.piql.plans.LogicalPlan)A">f</a><span class="delimiter">(</span><a href="#44075" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan">leaf</a><span class="delimiter">)</span> <a href="#44080" title="(x: A)List[A]">::</a> <span title="object Nil">Nil</span>, <span title="object None">None</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * An non-leaf node of a query plan, guaranteed to have a child.
 */</span>
<span class="keyword">abstract</span> <span class="keyword">trait</span> <a title="trait InnerNode extends java.lang.Object" id="9548">InnerNode</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">val</span> <a title="=&gt; edu.berkeley.cs.scads.piql.plans.LogicalPlan" id="43836">child</a>: <a href="#9547" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan">LogicalPlan</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * Filters child by predicate.
 */</span>
case <span class="keyword">class</span> <a title="class Selection extends edu.berkeley.cs.scads.piql.plans.LogicalPlan with edu.berkeley.cs.scads.piql.plans.InnerNode with ScalaObject with Product with Serializable" id="44487">Selection</a><a href="#44487" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.plans.Predicate" id="43839">predicate</a>: <a href="QueryPlan.scala.html#9618" title="edu.berkeley.cs.scads.piql.plans.Predicate">Predicate</a>, <a title="edu.berkeley.cs.scads.piql.plans.LogicalPlan" id="43840">child</a>: <a href="#9547" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan">LogicalPlan</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9547" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan">LogicalPlan</a> <span class="keyword">with</span> <a href="#9548" title="edu.berkeley.cs.scads.piql.plans.InnerNode">InnerNode</a>

<span class="comment">/**
 * Sorts child by the values specified in attributes.
 */</span>
case <span class="keyword">class</span> <a title="class Sort extends edu.berkeley.cs.scads.piql.plans.LogicalPlan with edu.berkeley.cs.scads.piql.plans.InnerNode with ScalaObject with Product with Serializable" id="44483">Sort</a><a href="#44483" title="ScalaObject" class="delimiter">(</a><a title="Seq[edu.berkeley.cs.scads.piql.plans.Value]" id="43965">attributes</a>: <span title="Seq[edu.berkeley.cs.scads.piql.plans.Value]">Seq</span><span class="delimiter">[</span>Value<span class="delimiter">]</span>, <a title="Boolean" id="43966">ascending</a>: <span title="Boolean">Boolean</span>, <a title="edu.berkeley.cs.scads.piql.plans.LogicalPlan" id="43967">child</a>: <a href="#9547" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan">LogicalPlan</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9547" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan">LogicalPlan</a> <span class="keyword">with</span> <a href="#9548" title="edu.berkeley.cs.scads.piql.plans.InnerNode">InnerNode</a>

<span class="comment">/**
 * An operator that returns no more than count tuples
 */</span>
<span class="keyword">trait</span> <a title="trait StopOperator extends java.lang.Object with edu.berkeley.cs.scads.piql.plans.InnerNode" id="9555">StopOperator</a> <span class="keyword">extends</span> <a href="#9548" title="edu.berkeley.cs.scads.piql.plans.InnerNode">InnerNode</a> <span class="delimiter">{</span>
  <span class="keyword">val</span> <a title="=&gt; edu.berkeley.cs.scads.piql.plans.Limit" id="43885">count</a>: <a href="QueryPlan.scala.html#9611" title="edu.berkeley.cs.scads.piql.plans.Limit">Limit</a>
<span class="delimiter">}</span>

<span class="comment">/**
 * Returns the first count tuples from child.
 */</span>
case <span class="keyword">class</span> <a title="class StopAfter extends edu.berkeley.cs.scads.piql.plans.LogicalPlan with edu.berkeley.cs.scads.piql.plans.StopOperator with ScalaObject with Product with Serializable" id="44479">StopAfter</a><a href="#44479" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.plans.Limit" id="43888">count</a>: <a href="QueryPlan.scala.html#9611" title="edu.berkeley.cs.scads.piql.plans.Limit">Limit</a>, <a title="edu.berkeley.cs.scads.piql.plans.LogicalPlan" id="43889">child</a>: <a href="#9547" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan">LogicalPlan</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9547" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan">LogicalPlan</a> <span class="keyword">with</span> <a href="#9555" title="edu.berkeley.cs.scads.piql.plans.StopOperator">StopOperator</a>

<span class="comment">/**
 * A promise (i.e. due to external relationship cardinality constraints) that child will return no more than count tuples.
 */</span>
case <span class="keyword">class</span> <a title="class DataStopAfter extends edu.berkeley.cs.scads.piql.plans.LogicalPlan with edu.berkeley.cs.scads.piql.plans.StopOperator with ScalaObject with Product with Serializable" id="44475">DataStopAfter</a><a href="#44475" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.plans.Limit" id="43934">count</a>: <a href="QueryPlan.scala.html#9611" title="edu.berkeley.cs.scads.piql.plans.Limit">Limit</a>, <a title="edu.berkeley.cs.scads.piql.plans.LogicalPlan" id="43935">child</a>: <a href="#9547" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan">LogicalPlan</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9547" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan">LogicalPlan</a> <span class="keyword">with</span> <a href="#9555" title="edu.berkeley.cs.scads.piql.plans.StopOperator">StopOperator</a>

<span class="comment">/**
 * Compute the join of the two child query plans.
 */</span>
case <span class="keyword">class</span> <a title="class Join extends edu.berkeley.cs.scads.piql.plans.LogicalPlan with ScalaObject with Product with Serializable" id="44471">Join</a><a href="#44471" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.plans.LogicalPlan" id="43863">left</a>: <a href="#9547" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan">LogicalPlan</a>, <a title="edu.berkeley.cs.scads.piql.plans.LogicalPlan" id="43864">right</a>: <a href="#9547" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan">LogicalPlan</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9547" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan">LogicalPlan</a>

<span class="comment">/**
 * A source of tuples.
 */</span>
case <span class="keyword">class</span> <a title="class Relation extends edu.berkeley.cs.scads.piql.plans.LogicalPlan with ScalaObject with Product with Serializable" id="44467">Relation</a><a href="#44467" title="ScalaObject" class="delimiter">(</a><a title="edu.berkeley.cs.scads.piql.package.Namespace" id="25357">ns</a>: <a href="package.scala.html#25347" title="edu.berkeley.cs.scads.piql.package.Namespace">Namespace</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9547" title="edu.berkeley.cs.scads.piql.plans.LogicalPlan">LogicalPlan</a>

        </pre>
    </body>
</html>