<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>plugin/SchemaGen.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> edu.berkeley.cs.avro
<span class="keyword">package</span> plugin

<span class="keyword">import</span> scala.tools._
<span class="keyword">import</span> nsc.Global
<span class="keyword">import</span> nsc.Phase
<span class="keyword">import</span> nsc.plugins.Plugin
<span class="keyword">import</span> nsc.plugins.PluginComponent
<span class="keyword">import</span> nsc.transform.Transform
<span class="keyword">import</span> nsc.transform.InfoTransform
<span class="keyword">import</span> nsc.transform.TypingTransformers
<span class="keyword">import</span> nsc.symtab.<span title="object scala.tools.nsc.symtab.Flags">Flags</span>._
<span class="keyword">import</span> nsc.util.Position
<span class="keyword">import</span> nsc.util.NoPosition
<span class="keyword">import</span> nsc.ast.TreeDSL
<span class="keyword">import</span> nsc.typechecker
<span class="keyword">import</span> scala.annotation.tailrec

<span class="keyword">import</span> scala.collection.<span title="object scala.collection.JavaConversions">JavaConversions</span>._

<span class="keyword">import</span> scala.collection.mutable.<span class="delimiter">{</span>HashSet,ListBuffer<span class="delimiter">}</span>

<span class="keyword">import</span> org.apache.avro.Schema
<span class="keyword">import</span> org.apache.avro.<span title="object org.apache.avro.Schema">Schema</span>.Field
<span class="keyword">import</span> org.apache.avro.<span title="object org.apache.avro.Schema">Schema</span>.<span class="delimiter">{</span>Type =&gt; AvroType<span class="delimiter">}</span>

<span class="keyword">import</span> java.util.<span class="delimiter">{</span>Arrays =&gt; JArrays<span class="delimiter">}</span>

<span class="comment">/** TODO: This phase isn't a transformer, refactor into a traverser */</span>
<span class="keyword">trait</span> <a title="trait SchemaGen extends scala.tools.nsc.plugins.PluginComponent with edu.berkeley.cs.avro.plugin.ScalaAvroPluginComponent with scala.tools.nsc.transform.Transform with scala.tools.nsc.transform.TypingTransformers with scala.tools.nsc.ast.TreeDSL with ScalaObject" id="9613">SchemaGen</a> <span title="ScalaObject" class="keyword">extends</span> <a href="ScalaAvroPlugin.scala.html#9580" title="edu.berkeley.cs.avro.plugin.ScalaAvroPluginComponent">ScalaAvroPluginComponent</a>
                <span class="keyword">with</span>    <span title="scala.tools.nsc.transform.Transform">Transform</span>
                <span class="keyword">with</span>    <span title="scala.tools.nsc.transform.TypingTransformers">TypingTransformers</span>
                <span class="keyword">with</span>    <span title="scala.tools.nsc.ast.TreeDSL">TreeDSL</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#9613" title="=&gt; scala.tools.nsc.Global">global</a>._
  <span class="keyword">import</span> <a href="#9613" title="object SchemaGen.this.global.definitions">definitions</a>._
  	  
  <span class="keyword">val</span> <a title="List[String]" id="57929">runsAfter</a> = <span title="[A](xs: A*)List[A]">List</span><span title="(xs: String*)List[String]" class="delimiter">[</span><span title="String">String</span><span class="delimiter">]</span><span class="delimiter">(</span><span title="java.lang.String(&quot;schemacreate&quot;)" class="string">&quot;schemacreate&quot;</span><span class="delimiter">)</span>
  <span class="keyword">override</span> <span class="keyword">val</span> <a title="Some[java.lang.String]" id="57931">runsRightAfter</a> = <span title="(x: java.lang.String)Some[java.lang.String]">Some</span><span class="delimiter">(</span><span title="java.lang.String(&quot;schemacreate&quot;)" class="string">&quot;schemacreate&quot;</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="57933">phaseName</a> = <span title="java.lang.String(&quot;schemagen&quot;)" class="string">&quot;schemagen&quot;</span>
  <span class="keyword">def</span> <a title="(unit: SchemaGen.this.global.CompilationUnit)SchemaGen.this.SchemaGenTransformer" id="57935">newTransformer</a><span class="delimiter">(</span><a title="SchemaGen.this.global.CompilationUnit" id="58708">unit</a>: <span title="SchemaGen.this.global.CompilationUnit">CompilationUnit</span><span class="delimiter">)</span> = <span title="SchemaGen.this.SchemaGenTransformer" class="keyword">new</span> <a href="#57936" title="SchemaGen.this.SchemaGenTransformer">SchemaGenTransformer</a><span class="delimiter">(</span><a href="#58708" title="SchemaGen.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>    

  <span class="keyword">class</span> <a title="class SchemaGenTransformer extends SchemaGen.this.TypingTransformer with ScalaObject" id="57936">SchemaGenTransformer</a><a href="#57936" title="ScalaObject" class="delimiter">(</a><a title="SchemaGen.this.global.CompilationUnit" id="58720">unit</a>: <span title="SchemaGen.this.global.CompilationUnit">CompilationUnit</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9613" title="SchemaGen.this.TypingTransformer">TypingTransformer</a><span class="delimiter">(</span><a href="#58720" title="SchemaGen.this.global.CompilationUnit">unit</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#9613" title="object SchemaGen.this.CODE">CODE</a>._

    <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.immutable.Map[SchemaGen.this.global.Symbol,org.apache.avro.Schema]" id="58716">primitiveClasses</a> = <span title="(elems: (SchemaGen.this.global.Symbol, org.apache.avro.Schema)*)scala.collection.immutable.Map[SchemaGen.this.global.Symbol,org.apache.avro.Schema]">Map</span><span class="delimiter">(</span>
      <span class="comment">/** Primitives in the Scala and Avro sense */</span>
      <a href="#9613" title="(x: SchemaGen.this.global.Symbol)ArrowAssoc[SchemaGen.this.global.Symbol]">IntClass</a>     <span title="(y: org.apache.avro.Schema)(SchemaGen.this.global.Symbol, org.apache.avro.Schema)">-&gt;</span> <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: org.apache.avro.Schema.Type)org.apache.avro.Schema">create</span><span class="delimiter">(</span>AvroType.<span title="org.apache.avro.Schema.Type(value INT)">INT</span><span class="delimiter">)</span>,
      <a href="#9613" title="(x: SchemaGen.this.global.Symbol)ArrowAssoc[SchemaGen.this.global.Symbol]">FloatClass</a>   <span title="(y: org.apache.avro.Schema)(SchemaGen.this.global.Symbol, org.apache.avro.Schema)">-&gt;</span> <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: org.apache.avro.Schema.Type)org.apache.avro.Schema">create</span><span class="delimiter">(</span>AvroType.<span title="org.apache.avro.Schema.Type(value FLOAT)">FLOAT</span><span class="delimiter">)</span>,
      <a href="#9613" title="(x: SchemaGen.this.global.Symbol)ArrowAssoc[SchemaGen.this.global.Symbol]">LongClass</a>    <span title="(y: org.apache.avro.Schema)(SchemaGen.this.global.Symbol, org.apache.avro.Schema)">-&gt;</span> <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: org.apache.avro.Schema.Type)org.apache.avro.Schema">create</span><span class="delimiter">(</span>AvroType.<span title="org.apache.avro.Schema.Type(value LONG)">LONG</span><span class="delimiter">)</span>,
      <a href="#9613" title="(x: SchemaGen.this.global.Symbol)ArrowAssoc[SchemaGen.this.global.Symbol]">DoubleClass</a>  <span title="(y: org.apache.avro.Schema)(SchemaGen.this.global.Symbol, org.apache.avro.Schema)">-&gt;</span> <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: org.apache.avro.Schema.Type)org.apache.avro.Schema">create</span><span class="delimiter">(</span>AvroType.<span title="org.apache.avro.Schema.Type(value DOUBLE)">DOUBLE</span><span class="delimiter">)</span>,
      <a href="#9613" title="(x: SchemaGen.this.global.Symbol)ArrowAssoc[SchemaGen.this.global.Symbol]">BooleanClass</a> <span title="(y: org.apache.avro.Schema)(SchemaGen.this.global.Symbol, org.apache.avro.Schema)">-&gt;</span> <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: org.apache.avro.Schema.Type)org.apache.avro.Schema">create</span><span class="delimiter">(</span>AvroType.<span title="org.apache.avro.Schema.Type(value BOOLEAN)">BOOLEAN</span><span class="delimiter">)</span>,
      <a href="#9613" title="(x: SchemaGen.this.global.Symbol)ArrowAssoc[SchemaGen.this.global.Symbol]">StringClass</a>  <span title="(y: org.apache.avro.Schema)(SchemaGen.this.global.Symbol, org.apache.avro.Schema)">-&gt;</span> <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: org.apache.avro.Schema.Type)org.apache.avro.Schema">create</span><span class="delimiter">(</span>AvroType.<span title="org.apache.avro.Schema.Type(value STRING)">STRING</span><span class="delimiter">)</span>,
      <a href="#9613" title="(x: SchemaGen.this.global.Symbol)ArrowAssoc[SchemaGen.this.global.Symbol]">NullClass</a>    <span title="(y: org.apache.avro.Schema)(SchemaGen.this.global.Symbol, org.apache.avro.Schema)">-&gt;</span> <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: org.apache.avro.Schema.Type)org.apache.avro.Schema">create</span><span class="delimiter">(</span>AvroType.<span title="org.apache.avro.Schema.Type(value NULL)">NULL</span><span class="delimiter">)</span>,

      <span class="comment">/** Types which are primitives in Scala, but have no exact match in Avro */</span>
      <a href="#9613" title="(x: SchemaGen.this.global.Symbol)ArrowAssoc[SchemaGen.this.global.Symbol]">ShortClass</a>   <span title="(y: org.apache.avro.Schema)(SchemaGen.this.global.Symbol, org.apache.avro.Schema)">-&gt;</span> <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: org.apache.avro.Schema.Type)org.apache.avro.Schema">create</span><span class="delimiter">(</span>AvroType.<span title="org.apache.avro.Schema.Type(value INT)">INT</span><span class="delimiter">)</span>,
      <a href="#9613" title="(x: SchemaGen.this.global.Symbol)ArrowAssoc[SchemaGen.this.global.Symbol]">ByteClass</a>    <span title="(y: org.apache.avro.Schema)(SchemaGen.this.global.Symbol, org.apache.avro.Schema)">-&gt;</span> <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: org.apache.avro.Schema.Type)org.apache.avro.Schema">create</span><span class="delimiter">(</span>AvroType.<span title="org.apache.avro.Schema.Type(value INT)">INT</span><span class="delimiter">)</span>,
      <a href="#9613" title="(x: SchemaGen.this.global.Symbol)ArrowAssoc[SchemaGen.this.global.Symbol]">CharClass</a>    <span title="(y: org.apache.avro.Schema)(SchemaGen.this.global.Symbol, org.apache.avro.Schema)">-&gt;</span> <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: org.apache.avro.Schema.Type)org.apache.avro.Schema">create</span><span class="delimiter">(</span>AvroType.<span title="org.apache.avro.Schema.Type(value INT)">INT</span><span class="delimiter">)</span>,

      <span class="comment">/** Primitives in the Avro sense */</span>
      <a href="ScalaAvroPlugin.scala.html#21659" title="(x: SchemaGen.this.global.Symbol)ArrowAssoc[SchemaGen.this.global.Symbol]">byteBufferClass</a> <span title="(y: org.apache.avro.Schema)(SchemaGen.this.global.Symbol, org.apache.avro.Schema)">-&gt;</span> <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: org.apache.avro.Schema.Type)org.apache.avro.Schema">create</span><span class="delimiter">(</span>AvroType.<span title="org.apache.avro.Schema.Type(value BYTES)">BYTES</span><span class="delimiter">)</span>,
      <a href="ScalaAvroPlugin.scala.html#21661" title="(x: SchemaGen.this.global.Symbol)ArrowAssoc[SchemaGen.this.global.Symbol]">utf8Class</a>       <span title="(y: org.apache.avro.Schema)(SchemaGen.this.global.Symbol, org.apache.avro.Schema)">-&gt;</span> <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: org.apache.avro.Schema.Type)org.apache.avro.Schema">create</span><span class="delimiter">(</span>AvroType.<span title="org.apache.avro.Schema.Type(value STRING)">STRING</span><span class="delimiter">)</span>,

      <span class="comment">/** Boxed primitives */</span>
      <a href="#9613" title="(x: SchemaGen.this.global.Symbol)ArrowAssoc[SchemaGen.this.global.Symbol]">BoxedIntClass</a>       <span title="(y: org.apache.avro.Schema)(SchemaGen.this.global.Symbol, org.apache.avro.Schema)">-&gt;</span> <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: org.apache.avro.Schema.Type)org.apache.avro.Schema">create</span><span class="delimiter">(</span>AvroType.<span title="org.apache.avro.Schema.Type(value INT)">INT</span><span class="delimiter">)</span>,
      <a href="#9613" title="(x: SchemaGen.this.global.Symbol)ArrowAssoc[SchemaGen.this.global.Symbol]">BoxedByteClass</a>      <span title="(y: org.apache.avro.Schema)(SchemaGen.this.global.Symbol, org.apache.avro.Schema)">-&gt;</span> <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: org.apache.avro.Schema.Type)org.apache.avro.Schema">create</span><span class="delimiter">(</span>AvroType.<span title="org.apache.avro.Schema.Type(value INT)">INT</span><span class="delimiter">)</span>,
      <a href="#9613" title="(x: SchemaGen.this.global.Symbol)ArrowAssoc[SchemaGen.this.global.Symbol]">BoxedShortClass</a>     <span title="(y: org.apache.avro.Schema)(SchemaGen.this.global.Symbol, org.apache.avro.Schema)">-&gt;</span> <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: org.apache.avro.Schema.Type)org.apache.avro.Schema">create</span><span class="delimiter">(</span>AvroType.<span title="org.apache.avro.Schema.Type(value INT)">INT</span><span class="delimiter">)</span>,
      <a href="#9613" title="(x: SchemaGen.this.global.Symbol)ArrowAssoc[SchemaGen.this.global.Symbol]">BoxedCharacterClass</a> <span title="(y: org.apache.avro.Schema)(SchemaGen.this.global.Symbol, org.apache.avro.Schema)">-&gt;</span> <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: org.apache.avro.Schema.Type)org.apache.avro.Schema">create</span><span class="delimiter">(</span>AvroType.<span title="org.apache.avro.Schema.Type(value INT)">INT</span><span class="delimiter">)</span>,
      <a href="#9613" title="(x: SchemaGen.this.global.Symbol)ArrowAssoc[SchemaGen.this.global.Symbol]">BoxedBooleanClass</a>   <span title="(y: org.apache.avro.Schema)(SchemaGen.this.global.Symbol, org.apache.avro.Schema)">-&gt;</span> <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: org.apache.avro.Schema.Type)org.apache.avro.Schema">create</span><span class="delimiter">(</span>AvroType.<span title="org.apache.avro.Schema.Type(value BOOLEAN)">BOOLEAN</span><span class="delimiter">)</span>,
      <a href="#9613" title="(x: SchemaGen.this.global.Symbol)ArrowAssoc[SchemaGen.this.global.Symbol]">BoxedFloatClass</a>     <span title="(y: org.apache.avro.Schema)(SchemaGen.this.global.Symbol, org.apache.avro.Schema)">-&gt;</span> <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: org.apache.avro.Schema.Type)org.apache.avro.Schema">create</span><span class="delimiter">(</span>AvroType.<span title="org.apache.avro.Schema.Type(value FLOAT)">FLOAT</span><span class="delimiter">)</span>,
      <a href="#9613" title="(x: SchemaGen.this.global.Symbol)ArrowAssoc[SchemaGen.this.global.Symbol]">BoxedLongClass</a>      <span title="(y: org.apache.avro.Schema)(SchemaGen.this.global.Symbol, org.apache.avro.Schema)">-&gt;</span> <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: org.apache.avro.Schema.Type)org.apache.avro.Schema">create</span><span class="delimiter">(</span>AvroType.<span title="org.apache.avro.Schema.Type(value LONG)">LONG</span><span class="delimiter">)</span>,
      <a href="#9613" title="(x: SchemaGen.this.global.Symbol)ArrowAssoc[SchemaGen.this.global.Symbol]">BoxedDoubleClass</a>    <span title="(y: org.apache.avro.Schema)(SchemaGen.this.global.Symbol, org.apache.avro.Schema)">-&gt;</span> <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: org.apache.avro.Schema.Type)org.apache.avro.Schema">create</span><span class="delimiter">(</span>AvroType.<span title="org.apache.avro.Schema.Type(value DOUBLE)">DOUBLE</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tpe: SchemaGen.this.global.Type)org.apache.avro.Schema" id="58718">createSchema</a><span class="delimiter">(</span><a title="SchemaGen.this.global.Type" id="59060">tpe</a>: <span title="SchemaGen.this.global.Type">Type</span><span class="delimiter">)</span>: <span title="org.apache.avro.Schema">Schema</span> = <span class="delimiter">{</span>
      <span title="org.apache.avro.Schema" class="keyword">if</span> <span class="delimiter">(</span><a href="#58716" title="=&gt; scala.collection.immutable.Map[SchemaGen.this.global.Symbol,org.apache.avro.Schema]">primitiveClasses</a>.<span title="(key: SchemaGen.this.global.Symbol)Boolean">contains</span><span class="delimiter">(</span><a href="#59060" title="SchemaGen.this.global.Type">tpe</a>.<span title="=&gt; SchemaGen.this.global.Symbol">typeSymbol</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#58716" title="(key: SchemaGen.this.global.Symbol)org.apache.avro.Schema">primitiveClasses</a><span class="delimiter">(</span><a href="#59060" title="SchemaGen.this.global.Type">tpe</a>.<span title="=&gt; SchemaGen.this.global.Symbol">typeSymbol</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="org.apache.avro.Schema" class="keyword">if</span> <span class="delimiter">(</span><a href="#59060" title="SchemaGen.this.global.Type">tpe</a>.<span title="=&gt; SchemaGen.this.global.Symbol">typeSymbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#9613" title="=&gt; SchemaGen.this.global.Symbol">ArrayClass</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#59060" title="SchemaGen.this.global.Type">tpe</a>.<span title="=&gt; SchemaGen.this.global.Type">normalize</span>.<span title="=&gt; List[SchemaGen.this.global.Type]">typeArgs</span>.<span title="=&gt; SchemaGen.this.global.Type">head</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#9613" title="=&gt; SchemaGen.this.global.Symbol">ByteClass</a>.<span title="=&gt; SchemaGen.this.global.Type">tpe</span><span class="delimiter">)</span>
          <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.UnsupportedOperationException" class="keyword">new</span> <span title="java.lang.UnsupportedOperationException">UnsupportedOperationException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Bad Array Found: &quot;)" class="string">&quot;Bad Array Found: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#59060" title="SchemaGen.this.global.Type">tpe</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;. Use scala collections for lists&quot;)" class="string">&quot;. Use scala collections for lists&quot;</span><span class="delimiter">)</span>
        <a href="#58718" title="(tpe: SchemaGen.this.global.Type)org.apache.avro.Schema">createSchema</a><span class="delimiter">(</span><a href="ScalaAvroPlugin.scala.html#21659" title="=&gt; SchemaGen.this.global.Symbol">byteBufferClass</a>.<span title="=&gt; SchemaGen.this.global.Type">tpe</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="org.apache.avro.Schema" class="keyword">if</span> <span class="delimiter">(</span><a href="#59060" title="SchemaGen.this.global.Type">tpe</a>.<span title="=&gt; SchemaGen.this.global.Symbol">typeSymbol</span>.<span title="(that: SchemaGen.this.global.Symbol)Boolean">isSubClass</span><span class="delimiter">(</span><a href="#9613" title="=&gt; SchemaGen.this.global.Symbol">TraversableClass</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#59060" title="SchemaGen.this.global.Type">tpe</a>.<span title="=&gt; List[SchemaGen.this.global.Type]">typeArgs</span>.<span title="=&gt; Int">size</span> <span title="org.apache.avro.Schema" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="org.apache.avro.Schema" class="int">1</span> =&gt;
            <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: org.apache.avro.Schema)org.apache.avro.Schema">createArray</span><span class="delimiter">(</span><a href="#58718" title="(tpe: SchemaGen.this.global.Type)org.apache.avro.Schema">createSchema</a><span class="delimiter">(</span><a href="#59060" title="SchemaGen.this.global.Type">tpe</a>.<span title="=&gt; List[SchemaGen.this.global.Type]">typeArgs</span>.<span title="=&gt; SchemaGen.this.global.Type">head</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="org.apache.avro.Schema" class="int">2</span> =&gt;
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#59060" title="SchemaGen.this.global.Type">tpe</a>.<span title="=&gt; List[SchemaGen.this.global.Type]">typeArgs</span>.<span title="=&gt; SchemaGen.this.global.Type">head</span>.<span title="=&gt; SchemaGen.this.global.Symbol">typeSymbol</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#9613" title="=&gt; SchemaGen.this.global.Symbol">StringClass</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> 
                <a href="#59060" title="SchemaGen.this.global.Type">tpe</a>.<span title="=&gt; List[SchemaGen.this.global.Type]">typeArgs</span>.<span title="=&gt; SchemaGen.this.global.Type">head</span>.<span title="=&gt; SchemaGen.this.global.Symbol">typeSymbol</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="ScalaAvroPlugin.scala.html#21661" title="=&gt; SchemaGen.this.global.Symbol">utf8Class</a><span class="delimiter">)</span>
              <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.UnsupportedOperationException" class="keyword">new</span> <span title="java.lang.UnsupportedOperationException">UnsupportedOperationException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Avro maps require string/utf8 keys&quot;)" class="string">&quot;Avro maps require string/utf8 keys&quot;</span><span class="delimiter">)</span>
            <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: org.apache.avro.Schema)org.apache.avro.Schema">createMap</span><span class="delimiter">(</span><a href="#58718" title="(tpe: SchemaGen.this.global.Type)org.apache.avro.Schema">createSchema</a><span class="delimiter">(</span><a href="#59060" title="SchemaGen.this.global.Type">tpe</a>.<span title="=&gt; List[SchemaGen.this.global.Type]">typeArgs</span>.<span title="=&gt; List[SchemaGen.this.global.Type]">tail</span>.<span title="=&gt; SchemaGen.this.global.Type">head</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="Nothing" id="59140">i</a> =&gt;
            <span title="Nothing" class="keyword">throw</span> <span title="(x$1: Any)java.lang.AssertionError" class="keyword">new</span> <span title="java.lang.AssertionError">AssertionError</span><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Oops, %d type args found&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#59140" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="org.apache.avro.Schema" class="keyword">if</span> <span class="delimiter">(</span><a href="#59060" title="SchemaGen.this.global.Type">tpe</a>.<span title="=&gt; SchemaGen.this.global.Symbol">typeSymbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#9613" title="=&gt; SchemaGen.this.global.Symbol">OptionClass</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="SchemaGen.this.global.Type" id="59157">listParam</a> = <a href="#59060" title="SchemaGen.this.global.Type">tpe</a>.<span title="=&gt; List[SchemaGen.this.global.Type]">typeArgs</span>.<span title="=&gt; SchemaGen.this.global.Type">head</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#59157" title="SchemaGen.this.global.Type">listParam</a>.<span title="=&gt; SchemaGen.this.global.Symbol">typeSymbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#9613" title="=&gt; SchemaGen.this.global.Symbol">OptionClass</a><span class="delimiter">)</span>
          <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.UnsupportedOperationException" class="keyword">new</span> <span title="java.lang.UnsupportedOperationException">UnsupportedOperationException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Implementation limitation: Cannot nest option types&quot;)" class="string">&quot;Implementation limitation: Cannot nest option types&quot;</span><span class="delimiter">)</span>
        <span title="org.apache.avro.Schema" class="keyword">if</span> <span class="delimiter">(</span><a href="ScalaAvroPlugin.scala.html#21700" title="(sym: SchemaGen.this.global.Symbol)Boolean">isUnion</a><span class="delimiter">(</span><a href="#59157" title="SchemaGen.this.global.Type">listParam</a>.<span title="=&gt; SchemaGen.this.global.Symbol">typeSymbol</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="comment">// special case when you do Option[A], where A is an AvroUnion</span>
          <span class="keyword">val</span> <a title="Array[org.apache.avro.Schema with java.lang.Object]" id="59169">innerSchemas</a> = <a href="#58718" title="(tpe: SchemaGen.this.global.Type)org.apache.avro.Schema">createSchema</a><span class="delimiter">(</span><a href="#59157" title="SchemaGen.this.global.Type">listParam</a><span class="delimiter">)</span>.<span title="()java.util.List[org.apache.avro.Schema]">getTypes</span>.<span title="(x$1: Array[org.apache.avro.Schema with java.lang.Object])Array[org.apache.avro.Schema with java.lang.Object]">toArray</span><span class="delimiter">(</span><span title="[T](xs: T*)(implicit evidence$2: scala.reflect.ClassManifest[T])Array[T]">Array</span><span title="(xs: org.apache.avro.Schema*)(implicit evidence$2: scala.reflect.ClassManifest[org.apache.avro.Schema])Array[org.apache.avro.Schema]" class="delimiter">[</span><span title="org.apache.avro.Schema">Schema</span><span class="delimiter">]</span><span title="(clazz: java.lang.Class[_])scala.reflect.ClassManifest[org.apache.avro.Schema]" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: java.util.List[org.apache.avro.Schema])org.apache.avro.Schema">createUnion</span><span class="delimiter">(</span><span title="object java.util.Arrays">JArrays</span>.<span title="(x$1: &lt;repeated...&gt;[org.apache.avro.Schema])java.util.List[org.apache.avro.Schema]">asList</span><span class="delimiter">(</span>
            <span class="delimiter">(</span><span title="(xs: org.apache.avro.Schema*)(implicit evidence$2: scala.reflect.ClassManifest[org.apache.avro.Schema])Array[org.apache.avro.Schema]">Array</span><span title="(xs: Array[org.apache.avro.Schema])scala.collection.mutable.ArrayOps[org.apache.avro.Schema]" class="delimiter">(</span><a href="#58718" title="(tpe: SchemaGen.this.global.Type)org.apache.avro.Schema">createSchema</a><span class="delimiter">(</span><a href="#9613" title="=&gt; SchemaGen.this.global.Symbol">NullClass</a>.<span title="=&gt; SchemaGen.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(that: scala.collection.GenTraversableOnce[org.apache.avro.Schema])(implicit bf: scala.collection.generic.CanBuildFrom[Array[org.apache.avro.Schema],org.apache.avro.Schema,Array[org.apache.avro.Schema]])Array[org.apache.avro.Schema]">++</span> <a href="#59169" title="(xs: Array[org.apache.avro.Schema with java.lang.Object])scala.collection.mutable.ArrayOps[org.apache.avro.Schema with java.lang.Object]">innerSchemas</a><span class="delimiter">)</span>:_*<span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span>
          <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: java.util.List[org.apache.avro.Schema])org.apache.avro.Schema">createUnion</span><span class="delimiter">(</span><span title="object java.util.Arrays">JArrays</span>.<span title="(x$1: &lt;repeated...&gt;[org.apache.avro.Schema])java.util.List[org.apache.avro.Schema]">asList</span><span class="delimiter">(</span>
            <span title="(xs: org.apache.avro.Schema*)(implicit evidence$2: scala.reflect.ClassManifest[org.apache.avro.Schema])Array[org.apache.avro.Schema]">Array</span><span title="(clazz: java.lang.Class[_])scala.reflect.ClassManifest[org.apache.avro.Schema]" class="delimiter">(</span><a href="#58718" title="(tpe: SchemaGen.this.global.Type)org.apache.avro.Schema">createSchema</a><span class="delimiter">(</span><a href="#9613" title="=&gt; SchemaGen.this.global.Symbol">NullClass</a>.<span title="=&gt; SchemaGen.this.global.Type">tpe</span><span class="delimiter">)</span>, <a href="#58718" title="(tpe: SchemaGen.this.global.Type)org.apache.avro.Schema">createSchema</a><span class="delimiter">(</span><a href="#59157" title="SchemaGen.this.global.Type">listParam</a><span class="delimiter">)</span><span class="delimiter">)</span>:_*<span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="org.apache.avro.Schema" class="keyword">if</span> <span class="delimiter">(</span><a href="ScalaAvroPlugin.scala.html#21691" title="(sym: SchemaGen.this.global.Symbol)Boolean">isRecord</a><span class="delimiter">(</span><a href="#59060" title="SchemaGen.this.global.Type">tpe</a>.<span title="=&gt; SchemaGen.this.global.Symbol">typeSymbol</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> 
        <a href="ScalaAvroPlugin.scala.html#21688" title="(name: SchemaGen.this.global.Symbol)Option[org.apache.avro.Schema]">retrieveRecordSchema</a><span class="delimiter">(</span><a href="#59060" title="SchemaGen.this.global.Type">tpe</a>.<span title="=&gt; SchemaGen.this.global.Symbol">typeSymbol</span><span class="delimiter">)</span>.<span title="=&gt; org.apache.avro.Schema">get</span> 
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="org.apache.avro.Schema" class="keyword">if</span> <span class="delimiter">(</span><a href="ScalaAvroPlugin.scala.html#21692" title="(sym: SchemaGen.this.global.Symbol)Boolean">isExternalRecord</a><span class="delimiter">(</span><a href="#59060" title="SchemaGen.this.global.Type">tpe</a>.<span title="=&gt; SchemaGen.this.global.Symbol">typeSymbol</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="ScalaAvroPlugin.scala.html#21696" title="(sym: SchemaGen.this.global.Symbol)org.apache.avro.Schema">retrieveExternalRecordSchema</a><span class="delimiter">(</span><a href="#59060" title="SchemaGen.this.global.Type">tpe</a>.<span title="=&gt; SchemaGen.this.global.Symbol">typeSymbol</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="org.apache.avro.Schema" class="keyword">if</span> <span class="delimiter">(</span><a href="ScalaAvroPlugin.scala.html#21700" title="(sym: SchemaGen.this.global.Symbol)Boolean">isUnion</a><span class="delimiter">(</span><a href="#59060" title="SchemaGen.this.global.Type">tpe</a>.<span title="=&gt; SchemaGen.this.global.Symbol">typeSymbol</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="ScalaAvroPlugin.scala.html#21701" title="(sym: SchemaGen.this.global.Symbol, schema: =&gt; org.apache.avro.Schema)org.apache.avro.Schema">getOrCreateUnionSchema</a><span class="delimiter">(</span><a href="#59060" title="SchemaGen.this.global.Type">tpe</a>.<span title="=&gt; SchemaGen.this.global.Symbol">typeSymbol</span>, <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: java.util.List[org.apache.avro.Schema])org.apache.avro.Schema">createUnion</span><span class="delimiter">(</span><span title="object java.util.Arrays">JArrays</span>.<span title="(x$1: &lt;repeated...&gt;[org.apache.avro.Schema])java.util.List[org.apache.avro.Schema]">asList</span><span class="delimiter">(</span>
          <a href="ScalaAvroPlugin.scala.html#21698" title="(name: SchemaGen.this.global.Symbol)List[SchemaGen.this.global.Symbol]">retrieveUnionRecords</a><span class="delimiter">(</span><a href="#59060" title="SchemaGen.this.global.Type">tpe</a>.<span title="=&gt; SchemaGen.this.global.Symbol">typeSymbol</span><span class="delimiter">)</span>.
          <span title="(f: SchemaGen.this.global.Symbol =&gt; SchemaGen.this.global.Type)(implicit bf: scala.collection.generic.CanBuildFrom[List[SchemaGen.this.global.Symbol],SchemaGen.this.global.Type,List[SchemaGen.this.global.Type]])List[SchemaGen.this.global.Type]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,SchemaGen.this.global.Type,List[SchemaGen.this.global.Type]]" class="delimiter">(</span><a href="#59958" title="SchemaGen.this.global.Symbol">_</a>.<span title="=&gt; SchemaGen.this.global.Type">tpe</span><span class="delimiter">)</span>.
          <span title="(f: SchemaGen.this.global.Type =&gt; org.apache.avro.Schema)(implicit bf: scala.collection.generic.CanBuildFrom[List[SchemaGen.this.global.Type],org.apache.avro.Schema,List[org.apache.avro.Schema]])List[org.apache.avro.Schema]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,org.apache.avro.Schema,List[org.apache.avro.Schema]]" class="delimiter">(</span><a title="SchemaGen.this.global.Type" id="60005">t</a> =&gt; <a href="#58718" title="(tpe: SchemaGen.this.global.Type)org.apache.avro.Schema">createSchema</a><span class="delimiter">(</span><a href="#60005" title="SchemaGen.this.global.Type">t</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(implicit evidence$1: ClassManifest[org.apache.avro.Schema])Array[org.apache.avro.Schema]">toArray</span>:_*<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="org.apache.avro.Schema" class="keyword">if</span> <span class="delimiter">(</span><a href="ScalaAvroPlugin.scala.html#21693" title="(sym: SchemaGen.this.global.Symbol)Boolean">isExternalUnion</a><span class="delimiter">(</span><a href="#59060" title="SchemaGen.this.global.Type">tpe</a>.<span title="=&gt; SchemaGen.this.global.Symbol">typeSymbol</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
	<a href="ScalaAvroPlugin.scala.html#21697" title="(sym: SchemaGen.this.global.Symbol)org.apache.avro.Schema">retrieveExternalUnionSchema</a><span class="delimiter">(</span><a href="#59060" title="SchemaGen.this.global.Type">tpe</a>.<span title="=&gt; SchemaGen.this.global.Symbol">typeSymbol</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.UnsupportedOperationException" class="keyword">new</span> <span title="java.lang.UnsupportedOperationException">UnsupportedOperationException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Cannot support yet: &quot;)" class="string">&quot;Cannot support yet: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#59060" title="SchemaGen.this.global.Type">tpe</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: SchemaGen.this.global.Tree)SchemaGen.this.global.Tree" id="58719">transform</a><span class="delimiter">(</span><a title="SchemaGen.this.global.Tree" id="60060">tree</a>: <span title="SchemaGen.this.global.Tree">Tree</span><span class="delimiter">)</span> : <span title="SchemaGen.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="SchemaGen.this.global.Tree" id="60065">newTree</a> = <a href="#60060" title="SchemaGen.this.global.Tree">tree</a> <span title="SchemaGen.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="SchemaGen.this.global.ClassDef" id="60066">cd</a> @ ClassDef<span class="delimiter">(</span><a title="SchemaGen.this.global.Modifiers" id="60081">mods</a>, <a title="SchemaGen.this.global.TypeName" id="60082">name</a>, <a title="List[SchemaGen.this.global.TypeDef]" id="60083">tparams</a>, <a title="SchemaGen.this.global.Template" id="60084">impl</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="ScalaAvroPlugin.scala.html#21647" title="(tree: SchemaGen.this.global.Tree)Boolean">isMarked</a><span class="delimiter">(</span><a href="#60066" title="SchemaGen.this.global.ClassDef">cd</a><span class="delimiter">)</span> =&gt;

          <span class="keyword">val</span> <a title="List[SchemaGen.this.global.Symbol]" id="60093">instanceVars</a> = <span class="keyword">for</span> <span class="delimiter">(</span><a title="SchemaGen.this.global.Tree" id="60110">member</a> &lt;- <a href="#60084" title="SchemaGen.this.global.Template">impl</a>.<span title="(f: SchemaGen.this.global.Tree =&gt; SchemaGen.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[SchemaGen.this.global.Tree],SchemaGen.this.global.Symbol,List[SchemaGen.this.global.Symbol]])List[SchemaGen.this.global.Symbol]">body</span> <span class="keyword">if</span> <a href="ScalaAvroPlugin.scala.html#21644" title="(tree: SchemaGen.this.global.Tree)Boolean">isValDef</a><span class="delimiter">(</span><a href="#60110" title="SchemaGen.this.global.Tree">member</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">yield</span> <span class="delimiter">{</span> <a href="#60110" title="SchemaGen.this.global.Tree">member</a>.<span title="=&gt; SchemaGen.this.global.Symbol">symbol</span> <span class="delimiter">}</span>

          <span class="comment">/** Check to see if any of the members are immutable */</span>
          <span class="keyword">val</span> <a title="List[SchemaGen.this.global.Symbol]" id="60094">instanceVals</a> = <a href="#60093" title="List[SchemaGen.this.global.Symbol]">instanceVars</a>.<span title="(p: SchemaGen.this.global.Symbol =&gt; Boolean)List[SchemaGen.this.global.Symbol]">filter</span><span class="delimiter">(</span><a title="SchemaGen.this.global.Symbol" id="60141">v</a> =&gt; <span title="=&gt; Boolean">!</span><a href="ScalaAvroPlugin.scala.html#21646" title="(symbol: SchemaGen.this.global.Symbol)Boolean">isVarSym</a><span class="delimiter">(</span><a href="#60141" title="SchemaGen.this.global.Symbol">v</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#60094" title="List[SchemaGen.this.global.Symbol]">instanceVals</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span title="Nothing" class="keyword">throw</span> <span title="edu.berkeley.cs.avro.plugin.ImmutableFieldException" class="keyword">new</span> <a href="Exceptions.scala.html#9506" title="edu.berkeley.cs.avro.plugin.ImmutableFieldException">ImmutableFieldException</a><span class="delimiter">(</span><a href="#60094" title="List[SchemaGen.this.global.Symbol]">instanceVals</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>

          <a href="ScalaAvroPlugin.scala.html#21642" title="(a: AnyRef)Unit">debug</a><span class="delimiter">(</span><span title="java.lang.String(&quot;instance vars for class &quot;)" class="string">&quot;instance vars for class &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#60066" title="SchemaGen.this.global.ClassDef">cd</a>.<span title="=&gt; SchemaGen.this.global.Symbol">symbol</span>.<span title="=&gt; String">fullName</span><span class="delimiter">)</span>
          <a href="ScalaAvroPlugin.scala.html#21642" title="(a: AnyRef)Unit">debug</a><span class="delimiter">(</span><a href="#60093" title="List[SchemaGen.this.global.Symbol]">instanceVars</a><span class="delimiter">)</span>

          <span class="keyword">val</span> <a title="List[org.apache.avro.Schema.Field]" id="60095">fields</a> = <a href="#60093" title="List[SchemaGen.this.global.Symbol]">instanceVars</a>.<span title="(f: SchemaGen.this.global.Symbol =&gt; org.apache.avro.Schema.Field)(implicit bf: scala.collection.generic.CanBuildFrom[List[SchemaGen.this.global.Symbol],org.apache.avro.Schema.Field,List[org.apache.avro.Schema.Field]])List[org.apache.avro.Schema.Field]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,org.apache.avro.Schema.Field,List[org.apache.avro.Schema.Field]]" class="delimiter">(</span><a title="SchemaGen.this.global.Symbol" id="60163">iVar</a> =&gt; 
            <span title="org.apache.avro.Schema.Field" class="keyword">new</span> <span title="org.apache.avro.Schema.Field">Field</span><span class="delimiter">(</span><a href="#60163" title="SchemaGen.this.global.Symbol">iVar</a>.<span title="=&gt; SchemaGen.this.global.Name">name</span>.<span title="()String">toString</span>.<span title="()java.lang.String">trim</span>, 
                      <a href="#58718" title="(tpe: SchemaGen.this.global.Type)org.apache.avro.Schema">createSchema</a><span class="delimiter">(</span><a href="#60163" title="SchemaGen.this.global.Symbol">iVar</a>.<span title="=&gt; SchemaGen.this.global.Type">tpe</span><span class="delimiter">)</span>,
                      <span title="java.lang.String(&quot;Auto-Generated Field&quot;)" class="string">&quot;Auto-Generated Field&quot;</span>,
                      <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="comment">// need to make a copy for the pairs, since we can't reuse field</span>
          <span class="comment">// objects</span>
          <span class="keyword">val</span> <a title="List[org.apache.avro.Schema.Field]" id="60096">fields0</a> = <a href="#60093" title="List[SchemaGen.this.global.Symbol]">instanceVars</a>.<span title="(f: SchemaGen.this.global.Symbol =&gt; org.apache.avro.Schema.Field)(implicit bf: scala.collection.generic.CanBuildFrom[List[SchemaGen.this.global.Symbol],org.apache.avro.Schema.Field,List[org.apache.avro.Schema.Field]])List[org.apache.avro.Schema.Field]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,org.apache.avro.Schema.Field,List[org.apache.avro.Schema.Field]]" class="delimiter">(</span><a title="SchemaGen.this.global.Symbol" id="60469">iVar</a> =&gt; 
            <span title="org.apache.avro.Schema.Field" class="keyword">new</span> <span title="org.apache.avro.Schema.Field">Field</span><span class="delimiter">(</span><a href="#60469" title="SchemaGen.this.global.Symbol">iVar</a>.<span title="=&gt; SchemaGen.this.global.Name">name</span>.<span title="()String">toString</span>.<span title="()java.lang.String">trim</span>, 
                      <a href="#58718" title="(tpe: SchemaGen.this.global.Type)org.apache.avro.Schema">createSchema</a><span class="delimiter">(</span><a href="#60469" title="SchemaGen.this.global.Symbol">iVar</a>.<span title="=&gt; SchemaGen.this.global.Type">tpe</span><span class="delimiter">)</span>,
                      <span title="java.lang.String(&quot;Auto-Generated Field&quot;)" class="string">&quot;Auto-Generated Field&quot;</span>,
                      <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span><span class="delimiter">)</span>

          <a href="ScalaAvroPlugin.scala.html#21688" title="(name: SchemaGen.this.global.Symbol)Option[org.apache.avro.Schema]">retrieveRecordSchema</a><span class="delimiter">(</span><a href="#60066" title="SchemaGen.this.global.ClassDef">cd</a>.<span title="=&gt; SchemaGen.this.global.Symbol">symbol</span><span class="delimiter">)</span>.<span title="=&gt; org.apache.avro.Schema">get</span>.<span title="(x$1: java.util.List[org.apache.avro.Schema.Field])Unit">setFields</span><span class="delimiter">(</span><span title="object java.util.Arrays">JArrays</span>.<span title="(x$1: &lt;repeated...&gt;[org.apache.avro.Schema.Field])java.util.List[org.apache.avro.Schema.Field]">asList</span><span class="delimiter">(</span><a href="#60095" title="List[org.apache.avro.Schema.Field]">fields</a>.<span title="(implicit evidence$1: ClassManifest[org.apache.avro.Schema.Field])Array[org.apache.avro.Schema.Field]">toArray</span>:_*<span class="delimiter">)</span><span class="delimiter">)</span>

          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="ScalaAvroPlugin.scala.html#21649" title="(tree: SchemaGen.this.global.Tree)Boolean">isMarkedPair</a><span class="delimiter">(</span><a href="#60066" title="SchemaGen.this.global.ClassDef">cd</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a href="#60529" title="(Int, org.apache.avro.Schema, org.apache.avro.Schema)" class="delimiter">(</a><a href="#60528" title="Int" id="60529">valOffset</a>, <a href="#60528" title="org.apache.avro.Schema" id="60530">keyRec</a>, <a href="#60528" title="org.apache.avro.Schema" id="60531">valRec</a><span class="delimiter">)</span> = <a href="ScalaAvroPlugin.scala.html#21682" title="(key: SchemaGen.this.global.Symbol)(Int, org.apache.avro.Schema, org.apache.avro.Schema)">classToKVSchema</a><span title="(Int, org.apache.avro.Schema, org.apache.avro.Schema) @unchecked" class="delimiter">(</span><a href="#60066" title="SchemaGen.this.global.ClassDef">cd</a>.<span title="=&gt; SchemaGen.this.global.Symbol">symbol</span><span class="delimiter">)</span>
            <a href="#60530" title="org.apache.avro.Schema">keyRec</a>.<span title="(x$1: java.util.List[org.apache.avro.Schema.Field])Unit">setFields</span><span class="delimiter">(</span><span title="object java.util.Arrays">JArrays</span>.<span title="(x$1: &lt;repeated...&gt;[org.apache.avro.Schema.Field])java.util.List[org.apache.avro.Schema.Field]">asList</span><span class="delimiter">(</span><a href="#60096" title="List[org.apache.avro.Schema.Field]">fields0</a>.<span title="(n: Int)List[org.apache.avro.Schema.Field]">take</span><span class="delimiter">(</span><a href="#60529" title="Int">valOffset</a><span class="delimiter">)</span>.<span title="(implicit evidence$1: ClassManifest[org.apache.avro.Schema.Field])Array[org.apache.avro.Schema.Field]">toArray</span>:_*<span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#60531" title="org.apache.avro.Schema">valRec</a>.<span title="(x$1: java.util.List[org.apache.avro.Schema.Field])Unit">setFields</span><span class="delimiter">(</span><span title="object java.util.Arrays">JArrays</span>.<span title="(x$1: &lt;repeated...&gt;[org.apache.avro.Schema.Field])java.util.List[org.apache.avro.Schema.Field]">asList</span><span class="delimiter">(</span><a href="#60096" title="List[org.apache.avro.Schema.Field]">fields0</a>.<span title="(n: Int)List[org.apache.avro.Schema.Field]">drop</span><span class="delimiter">(</span><a href="#60529" title="Int">valOffset</a><span class="delimiter">)</span>.<span title="(implicit evidence$1: ClassManifest[org.apache.avro.Schema.Field])Array[org.apache.avro.Schema.Field]">toArray</span>:_*<span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>

          <a href="#60066" title="SchemaGen.this.global.ClassDef">cd</a>
        <span class="keyword">case</span> <span title="SchemaGen.this.global.Tree">_</span> =&gt; <a href="#60060" title="SchemaGen.this.global.Tree">tree</a>
      <span class="delimiter">}</span>
      <a href="#57936" title="SchemaGen.this.SchemaGenTransformer" class="keyword">super</a>.<span title="(tree: SchemaGen.this.global.Tree)SchemaGen.this.global.Tree">transform</span><span class="delimiter">(</span><a href="#60065" title="SchemaGen.this.global.Tree">newTree</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>    
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>