<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>plugin/MethodGen.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> edu.berkeley.cs.avro
<span class="keyword">package</span> plugin

<span class="keyword">import</span> scala.tools._
<span class="keyword">import</span> nsc.Global
<span class="keyword">import</span> nsc.Phase
<span class="keyword">import</span> nsc.plugins.Plugin
<span class="keyword">import</span> nsc.plugins.PluginComponent
<span class="keyword">import</span> nsc.transform.Transform
<span class="keyword">import</span> nsc.transform.InfoTransform
<span class="keyword">import</span> nsc.transform.TypingTransformers
<span class="keyword">import</span> nsc.symtab.<span title="object scala.tools.nsc.symtab.Flags">Flags</span>._
<span class="keyword">import</span> nsc.util.Position
<span class="keyword">import</span> nsc.util.NoPosition
<span class="keyword">import</span> nsc.ast.TreeDSL
<span class="keyword">import</span> nsc.typechecker
<span class="keyword">import</span> scala.annotation.tailrec

<span class="keyword">import</span> java.util.<span class="delimiter">{</span>Arrays =&gt; JArrays<span class="delimiter">}</span>

<span class="keyword">import</span> scala.collection.<span title="object scala.collection.JavaConversions">JavaConversions</span>._

<span class="keyword">import</span> org.apache.avro.Schema

<span class="keyword">trait</span> <a title="trait MethodGen extends scala.tools.nsc.plugins.PluginComponent with edu.berkeley.cs.avro.plugin.ScalaAvroPluginComponent with scala.tools.nsc.transform.Transform with scala.tools.nsc.transform.TypingTransformers with scala.tools.nsc.ast.TreeDSL with ScalaObject" id="9544">MethodGen</a> <span title="ScalaObject" class="keyword">extends</span> <a href="ScalaAvroPlugin.scala.html#9582" title="edu.berkeley.cs.avro.plugin.ScalaAvroPluginComponent">ScalaAvroPluginComponent</a>
                <span class="keyword">with</span>    <span title="scala.tools.nsc.transform.Transform">Transform</span>
                <span class="keyword">with</span>    <span title="scala.tools.nsc.transform.TypingTransformers">TypingTransformers</span>
                <span class="keyword">with</span>    <span title="scala.tools.nsc.ast.TreeDSL">TreeDSL</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#9544" title="=&gt; scala.tools.nsc.Global">global</a>._
  <span class="keyword">import</span> <a href="#9544" title="object MethodGen.this.global.definitions">definitions</a>._
  	  
  <span class="keyword">val</span> <a title="List[String]" id="50022">runsAfter</a> = <span title="[A](xs: A*)List[A]">List</span><span title="(xs: String*)List[String]" class="delimiter">[</span><span title="String">String</span><span class="delimiter">]</span><span class="delimiter">(</span><span title="java.lang.String(&quot;objectgen&quot;)" class="string">&quot;objectgen&quot;</span><span class="delimiter">)</span>
  <span class="keyword">override</span> <span class="keyword">val</span> <a title="Some[java.lang.String]" id="50024">runsRightAfter</a> = <span title="(x: java.lang.String)Some[java.lang.String]">Some</span><span class="delimiter">(</span><span title="java.lang.String(&quot;objectgen&quot;)" class="string">&quot;objectgen&quot;</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="50026">phaseName</a> = <span title="java.lang.String(&quot;methodgen&quot;)" class="string">&quot;methodgen&quot;</span>
  <span class="keyword">def</span> <a title="(unit: MethodGen.this.global.CompilationUnit)MethodGen.this.MethodGenTransformer" id="50028">newTransformer</a><span class="delimiter">(</span><a title="MethodGen.this.global.CompilationUnit" id="50040">unit</a>: <span title="MethodGen.this.global.CompilationUnit">CompilationUnit</span><span class="delimiter">)</span> = <span title="MethodGen.this.MethodGenTransformer" class="keyword">new</span> <a href="#50029" title="MethodGen.this.MethodGenTransformer">MethodGenTransformer</a><span class="delimiter">(</span><a href="#50040" title="MethodGen.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>    

  <span class="keyword">class</span> <a title="class MethodGenTransformer extends MethodGen.this.TypingTransformer with ScalaObject" id="50029">MethodGenTransformer</a><a href="#50029" title="ScalaObject" class="delimiter">(</a><a title="MethodGen.this.global.CompilationUnit" id="50059">unit</a>: <span title="MethodGen.this.global.CompilationUnit">CompilationUnit</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9544" title="MethodGen.this.TypingTransformer">TypingTransformer</a><span class="delimiter">(</span><a href="#50059" title="MethodGen.this.global.CompilationUnit">unit</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#9544" title="object MethodGen.this.CODE">CODE</a>._

    <span class="comment">/** this.sym.asInstanceOf[java.lang.Object] */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(clazz: MethodGen.this.global.Symbol, sym: MethodGen.this.global.Symbol)MethodGen.this.global.Tree" id="50048">castToObject</a><span class="delimiter">(</span><a title="MethodGen.this.global.Symbol" id="50063">clazz</a>: <span title="MethodGen.this.global.Symbol">Symbol</span>, <a title="MethodGen.this.global.Symbol" id="50064">sym</a>: <span title="MethodGen.this.global.Symbol">Symbol</span><span class="delimiter">)</span>: <span title="MethodGen.this.global.Tree">Tree</span> = 
      <a href="#9544" title="(sym: MethodGen.this.global.Symbol)MethodGen.this.global.Tree">This</a><a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: MethodGen.this.global.Tree)MethodGen.this.CODE.TreeMethods" class="delimiter">(</a><a href="#50063" title="MethodGen.this.global.Symbol">clazz</a><span class="delimiter">)</span> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.CODE.TreeMethods">DOT</a> <a href="#50064" title="MethodGen.this.global.Symbol">sym</a> <span title="(tpe: MethodGen.this.global.Type)MethodGen.this.global.TypeApply">AS</span> <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">ObjectClass</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tpe: MethodGen.this.global.Type, args: List[MethodGen.this.global.Type])MethodGen.this.global.Type" id="50049">construct</a><span class="delimiter">(</span><a title="MethodGen.this.global.Type" id="51615">tpe</a>: <span title="MethodGen.this.global.Type">Type</span>, <a title="List[MethodGen.this.global.Type]" id="51616">args</a>: <span title="List[MethodGen.this.global.Type]">List</span><span class="delimiter">[</span>Type<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#51615" title="MethodGen.this.global.Type">tpe</a> <span title="MethodGen.this.global.Type" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="MethodGen.this.global.Type">TypeRef</span><span class="delimiter">(</span><a title="MethodGen.this.global.Type" id="51623">pre</a>, <a title="MethodGen.this.global.Symbol" id="51624">sym</a>, _<span class="delimiter">)</span> =&gt; <a href="#9544" title="(pre: MethodGen.this.global.Type, sym: MethodGen.this.global.Symbol, args: List[MethodGen.this.global.Type])MethodGen.this.global.Type">TypeRef</a><span class="delimiter">(</span><a href="#51623" title="MethodGen.this.global.Type">pre</a>, <a href="#51624" title="MethodGen.this.global.Symbol">sym</a>, <a href="#51616" title="List[MethodGen.this.global.Type]">args</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tpe: MethodGen.this.global.Type)MethodGen.this.global.Type" id="50050">toAvroType</a><span class="delimiter">(</span><a title="MethodGen.this.global.Type" id="51631">tpe</a>: <span title="MethodGen.this.global.Type">Type</span><span class="delimiter">)</span>: <span title="MethodGen.this.global.Type">Type</span> = <span class="delimiter">{</span>
      <span title="MethodGen.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#51631" title="MethodGen.this.global.Type">tpe</a>.<span title="=&gt; MethodGen.this.global.Symbol">typeSymbol</span>.<span title="(that: MethodGen.this.global.Symbol)Boolean">isSubClass</span><span class="delimiter">(</span><a href="#9544" title="=&gt; MethodGen.this.global.Symbol">TraversableClass</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="comment">// TODO: this is a bit fragile (for instance, what if somebody defines</span>
        <span class="comment">// their map as a type alias. there won't be any type params</span>
        <span class="keyword">val</span> <a title="Int" id="51634">size</a> = <a href="#51631" title="MethodGen.this.global.Type">tpe</a>.<span title="=&gt; List[MethodGen.this.global.Type]">typeArgs</span>.<span title="=&gt; Int">size</span>
        <a href="#51634" title="Int">size</a> <span title="MethodGen.this.global.Type" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="MethodGen.this.global.Type" class="int">1</span> =&gt;
            <a href="#50049" title="(tpe: MethodGen.this.global.Type, args: List[MethodGen.this.global.Type])MethodGen.this.global.Type">construct</a><span class="delimiter">(</span><a href="ScalaAvroPlugin.scala.html#21671" title="=&gt; MethodGen.this.global.Symbol">GenericArrayClass</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span>, <span title="(xs: MethodGen.this.global.Type*)List[MethodGen.this.global.Type]">List</span><span class="delimiter">(</span><a href="#50050" title="(tpe: MethodGen.this.global.Type)MethodGen.this.global.Type">toAvroType</a><span class="delimiter">(</span><a href="#51631" title="MethodGen.this.global.Type">tpe</a>.<span title="=&gt; List[MethodGen.this.global.Type]">typeArgs</span>.<span title="=&gt; MethodGen.this.global.Type">head</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="MethodGen.this.global.Type" class="int">2</span> =&gt;
            <a href="#50049" title="(tpe: MethodGen.this.global.Type, args: List[MethodGen.this.global.Type])MethodGen.this.global.Type">construct</a><span class="delimiter">(</span><a href="ScalaAvroPlugin.scala.html#21679" title="=&gt; MethodGen.this.global.Symbol">JMapClass</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span>, <span title="(xs: MethodGen.this.global.Type*)List[MethodGen.this.global.Type]">List</span><span class="delimiter">(</span><a href="ScalaAvroPlugin.scala.html#21667" title="=&gt; MethodGen.this.global.Symbol">utf8Class</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span>, <a href="#50050" title="(tpe: MethodGen.this.global.Type)MethodGen.this.global.Type">toAvroType</a><span class="delimiter">(</span><a href="#51631" title="MethodGen.this.global.Type">tpe</a>.<span title="=&gt; List[MethodGen.this.global.Type]">typeArgs</span>.<span title="=&gt; List[MethodGen.this.global.Type]">tail</span>.<span title="=&gt; MethodGen.this.global.Type">head</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Nothing">_</span> =&gt;
            <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.UnsupportedOperationException" class="keyword">new</span> <span title="java.lang.UnsupportedOperationException">UnsupportedOperationException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Unsupported collection type: &quot;)" class="string">&quot;Unsupported collection type: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#51631" title="MethodGen.this.global.Type">tpe</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#51631" title="MethodGen.this.global.Type">tpe</a>.<span title="=&gt; MethodGen.this.global.Symbol">typeSymbol</span> <span title="MethodGen.this.global.Type" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="#9544" title="MethodGen.this.global.Type">OptionClass</a> =&gt;
          <a href="#50050" title="(tpe: MethodGen.this.global.Type)MethodGen.this.global.Type">toAvroType</a><span class="delimiter">(</span><a href="#51631" title="MethodGen.this.global.Type">tpe</a>.<span title="=&gt; List[MethodGen.this.global.Type]">typeArgs</span>.<span title="=&gt; MethodGen.this.global.Type">head</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="#9544" title="MethodGen.this.global.Type">StringClass</a> =&gt; <a href="ScalaAvroPlugin.scala.html#21667" title="=&gt; MethodGen.this.global.Symbol">utf8Class</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span> 
        <span class="keyword">case</span> <a href="#9544" title="MethodGen.this.global.Type">ArrayClass</a>  =&gt;
          <span title="MethodGen.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#51631" title="MethodGen.this.global.Type">tpe</a>.<span title="=&gt; List[MethodGen.this.global.Type]">typeArgs</span>.<span title="=&gt; MethodGen.this.global.Type">head</span>.<span title="=&gt; MethodGen.this.global.Symbol">typeSymbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">ByteClass</a><span class="delimiter">)</span>
            <a href="ScalaAvroPlugin.scala.html#21665" title="=&gt; MethodGen.this.global.Symbol">byteBufferClass</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span>
          <span class="keyword">else</span> <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.UnsupportedOperationException" class="keyword">new</span> <span title="java.lang.UnsupportedOperationException">UnsupportedOperationException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Arrays not used for lists: use scala collections instead&quot;)" class="string">&quot;Arrays not used for lists: use scala collections instead&quot;</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="#9544" title="MethodGen.this.global.Type">ByteClass</a> | <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">BoxedByteClass</a> | 
             <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">ShortClass</a> | <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">BoxedShortClass</a> | 
             <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">CharClass</a> | <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">BoxedCharacterClass</a> | 
             <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">IntClass</a> | <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">BoxedIntClass</a>  =&gt; <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">BoxedIntClass</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span> 
        <span class="keyword">case</span> <a href="#9544" title="MethodGen.this.global.Type">BooleanClass</a> | <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">BoxedBooleanClass</a> =&gt; <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">BoxedBooleanClass</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span>
        <span class="keyword">case</span> <a href="#9544" title="MethodGen.this.global.Type">LongClass</a> | <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">BoxedLongClass</a>  =&gt; <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">BoxedLongClass</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span>
        <span class="keyword">case</span> <a href="#9544" title="MethodGen.this.global.Type">FloatClass</a> | <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">BoxedFloatClass</a>  =&gt; <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">BoxedFloatClass</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span>
        <span class="keyword">case</span> <a href="#9544" title="MethodGen.this.global.Type">DoubleClass</a> | <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">BoxedDoubleClass</a> =&gt; <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">BoxedDoubleClass</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span>
        <span class="keyword">case</span> <span title="MethodGen.this.global.Type">_</span> =&gt; <a href="#51631" title="MethodGen.this.global.Type">tpe</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tpe: MethodGen.this.global.Type)Boolean" id="50051">needsSchemaToConvert</a><span class="delimiter">(</span><a title="MethodGen.this.global.Type" id="51697">tpe</a>: <span title="MethodGen.this.global.Type">Type</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = 
      <a href="#51697" title="MethodGen.this.global.Type">tpe</a>.<span title="=&gt; MethodGen.this.global.Symbol">typeSymbol</span>.<span title="(that: MethodGen.this.global.Symbol)Boolean">isSubClass</span><span class="delimiter">(</span><a href="#9544" title="=&gt; MethodGen.this.global.Symbol">TraversableClass</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> 
      <span class="delimiter">(</span><a href="#51697" title="MethodGen.this.global.Type">tpe</a>.<span title="=&gt; MethodGen.this.global.Symbol">typeSymbol</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">OptionClass</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#50051" title="(tpe: MethodGen.this.global.Type)Boolean">needsSchemaToConvert</a><span class="delimiter">(</span><a href="#51697" title="MethodGen.this.global.Type">tpe</a>.<span title="=&gt; List[MethodGen.this.global.Type]">typeArgs</span>.<span title="=&gt; MethodGen.this.global.Type">head</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tpe: MethodGen.this.global.Type)Boolean" id="50052">canInline</a><span class="delimiter">(</span><a title="MethodGen.this.global.Type" id="51705">tpe</a>: <span title="MethodGen.this.global.Type">Type</span><span class="delimiter">)</span> = 
      <a href="#51705" title="MethodGen.this.global.Type">tpe</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#50050" title="(tpe: MethodGen.this.global.Type)MethodGen.this.global.Type">toAvroType</a><span class="delimiter">(</span><a href="#51705" title="MethodGen.this.global.Type">tpe</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><a href="#51705" title="MethodGen.this.global.Type">tpe</a>.<span title="=&gt; MethodGen.this.global.Symbol">typeSymbol</span> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="#9544" title="Boolean(true)">IntClass</a> | <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">LongClass</a> | <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">BooleanClass</a> | <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">FloatClass</a> | <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">DoubleClass</a> =&gt; <span title="Boolean(true)" class="keyword">true</span>
        <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(templ: MethodGen.this.global.Template, clazz: MethodGen.this.global.Symbol, instanceVars: List[MethodGen.this.global.Symbol])MethodGen.this.global.analyzer.global.Tree" id="50053">generateGetMethod</a><span class="delimiter">(</span><a title="MethodGen.this.global.Template" id="51712">templ</a>: <span title="MethodGen.this.global.Template">Template</span>, <a title="MethodGen.this.global.Symbol" id="51713">clazz</a>: <span title="MethodGen.this.global.Symbol">Symbol</span>, <a title="List[MethodGen.this.global.Symbol]" id="51714">instanceVars</a>: <span title="List[MethodGen.this.global.Symbol]">List</span><span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="MethodGen.this.global.MethodSymbol" id="51717">newSym</a> = <a href="#51713" title="MethodGen.this.global.Symbol">clazz</a>.<span title="(pos: MethodGen.this.global.Position, name: MethodGen.this.global.TermName)MethodGen.this.global.MethodSymbol">newMethod</span><span class="delimiter">(</span><a href="#51713" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; MethodGen.this.global.Position">pos</span>.<span title="=&gt; scala.tools.nsc.util.Position">focus</span>, <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;get&quot;)" class="string">&quot;get&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#51717" title="MethodGen.this.global.MethodSymbol">newSym</a> <span title="(mask: Long)newSym.type">setFlag</span> SYNTHETIC <span title="Long(2097154L)">|</span> OVERRIDE 
      <a href="#51717" title="MethodGen.this.global.MethodSymbol">newSym</a> <span title="(info: MethodGen.this.global.Type)newSym.type">setInfo</span> <a href="#9544" title="(params: List[MethodGen.this.global.Symbol], resultType: MethodGen.this.global.Type)MethodGen.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#51717" title="MethodGen.this.global.MethodSymbol">newSym</a>.<span title="(argtypes: List[MethodGen.this.global.Type])List[MethodGen.this.global.Symbol]">newSyntheticValueParams</span><span class="delimiter">(</span><span title="(xs: MethodGen.this.global.Type*)List[MethodGen.this.global.Type]">List</span><span class="delimiter">(</span><span class="comment">/*Boxed*/</span> <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">IntClass</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span>, <span class="comment">/*Any*/</span><a href="#9544" title="=&gt; MethodGen.this.global.Symbol">ObjectClass</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span><span class="delimiter">)</span>
      <a href="#51713" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; MethodGen.this.global.Type">info</span>.<span title="=&gt; MethodGen.this.global.Scope">decls</span> <span title="(sym: MethodGen.this.global.Symbol)MethodGen.this.global.Symbol">enter</span> <a href="#51717" title="MethodGen.this.global.MethodSymbol">newSym</a> 

      <span class="keyword">val</span> <a title="MethodGen.this.global.Ident" id="51718">arg</a> = <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkSymbolMethodsFromSymbol : (target: MethodGen.this.global.Symbol)MethodGen.this.CODE.SymbolMethods">newSym</a> <span title="(idx: Int)MethodGen.this.global.Ident">ARG</span> <span title="Int(0)" class="int">0</span>
      <span class="comment">// TODO: throw the avro bad index exception here</span>
      <span class="keyword">val</span> <a title="List[MethodGen.this.global.CaseDef]" id="51719">default</a> = <span title="(xs: MethodGen.this.global.CaseDef*)List[MethodGen.this.global.CaseDef]">List</span><span class="delimiter">(</span><a href="#9544" title="=&gt; MethodGen.this.CODE.CaseStart">DEFAULT</a> <span title="(body: MethodGen.this.global.Tree)MethodGen.this.global.CaseDef">==&gt;</span> <a href="#9544" title="(sym: MethodGen.this.global.Symbol, msg: MethodGen.this.global.Tree)MethodGen.this.global.Throw">THROW</a><span class="delimiter">(</span><a href="#9544" title="=&gt; MethodGen.this.global.Symbol">IndexOutOfBoundsExceptionClass</a>, <a href="#51718" title="MethodGen.this.global.Ident">arg</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="List[MethodGen.this.global.CaseDef]" id="51720">cases</a> = <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a title="MethodGen.this.global.Symbol" id="51867">sym</a>, <a title="Int" id="51868">i</a><span class="delimiter">)</span> &lt;- <a href="#51714" title="List[MethodGen.this.global.Symbol]">instanceVars</a>.<a href="#51840" title="(f: (MethodGen.this.global.Symbol, Int) =&gt; MethodGen.this.global.CaseDef)(implicit bf: scala.collection.generic.CanBuildFrom[List[(MethodGen.this.global.Symbol, Int)],MethodGen.this.global.CaseDef,List[MethodGen.this.global.CaseDef]])List[MethodGen.this.global.CaseDef]">zipWithIndex</a><span class="delimiter">)</span> <span class="keyword">yield</span> <span class="delimiter">{</span>
        <a href="#9544" title="(pat: MethodGen.this.global.Tree)MethodGen.this.CODE.CaseStart">CASE</a><span class="delimiter">(</span><a href="#9544" title="(x: Any)MethodGen.this.global.Literal">LIT</a><span class="delimiter">(</span><a href="#51868" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(body: MethodGen.this.global.Tree)MethodGen.this.global.CaseDef">==&gt;</span> <span class="delimiter">{</span>
          <span title="MethodGen.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#50052" title="(tpe: MethodGen.this.global.Type)Boolean">canInline</a><span class="delimiter">(</span><a href="#51867" title="MethodGen.this.global.Symbol">sym</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="comment">// trivial ones where no conversions are necessary</span>
            <a href="#50048" title="(clazz: MethodGen.this.global.Symbol, sym: MethodGen.this.global.Symbol)MethodGen.this.global.Tree">castToObject</a><span class="delimiter">(</span><a href="#51713" title="MethodGen.this.global.Symbol">clazz</a>, <a href="#51867" title="MethodGen.this.global.Symbol">sym</a><span class="delimiter">)</span>
          <span class="keyword">else</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="MethodGen.this.global.Type" id="51871">avroTpe</a> = <a href="#50050" title="(tpe: MethodGen.this.global.Type)MethodGen.this.global.Type">toAvroType</a><span class="delimiter">(</span><a href="#51867" title="MethodGen.this.global.Symbol">sym</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="&lt;none&gt; extends MethodGen.this.global.TermTree with Serializable" id="51872">schema</a> = 
              <span title="&lt;none&gt; extends MethodGen.this.global.TermTree with Serializable" class="keyword">if</span> <span class="delimiter">(</span><a href="#50051" title="(tpe: MethodGen.this.global.Type)Boolean">needsSchemaToConvert</a><span class="delimiter">(</span><a href="#51867" title="MethodGen.this.global.Symbol">sym</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span>
                <a href="#9544" title="(fun: MethodGen.this.global.Tree, args: List[MethodGen.this.global.Tree])MethodGen.this.global.Apply">Apply</a><span class="delimiter">(</span>
                  <a href="#9544" title="(fun: MethodGen.this.global.Tree, args: List[MethodGen.this.global.Tree])MethodGen.this.global.Apply">Apply</a><a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: MethodGen.this.global.Tree)MethodGen.this.CODE.TreeMethods" class="delimiter">(</a>
                    <a href="#9544" title="(sym: MethodGen.this.global.Symbol)MethodGen.this.global.Tree">This</a><a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: MethodGen.this.global.Tree)MethodGen.this.CODE.TreeMethods" class="delimiter">(</a><a href="#51713" title="MethodGen.this.global.Symbol">clazz</a><span class="delimiter">)</span> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.CODE.TreeMethods">DOT</a> <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;getSchema&quot;)" class="string">&quot;getSchema&quot;</span><span class="delimiter">)</span> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.CODE.TreeMethods">DOT</a> <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;getFields&quot;)" class="string">&quot;getFields&quot;</span><span class="delimiter">)</span> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.global.Select">DOT</a> <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;get&quot;)" class="string">&quot;get&quot;</span><span class="delimiter">)</span>,
                    <span title="(xs: MethodGen.this.global.Literal*)List[MethodGen.this.global.Literal]">List</span><span class="delimiter">(</span><a href="#9544" title="(x: Any)MethodGen.this.global.Literal">LIT</a><span class="delimiter">(</span><a href="#51868" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.global.Select">DOT</a> <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;schema&quot;)" class="string">&quot;schema&quot;</span><span class="delimiter">)</span>,
                  <span title="object Nil">Nil</span><span class="delimiter">)</span>
              <span class="keyword">else</span> <a href="#9544" title="(x: Any)MethodGen.this.global.Literal">LIT</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
            <a href="#9544" title="(fun: MethodGen.this.global.Tree, args: List[MethodGen.this.global.Tree])MethodGen.this.global.Apply">Apply</a><a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: MethodGen.this.global.Tree)MethodGen.this.CODE.TreeMethods" class="delimiter">(</a>
              <a href="#9544" title="(fun: MethodGen.this.global.Tree, args: List[MethodGen.this.global.Tree])MethodGen.this.global.TypeApply">TypeApply</a><span class="delimiter">(</span>
                <a href="#9544" title="(sym: MethodGen.this.global.Symbol)MethodGen.this.global.Tree">This</a><a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: MethodGen.this.global.Tree)MethodGen.this.CODE.TreeMethods" class="delimiter">(</a><a href="#51713" title="MethodGen.this.global.Symbol">clazz</a><span class="delimiter">)</span> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.global.Select">DOT</a> <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;convert&quot;)" class="string">&quot;convert&quot;</span><span class="delimiter">)</span>,
                <span title="(xs: MethodGen.this.global.TypeTree*)List[MethodGen.this.global.TypeTree]">List</span><span class="delimiter">(</span>
                  <a href="#9544" title="(tp: MethodGen.this.global.Type)MethodGen.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#51867" title="MethodGen.this.global.Symbol">sym</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span><span class="delimiter">)</span>,
                  <a href="#9544" title="(tp: MethodGen.this.global.Type)MethodGen.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#51871" title="MethodGen.this.global.Type">avroTpe</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
                <span title="(xs: MethodGen.this.global.Tree with Serializable*)List[MethodGen.this.global.Tree with Serializable]">List</span><span class="delimiter">(</span><a href="#51872" title="&lt;none&gt; extends MethodGen.this.global.TermTree with Serializable">schema</a>, <a href="#9544" title="(sym: MethodGen.this.global.Symbol)MethodGen.this.global.Tree">This</a><a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: MethodGen.this.global.Tree)MethodGen.this.CODE.TreeMethods" class="delimiter">(</a><a href="#51713" title="MethodGen.this.global.Symbol">clazz</a><span class="delimiter">)</span> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.global.Select">DOT</a> <a href="#51867" title="MethodGen.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(tpe: MethodGen.this.global.Type)MethodGen.this.global.TypeApply">AS</span> <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">ObjectClass</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <a href="#50029" title="(owner: MethodGen.this.global.Symbol)(trans: =&gt; MethodGen.this.global.analyzer.global.Tree)MethodGen.this.global.analyzer.global.Tree">atOwner</a><span class="delimiter">(</span><a href="#51713" title="MethodGen.this.global.Symbol">clazz</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#50029" title="=&gt; MethodGen.this.global.analyzer.Typer">localTyper</a>.<span title="(tree: MethodGen.this.global.analyzer.global.Tree)MethodGen.this.global.analyzer.global.Tree">typed</span> <span class="delimiter">{</span>
        <a href="#9544" title="(sym: MethodGen.this.global.Symbol)MethodGen.this.CODE.DefSymStart">DEF</a><span class="delimiter">(</span><a href="#51717" title="MethodGen.this.global.MethodSymbol">newSym</a><span class="delimiter">)</span> <span title="(rhs: MethodGen.this.global.Tree)MethodGen.this.global.DefDef">===</span> <span class="delimiter">{</span>
          <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: MethodGen.this.global.Tree)MethodGen.this.CODE.TreeMethods">arg</a> <span title="(cases: MethodGen.this.global.CaseDef*)MethodGen.this.global.Match">MATCH</span> <span class="delimiter">{</span> <a href="#51720" title="List[MethodGen.this.global.CaseDef]">cases</a> <a href="#52144" title="(prefix: List[MethodGen.this.global.CaseDef])List[MethodGen.this.global.CaseDef]">:::</a> <a href="#51719" title="List[MethodGen.this.global.CaseDef]">default</a> : _* <span class="delimiter">}</span>
        <span class="delimiter">}</span>   
      <span class="delimiter">}</span><span class="delimiter">)</span>   
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(templ: MethodGen.this.global.Template, clazz: MethodGen.this.global.Symbol, instanceVars: List[MethodGen.this.global.Symbol])MethodGen.this.global.analyzer.global.Tree" id="50054">generateSetMethod</a><span class="delimiter">(</span><a title="MethodGen.this.global.Template" id="52158">templ</a>: <span title="MethodGen.this.global.Template">Template</span>, <a title="MethodGen.this.global.Symbol" id="52159">clazz</a>: <span title="MethodGen.this.global.Symbol">Symbol</span>, <a title="List[MethodGen.this.global.Symbol]" id="52160">instanceVars</a>: <span title="List[MethodGen.this.global.Symbol]">List</span><span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="MethodGen.this.global.MethodSymbol" id="52163">newSym</a> = <a href="#52159" title="MethodGen.this.global.Symbol">clazz</a>.<span title="(pos: MethodGen.this.global.Position, name: MethodGen.this.global.TermName)MethodGen.this.global.MethodSymbol">newMethod</span><span class="delimiter">(</span><a href="#52159" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; MethodGen.this.global.Position">pos</span>.<span title="=&gt; scala.tools.nsc.util.Position">focus</span>, <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;put&quot;)" class="string">&quot;put&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#52163" title="MethodGen.this.global.MethodSymbol">newSym</a> <span title="(mask: Long)newSym.type">setFlag</span> SYNTHETIC <span title="Long(2097154L)">|</span> OVERRIDE
      <a href="#52163" title="MethodGen.this.global.MethodSymbol">newSym</a> <span title="(info: MethodGen.this.global.Type)newSym.type">setInfo</span> <a href="#9544" title="(params: List[MethodGen.this.global.Symbol], resultType: MethodGen.this.global.Type)MethodGen.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#52163" title="MethodGen.this.global.MethodSymbol">newSym</a>.<span title="(argtypes: List[MethodGen.this.global.Type])List[MethodGen.this.global.Symbol]">newSyntheticValueParams</span><span class="delimiter">(</span><span title="(xs: MethodGen.this.global.Type*)List[MethodGen.this.global.Type]">List</span><span class="delimiter">(</span><a href="#9544" title="=&gt; MethodGen.this.global.Symbol">IntClass</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span>, <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">AnyClass</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#9544" title="=&gt; MethodGen.this.global.Symbol">UnitClass</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span><span class="delimiter">)</span>
      <a href="#52159" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; MethodGen.this.global.Type">info</span>.<span title="=&gt; MethodGen.this.global.Scope">decls</span> <span title="(sym: MethodGen.this.global.Symbol)MethodGen.this.global.Symbol">enter</span> <a href="#52163" title="MethodGen.this.global.MethodSymbol">newSym</a> 

      <span class="comment">// TODO: throw avro bad index class</span>
      <span class="keyword">val</span> <a title="List[MethodGen.this.global.CaseDef]" id="52164">default</a> = <span title="(xs: MethodGen.this.global.CaseDef*)List[MethodGen.this.global.CaseDef]">List</span><span class="delimiter">(</span><a href="#9544" title="=&gt; MethodGen.this.CODE.CaseStart">DEFAULT</a> <span title="(body: MethodGen.this.global.Tree)MethodGen.this.global.CaseDef">==&gt;</span> <a href="#9544" title="(sym: MethodGen.this.global.Symbol, msg: MethodGen.this.global.Tree)MethodGen.this.global.Throw">THROW</a><span class="delimiter">(</span><a href="#9544" title="=&gt; MethodGen.this.global.Symbol">IndexOutOfBoundsExceptionClass</a>, <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkSymbolMethodsFromSymbol : (target: MethodGen.this.global.Symbol)MethodGen.this.CODE.SymbolMethods">newSym</a> <span title="(idx: Int)MethodGen.this.global.Ident">ARG</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="MethodGen.this.global.Type" id="52165">byteBufferTpe</a> = <a href="ScalaAvroPlugin.scala.html#21665" title="=&gt; MethodGen.this.global.Symbol">byteBufferClass</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span>
      <span class="keyword">val</span> <a title="MethodGen.this.global.Type" id="52166">utf8Tpe</a> = <a href="ScalaAvroPlugin.scala.html#21667" title="=&gt; MethodGen.this.global.Symbol">utf8Class</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span>

      <span class="keyword">val</span> <a title="List[MethodGen.this.global.CaseDef]" id="52167">cases</a> = <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a title="MethodGen.this.global.Symbol" id="52282">sym</a>, <a title="Int" id="52283">i</a><span class="delimiter">)</span> &lt;- <a href="#52160" title="List[MethodGen.this.global.Symbol]">instanceVars</a>.<a href="#52255" title="(f: (MethodGen.this.global.Symbol, Int) =&gt; MethodGen.this.global.CaseDef)(implicit bf: scala.collection.generic.CanBuildFrom[List[(MethodGen.this.global.Symbol, Int)],MethodGen.this.global.CaseDef,List[MethodGen.this.global.CaseDef]])List[MethodGen.this.global.CaseDef]">zipWithIndex</a><span class="delimiter">)</span> <span class="keyword">yield</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="&lt;none&gt; extends MethodGen.this.global.GenericApply with Serializable" id="52284">rhs</a> =
          <span title="&lt;none&gt; extends MethodGen.this.global.GenericApply with Serializable" class="keyword">if</span> <span class="delimiter">(</span><a href="#50052" title="(tpe: MethodGen.this.global.Type)Boolean">canInline</a><span class="delimiter">(</span><a href="#52282" title="MethodGen.this.global.Symbol">sym</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">(</span><span class="delimiter">(</span><a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkSymbolMethodsFromSymbol : (target: MethodGen.this.global.Symbol)MethodGen.this.CODE.SymbolMethods">newSym</a> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: MethodGen.this.global.Tree)MethodGen.this.CODE.TreeMethods">ARG</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(tpe: MethodGen.this.global.Type)MethodGen.this.global.TypeApply">AS</span> <a href="#52282" title="MethodGen.this.global.Symbol">sym</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="MethodGen.this.global.Type" id="52291">avroTpe</a> = <a href="#50050" title="(tpe: MethodGen.this.global.Type)MethodGen.this.global.Type">toAvroType</a><span class="delimiter">(</span><a href="#52282" title="MethodGen.this.global.Symbol">sym</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="&lt;none&gt; extends MethodGen.this.global.TermTree with Serializable" id="52292">schema</a> = 
              <span title="&lt;none&gt; extends MethodGen.this.global.TermTree with Serializable" class="keyword">if</span> <span class="delimiter">(</span><a href="#50051" title="(tpe: MethodGen.this.global.Type)Boolean">needsSchemaToConvert</a><span class="delimiter">(</span><a href="#52282" title="MethodGen.this.global.Symbol">sym</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span>
                <a href="#9544" title="(fun: MethodGen.this.global.Tree, args: List[MethodGen.this.global.Tree])MethodGen.this.global.Apply">Apply</a><span class="delimiter">(</span>
                  <a href="#9544" title="(fun: MethodGen.this.global.Tree, args: List[MethodGen.this.global.Tree])MethodGen.this.global.Apply">Apply</a><a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: MethodGen.this.global.Tree)MethodGen.this.CODE.TreeMethods" class="delimiter">(</a>
                    <a href="#9544" title="(sym: MethodGen.this.global.Symbol)MethodGen.this.global.Tree">This</a><a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: MethodGen.this.global.Tree)MethodGen.this.CODE.TreeMethods" class="delimiter">(</a><a href="#52159" title="MethodGen.this.global.Symbol">clazz</a><span class="delimiter">)</span> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.CODE.TreeMethods">DOT</a> <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;getSchema&quot;)" class="string">&quot;getSchema&quot;</span><span class="delimiter">)</span> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.CODE.TreeMethods">DOT</a> <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;getFields&quot;)" class="string">&quot;getFields&quot;</span><span class="delimiter">)</span> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.global.Select">DOT</a> <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;get&quot;)" class="string">&quot;get&quot;</span><span class="delimiter">)</span>,
                    <span title="(xs: MethodGen.this.global.Literal*)List[MethodGen.this.global.Literal]">List</span><span class="delimiter">(</span><a href="#9544" title="(x: Any)MethodGen.this.global.Literal">LIT</a><span class="delimiter">(</span><a href="#52283" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.global.Select">DOT</a> <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;schema&quot;)" class="string">&quot;schema&quot;</span><span class="delimiter">)</span>,
                  <span title="object Nil">Nil</span><span class="delimiter">)</span>
              <span class="keyword">else</span> <a href="#9544" title="(x: Any)MethodGen.this.global.Literal">LIT</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
            <a href="#9544" title="(fun: MethodGen.this.global.Tree, args: List[MethodGen.this.global.Tree])MethodGen.this.global.Apply">Apply</a><span class="delimiter">(</span>
              <a href="#9544" title="(fun: MethodGen.this.global.Tree, args: List[MethodGen.this.global.Tree])MethodGen.this.global.TypeApply">TypeApply</a><span class="delimiter">(</span>
                <a href="#9544" title="(sym: MethodGen.this.global.Symbol)MethodGen.this.global.Tree">This</a><a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: MethodGen.this.global.Tree)MethodGen.this.CODE.TreeMethods" class="delimiter">(</a><a href="#52159" title="MethodGen.this.global.Symbol">clazz</a><span class="delimiter">)</span> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.global.Select">DOT</a> <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;convert&quot;)" class="string">&quot;convert&quot;</span><span class="delimiter">)</span>,
                <span title="(xs: MethodGen.this.global.TypeTree*)List[MethodGen.this.global.TypeTree]">List</span><span class="delimiter">(</span>
                  <a href="#9544" title="(tp: MethodGen.this.global.Type)MethodGen.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#52291" title="MethodGen.this.global.Type">avroTpe</a><span class="delimiter">)</span>,
                  <a href="#9544" title="(tp: MethodGen.this.global.Type)MethodGen.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#52282" title="MethodGen.this.global.Symbol">sym</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>,
                <span title="(xs: MethodGen.this.global.TermTree with Serializable*)List[MethodGen.this.global.TermTree with Serializable]">List</span><span class="delimiter">(</span><a href="#52292" title="&lt;none&gt; extends MethodGen.this.global.TermTree with Serializable">schema</a>, <span class="delimiter">(</span><a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkSymbolMethodsFromSymbol : (target: MethodGen.this.global.Symbol)MethodGen.this.CODE.SymbolMethods">newSym</a> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: MethodGen.this.global.Tree)MethodGen.this.CODE.TreeMethods">ARG</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(tpe: MethodGen.this.global.Type)MethodGen.this.global.TypeApply">AS</span> <a href="#52291" title="MethodGen.this.global.Type">avroTpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <a href="#9544" title="(pat: MethodGen.this.global.Tree)MethodGen.this.CODE.CaseStart">CASE</a><span class="delimiter">(</span><a href="#9544" title="(x: Any)MethodGen.this.global.Literal">LIT</a><span class="delimiter">(</span><a href="#52283" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(body: MethodGen.this.global.Tree)MethodGen.this.global.CaseDef">==&gt;</span> <a href="#9544" title="(lhs: MethodGen.this.global.Tree, rhs: MethodGen.this.global.Tree)MethodGen.this.global.Assign">Assign</a><span class="delimiter">(</span><a href="#9544" title="(sym: MethodGen.this.global.Symbol)MethodGen.this.global.Tree">This</a><a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: MethodGen.this.global.Tree)MethodGen.this.CODE.TreeMethods" class="delimiter">(</a><a href="#52159" title="MethodGen.this.global.Symbol">clazz</a><span class="delimiter">)</span> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.global.Select">DOT</a> <a href="#52282" title="MethodGen.this.global.Symbol">sym</a>, <a href="#52284" title="&lt;none&gt; extends MethodGen.this.global.GenericApply with Serializable">rhs</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#50029" title="(owner: MethodGen.this.global.Symbol)(trans: =&gt; MethodGen.this.global.analyzer.global.Tree)MethodGen.this.global.analyzer.global.Tree">atOwner</a><span class="delimiter">(</span><a href="#52159" title="MethodGen.this.global.Symbol">clazz</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#50029" title="=&gt; MethodGen.this.global.analyzer.Typer">localTyper</a>.<span title="(tree: MethodGen.this.global.analyzer.global.Tree)MethodGen.this.global.analyzer.global.Tree">typed</span> <span class="delimiter">{</span>
        <a href="#9544" title="(sym: MethodGen.this.global.Symbol)MethodGen.this.CODE.DefSymStart">DEF</a><span class="delimiter">(</span><a href="#52163" title="MethodGen.this.global.MethodSymbol">newSym</a><span class="delimiter">)</span> <span title="(rhs: MethodGen.this.global.Tree)MethodGen.this.global.DefDef">===</span> <span class="delimiter">{</span>
            <span class="delimiter">(</span><a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkSymbolMethodsFromSymbol : (target: MethodGen.this.global.Symbol)MethodGen.this.CODE.SymbolMethods">newSym</a> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: MethodGen.this.global.Tree)MethodGen.this.CODE.TreeMethods">ARG</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="(cases: MethodGen.this.global.CaseDef*)MethodGen.this.global.Match">MATCH</span> <span class="delimiter">{</span> <a href="#52167" title="List[MethodGen.this.global.CaseDef]">cases</a> <a href="#52534" title="(prefix: List[MethodGen.this.global.CaseDef])List[MethodGen.this.global.CaseDef]">:::</a> <a href="#52164" title="List[MethodGen.this.global.CaseDef]">default</a> : _* <span class="delimiter">}</span>
        <span class="delimiter">}</span>   
      <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(clazzTree: MethodGen.this.global.ClassDef)MethodGen.this.global.Tree" id="50055">generateGetSchemaMethod</a><span class="delimiter">(</span><a title="MethodGen.this.global.ClassDef" id="52545">clazzTree</a>: <span title="MethodGen.this.global.ClassDef">ClassDef</span><span class="delimiter">)</span>: <span title="MethodGen.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="MethodGen.this.global.Symbol" id="52547">clazz</a> = <a href="#52545" title="MethodGen.this.global.ClassDef">clazzTree</a>.<span title="=&gt; MethodGen.this.global.Symbol">symbol</span>
      <span class="keyword">val</span> <a title="MethodGen.this.global.MethodSymbol" id="52548">newSym</a> = <a href="#52547" title="MethodGen.this.global.Symbol">clazz</a>.<span title="(pos: MethodGen.this.global.Position, name: MethodGen.this.global.TermName)MethodGen.this.global.MethodSymbol">newMethod</span><span class="delimiter">(</span><a href="#52547" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; MethodGen.this.global.Position">pos</span>.<span title="=&gt; scala.tools.nsc.util.Position">focus</span>, <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;getSchema&quot;)" class="string">&quot;getSchema&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#52548" title="MethodGen.this.global.MethodSymbol">newSym</a> <span title="(mask: Long)newSym.type">setFlag</span> SYNTHETIC <span title="Long(2097154L)">|</span> OVERRIDE
      <a href="#52548" title="MethodGen.this.global.MethodSymbol">newSym</a> <span title="(info: MethodGen.this.global.Type)newSym.type">setInfo</span> <a href="#9544" title="(params: List[MethodGen.this.global.Symbol], resultType: MethodGen.this.global.Type)MethodGen.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#52548" title="MethodGen.this.global.MethodSymbol">newSym</a>.<span title="(argtypes: List[MethodGen.this.global.Type])List[MethodGen.this.global.Symbol]">newSyntheticValueParams</span><span class="delimiter">(</span><span title="object Nil">Nil</span><span class="delimiter">)</span>, <a href="ScalaAvroPlugin.scala.html#21673" title="=&gt; MethodGen.this.global.Symbol">schemaClass</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span><span class="delimiter">)</span>
      <a href="#52547" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; MethodGen.this.global.Type">info</span>.<span title="=&gt; MethodGen.this.global.Scope">decls</span> <span title="(sym: MethodGen.this.global.Symbol)MethodGen.this.global.Symbol">enter</span> <a href="#52548" title="MethodGen.this.global.MethodSymbol">newSym</a> 
      <span class="comment">//println(&quot;localTyper.context1.enclClass: &quot; + localTyper.context1.enclClass)</span>
      <span class="comment">//println(&quot;companionModuleOf(clazz): &quot; + companionModuleOf(clazzTree))</span>
      <span class="comment">//println(&quot;companionModuleOf(clazz).moduleClass: &quot; + companionModuleOf(clazzTree.symbol).moduleClass)</span>

      <span class="keyword">val</span> <a title="MethodGen.this.global.Tree" id="52549">innerTree</a>: <span title="MethodGen.this.global.Tree">Tree</span> =  <span class="comment">/** Not sure why compiler needs type information (Tree) here */</span>
        <span title="MethodGen.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#52547" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; MethodGen.this.global.Symbol">owner</span>.<span title="=&gt; Boolean">isClass</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="comment">/** Only when the owner of this class is another class can we perform
                                    *  the optimization of referencing the companion object */</span>
            <a href="ScalaAvroPlugin.scala.html#21648" title="(a: AnyRef)Unit">debug</a><span class="delimiter">(</span><span title="java.lang.String(&quot;--- clazz ---: &quot;)" class="string">&quot;--- clazz ---: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#52547" title="MethodGen.this.global.Symbol">clazz</a><span class="delimiter">)</span>
            <a href="ScalaAvroPlugin.scala.html#21648" title="(a: AnyRef)Unit">debug</a><span class="delimiter">(</span><span title="java.lang.String(&quot;clazz.toplevelClass: &quot;)" class="string">&quot;clazz.toplevelClass: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#52547" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; MethodGen.this.global.Symbol">toplevelClass</span><span class="delimiter">)</span>
            <a href="ScalaAvroPlugin.scala.html#21648" title="(a: AnyRef)Unit">debug</a><span class="delimiter">(</span><span title="java.lang.String(&quot;clazz.outerClass: &quot;)" class="string">&quot;clazz.outerClass: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#52547" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; MethodGen.this.global.Symbol">outerClass</span><span class="delimiter">)</span>
            <a href="ScalaAvroPlugin.scala.html#21648" title="(a: AnyRef)Unit">debug</a><span class="delimiter">(</span><span title="java.lang.String(&quot;clazz.enclClass: &quot;)" class="string">&quot;clazz.enclClass: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#52547" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; MethodGen.this.global.Symbol">enclClass</span><span class="delimiter">)</span>
            <span title="MethodGen.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#52547" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; MethodGen.this.global.Symbol">toplevelClass</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#52547" title="MethodGen.this.global.Symbol">clazz</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#9544" title="(sym: MethodGen.this.global.Symbol)MethodGen.this.global.Tree">This</a><a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: MethodGen.this.global.Tree)MethodGen.this.CODE.TreeMethods" class="delimiter">(</a><a href="ScalaAvroPlugin.scala.html#21712" title="(clazz: MethodGen.this.global.Symbol)MethodGen.this.global.Symbol">companionModuleOf</a><span class="delimiter">(</span><a href="#52545" title="MethodGen.this.global.ClassDef">clazzTree</a>.<span title="=&gt; MethodGen.this.global.Symbol">symbol</span><span class="delimiter">)</span>.<span title="=&gt; MethodGen.this.global.Symbol">moduleClass</span><span class="delimiter">)</span> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.global.Select">DOT</a> <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;schema&quot;)" class="string">&quot;schema&quot;</span><span class="delimiter">)</span>
            <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
              <a href="#9544" title="(sym: MethodGen.this.global.Symbol)MethodGen.this.global.Tree">This</a><a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: MethodGen.this.global.Tree)MethodGen.this.CODE.TreeMethods" class="delimiter">(</a><a href="#52547" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; MethodGen.this.global.Symbol">outerClass</span><span class="delimiter">)</span> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.CODE.TreeMethods">DOT</a> <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><a href="#52547" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; MethodGen.this.global.Name">name</span>.<span title="()String">toString</span><span class="delimiter">)</span> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.global.Select">DOT</a> <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;schema&quot;)" class="string">&quot;schema&quot;</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span> <span class="comment">/** Fall back to the naive version in the other cases */</span>
          <span class="comment">// TODO: change getSchema to be a lazy val here instead (so we can</span>
          <span class="comment">// at least cache the invocations)</span>
          <a href="#9544" title="(msg: String)Unit">warning</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Unable to optimize getSchema method for class %s&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#52547" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; String">fullName</span>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#9544" title="(fun: MethodGen.this.global.Tree, args: List[MethodGen.this.global.Tree])MethodGen.this.global.Apply">Apply</a><span class="delimiter">(</span>
            <a href="#9544" title="(name: MethodGen.this.global.Name)MethodGen.this.global.Ident">Ident</a><a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: MethodGen.this.global.Tree)MethodGen.this.CODE.TreeMethods" class="delimiter">(</a><a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;edu&quot;)" class="string">&quot;edu&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.CODE.TreeMethods">DOT</a> 
                <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;berkeley&quot;)" class="string">&quot;berkeley&quot;</span><span class="delimiter">)</span>   <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.CODE.TreeMethods">DOT</a>
                <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;cs&quot;)" class="string">&quot;cs&quot;</span><span class="delimiter">)</span>     <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.CODE.TreeMethods">DOT</a>
                <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;avro&quot;)" class="string">&quot;avro&quot;</span><span class="delimiter">)</span>   <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.CODE.TreeMethods">DOT</a>
		<a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;runtime&quot;)" class="string">&quot;runtime&quot;</span><span class="delimiter">)</span>   <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.CODE.TreeMethods">DOT</a>
		<a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;ScalaSpecificRecord&quot;)" class="string">&quot;ScalaSpecificRecord&quot;</span><span class="delimiter">)</span>   <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.global.Select">DOT</a>
                <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;parse&quot;)" class="string">&quot;parse&quot;</span><span class="delimiter">)</span>,
            <span title="(xs: MethodGen.this.global.Literal*)List[MethodGen.this.global.Literal]">List</span><span class="delimiter">(</span><a href="#9544" title="(x: Any)MethodGen.this.global.Literal">LIT</a><span class="delimiter">(</span><a href="ScalaAvroPlugin.scala.html#21694" title="(name: MethodGen.this.global.Symbol)Option[org.apache.avro.Schema]">retrieveRecordSchema</a><span class="delimiter">(</span><a href="#52547" title="MethodGen.this.global.Symbol">clazz</a><span class="delimiter">)</span>.<span title="=&gt; org.apache.avro.Schema">get</span>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <a href="#50029" title="=&gt; MethodGen.this.global.analyzer.Typer">localTyper</a>.<span title="(tree: MethodGen.this.global.analyzer.global.Tree)MethodGen.this.global.analyzer.global.Tree">typed</span> <span class="delimiter">{</span>
        <a href="#9544" title="(sym: MethodGen.this.global.Symbol)MethodGen.this.CODE.DefSymStart">DEF</a><span class="delimiter">(</span><a href="#52548" title="MethodGen.this.global.MethodSymbol">newSym</a><span class="delimiter">)</span> <span title="(rhs: MethodGen.this.global.Tree)MethodGen.this.global.DefDef">===</span> <span class="delimiter">{</span> <a href="#52549" title="MethodGen.this.global.Tree">innerTree</a> <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(clazzTree: MethodGen.this.global.ClassDef, unionSchema: org.apache.avro.Schema)MethodGen.this.global.Tree" id="50056">generateGetUnionSchemaMethod</a><span class="delimiter">(</span><a title="MethodGen.this.global.ClassDef" id="52783">clazzTree</a>: <span title="MethodGen.this.global.ClassDef">ClassDef</span>, <a title="org.apache.avro.Schema" id="52784">unionSchema</a>: <span title="org.apache.avro.Schema">Schema</span><span class="delimiter">)</span>: <span title="MethodGen.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="MethodGen.this.global.Symbol" id="52786">clazz</a> = <a href="#52783" title="MethodGen.this.global.ClassDef">clazzTree</a>.<span title="=&gt; MethodGen.this.global.Symbol">symbol</span>
      <span class="keyword">val</span> <a title="MethodGen.this.global.MethodSymbol" id="52787">newSym</a> = <a href="#52786" title="MethodGen.this.global.Symbol">clazz</a>.<span title="(pos: MethodGen.this.global.Position, name: MethodGen.this.global.TermName)MethodGen.this.global.MethodSymbol">newMethod</span><span class="delimiter">(</span><a href="#52786" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; MethodGen.this.global.Position">pos</span>.<span title="=&gt; scala.tools.nsc.util.Position">focus</span>, <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;getSchema&quot;)" class="string">&quot;getSchema&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#52787" title="MethodGen.this.global.MethodSymbol">newSym</a> <span title="(mask: Long)newSym.type">setFlag</span> SYNTHETIC <span title="Long(2097154L)">|</span> OVERRIDE
      <a href="#52787" title="MethodGen.this.global.MethodSymbol">newSym</a> <span title="(info: MethodGen.this.global.Type)newSym.type">setInfo</span> <a href="#9544" title="(params: List[MethodGen.this.global.Symbol], resultType: MethodGen.this.global.Type)MethodGen.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#52787" title="MethodGen.this.global.MethodSymbol">newSym</a>.<span title="(argtypes: List[MethodGen.this.global.Type])List[MethodGen.this.global.Symbol]">newSyntheticValueParams</span><span class="delimiter">(</span><span title="object Nil">Nil</span><span class="delimiter">)</span>, <a href="ScalaAvroPlugin.scala.html#21673" title="=&gt; MethodGen.this.global.Symbol">schemaClass</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span><span class="delimiter">)</span>
      <a href="#52786" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; MethodGen.this.global.Type">info</span>.<span title="=&gt; MethodGen.this.global.Scope">decls</span> <span title="(sym: MethodGen.this.global.Symbol)MethodGen.this.global.Symbol">enter</span> <a href="#52787" title="MethodGen.this.global.MethodSymbol">newSym</a> 

      <a href="#50029" title="=&gt; MethodGen.this.global.analyzer.Typer">localTyper</a>.<span title="(tree: MethodGen.this.global.analyzer.global.Tree)MethodGen.this.global.analyzer.global.Tree">typed</span> <span class="delimiter">{</span>
        <a href="#9544" title="(sym: MethodGen.this.global.Symbol)MethodGen.this.CODE.DefSymStart">DEF</a><span class="delimiter">(</span><a href="#52787" title="MethodGen.this.global.MethodSymbol">newSym</a><span class="delimiter">)</span> <span title="(rhs: MethodGen.this.global.Tree)MethodGen.this.global.DefDef">===</span> <span class="delimiter">{</span> 
          <a href="#9544" title="(fun: MethodGen.this.global.Tree, args: List[MethodGen.this.global.Tree])MethodGen.this.global.Apply">Apply</a><span class="delimiter">(</span>
            <a href="#9544" title="(name: MethodGen.this.global.Name)MethodGen.this.global.Ident">Ident</a><a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: MethodGen.this.global.Tree)MethodGen.this.CODE.TreeMethods" class="delimiter">(</a><a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;edu&quot;)" class="string">&quot;edu&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.CODE.TreeMethods">DOT</a> 
                <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;berkeley&quot;)" class="string">&quot;berkeley&quot;</span><span class="delimiter">)</span>   <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.CODE.TreeMethods">DOT</a>
                <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;cs&quot;)" class="string">&quot;cs&quot;</span><span class="delimiter">)</span>     <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.CODE.TreeMethods">DOT</a>
                <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;avro&quot;)" class="string">&quot;avro&quot;</span><span class="delimiter">)</span>   <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.CODE.TreeMethods">DOT</a>
		<a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;runtime&quot;)" class="string">&quot;runtime&quot;</span><span class="delimiter">)</span>   <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.CODE.TreeMethods">DOT</a>
		<a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;ScalaSpecificRecord&quot;)" class="string">&quot;ScalaSpecificRecord&quot;</span><span class="delimiter">)</span>   <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.global.Select">DOT</a>
                <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;parse&quot;)" class="string">&quot;parse&quot;</span><span class="delimiter">)</span>,
            <span title="(xs: MethodGen.this.global.Literal*)List[MethodGen.this.global.Literal]">List</span><span class="delimiter">(</span><a href="#9544" title="(x: Any)MethodGen.this.global.Literal">LIT</a><span class="delimiter">(</span><a href="#52784" title="org.apache.avro.Schema">unionSchema</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(impl: MethodGen.this.global.Template, clazz: MethodGen.this.global.Symbol)List[MethodGen.this.global.Tree]" id="50057">generateKVVals</a><span class="delimiter">(</span><a title="MethodGen.this.global.Template" id="52929">impl</a>: <span title="MethodGen.this.global.Template">Template</span>, <a title="MethodGen.this.global.Symbol" id="52930">clazz</a>: <span title="MethodGen.this.global.Symbol">Symbol</span><span class="delimiter">)</span>: <span title="List[MethodGen.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span> = <span class="delimiter">{</span>

      <span class="keyword">def</span> <a title="(fieldName: String)String" id="52932">fieldNameAsVal</a><span class="delimiter">(</span><a title="String" id="52940">fieldName</a>: <span title="String">String</span><span class="delimiter">)</span> = 
        <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%s &quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#52940" title="String">fieldName</a><span class="delimiter">)</span>

      <span class="keyword">def</span> <a title="(fieldName: String)String" id="52933">fieldNameAsGetter</a><span class="delimiter">(</span><a title="String" id="52944">fieldName</a>: <span title="String">String</span><span class="delimiter">)</span> =
        <a href="#52944" title="String">fieldName</a>

      <span class="keyword">def</span> <a title="(fieldName: String, offset: Int, schemaTree: MethodGen.this.global.Tree)List[MethodGen.this.global.Tree]" id="52934">newPairGenericRecord</a><span class="delimiter">(</span><a title="String" id="52945">fieldName</a>: <span title="String">String</span>, <a title="Int" id="52946">offset</a>: <span title="Int">Int</span>, <a title="MethodGen.this.global.Tree" id="52947">schemaTree</a>: <span title="MethodGen.this.global.Tree">Tree</span><span class="delimiter">)</span>: <span title="List[MethodGen.this.global.Tree]">List</span><span class="delimiter">[</span>Tree<span class="delimiter">]</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="MethodGen.this.global.MethodSymbol" id="52948">implSym</a> = <a href="#52930" title="MethodGen.this.global.Symbol">clazz</a>.<span title="(pos: MethodGen.this.global.Position, name: MethodGen.this.global.TermName)MethodGen.this.global.MethodSymbol">newMethod</span><span class="delimiter">(</span><a href="#52930" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; MethodGen.this.global.Position">pos</span>.<span title="=&gt; scala.tools.nsc.util.Position">focus</span>, <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><a href="#52933" title="(fieldName: String)String">fieldNameAsGetter</a><span class="delimiter">(</span><a href="#52945" title="String">fieldName</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#52948" title="MethodGen.this.global.MethodSymbol">implSym</a> <span title="(mask: Long)implSym.type">setFlag</span> <span class="delimiter">(</span>PROTECTED | METHOD <span title="Long(67L)">|</span> OVERRIDE<span class="delimiter">)</span>
        <a href="#52948" title="MethodGen.this.global.MethodSymbol">implSym</a> <span title="(info: MethodGen.this.global.Type)implSym.type">setInfo</span> <a href="#9544" title="(params: List[MethodGen.this.global.Symbol], resultType: MethodGen.this.global.Type)MethodGen.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#52948" title="MethodGen.this.global.MethodSymbol">implSym</a>.<span title="(argtypes: List[MethodGen.this.global.Type])List[MethodGen.this.global.Symbol]">newSyntheticValueParams</span><span class="delimiter">(</span><span title="object Nil">Nil</span><span class="delimiter">)</span>, <a href="ScalaAvroPlugin.scala.html#21669" title="=&gt; MethodGen.this.global.Symbol">GenericRecordClass</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span><span class="delimiter">)</span>
        <a href="#52930" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; MethodGen.this.global.Type">info</span>.<span title="=&gt; MethodGen.this.global.Scope">decls</span> <span title="(sym: MethodGen.this.global.Symbol)MethodGen.this.global.Symbol">enter</span> <a href="#52948" title="MethodGen.this.global.MethodSymbol">implSym</a>

        <span class="keyword">val</span> <a title="MethodGen.this.global.analyzer.global.Tree" id="52949">implDef</a> = <a href="#50029" title="=&gt; MethodGen.this.global.analyzer.Typer">localTyper</a>.<span title="(tree: MethodGen.this.global.analyzer.global.Tree)MethodGen.this.global.analyzer.global.Tree">typed</span> <span class="delimiter">{</span>
          <a href="#9544" title="(sym: MethodGen.this.global.Symbol)MethodGen.this.CODE.DefSymStart">DEF</a><span class="delimiter">(</span><a href="#52948" title="MethodGen.this.global.MethodSymbol">implSym</a><span class="delimiter">)</span> <span title="(rhs: MethodGen.this.global.Tree)MethodGen.this.global.DefDef">===</span> <span class="delimiter">{</span> 
            <a href="#9544" title="(tpt: MethodGen.this.global.Tree, argss: List[List[MethodGen.this.global.Tree]])MethodGen.this.global.Tree">New</a><span class="delimiter">(</span><a href="#9544" title="(tp: MethodGen.this.global.Type)MethodGen.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="ScalaAvroPlugin.scala.html#21681" title="=&gt; MethodGen.this.global.Symbol">AvroPairGenericRecordClass</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span><span class="delimiter">)</span>, <span title="(xs: List[MethodGen.this.global.Tree]*)List[List[MethodGen.this.global.Tree]]">List</span><span class="delimiter">(</span><span title="(xs: MethodGen.this.global.Tree*)List[MethodGen.this.global.Tree]">List</span><span class="delimiter">(</span><a href="#9544" title="(sym: MethodGen.this.global.Symbol)MethodGen.this.global.Tree">This</a><span class="delimiter">(</span><a href="#52930" title="MethodGen.this.global.Symbol">clazz</a><span class="delimiter">)</span>, <a href="#9544" title="(x: Any)MethodGen.this.global.Literal">LIT</a><span class="delimiter">(</span><a href="#52946" title="Int">offset</a><span class="delimiter">)</span>, <a href="#52947" title="MethodGen.this.global.Tree">schemaTree</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        
        <span title="(xs: MethodGen.this.global.analyzer.global.Tree*)List[MethodGen.this.global.analyzer.global.Tree]">List</span><span class="delimiter">(</span><a href="#52949" title="MethodGen.this.global.analyzer.global.Tree">implDef</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(fieldName: String, fallbackSchema: String)MethodGen.this.global.Tree" id="52935">makeSchemaTree</a><span class="delimiter">(</span><a title="String" id="53050">fieldName</a>: <span title="String">String</span>, <a title="String" id="53051">fallbackSchema</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="MethodGen.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="MethodGen.this.global.Tree" id="53052">innerTree</a>: <span title="MethodGen.this.global.Tree">Tree</span> =
          <span title="MethodGen.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#52930" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; MethodGen.this.global.Symbol">owner</span>.<span title="=&gt; Boolean">isClass</span><span class="delimiter">)</span> <span class="delimiter">{</span> 
              <span title="MethodGen.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#52930" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; MethodGen.this.global.Symbol">toplevelClass</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#52930" title="MethodGen.this.global.Symbol">clazz</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                <a href="#9544" title="(sym: MethodGen.this.global.Symbol)MethodGen.this.global.Tree">This</a><a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: MethodGen.this.global.Tree)MethodGen.this.CODE.TreeMethods" class="delimiter">(</a><a href="ScalaAvroPlugin.scala.html#21712" title="(clazz: MethodGen.this.global.Symbol)MethodGen.this.global.Symbol">companionModuleOf</a><span class="delimiter">(</span><a href="#52930" title="MethodGen.this.global.Symbol">clazz</a><span class="delimiter">)</span>.<span title="=&gt; MethodGen.this.global.Symbol">moduleClass</span><span class="delimiter">)</span> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.global.Select">DOT</a> <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><a href="#52933" title="(fieldName: String)String">fieldNameAsGetter</a><span class="delimiter">(</span><a href="#53050" title="String">fieldName</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
                <a href="#9544" title="(sym: MethodGen.this.global.Symbol)MethodGen.this.global.Tree">This</a><a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: MethodGen.this.global.Tree)MethodGen.this.CODE.TreeMethods" class="delimiter">(</a><a href="#52930" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; MethodGen.this.global.Symbol">outerClass</span><span class="delimiter">)</span> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.CODE.TreeMethods">DOT</a> <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><a href="#52930" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; MethodGen.this.global.Name">name</span>.<span title="()String">toString</span><span class="delimiter">)</span> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.global.Select">DOT</a> <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><a href="#52933" title="(fieldName: String)String">fieldNameAsGetter</a><span class="delimiter">(</span><a href="#53050" title="String">fieldName</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="delimiter">}</span>
          <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
            <a href="#9544" title="(msg: String)Unit">warning</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Unable to optimize %s method for class %s&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#53050" title="String">fieldName</a>, <a href="#52930" title="MethodGen.this.global.Symbol">clazz</a>.<span title="=&gt; String">fullName</span>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#9544" title="(fun: MethodGen.this.global.Tree, args: List[MethodGen.this.global.Tree])MethodGen.this.global.Apply">Apply</a><span class="delimiter">(</span>
              <a href="#9544" title="(name: MethodGen.this.global.Name)MethodGen.this.global.Ident">Ident</a><a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: MethodGen.this.global.Tree)MethodGen.this.CODE.TreeMethods" class="delimiter">(</a><a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;edu&quot;)" class="string">&quot;edu&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.CODE.TreeMethods">DOT</a> 
                <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;berkeley&quot;)" class="string">&quot;berkeley&quot;</span><span class="delimiter">)</span>   <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.CODE.TreeMethods">DOT</a>
                <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;cs&quot;)" class="string">&quot;cs&quot;</span><span class="delimiter">)</span>     <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.CODE.TreeMethods">DOT</a>
                <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;avro&quot;)" class="string">&quot;avro&quot;</span><span class="delimiter">)</span>   <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.CODE.TreeMethods">DOT</a>
		<a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;runtime&quot;)" class="string">&quot;runtime&quot;</span><span class="delimiter">)</span>   <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethodsFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.CODE.TreeMethods">DOT</a>
		<a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;ScalaSpecificRecord&quot;)" class="string">&quot;ScalaSpecificRecord&quot;</span><span class="delimiter">)</span>   <a href="#9544" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeFromSelectStart : (ss: MethodGen.this.CODE.SelectStart)MethodGen.this.global.Select">DOT</a>
                <a href="#9544" title="(s: String)MethodGen.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="java.lang.String(&quot;parse&quot;)" class="string">&quot;parse&quot;</span><span class="delimiter">)</span>,
              <span title="(xs: MethodGen.this.global.Literal*)List[MethodGen.this.global.Literal]">List</span><span class="delimiter">(</span><a href="#9544" title="(x: Any)MethodGen.this.global.Literal">LIT</a><span class="delimiter">(</span><a href="#53051" title="String">fallbackSchema</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <a href="#53052" title="MethodGen.this.global.Tree">innerTree</a>
      <span class="delimiter">}</span>

      <span class="keyword">val</span> <a href="#52937" title="(Int, org.apache.avro.Schema, org.apache.avro.Schema)" class="delimiter">(</a><a href="#52936" title="Int" id="52937">offset</a>, <a href="#52936" title="org.apache.avro.Schema" id="52938">keySchema</a>, <a href="#52936" title="org.apache.avro.Schema" id="52939">valueSchema</a><span class="delimiter">)</span> = <a href="ScalaAvroPlugin.scala.html#21688" title="(key: MethodGen.this.global.Symbol)(Int, org.apache.avro.Schema, org.apache.avro.Schema)">classToKVSchema</a><span title="(Int, org.apache.avro.Schema, org.apache.avro.Schema) @unchecked" class="delimiter">(</span><a href="#52930" title="MethodGen.this.global.Symbol">clazz</a><span class="delimiter">)</span>

      <span title="(xs: List[MethodGen.this.global.Tree]*)List[List[MethodGen.this.global.Tree]]">List</span><span class="delimiter">(</span>
        <a href="#52934" title="(fieldName: String, offset: Int, schemaTree: MethodGen.this.global.Tree)List[MethodGen.this.global.Tree]">newPairGenericRecord</a><span class="delimiter">(</span><span title="java.lang.String(&quot;keyImpl&quot;)" class="string">&quot;keyImpl&quot;</span>, <span title="Int(0)" class="int">0</span>, <a href="#52935" title="(fieldName: String, fallbackSchema: String)MethodGen.this.global.Tree">makeSchemaTree</a><span class="delimiter">(</span><span title="java.lang.String(&quot;keySchema&quot;)" class="string">&quot;keySchema&quot;</span>, <a href="#52938" title="org.apache.avro.Schema">keySchema</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span><span class="delimiter">)</span>,
        <a href="#52934" title="(fieldName: String, offset: Int, schemaTree: MethodGen.this.global.Tree)List[MethodGen.this.global.Tree]">newPairGenericRecord</a><span class="delimiter">(</span><span title="java.lang.String(&quot;valueImpl&quot;)" class="string">&quot;valueImpl&quot;</span>, <a href="#52937" title="Int">offset</a>, <a href="#52935" title="(fieldName: String, fallbackSchema: String)MethodGen.this.global.Tree">makeSchemaTree</a><span class="delimiter">(</span><span title="java.lang.String(&quot;valueSchema&quot;)" class="string">&quot;valueSchema&quot;</span>, <a href="#52939" title="org.apache.avro.Schema">valueSchema</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(implicit asTraversable: List[MethodGen.this.global.Tree] =&gt; scala.collection.TraversableOnce[MethodGen.this.global.Tree])List[MethodGen.this.global.Tree]">flatten</span>
    <span class="delimiter">}</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: MethodGen.this.global.Tree)MethodGen.this.global.Tree" id="50058">transform</a><span class="delimiter">(</span><a title="MethodGen.this.global.Tree" id="53342">tree</a>: <span title="MethodGen.this.global.Tree">Tree</span><span class="delimiter">)</span> : <span title="MethodGen.this.global.Tree">Tree</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="MethodGen.this.global.Tree" id="53347">newTree</a> = <a href="#53342" title="MethodGen.this.global.Tree">tree</a> <span title="MethodGen.this.global.Tree" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="MethodGen.this.global.ClassDef" id="53348">cd</a> @ ClassDef<span class="delimiter">(</span><a title="MethodGen.this.global.Modifiers" id="53363">mods</a>, <a title="MethodGen.this.global.TypeName" id="53364">name</a>, <a title="List[MethodGen.this.global.TypeDef]" id="53365">tparams</a>, <a title="MethodGen.this.global.Template" id="53366">impl</a><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#53348" title="MethodGen.this.global.ClassDef">cd</a>.<span title="=&gt; MethodGen.this.global.Symbol">symbol</span>.<span title="=&gt; MethodGen.this.global.Type">tpe</span>.<span title="=&gt; List[MethodGen.this.global.Type]">parents</span>.<span title="(elem: Any)Boolean">contains</span><span class="delimiter">(</span><a href="ScalaAvroPlugin.scala.html#21663" title="=&gt; MethodGen.this.global.Symbol">avroUnionTrait</a>.<span title="=&gt; MethodGen.this.global.Type">tpe</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <span class="comment">//println(&quot;FOUND UNION: &quot; + cd.symbol)</span>
          <span class="keyword">val</span> <a title="org.apache.avro.Schema" id="53371">schema</a> = <a href="ScalaAvroPlugin.scala.html#21707" title="(sym: MethodGen.this.global.Symbol, schema: =&gt; org.apache.avro.Schema)org.apache.avro.Schema">getOrCreateUnionSchema</a><span class="delimiter">(</span><a href="#53348" title="MethodGen.this.global.ClassDef">cd</a>.<span title="=&gt; MethodGen.this.global.Symbol">symbol</span>, 
              <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: java.util.List[org.apache.avro.Schema])org.apache.avro.Schema">createUnion</span><span class="delimiter">(</span><span title="object java.util.Arrays">JArrays</span>.<span title="(x$1: &lt;repeated...&gt;[org.apache.avro.Schema])java.util.List[org.apache.avro.Schema]">asList</span><span class="delimiter">(</span><a href="ScalaAvroPlugin.scala.html#21704" title="(name: MethodGen.this.global.Symbol)List[MethodGen.this.global.Symbol]">retrieveUnionRecords</a><span class="delimiter">(</span><a href="#53348" title="MethodGen.this.global.ClassDef">cd</a>.<span title="=&gt; MethodGen.this.global.Symbol">symbol</span><span class="delimiter">)</span>.<span title="(f: MethodGen.this.global.Symbol =&gt; org.apache.avro.Schema)(implicit bf: scala.collection.generic.CanBuildFrom[List[MethodGen.this.global.Symbol],org.apache.avro.Schema,List[org.apache.avro.Schema]])List[org.apache.avro.Schema]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,org.apache.avro.Schema,List[org.apache.avro.Schema]]" class="delimiter">(</span><a title="MethodGen.this.global.Symbol" id="53821">s</a> =&gt; <a href="ScalaAvroPlugin.scala.html#21694" title="(name: MethodGen.this.global.Symbol)Option[org.apache.avro.Schema]">retrieveRecordSchema</a><span class="delimiter">(</span><a href="#53821" title="MethodGen.this.global.Symbol">s</a><span class="delimiter">)</span>.<span title="=&gt; org.apache.avro.Schema">get</span><span class="delimiter">)</span>.<span title="(implicit evidence$1: ClassManifest[org.apache.avro.Schema])Array[org.apache.avro.Schema]">toArray</span>:_*<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="comment">//println(&quot;SCHEMA: &quot; + schema)</span>
          <a href="#53348" title="MethodGen.this.global.ClassDef">cd</a>.<span title="=&gt; MethodGen.this.global.Symbol">symbol</span>.<span title="(mask: Long)MethodGen.this.global.Symbol">resetFlag</span><span class="delimiter">(</span><span title="Long(128L)">INTERFACE</span><span class="delimiter">)</span> <span class="comment">/** force compiler to generate backing $class class */</span>
          <span class="keyword">val</span> <a title="List[MethodGen.this.global.Tree]" id="53372">newMethod</a> = <span title="(xs: MethodGen.this.global.Tree*)List[MethodGen.this.global.Tree]">List</span><span class="delimiter">(</span><a href="#50056" title="(clazzTree: MethodGen.this.global.ClassDef, unionSchema: org.apache.avro.Schema)MethodGen.this.global.Tree">generateGetUnionSchemaMethod</a><span class="delimiter">(</span><a href="#53348" title="MethodGen.this.global.ClassDef">cd</a>, <a href="#53371" title="org.apache.avro.Schema">schema</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="MethodGen.this.global.Template" id="53373">newImpl</a> = <a href="#50029" title="=&gt; MethodGen.this.global.TreeCopier">treeCopy</a>.<span title="(tree: MethodGen.this.global.Tree, parents: List[MethodGen.this.global.Tree], self: MethodGen.this.global.ValDef, body: List[MethodGen.this.global.Tree])MethodGen.this.global.Template">Template</span><span class="delimiter">(</span><a href="#53366" title="MethodGen.this.global.Template">impl</a>, <a href="#53366" title="MethodGen.this.global.Template">impl</a>.<span title="=&gt; List[MethodGen.this.global.Tree]">parents</span>, <a href="#53366" title="MethodGen.this.global.Template">impl</a>.<span title="=&gt; MethodGen.this.global.ValDef">self</span>, <a href="#53372" title="List[MethodGen.this.global.Tree]">newMethod</a> <a href="#53889" title="(prefix: List[MethodGen.this.global.Tree])List[MethodGen.this.global.Tree]">:::</a> <a href="#53366" title="MethodGen.this.global.Template">impl</a>.<span title="=&gt; List[MethodGen.this.global.Tree]">body</span><span class="delimiter">)</span>
          <a href="#50029" title="=&gt; MethodGen.this.global.TreeCopier">treeCopy</a>.<span title="(tree: MethodGen.this.global.Tree, mods: MethodGen.this.global.Modifiers, name: MethodGen.this.global.Name, tparams: List[MethodGen.this.global.TypeDef], impl: MethodGen.this.global.Template)MethodGen.this.global.ClassDef">ClassDef</span><span class="delimiter">(</span><a href="#53348" title="MethodGen.this.global.ClassDef">cd</a>, <a href="#53363" title="MethodGen.this.global.Modifiers">mods</a>, <a href="#53364" title="MethodGen.this.global.TypeName">name</a>, <a href="#53365" title="List[MethodGen.this.global.TypeDef]">tparams</a>, <a href="#53373" title="MethodGen.this.global.Template">newImpl</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="MethodGen.this.global.ClassDef" id="53903">cd</a> @ ClassDef<span class="delimiter">(</span><a title="MethodGen.this.global.Modifiers" id="53910">mods</a>, <a title="MethodGen.this.global.TypeName" id="53911">name</a>, <a title="List[MethodGen.this.global.TypeDef]" id="53912">tparams</a>, <a title="MethodGen.this.global.Template" id="53913">impl</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="ScalaAvroPlugin.scala.html#21653" title="(tree: MethodGen.this.global.Tree)Boolean">isMarked</a><span class="delimiter">(</span><a href="#53903" title="MethodGen.this.global.ClassDef">cd</a><span class="delimiter">)</span> =&gt;
          <a href="ScalaAvroPlugin.scala.html#21648" title="(a: AnyRef)Unit">debug</a><span class="delimiter">(</span><a href="ScalaAvroPlugin.scala.html#21694" title="(name: MethodGen.this.global.Symbol)Option[org.apache.avro.Schema]">retrieveRecordSchema</a><span class="delimiter">(</span><a href="#53903" title="MethodGen.this.global.ClassDef">cd</a>.<span title="=&gt; MethodGen.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="ScalaAvroPlugin.scala.html#21648" title="(a: AnyRef)Unit">debug</a><span class="delimiter">(</span><a href="#53903" title="MethodGen.this.global.ClassDef">cd</a>.<span title="=&gt; MethodGen.this.global.Symbol">symbol</span>.<span title="=&gt; String">fullName</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\'s enclClass: &quot;)" class="string">&quot;'s enclClass: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#53903" title="MethodGen.this.global.ClassDef">cd</a>.<span title="=&gt; MethodGen.this.global.Symbol">symbol</span>.<span title="=&gt; MethodGen.this.global.Symbol">enclClass</span><span class="delimiter">)</span>
          <a href="ScalaAvroPlugin.scala.html#21648" title="(a: AnyRef)Unit">debug</a><span class="delimiter">(</span><span title="java.lang.String(&quot;owner.enclClass: &quot;)" class="string">&quot;owner.enclClass: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#53903" title="MethodGen.this.global.ClassDef">cd</a>.<span title="=&gt; MethodGen.this.global.Symbol">symbol</span>.<span title="=&gt; MethodGen.this.global.Symbol">owner</span>.<span title="=&gt; MethodGen.this.global.Symbol">enclClass</span><span class="delimiter">)</span>
          <a href="ScalaAvroPlugin.scala.html#21648" title="(a: AnyRef)Unit">debug</a><span class="delimiter">(</span><span title="java.lang.String(&quot;toplevelClass: &quot;)" class="string">&quot;toplevelClass: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#53903" title="MethodGen.this.global.ClassDef">cd</a>.<span title="=&gt; MethodGen.this.global.Symbol">symbol</span>.<span title="=&gt; MethodGen.this.global.Symbol">toplevelClass</span><span class="delimiter">)</span>
          <a href="ScalaAvroPlugin.scala.html#21648" title="(a: AnyRef)Unit">debug</a><span class="delimiter">(</span><span title="java.lang.String(&quot;owner.toplevelClass: &quot;)" class="string">&quot;owner.toplevelClass: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#53903" title="MethodGen.this.global.ClassDef">cd</a>.<span title="=&gt; MethodGen.this.global.Symbol">symbol</span>.<span title="=&gt; MethodGen.this.global.Symbol">owner</span>.<span title="=&gt; MethodGen.this.global.Symbol">toplevelClass</span><span class="delimiter">)</span>

          <span class="keyword">val</span> <a title="List[MethodGen.this.global.Symbol]" id="53922">instanceVars</a> = <span class="keyword">for</span> <span class="delimiter">(</span><a title="MethodGen.this.global.Tree" id="53944">member</a> &lt;- <a href="#53913" title="MethodGen.this.global.Template">impl</a>.<span title="(f: MethodGen.this.global.Tree =&gt; MethodGen.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[MethodGen.this.global.Tree],MethodGen.this.global.Symbol,List[MethodGen.this.global.Symbol]])List[MethodGen.this.global.Symbol]">body</span> <span class="keyword">if</span> <a href="ScalaAvroPlugin.scala.html#21650" title="(tree: MethodGen.this.global.Tree)Boolean">isValDef</a><span class="delimiter">(</span><a href="#53944" title="MethodGen.this.global.Tree">member</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">yield</span> <span class="delimiter">{</span> <a href="#53944" title="MethodGen.this.global.Tree">member</a>.<span title="=&gt; MethodGen.this.global.Symbol">symbol</span> <span class="delimiter">}</span>
          <span class="keyword">val</span> <a title="List[MethodGen.this.global.Tree]" id="53923">newMethods</a> = <span title="(xs: List[MethodGen.this.global.Tree]*)List[List[MethodGen.this.global.Tree]]">List</span><span class="delimiter">(</span>
            <span title="List[MethodGen.this.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="ScalaAvroPlugin.scala.html#21655" title="(tree: MethodGen.this.global.Tree)Boolean">isMarkedPair</a><span class="delimiter">(</span><a href="#53903" title="MethodGen.this.global.ClassDef">cd</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#50057" title="(impl: MethodGen.this.global.Template, clazz: MethodGen.this.global.Symbol)List[MethodGen.this.global.Tree]">generateKVVals</a><span class="delimiter">(</span><a href="#53913" title="MethodGen.this.global.Template">impl</a>, <a href="#53903" title="MethodGen.this.global.ClassDef">cd</a>.<span title="=&gt; MethodGen.this.global.Symbol">symbol</span><span class="delimiter">)</span> <span class="keyword">else</span> <span title="object Nil">Nil</span>,
            <span title="(xs: MethodGen.this.global.analyzer.global.Tree*)List[MethodGen.this.global.analyzer.global.Tree]">List</span><span class="delimiter">(</span><a href="#50053" title="(templ: MethodGen.this.global.Template, clazz: MethodGen.this.global.Symbol, instanceVars: List[MethodGen.this.global.Symbol])MethodGen.this.global.analyzer.global.Tree">generateGetMethod</a><span class="delimiter">(</span><a href="#53913" title="MethodGen.this.global.Template">impl</a>, <a href="#53903" title="MethodGen.this.global.ClassDef">cd</a>.<span title="=&gt; MethodGen.this.global.Symbol">symbol</span>, <a href="#53922" title="List[MethodGen.this.global.Symbol]">instanceVars</a><span class="delimiter">)</span><span class="delimiter">)</span>,
            <span title="(xs: MethodGen.this.global.analyzer.global.Tree*)List[MethodGen.this.global.analyzer.global.Tree]">List</span><span class="delimiter">(</span><a href="#50054" title="(templ: MethodGen.this.global.Template, clazz: MethodGen.this.global.Symbol, instanceVars: List[MethodGen.this.global.Symbol])MethodGen.this.global.analyzer.global.Tree">generateSetMethod</a><span class="delimiter">(</span><a href="#53913" title="MethodGen.this.global.Template">impl</a>, <a href="#53903" title="MethodGen.this.global.ClassDef">cd</a>.<span title="=&gt; MethodGen.this.global.Symbol">symbol</span>, <a href="#53922" title="List[MethodGen.this.global.Symbol]">instanceVars</a><span class="delimiter">)</span><span class="delimiter">)</span>,
            <span title="(xs: MethodGen.this.global.Tree*)List[MethodGen.this.global.Tree]">List</span><span class="delimiter">(</span><a href="#50055" title="(clazzTree: MethodGen.this.global.ClassDef)MethodGen.this.global.Tree">generateGetSchemaMethod</a><span class="delimiter">(</span><a href="#53903" title="MethodGen.this.global.ClassDef">cd</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(implicit asTraversable: List[MethodGen.this.global.Tree] =&gt; scala.collection.TraversableOnce[MethodGen.this.global.Tree])List[MethodGen.this.global.Tree]">flatten</span>

          <span class="keyword">val</span> <a title="MethodGen.this.global.Template" id="53924">newImpl</a> = <a href="#50029" title="=&gt; MethodGen.this.global.TreeCopier">treeCopy</a>.<span title="(tree: MethodGen.this.global.Tree, parents: List[MethodGen.this.global.Tree], self: MethodGen.this.global.ValDef, body: List[MethodGen.this.global.Tree])MethodGen.this.global.Template">Template</span><span class="delimiter">(</span><a href="#53913" title="MethodGen.this.global.Template">impl</a>, <a href="#53913" title="MethodGen.this.global.Template">impl</a>.<span title="=&gt; List[MethodGen.this.global.Tree]">parents</span>, <a href="#53913" title="MethodGen.this.global.Template">impl</a>.<span title="=&gt; MethodGen.this.global.ValDef">self</span>, <a href="#53923" title="List[MethodGen.this.global.Tree]">newMethods</a> <a href="#54042" title="(prefix: List[MethodGen.this.global.Tree])List[MethodGen.this.global.Tree]">:::</a> <a href="#53913" title="MethodGen.this.global.Template">impl</a>.<span title="=&gt; List[MethodGen.this.global.Tree]">body</span><span class="delimiter">)</span>
          <a href="#50029" title="=&gt; MethodGen.this.global.TreeCopier">treeCopy</a>.<span title="(tree: MethodGen.this.global.Tree, mods: MethodGen.this.global.Modifiers, name: MethodGen.this.global.Name, tparams: List[MethodGen.this.global.TypeDef], impl: MethodGen.this.global.Template)MethodGen.this.global.ClassDef">ClassDef</span><span class="delimiter">(</span><a href="#53903" title="MethodGen.this.global.ClassDef">cd</a>, <a href="#53910" title="MethodGen.this.global.Modifiers">mods</a>, <a href="#53911" title="MethodGen.this.global.TypeName">name</a>, <a href="#53912" title="List[MethodGen.this.global.TypeDef]">tparams</a>, <a href="#53924" title="MethodGen.this.global.Template">newImpl</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="MethodGen.this.global.Tree">_</span> =&gt; <a href="#53342" title="MethodGen.this.global.Tree">tree</a>
      <span class="delimiter">}</span>
      <a href="#50029" title="MethodGen.this.MethodGenTransformer" class="keyword">super</a>.<span title="(tree: MethodGen.this.global.Tree)MethodGen.this.global.Tree">transform</span><span class="delimiter">(</span><a href="#53347" title="MethodGen.this.global.Tree">newTree</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>    
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>