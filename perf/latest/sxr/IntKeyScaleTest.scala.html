<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>IntKeyScaleTest.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> edu.berkeley.cs.scads.perf
<span class="keyword">package</span> intkey

<span class="keyword">import</span> deploylib._
<span class="keyword">import</span> deploylib.mesos._
<span class="keyword">import</span> edu.berkeley.cs.scads.comm._
<span class="keyword">import</span> edu.berkeley.cs.scads.config._
<span class="keyword">import</span> edu.berkeley.cs.scads.storage._
<span class="keyword">import</span> edu.berkeley.cs.avro.runtime._
<span class="keyword">import</span> edu.berkeley.cs.avro.marker._

<span class="keyword">import</span> org.apache.zookeeper.CreateMode

<span class="keyword">import</span> java.io.File 

case <span class="keyword">class</span> <a href="#54143" title="class WriteClient extends org.apache.avro.specific.SpecificRecordBase with edu.berkeley.cs.avro.runtime.HasAvroConversions with edu.berkeley.cs.avro.marker.AvroRecord with ScalaObject with Product with Serializable" id="42950">WriteClient</a><a href="#42950" title="ScalaObject" class="delimiter">(</a><a href="#42950" title="()edu.berkeley.cs.scads.perf.intkey.WriteClient" id="47616" class="keyword">var</a> <a title="String" id="40975">cluster</a>: <span title="String">String</span>, <span class="keyword">var</span> <a title="Int" id="40976">clientId</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="edu.berkeley.cs.avro.marker.AvroRecord">AvroRecord</span>
case <span class="keyword">class</span> <a href="#54458" title="class WritePerfResult extends org.apache.avro.specific.SpecificRecordBase with edu.berkeley.cs.avro.runtime.HasAvroConversions with edu.berkeley.cs.avro.marker.AvroRecord with ScalaObject with Product with Serializable" id="42946">WritePerfResult</a><a href="#42946" title="ScalaObject" class="delimiter">(</a><a href="#42946" title="()edu.berkeley.cs.scads.perf.intkey.WritePerfResult" id="47626" class="keyword">var</a> <a title="Int" id="40982">numKeys</a>: <span title="Int">Int</span>, <span class="keyword">var</span> <a title="Long" id="40983">startTime</a>: <span title="Long">Long</span>, <span class="keyword">var</span> <a title="Long" id="40984">endTime</a>: <span title="Long">Long</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="edu.berkeley.cs.avro.marker.AvroRecord">AvroRecord</span>

case <span class="keyword">class</span> <a href="#54468" title="class LoadClient extends org.apache.avro.specific.SpecificRecordBase with edu.berkeley.cs.avro.runtime.HasAvroConversions with edu.berkeley.cs.avro.marker.AvroRecord with ScalaObject with Product with Serializable" id="42942">LoadClient</a><a href="#42942" title="ScalaObject" class="delimiter">(</a><a href="#42942" title="()edu.berkeley.cs.scads.perf.intkey.LoadClient" id="47636" class="keyword">var</a> <a title="String" id="42705">cluster</a>: <span title="String">String</span>, <span class="keyword">var</span> <a title="Int" id="42706">clientId</a>: <span title="Int">Int</span>, <span class="keyword">var</span> <a title="Int" id="42707">threadId</a>: <span title="Int">Int</span>, <span class="keyword">var</span> <a title="Int" id="42708">iteration</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="edu.berkeley.cs.avro.marker.AvroRecord">AvroRecord</span>
case <span class="keyword">class</span> <a href="#54780" title="class LoadPerfResult extends org.apache.avro.specific.SpecificRecordBase with edu.berkeley.cs.avro.runtime.HasAvroConversions with edu.berkeley.cs.avro.marker.AvroRecord with ScalaObject with Product with Serializable" id="42938">LoadPerfResult</a><a href="#42938" title="ScalaObject" class="delimiter">(</a><a href="#42938" title="()edu.berkeley.cs.scads.perf.intkey.LoadPerfResult" id="47646" class="keyword">var</a> <a title="Long" id="42718">startTime</a>: <span title="Long">Long</span>, <span class="keyword">var</span> <a title="Long" id="42719">endTime</a>: <span title="Long">Long</span>, <span class="keyword">var</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="42720">getTimes</a>: <a href="Histogram.scala.html#9528" title="edu.berkeley.cs.scads.perf.Histogram">Histogram</a>, <span class="keyword">var</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="42721">putTimes</a>: <a href="Histogram.scala.html#9528" title="edu.berkeley.cs.scads.perf.Histogram">Histogram</a><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="edu.berkeley.cs.avro.marker.AvroRecord">AvroRecord</span>

case <span class="keyword">class</span> <a href="#54790" title="class DataLoader extends org.apache.avro.specific.SpecificRecordBase with edu.berkeley.cs.avro.runtime.HasAvroConversions with edu.berkeley.cs.scads.perf.DataLoadingTask with edu.berkeley.cs.avro.marker.AvroRecord with ScalaObject with Product with Serializable" id="42934">DataLoader</a><a href="#42934" title="ScalaObject" class="delimiter">(</a><a href="#42934" title="()edu.berkeley.cs.scads.perf.intkey.DataLoader" id="47656" class="keyword">var</a> <a title="Int" id="42924">numServers</a>: <span title="Int">Int</span>, <span class="keyword">var</span> <a title="Int" id="42925">numLoaders</a>: <span title="Int">Int</span>, <span class="keyword">var</span> <a title="Int" id="42931">recsPerServer</a>: <span title="Int">Int</span> = <span title="Int(10)" class="int">10</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="AvroClient.scala.html#9503" title="edu.berkeley.cs.scads.perf.DataLoadingTask">DataLoadingTask</a> <span class="keyword">with</span> <span title="edu.berkeley.cs.avro.marker.AvroRecord">AvroRecord</span> <span class="delimiter">{</span>
  <span class="keyword">var</span> <a title="String" id="37871">clusterAddress</a>: <span title="String">String</span> = _

  <span class="keyword">def</span> <a title="()Unit" id="37873">run</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode" id="37892">clusterRoot</a> = <span title="(uri: String)edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">ZooKeeperNode</span><span class="delimiter">(</span><a href="#37871" title="=&gt; String">clusterAddress</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode" id="37893">coordination</a> = <a href="#37892" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">clusterRoot</a>.<span title="(rpath: java.lang.String, tries: Int)edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">getOrCreate</span><span class="delimiter">(</span><span title="java.lang.String(&quot;coordination/loaders&quot;)" class="string">&quot;coordination/loaders&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.ExperimentalScadsCluster" id="37894">cluster</a> = <span title="edu.berkeley.cs.scads.perf.ExperimentalScadsCluster" class="keyword">new</span> <a href="Experiment.scala.html#9518" title="edu.berkeley.cs.scads.perf.ExperimentalScadsCluster">ExperimentalScadsCluster</a><span class="delimiter">(</span><a href="#37892" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">clusterRoot</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="Int" id="37895">clientId</a> = <a href="#37893" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">coordination</a>.<span title="(barrierName: String, count: Int, timeout: Long, unit: java.util.concurrent.TimeUnit)Int">registerAndAwait</span><span class="delimiter">(</span><span title="java.lang.String(&quot;clientsStart&quot;)" class="string">&quot;clientsStart&quot;</span>, <a href="#42924" title="=&gt; Int">numServers</a><span class="delimiter">)</span>
    <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#37895" title="Int">clientId</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#37894" title="edu.berkeley.cs.scads.perf.ExperimentalScadsCluster">cluster</a>.<a href="Experiment.scala.html#30884" title="(clusterSize: Int)Unit">blockUntilReady</a><span class="delimiter">(</span><a href="#42924" title="=&gt; Int">numServers</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="scala.collection.immutable.IndexedSeq[Option[edu.berkeley.cs.scads.comm.IntRec]]" id="37909">keySplits</a> = <span title="object None">None</span> <a href="#37911" title="(elem: Option[edu.berkeley.cs.scads.comm.IntRec])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Some[edu.berkeley.cs.scads.comm.IntRec]],Option[edu.berkeley.cs.scads.comm.IntRec],scala.collection.immutable.IndexedSeq[Option[edu.berkeley.cs.scads.comm.IntRec]]])scala.collection.immutable.IndexedSeq[Option[edu.berkeley.cs.scads.comm.IntRec]]">+:</a> <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</span> <span title="(end: Int)scala.collection.immutable.Range">until</span> <a href="#42924" title="=&gt; Int">numServers</a><span class="delimiter">)</span>.<span title="(f: Int =&gt; Some[edu.berkeley.cs.scads.comm.IntRec])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Int],Some[edu.berkeley.cs.scads.comm.IntRec],scala.collection.immutable.IndexedSeq[Some[edu.berkeley.cs.scads.comm.IntRec]]])scala.collection.immutable.IndexedSeq[Some[edu.berkeley.cs.scads.comm.IntRec]]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq.Coll,Some[edu.berkeley.cs.scads.comm.IntRec],scala.collection.immutable.IndexedSeq[Some[edu.berkeley.cs.scads.comm.IntRec]]]" class="delimiter">(</span><a title="Int" id="38078">i</a> =&gt; <span title="(x: edu.berkeley.cs.scads.comm.IntRec)Some[edu.berkeley.cs.scads.comm.IntRec]">Some</span><span class="delimiter">(</span><span title="(f1: Int)edu.berkeley.cs.scads.comm.IntRec">IntRec</span><span class="delimiter">(</span><a href="#38078" title="Int">i</a> <span title="(x: Int)Int">*</span> <a href="#42931" title="=&gt; Int">recsPerServer</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.IndexedSeq[(Option[edu.berkeley.cs.scads.comm.IntRec], List[edu.berkeley.cs.scads.comm.StorageService])]" id="37910">partitions</a> = <a href="#37909" title="scala.collection.immutable.IndexedSeq[Option[edu.berkeley.cs.scads.comm.IntRec]]">keySplits</a> <span title="(that: scala.collection.GenIterable[List[edu.berkeley.cs.scads.comm.StorageService]])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Option[edu.berkeley.cs.scads.comm.IntRec]],(Option[edu.berkeley.cs.scads.comm.IntRec], List[edu.berkeley.cs.scads.comm.StorageService]),scala.collection.immutable.IndexedSeq[(Option[edu.berkeley.cs.scads.comm.IntRec], List[edu.berkeley.cs.scads.comm.StorageService])]])scala.collection.immutable.IndexedSeq[(Option[edu.berkeley.cs.scads.comm.IntRec], List[edu.berkeley.cs.scads.comm.StorageService])]">zip</span> <a href="#37894" title="edu.berkeley.cs.scads.perf.ExperimentalScadsCluster">cluster</a>.<span title="()List[edu.berkeley.cs.scads.comm.StorageService]">getAvailableServers</span>.<span title="(f: edu.berkeley.cs.scads.comm.StorageService =&gt; List[edu.berkeley.cs.scads.comm.StorageService])(implicit bf: scala.collection.generic.CanBuildFrom[List[edu.berkeley.cs.scads.comm.StorageService],List[edu.berkeley.cs.scads.comm.StorageService],List[List[edu.berkeley.cs.scads.comm.StorageService]]])List[List[edu.berkeley.cs.scads.comm.StorageService]]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,List[edu.berkeley.cs.scads.comm.StorageService],List[List[edu.berkeley.cs.scads.comm.StorageService]]]" class="delimiter">(</span><span title="(xs: edu.berkeley.cs.scads.comm.StorageService*)List[edu.berkeley.cs.scads.comm.StorageService]">List</span><span class="delimiter">(</span><a href="#38277" title="edu.berkeley.cs.scads.comm.StorageService">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#42934" title="=&gt; net.lag.logging.Logger">logger</a>.<span title="(msg: String, items: Any*)Unit">info</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Cluster configured with the following partitions %s&quot;)" class="string">&quot;Cluster configured with the following partitions %s&quot;</span>, <a href="#37910" title="scala.collection.immutable.IndexedSeq[(Option[edu.berkeley.cs.scads.comm.IntRec], List[edu.berkeley.cs.scads.comm.StorageService])]">partitions</a><span class="delimiter">)</span>
      <a href="#37894" title="edu.berkeley.cs.scads.perf.ExperimentalScadsCluster">cluster</a>.<span title="[KeyType &lt;: org.apache.avro.specific.SpecificRecord, ValueType &lt;: org.apache.avro.specific.SpecificRecord](ns: String, servers: Seq[(Option[KeyType], Seq[edu.berkeley.cs.scads.comm.StorageService])])(implicit evidence$5: Manifest[KeyType], implicit evidence$6: Manifest[ValueType])edu.berkeley.cs.scads.storage.SpecificNamespace[KeyType,ValueType]">createNamespace</span><span title="(ns: String, servers: Seq[(Option[edu.berkeley.cs.scads.comm.IntRec], Seq[edu.berkeley.cs.scads.comm.StorageService])])(implicit evidence$5: Manifest[edu.berkeley.cs.scads.comm.IntRec], implicit evidence$6: Manifest[edu.berkeley.cs.scads.comm.IntRec])edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.comm.IntRec,edu.berkeley.cs.scads.comm.IntRec]" class="delimiter">[</span><span title="edu.berkeley.cs.scads.comm.IntRec">IntRec</span>, <span title="edu.berkeley.cs.scads.comm.IntRec">IntRec</span><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[edu.berkeley.cs.scads.comm.IntRec]" class="delimiter">(</span><span title="java.lang.String(&quot;intkeytest&quot;)" class="string">&quot;intkeytest&quot;</span>, <a href="#37910" title="scala.collection.immutable.IndexedSeq[(Option[edu.berkeley.cs.scads.comm.IntRec], List[edu.berkeley.cs.scads.comm.StorageService])]">partitions</a><span class="delimiter">)</span>
      <a href="#37894" title="edu.berkeley.cs.scads.perf.ExperimentalScadsCluster">cluster</a>.<span title="[KeyType &lt;: org.apache.avro.specific.SpecificRecord, ValueType &lt;: org.apache.avro.specific.SpecificRecord](ns: String)(implicit evidence$1: Manifest[KeyType], implicit evidence$2: Manifest[ValueType])edu.berkeley.cs.scads.storage.SpecificNamespace[KeyType,ValueType]">getNamespace</span><span title="(ns: String)(implicit evidence$1: Manifest[edu.berkeley.cs.scads.perf.intkey.WriteClient], implicit evidence$2: Manifest[edu.berkeley.cs.scads.perf.intkey.WritePerfResult])edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.perf.intkey.WriteClient,edu.berkeley.cs.scads.perf.intkey.WritePerfResult]" class="delimiter">[</span><a href="#42950" title="edu.berkeley.cs.scads.perf.intkey.WriteClient">WriteClient</a>, <a href="#42946" title="edu.berkeley.cs.scads.perf.intkey.WritePerfResult">WritePerfResult</a><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[edu.berkeley.cs.scads.perf.intkey.WriteClient]" class="delimiter">(</span><span title="java.lang.String(&quot;writeResults&quot;)" class="string">&quot;writeResults&quot;</span><span class="delimiter">)</span>
      <a href="#37894" title="edu.berkeley.cs.scads.perf.ExperimentalScadsCluster">cluster</a>.<span title="[KeyType &lt;: org.apache.avro.specific.SpecificRecord, ValueType &lt;: org.apache.avro.specific.SpecificRecord](ns: String)(implicit evidence$1: Manifest[KeyType], implicit evidence$2: Manifest[ValueType])edu.berkeley.cs.scads.storage.SpecificNamespace[KeyType,ValueType]">getNamespace</span><span title="(ns: String)(implicit evidence$1: Manifest[edu.berkeley.cs.scads.perf.intkey.LoadClient], implicit evidence$2: Manifest[edu.berkeley.cs.scads.perf.intkey.LoadPerfResult])edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.perf.intkey.LoadClient,edu.berkeley.cs.scads.perf.intkey.LoadPerfResult]" class="delimiter">[</span><a href="#42942" title="edu.berkeley.cs.scads.perf.intkey.LoadClient">LoadClient</a>, <a href="#42938" title="edu.berkeley.cs.scads.perf.intkey.LoadPerfResult">LoadPerfResult</a><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[edu.berkeley.cs.scads.perf.intkey.LoadClient]" class="delimiter">(</span><span title="java.lang.String(&quot;loadResults&quot;)" class="string">&quot;loadResults&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#37893" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">coordination</a>.<span title="(barrierName: String, count: Int, timeout: Long, unit: java.util.concurrent.TimeUnit)Int">registerAndAwait</span><span class="delimiter">(</span><span title="java.lang.String(&quot;startWrite&quot;)" class="string">&quot;startWrite&quot;</span>, <a href="#42925" title="=&gt; Int">numLoaders</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.perf.intkey.WriteClient,edu.berkeley.cs.scads.perf.intkey.WritePerfResult]" id="37896">writeResults</a> = <a href="#37894" title="edu.berkeley.cs.scads.perf.ExperimentalScadsCluster">cluster</a>.<span title="[KeyType &lt;: org.apache.avro.specific.SpecificRecord, ValueType &lt;: org.apache.avro.specific.SpecificRecord](ns: String)(implicit evidence$1: Manifest[KeyType], implicit evidence$2: Manifest[ValueType])edu.berkeley.cs.scads.storage.SpecificNamespace[KeyType,ValueType]">getNamespace</span><span title="(ns: String)(implicit evidence$1: Manifest[edu.berkeley.cs.scads.perf.intkey.WriteClient], implicit evidence$2: Manifest[edu.berkeley.cs.scads.perf.intkey.WritePerfResult])edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.perf.intkey.WriteClient,edu.berkeley.cs.scads.perf.intkey.WritePerfResult]" class="delimiter">[</span><a href="#42950" title="edu.berkeley.cs.scads.perf.intkey.WriteClient">WriteClient</a>, <a href="#42946" title="edu.berkeley.cs.scads.perf.intkey.WritePerfResult">WritePerfResult</a><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[edu.berkeley.cs.scads.perf.intkey.WriteClient]" class="delimiter">(</span><span title="java.lang.String(&quot;writeResults&quot;)" class="string">&quot;writeResults&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.comm.IntRec,edu.berkeley.cs.scads.comm.IntRec]" id="37897">ns</a> = <a href="#37894" title="edu.berkeley.cs.scads.perf.ExperimentalScadsCluster">cluster</a>.<span title="[KeyType &lt;: org.apache.avro.specific.SpecificRecord, ValueType &lt;: org.apache.avro.specific.SpecificRecord](ns: String)(implicit evidence$1: Manifest[KeyType], implicit evidence$2: Manifest[ValueType])edu.berkeley.cs.scads.storage.SpecificNamespace[KeyType,ValueType]">getNamespace</span><span title="(ns: String)(implicit evidence$1: Manifest[edu.berkeley.cs.scads.comm.IntRec], implicit evidence$2: Manifest[edu.berkeley.cs.scads.comm.IntRec])edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.comm.IntRec,edu.berkeley.cs.scads.comm.IntRec]" class="delimiter">[</span><span title="edu.berkeley.cs.scads.comm.IntRec">IntRec</span>, <span title="edu.berkeley.cs.scads.comm.IntRec">IntRec</span><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[edu.berkeley.cs.scads.comm.IntRec]" class="delimiter">(</span><span title="java.lang.String(&quot;intkeytest&quot;)" class="string">&quot;intkeytest&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="37898">startKey</a> = <a href="#37895" title="Int">clientId</a> <span title="(x: Int)Int">*</span> <a href="#42931" title="=&gt; Int">recsPerServer</a>
    <span class="keyword">val</span> <a title="Int" id="37899">endKey</a> = <span class="delimiter">(</span><a href="#37895" title="Int">clientId</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(x: Int)Int">*</span> <a href="#42931" title="=&gt; Int">recsPerServer</a>

    <span class="keyword">val</span> <a title="Long" id="37900">startTime</a> = <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span>
    <a href="#42934" title="=&gt; net.lag.logging.Logger">logger</a>.<span title="(msg: String, items: Any*)Unit">info</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Starting bulk put&quot;)" class="string">&quot;Starting bulk put&quot;</span><span class="delimiter">)</span>
    <a href="#37897" title="edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.comm.IntRec,edu.berkeley.cs.scads.comm.IntRec]">ns</a> <span title="(that: TraversableOnce[(edu.berkeley.cs.scads.comm.IntRec, edu.berkeley.cs.scads.comm.IntRec)])Unit">++=</span> <span class="delimiter">(</span><a href="#37898" title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt">startKey</a> <span title="(end: Int)scala.collection.immutable.Range.Inclusive">to</span> <a href="#37899" title="Int">endKey</a><span class="delimiter">)</span>.<span title="=&gt; java.lang.Object with scala.collection.SeqView[Int,scala.collection.immutable.IndexedSeq[Int]]">view</span>.<span title="(f: Int =&gt; (edu.berkeley.cs.scads.comm.IntRec, edu.berkeley.cs.scads.comm.IntRec))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.SeqView[Int,scala.collection.immutable.IndexedSeq[Int]],(edu.berkeley.cs.scads.comm.IntRec, edu.berkeley.cs.scads.comm.IntRec),TraversableOnce[(edu.berkeley.cs.scads.comm.IntRec, edu.berkeley.cs.scads.comm.IntRec)]])TraversableOnce[(edu.berkeley.cs.scads.comm.IntRec, edu.berkeley.cs.scads.comm.IntRec)]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.SeqView.Coll,(edu.berkeley.cs.scads.comm.IntRec, edu.berkeley.cs.scads.comm.IntRec),scala.collection.SeqView[(edu.berkeley.cs.scads.comm.IntRec, edu.berkeley.cs.scads.comm.IntRec),Seq[_]]]" class="delimiter">(</span><a title="Int" id="40399">i</a> =&gt; <span title="(_1: edu.berkeley.cs.scads.comm.IntRec, _2: edu.berkeley.cs.scads.comm.IntRec)(edu.berkeley.cs.scads.comm.IntRec, edu.berkeley.cs.scads.comm.IntRec)" class="delimiter">(</span><span title="(f1: Int)edu.berkeley.cs.scads.comm.IntRec">IntRec</span><span class="delimiter">(</span><a href="#40399" title="Int">i</a><span class="delimiter">)</span>, <span title="(f1: Int)edu.berkeley.cs.scads.comm.IntRec">IntRec</span><span class="delimiter">(</span><a href="#40399" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#42934" title="=&gt; net.lag.logging.Logger">logger</a>.<span title="(msg: String, items: Any*)Unit">info</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Bulk put complete&quot;)" class="string">&quot;Bulk put complete&quot;</span><span class="delimiter">)</span>
    <a href="#37896" title="edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.perf.intkey.WriteClient,edu.berkeley.cs.scads.perf.intkey.WritePerfResult]">writeResults</a>.<span title="(key: edu.berkeley.cs.scads.perf.intkey.WriteClient, value: Option[edu.berkeley.cs.scads.perf.intkey.WritePerfResult])Unit">put</span><span class="delimiter">(</span><a href="#42950" title="(cluster: String, clientId: Int)edu.berkeley.cs.scads.perf.intkey.WriteClient">WriteClient</a><span class="delimiter">(</span><a href="#37892" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">clusterRoot</a>.<span title="=&gt; java.lang.String">canonicalAddress</span>, <a href="#37895" title="Int">clientId</a><span class="delimiter">)</span>, <a href="#42946" title="(numKeys: Int, startTime: Long, endTime: Long)edu.berkeley.cs.scads.perf.intkey.WritePerfResult">WritePerfResult</a><span title="(a: edu.berkeley.cs.scads.perf.intkey.WritePerfResult)Option[edu.berkeley.cs.scads.perf.intkey.WritePerfResult]" class="delimiter">(</span><a href="#42931" title="=&gt; Int">recsPerServer</a>, <a href="#37900" title="Long">startTime</a>, <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#37893" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">coordination</a>.<span title="(barrierName: String, count: Int, timeout: Long, unit: java.util.concurrent.TimeUnit)Int">registerAndAwait</span><span class="delimiter">(</span><span title="java.lang.String(&quot;endWrite&quot;)" class="string">&quot;endWrite&quot;</span>, <a href="#42925" title="=&gt; Int">numLoaders</a><span class="delimiter">)</span>

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#37895" title="Int">clientId</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <a href="#37892" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">clusterRoot</a>.<span title="(name: java.lang.String, data: Array[Byte], mode: org.apache.zookeeper.CreateMode)edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">createChild</span><span title="Unit" class="delimiter">(</span><span title="java.lang.String(&quot;clusterReady&quot;)" class="string">&quot;clusterReady&quot;</span>, data = <a href="#42934" title="(record: edu.berkeley.cs.scads.perf.intkey.DataLoader)edu.berkeley.cs.avro.runtime.RichIndexedRecord[edu.berkeley.cs.scads.perf.intkey.DataLoader]" class="keyword">this</a>.<span title="=&gt; String">toJson</span>.<span title="()Array[Byte]">getBytes</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

case <span class="keyword">class</span> <a href="#55102" title="class RandomLoadClient extends org.apache.avro.specific.SpecificRecordBase with edu.berkeley.cs.avro.runtime.HasAvroConversions with edu.berkeley.cs.scads.perf.ReplicatedExperimentTask with edu.berkeley.cs.avro.marker.AvroRecord with ScalaObject with Product with Serializable" id="42918">RandomLoadClient</a><a href="#42918" title="ScalaObject" class="delimiter">(</a>
  <span class="keyword">var</span> <a title="Int" id="42896">numClients</a>: <span title="Int">Int</span>,
  <span class="keyword">var</span> <a title="Int" id="42897">numIterations</a>: <span title="Int">Int</span>,
  <span class="keyword">var</span> <a title="String" id="42898">clusterAddress</a>: <span title="String">String</span>,
  <span class="keyword">var</span> <a title="Int" id="42909">loadCount</a>: <span title="Int">Int</span> = <span title="Int(10000)" class="int">10000</span>,
  <span class="keyword">var</span> <a title="Int" id="42910">loadThreads</a>: <span title="Int">Int</span> = <span title="Int(5)" class="int">5</span>,
  <span class="keyword">var</span> <a title="Double" id="42911">readPercentage</a>: <span title="Double">Double</span> = <span title="Double(0.8)" class="double">0.8</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="AvroClient.scala.html#9504" title="edu.berkeley.cs.scads.perf.ReplicatedExperimentTask">ReplicatedExperimentTask</a> <span class="keyword">with</span> <span title="edu.berkeley.cs.avro.marker.AvroRecord">AvroRecord</span> <span class="delimiter">{</span>
  <span class="keyword">var</span> <a title="String" id="41169">resultClusterAddress</a>: <span title="String">String</span> = _
  <span class="keyword">var</span> <a title="String" id="41172">experimentAddress</a>: <span title="String">String</span> = _

  <span class="keyword">def</span> <a title="()Unit" id="41174">run</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><span title="Double(0.0)" class="double">0.0</span> <span title="(x: Double)Boolean">&lt;=</span> <a href="#42911" title="=&gt; Double">readPercentage</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#42911" title="=&gt; Double">readPercentage</a> <span title="(x: Double)Boolean">&lt;=</span> <span title="Double(1.0)" class="double">1.0</span>, <span title="java.lang.String(&quot;Read percentage needs to be between [0.0, 1.0]&quot;)" class="string">&quot;Read percentage needs to be between [0.0, 1.0]&quot;</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode" id="41213">clusterRoot</a> = <span title="(uri: String)edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">ZooKeeperNode</span><span class="delimiter">(</span><a href="#42898" title="=&gt; String">clusterAddress</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode" id="41214">experimentRoot</a> = <span title="(uri: String)edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">ZooKeeperNode</span><span class="delimiter">(</span><a href="#41172" title="=&gt; String">experimentAddress</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode" id="41215">coordination</a> = <a href="#41214" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">experimentRoot</a>.<span title="(rpath: java.lang.String, tries: Int)edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">getOrCreate</span><span class="delimiter">(</span><span title="java.lang.String(&quot;coordination&quot;)" class="string">&quot;coordination&quot;</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.intkey.DataLoader" id="41216">dataLoader</a> = classOf<span title="java.lang.Class[edu.berkeley.cs.scads.perf.intkey.DataLoader](classOf[edu.berkeley.cs.scads.perf.intkey.DataLoader])" class="delimiter">[</span>DataLoader<span class="delimiter">]</span>.<span title="(record: edu.berkeley.cs.scads.perf.intkey.DataLoader)edu.berkeley.cs.avro.runtime.RichIndexedRecord[edu.berkeley.cs.scads.perf.intkey.DataLoader]">newInstance</span>.<span title="(data: String)edu.berkeley.cs.scads.perf.intkey.DataLoader">parse</span><span class="delimiter">(</span><span title="(x$1: Array[Byte])java.lang.String" class="keyword">new</span> <span title="java.lang.String">String</span><span class="delimiter">(</span><a href="#41213" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">clusterRoot</a>.<span title="(name: String, seqNumber: Option[Int], timeout: Long, unit: java.util.concurrent.TimeUnit)edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">awaitChild</span><span class="delimiter">(</span><span title="java.lang.String(&quot;clusterReady&quot;)" class="string">&quot;clusterReady&quot;</span><span class="delimiter">)</span>.<span title="=&gt; Array[Byte]">data</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="41217">maxInt</a> = <a href="#41216" title="edu.berkeley.cs.scads.perf.intkey.DataLoader">dataLoader</a>.<a href="#42924" title="=&gt; Int">numServers</a> <span title="(x: Int)Int">*</span> <a href="#41216" title="edu.berkeley.cs.scads.perf.intkey.DataLoader">dataLoader</a>.<a href="#42931" title="=&gt; Int">recsPerServer</a>

    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.ScadsCluster" id="41218">cluster</a> = <span title="edu.berkeley.cs.scads.storage.ScadsCluster" class="keyword">new</span> <span title="edu.berkeley.cs.scads.storage.ScadsCluster">ScadsCluster</span><span class="delimiter">(</span><a href="#41213" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">clusterRoot</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.comm.IntRec,edu.berkeley.cs.scads.comm.IntRec]" id="41219">ns</a> = <a href="#41218" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>.<span title="[KeyType &lt;: org.apache.avro.specific.SpecificRecord, ValueType &lt;: org.apache.avro.specific.SpecificRecord](ns: String)(implicit evidence$1: Manifest[KeyType], implicit evidence$2: Manifest[ValueType])edu.berkeley.cs.scads.storage.SpecificNamespace[KeyType,ValueType]">getNamespace</span><span title="(ns: String)(implicit evidence$1: Manifest[edu.berkeley.cs.scads.comm.IntRec], implicit evidence$2: Manifest[edu.berkeley.cs.scads.comm.IntRec])edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.comm.IntRec,edu.berkeley.cs.scads.comm.IntRec]" class="delimiter">[</span><span title="edu.berkeley.cs.scads.comm.IntRec">IntRec</span>, <span title="edu.berkeley.cs.scads.comm.IntRec">IntRec</span><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[edu.berkeley.cs.scads.comm.IntRec]" class="delimiter">(</span><span title="java.lang.String(&quot;intkeytest&quot;)" class="string">&quot;intkeytest&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.perf.intkey.LoadClient,edu.berkeley.cs.scads.perf.intkey.LoadPerfResult]" id="41220">loadResults</a> = <a href="#41218" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>.<span title="[KeyType &lt;: org.apache.avro.specific.SpecificRecord, ValueType &lt;: org.apache.avro.specific.SpecificRecord](ns: String)(implicit evidence$1: Manifest[KeyType], implicit evidence$2: Manifest[ValueType])edu.berkeley.cs.scads.storage.SpecificNamespace[KeyType,ValueType]">getNamespace</span><span title="(ns: String)(implicit evidence$1: Manifest[edu.berkeley.cs.scads.perf.intkey.LoadClient], implicit evidence$2: Manifest[edu.berkeley.cs.scads.perf.intkey.LoadPerfResult])edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.perf.intkey.LoadClient,edu.berkeley.cs.scads.perf.intkey.LoadPerfResult]" class="delimiter">[</span><a href="#42942" title="edu.berkeley.cs.scads.perf.intkey.LoadClient">LoadClient</a>, <a href="#42938" title="edu.berkeley.cs.scads.perf.intkey.LoadPerfResult">LoadPerfResult</a><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[edu.berkeley.cs.scads.perf.intkey.LoadClient]" class="delimiter">(</span><span title="java.lang.String(&quot;loadResults&quot;)" class="string">&quot;loadResults&quot;</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="Int" id="41221">clientId</a> = <a href="#41215" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">coordination</a>.<span title="(barrierName: String, count: Int, timeout: Long, unit: java.util.concurrent.TimeUnit)Int">registerAndAwait</span><span class="delimiter">(</span><span title="java.lang.String(&quot;clientsStart&quot;)" class="string">&quot;clientsStart&quot;</span>, <a href="#42896" title="=&gt; Int">numClients</a><span class="delimiter">)</span>

    <span class="keyword">for</span> <span class="delimiter">(</span><a title="Int" id="42254">iteration</a> &lt;- <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</span> <span title="(f: Int =&gt; Int)Unit">to</span> <a href="#42897" title="=&gt; Int">numIterations</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#42918" title="=&gt; net.lag.logging.Logger">logger</a>.<span title="(msg: String, items: Any*)Unit">info</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Begining Iteration %d&quot;)" class="string">&quot;Begining Iteration %d&quot;</span>, <a href="#42254" title="Int">iteration</a><span class="delimiter">)</span>

      <a href="#41220" title="edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.perf.intkey.LoadClient,edu.berkeley.cs.scads.perf.intkey.LoadPerfResult]">loadResults</a> <span title="(that: TraversableOnce[(edu.berkeley.cs.scads.perf.intkey.LoadClient, edu.berkeley.cs.scads.perf.intkey.LoadPerfResult)])Unit">++=</span> <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</span> <span title="(itr: Iterable[Int])deploylib.ParallelSeq[Int]">to</span> <a href="#42910" title="=&gt; Int">loadThreads</a><span class="delimiter">)</span>.<span title="(f: Int =&gt; (edu.berkeley.cs.scads.perf.intkey.LoadClient, edu.berkeley.cs.scads.perf.intkey.LoadPerfResult))List[(edu.berkeley.cs.scads.perf.intkey.LoadClient, edu.berkeley.cs.scads.perf.intkey.LoadPerfResult)]">pmap</span><span class="delimiter">(</span><a title="Int" id="42370">threadId</a> =&gt; <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="42371">getTimes</a> = <a href="Histogram.scala.html#31401" title="(bucketSize: Int, bucketCount: Int)edu.berkeley.cs.scads.perf.Histogram">Histogram</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>, <span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="42372">putTimes</a> = <a href="Histogram.scala.html#31401" title="(bucketSize: Int, bucketCount: Int)edu.berkeley.cs.scads.perf.Histogram">Histogram</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>, <span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Long" id="42373">startTime</a> = <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</span> <span title="(end: Int)scala.collection.immutable.Range.Inclusive">to</span> <a href="#42909" title="=&gt; Int">loadCount</a><span class="delimiter">)</span>.<span title="(f: Int =&gt; Any)Unit">foreach</span><span class="delimiter">(</span><a title="Int" id="42502">i</a> =&gt;
          <span class="keyword">try</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="Long" id="42503">startTime</a> = <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span>
            <span class="keyword">val</span> <a title="Int" id="42504">randRec</a> = scala.util.<span title="object scala.util.Random">Random</span>.<span title="(n: Int)Int">nextInt</span><span class="delimiter">(</span><a href="#41217" title="Int">maxInt</a><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="Boolean" id="42505">isRead</a> = scala.util.<span title="object scala.util.Random">Random</span>.<span title="()Double">nextDouble</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Double)Boolean">&lt;</span> <a href="#42911" title="=&gt; Double">readPercentage</a>

            <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#42505" title="Boolean">isRead</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#41219" title="edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.comm.IntRec,edu.berkeley.cs.scads.comm.IntRec]">ns</a>.<span title="(key: edu.berkeley.cs.scads.comm.IntRec)Option[edu.berkeley.cs.scads.comm.IntRec]">get</span><span class="delimiter">(</span><span title="(f1: Int)edu.berkeley.cs.scads.comm.IntRec">IntRec</span><span class="delimiter">(</span><a href="#42504" title="Int">randRec</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; edu.berkeley.cs.scads.comm.IntRec">get</span>.<span title="=&gt; Int">f1</span> <span title="(x: Int)Boolean">==</span> <a href="#42504" title="Int">randRec</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                <span class="keyword">val</span> <a title="Long" id="42662">endTime</a> = <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span>
                <a href="#42371" title="edu.berkeley.cs.scads.perf.Histogram">getTimes</a>.<a href="Histogram.scala.html#31427" title="(value: Long)edu.berkeley.cs.scads.perf.Histogram">add</a><span class="delimiter">(</span><a href="#42662" title="Long">endTime</a> <span title="(x: Long)Long">-</span> <a href="#42503" title="Long">startTime</a><span class="delimiter">)</span>
              <span class="delimiter">}</span> <span class="keyword">else</span>
                <a href="#42918" title="=&gt; net.lag.logging.Logger">logger</a>.<span title="(msg: String, items: Any*)Unit">warning</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Failed Read&quot;)" class="string">&quot;Failed Read&quot;</span><span class="delimiter">)</span>
            <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
              <a href="#41219" title="edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.comm.IntRec,edu.berkeley.cs.scads.comm.IntRec]">ns</a>.<span title="(key: edu.berkeley.cs.scads.comm.IntRec, value: Option[edu.berkeley.cs.scads.comm.IntRec])Unit">put</span><span class="delimiter">(</span><span title="(f1: Int)edu.berkeley.cs.scads.comm.IntRec">IntRec</span><span class="delimiter">(</span><a href="#42504" title="Int">randRec</a><span class="delimiter">)</span>, <span title="(f1: Int)edu.berkeley.cs.scads.comm.IntRec">IntRec</span><span title="(a: edu.berkeley.cs.scads.comm.IntRec)Option[edu.berkeley.cs.scads.comm.IntRec]" class="delimiter">(</span><a href="#42504" title="Int">randRec</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">val</span> <a title="Long" id="42677">endTime</a> = <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span>
              <a href="#42372" title="edu.berkeley.cs.scads.perf.Histogram">putTimes</a>.<a href="Histogram.scala.html#31427" title="(value: Long)edu.berkeley.cs.scads.perf.Histogram">add</a><span class="delimiter">(</span><a href="#42677" title="Long">endTime</a> <span title="(x: Long)Long">-</span> <a href="#42503" title="Long">startTime</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="Unit" id="42695">e</a> =&gt; <a href="#42918" title="=&gt; net.lag.logging.Logger">logger</a>.<span title="(msg: String, items: Any*)Unit">debug</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Exception during operation %s&quot;)" class="string">&quot;Exception during operation %s&quot;</span>, <a href="#42695" title="java.lang.Throwable">e</a><span class="delimiter">)</span> <span class="delimiter">}</span><span class="delimiter">)</span>
        <span title="(_1: edu.berkeley.cs.scads.perf.intkey.LoadClient, _2: edu.berkeley.cs.scads.perf.intkey.LoadPerfResult)(edu.berkeley.cs.scads.perf.intkey.LoadClient, edu.berkeley.cs.scads.perf.intkey.LoadPerfResult)" class="delimiter">(</span><a href="#42942" title="(cluster: String, clientId: Int, threadId: Int, iteration: Int)edu.berkeley.cs.scads.perf.intkey.LoadClient">LoadClient</a><span class="delimiter">(</span><a href="#41213" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">clusterRoot</a>.<span title="=&gt; java.lang.String">canonicalAddress</span>, <a href="#41221" title="Int">clientId</a>, <a href="#42370" title="Int">threadId</a>, <a href="#42254" title="Int">iteration</a><span class="delimiter">)</span>, <a href="#42938" title="(startTime: Long, endTime: Long, getTimes: edu.berkeley.cs.scads.perf.Histogram, putTimes: edu.berkeley.cs.scads.perf.Histogram)edu.berkeley.cs.scads.perf.intkey.LoadPerfResult">LoadPerfResult</a><span class="delimiter">(</span><a href="#42373" title="Long">startTime</a>, <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span>, <a href="#42371" title="edu.berkeley.cs.scads.perf.Histogram">getTimes</a>, <a href="#42372" title="edu.berkeley.cs.scads.perf.Histogram">putTimes</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>

      <a href="#41215" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">coordination</a>.<span title="(barrierName: String, count: Int, timeout: Long, unit: java.util.concurrent.TimeUnit)Int">registerAndAwait</span><span class="delimiter">(</span><span title="java.lang.String(&quot;endRead&quot;)" class="string">&quot;endRead&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#42254" title="Int">iteration</a>, <a href="#42896" title="=&gt; Int">numClients</a><span class="delimiter">)</span>

    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>