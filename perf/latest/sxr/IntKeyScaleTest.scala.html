<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>IntKeyScaleTest.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> edu.berkeley.cs.scads.perf
<span class="keyword">package</span> intkey

<span class="keyword">import</span> deploylib._
<span class="keyword">import</span> deploylib.mesos._
<span class="keyword">import</span> edu.berkeley.cs.scads.comm._
<span class="keyword">import</span> edu.berkeley.cs.scads.config._
<span class="keyword">import</span> edu.berkeley.cs.scads.storage._
<span class="keyword">import</span> edu.berkeley.cs.avro.runtime._
<span class="keyword">import</span> edu.berkeley.cs.avro.marker._

<span class="keyword">import</span> org.apache.zookeeper.CreateMode

<span class="keyword">import</span> java.io.File 

case <span class="keyword">class</span> <a href="#57619" title="class WriteClient extends org.apache.avro.specific.SpecificRecordBase with edu.berkeley.cs.avro.runtime.HasAvroConversions with edu.berkeley.cs.avro.marker.AvroRecord with ScalaObject with Product with Serializable" id="44688">WriteClient</a><a href="#44688" title="ScalaObject" class="delimiter">(</a><a href="#44688" title="()edu.berkeley.cs.scads.perf.intkey.WriteClient" id="51378" class="keyword">var</a> <a title="String" id="42804">cluster</a>: <span title="String">String</span>, <span class="keyword">var</span> <a title="Int" id="42805">clientId</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="edu.berkeley.cs.avro.marker.AvroRecord">AvroRecord</span>
case <span class="keyword">class</span> <a href="#57934" title="class WritePerfResult extends org.apache.avro.specific.SpecificRecordBase with edu.berkeley.cs.avro.runtime.HasAvroConversions with edu.berkeley.cs.avro.marker.AvroRecord with ScalaObject with Product with Serializable" id="44684">WritePerfResult</a><a href="#44684" title="ScalaObject" class="delimiter">(</a><a href="#44684" title="()edu.berkeley.cs.scads.perf.intkey.WritePerfResult" id="51388" class="keyword">var</a> <a title="Int" id="42811">numKeys</a>: <span title="Int">Int</span>, <span class="keyword">var</span> <a title="Long" id="42812">startTime</a>: <span title="Long">Long</span>, <span class="keyword">var</span> <a title="Long" id="42813">endTime</a>: <span title="Long">Long</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="edu.berkeley.cs.avro.marker.AvroRecord">AvroRecord</span>

case <span class="keyword">class</span> <a href="#57944" title="class LoadClient extends org.apache.avro.specific.SpecificRecordBase with edu.berkeley.cs.avro.runtime.HasAvroConversions with edu.berkeley.cs.avro.marker.AvroRecord with ScalaObject with Product with Serializable" id="44680">LoadClient</a><a href="#44680" title="ScalaObject" class="delimiter">(</a><a href="#44680" title="()edu.berkeley.cs.scads.perf.intkey.LoadClient" id="51398" class="keyword">var</a> <a title="String" id="44443">cluster</a>: <span title="String">String</span>, <span class="keyword">var</span> <a title="Int" id="44444">clientId</a>: <span title="Int">Int</span>, <span class="keyword">var</span> <a title="Int" id="44445">threadId</a>: <span title="Int">Int</span>, <span class="keyword">var</span> <a title="Int" id="44446">iteration</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="edu.berkeley.cs.avro.marker.AvroRecord">AvroRecord</span>
case <span class="keyword">class</span> <a href="#58256" title="class LoadPerfResult extends org.apache.avro.specific.SpecificRecordBase with edu.berkeley.cs.avro.runtime.HasAvroConversions with edu.berkeley.cs.avro.marker.AvroRecord with ScalaObject with Product with Serializable" id="44676">LoadPerfResult</a><a href="#44676" title="ScalaObject" class="delimiter">(</a><a href="#44676" title="()edu.berkeley.cs.scads.perf.intkey.LoadPerfResult" id="51408" class="keyword">var</a> <a title="Long" id="44456">startTime</a>: <span title="Long">Long</span>, <span class="keyword">var</span> <a title="Long" id="44457">endTime</a>: <span title="Long">Long</span>, <span class="keyword">var</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="44458">getTimes</a>: <a href="Histogram.scala.html#9528" title="edu.berkeley.cs.scads.perf.Histogram">Histogram</a>, <span class="keyword">var</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="44459">putTimes</a>: <a href="Histogram.scala.html#9528" title="edu.berkeley.cs.scads.perf.Histogram">Histogram</a><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="edu.berkeley.cs.avro.marker.AvroRecord">AvroRecord</span>

case <span class="keyword">class</span> <a href="#58266" title="class DataLoader extends org.apache.avro.specific.SpecificRecordBase with edu.berkeley.cs.avro.runtime.HasAvroConversions with edu.berkeley.cs.scads.perf.DataLoadingTask with edu.berkeley.cs.avro.marker.AvroRecord with ScalaObject with Product with Serializable" id="44672">DataLoader</a><a href="#44672" title="ScalaObject" class="delimiter">(</a><a href="#44672" title="()edu.berkeley.cs.scads.perf.intkey.DataLoader" id="51418" class="keyword">var</a> <a title="Int" id="44662">numServers</a>: <span title="Int">Int</span>, <span class="keyword">var</span> <a title="Int" id="44663">numLoaders</a>: <span title="Int">Int</span>, <span class="keyword">var</span> <a title="Int" id="44669">recsPerServer</a>: <span title="Int">Int</span> = <span title="Int(10)" class="int">10</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="AvroClient.scala.html#9501" title="edu.berkeley.cs.scads.perf.DataLoadingTask">DataLoadingTask</a> <span class="keyword">with</span> <span title="edu.berkeley.cs.avro.marker.AvroRecord">AvroRecord</span> <span class="delimiter">{</span>
  <span class="keyword">var</span> <a title="String" id="39750">clusterAddress</a>: <span title="String">String</span> = _

  <span class="keyword">def</span> <a title="()Unit" id="39752">run</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode" id="39771">clusterRoot</a> = <span title="(uri: String)edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">ZooKeeperNode</span><span class="delimiter">(</span><a href="#39750" title="=&gt; String">clusterAddress</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode" id="39772">coordination</a> = <a href="#39771" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">clusterRoot</a>.<span title="(rpath: java.lang.String, tries: Int)edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">getOrCreate</span><span class="delimiter">(</span><span title="java.lang.String(&quot;coordination/loaders&quot;)" class="string">&quot;coordination/loaders&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.ExperimentalScadsCluster" id="39773">cluster</a> = <span title="edu.berkeley.cs.scads.perf.ExperimentalScadsCluster" class="keyword">new</span> <a href="Experiment.scala.html#9516" title="edu.berkeley.cs.scads.perf.ExperimentalScadsCluster">ExperimentalScadsCluster</a><span class="delimiter">(</span><a href="#39771" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">clusterRoot</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="Int" id="39774">clientId</a> = <a href="#39772" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">coordination</a>.<span title="(barrierName: String, count: Int, timeout: Long, unit: java.util.concurrent.TimeUnit)Int">registerAndAwait</span><span class="delimiter">(</span><span title="java.lang.String(&quot;clientsStart&quot;)" class="string">&quot;clientsStart&quot;</span>, <a href="#44662" title="=&gt; Int">numServers</a><span class="delimiter">)</span>
    <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#39774" title="Int">clientId</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#39773" title="edu.berkeley.cs.scads.perf.ExperimentalScadsCluster">cluster</a>.<a href="Experiment.scala.html#30886" title="(clusterSize: Int)Unit">blockUntilReady</a><span class="delimiter">(</span><a href="#44662" title="=&gt; Int">numServers</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="scala.collection.immutable.IndexedSeq[Option[edu.berkeley.cs.scads.comm.IntRec]]" id="39788">keySplits</a> = <span title="object None">None</span> <a href="#39790" title="(elem: Option[edu.berkeley.cs.scads.comm.IntRec])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Some[edu.berkeley.cs.scads.comm.IntRec]],Option[edu.berkeley.cs.scads.comm.IntRec],scala.collection.immutable.IndexedSeq[Option[edu.berkeley.cs.scads.comm.IntRec]]])scala.collection.immutable.IndexedSeq[Option[edu.berkeley.cs.scads.comm.IntRec]]">+:</a> <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</span> <span title="(end: Int)scala.collection.immutable.Range">until</span> <a href="#44662" title="=&gt; Int">numServers</a><span class="delimiter">)</span>.<span title="(f: Int =&gt; Some[edu.berkeley.cs.scads.comm.IntRec])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Int],Some[edu.berkeley.cs.scads.comm.IntRec],scala.collection.immutable.IndexedSeq[Some[edu.berkeley.cs.scads.comm.IntRec]]])scala.collection.immutable.IndexedSeq[Some[edu.berkeley.cs.scads.comm.IntRec]]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq.Coll,Some[edu.berkeley.cs.scads.comm.IntRec],scala.collection.immutable.IndexedSeq[Some[edu.berkeley.cs.scads.comm.IntRec]]]" class="delimiter">(</span><a title="Int" id="39957">i</a> =&gt; <span title="(x: edu.berkeley.cs.scads.comm.IntRec)Some[edu.berkeley.cs.scads.comm.IntRec]">Some</span><span class="delimiter">(</span><span title="(f1: Int)edu.berkeley.cs.scads.comm.IntRec">IntRec</span><span class="delimiter">(</span><a href="#39957" title="Int">i</a> <span title="(x: Int)Int">*</span> <a href="#44669" title="=&gt; Int">recsPerServer</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.IndexedSeq[(Option[edu.berkeley.cs.scads.comm.IntRec], List[edu.berkeley.cs.scads.comm.StorageService])]" id="39789">partitions</a> = <a href="#39788" title="scala.collection.immutable.IndexedSeq[Option[edu.berkeley.cs.scads.comm.IntRec]]">keySplits</a> <span title="(that: scala.collection.GenIterable[List[edu.berkeley.cs.scads.comm.StorageService]])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Option[edu.berkeley.cs.scads.comm.IntRec]],(Option[edu.berkeley.cs.scads.comm.IntRec], List[edu.berkeley.cs.scads.comm.StorageService]),scala.collection.immutable.IndexedSeq[(Option[edu.berkeley.cs.scads.comm.IntRec], List[edu.berkeley.cs.scads.comm.StorageService])]])scala.collection.immutable.IndexedSeq[(Option[edu.berkeley.cs.scads.comm.IntRec], List[edu.berkeley.cs.scads.comm.StorageService])]">zip</span> <a href="#39773" title="edu.berkeley.cs.scads.perf.ExperimentalScadsCluster">cluster</a>.<span title="()List[edu.berkeley.cs.scads.comm.StorageService]">getAvailableServers</span>.<span title="(f: edu.berkeley.cs.scads.comm.StorageService =&gt; List[edu.berkeley.cs.scads.comm.StorageService])(implicit bf: scala.collection.generic.CanBuildFrom[List[edu.berkeley.cs.scads.comm.StorageService],List[edu.berkeley.cs.scads.comm.StorageService],List[List[edu.berkeley.cs.scads.comm.StorageService]]])List[List[edu.berkeley.cs.scads.comm.StorageService]]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,List[edu.berkeley.cs.scads.comm.StorageService],List[List[edu.berkeley.cs.scads.comm.StorageService]]]" class="delimiter">(</span><span title="(xs: edu.berkeley.cs.scads.comm.StorageService*)List[edu.berkeley.cs.scads.comm.StorageService]">List</span><span class="delimiter">(</span><a href="#40156" title="edu.berkeley.cs.scads.comm.StorageService">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#44672" title="=&gt; net.lag.logging.Logger">logger</a>.<span title="(msg: String, items: Any*)Unit">info</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Cluster configured with the following partitions %s&quot;)" class="string">&quot;Cluster configured with the following partitions %s&quot;</span>, <a href="#39789" title="scala.collection.immutable.IndexedSeq[(Option[edu.berkeley.cs.scads.comm.IntRec], List[edu.berkeley.cs.scads.comm.StorageService])]">partitions</a><span class="delimiter">)</span>
      <a href="#39773" title="edu.berkeley.cs.scads.perf.ExperimentalScadsCluster">cluster</a>.<span title="[KeyType &lt;: org.apache.avro.specific.SpecificRecord, ValueType &lt;: org.apache.avro.specific.SpecificRecord](ns: String, servers: Seq[(Option[KeyType], Seq[edu.berkeley.cs.scads.comm.StorageService])])(implicit evidence$5: Manifest[KeyType], implicit evidence$6: Manifest[ValueType])edu.berkeley.cs.scads.storage.SpecificNamespace[KeyType,ValueType]">createNamespace</span><span title="(ns: String, servers: Seq[(Option[edu.berkeley.cs.scads.comm.IntRec], Seq[edu.berkeley.cs.scads.comm.StorageService])])(implicit evidence$5: Manifest[edu.berkeley.cs.scads.comm.IntRec], implicit evidence$6: Manifest[edu.berkeley.cs.scads.comm.IntRec])edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.comm.IntRec,edu.berkeley.cs.scads.comm.IntRec]" class="delimiter">[</span><span title="edu.berkeley.cs.scads.comm.IntRec">IntRec</span>, <span title="edu.berkeley.cs.scads.comm.IntRec">IntRec</span><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[edu.berkeley.cs.scads.comm.IntRec]" class="delimiter">(</span><span title="java.lang.String(&quot;intkeytest&quot;)" class="string">&quot;intkeytest&quot;</span>, <a href="#39789" title="scala.collection.immutable.IndexedSeq[(Option[edu.berkeley.cs.scads.comm.IntRec], List[edu.berkeley.cs.scads.comm.StorageService])]">partitions</a><span class="delimiter">)</span>
      <a href="#39773" title="edu.berkeley.cs.scads.perf.ExperimentalScadsCluster">cluster</a>.<span title="[KeyType &lt;: org.apache.avro.specific.SpecificRecord, ValueType &lt;: org.apache.avro.specific.SpecificRecord](ns: String)(implicit evidence$1: Manifest[KeyType], implicit evidence$2: Manifest[ValueType])edu.berkeley.cs.scads.storage.SpecificNamespace[KeyType,ValueType]">getNamespace</span><span title="(ns: String)(implicit evidence$1: Manifest[edu.berkeley.cs.scads.perf.intkey.WriteClient], implicit evidence$2: Manifest[edu.berkeley.cs.scads.perf.intkey.WritePerfResult])edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.perf.intkey.WriteClient,edu.berkeley.cs.scads.perf.intkey.WritePerfResult]" class="delimiter">[</span><a href="#44688" title="edu.berkeley.cs.scads.perf.intkey.WriteClient">WriteClient</a>, <a href="#44684" title="edu.berkeley.cs.scads.perf.intkey.WritePerfResult">WritePerfResult</a><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[edu.berkeley.cs.scads.perf.intkey.WriteClient]" class="delimiter">(</span><span title="java.lang.String(&quot;writeResults&quot;)" class="string">&quot;writeResults&quot;</span><span class="delimiter">)</span>
      <a href="#39773" title="edu.berkeley.cs.scads.perf.ExperimentalScadsCluster">cluster</a>.<span title="[KeyType &lt;: org.apache.avro.specific.SpecificRecord, ValueType &lt;: org.apache.avro.specific.SpecificRecord](ns: String)(implicit evidence$1: Manifest[KeyType], implicit evidence$2: Manifest[ValueType])edu.berkeley.cs.scads.storage.SpecificNamespace[KeyType,ValueType]">getNamespace</span><span title="(ns: String)(implicit evidence$1: Manifest[edu.berkeley.cs.scads.perf.intkey.LoadClient], implicit evidence$2: Manifest[edu.berkeley.cs.scads.perf.intkey.LoadPerfResult])edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.perf.intkey.LoadClient,edu.berkeley.cs.scads.perf.intkey.LoadPerfResult]" class="delimiter">[</span><a href="#44680" title="edu.berkeley.cs.scads.perf.intkey.LoadClient">LoadClient</a>, <a href="#44676" title="edu.berkeley.cs.scads.perf.intkey.LoadPerfResult">LoadPerfResult</a><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[edu.berkeley.cs.scads.perf.intkey.LoadClient]" class="delimiter">(</span><span title="java.lang.String(&quot;loadResults&quot;)" class="string">&quot;loadResults&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#39772" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">coordination</a>.<span title="(barrierName: String, count: Int, timeout: Long, unit: java.util.concurrent.TimeUnit)Int">registerAndAwait</span><span class="delimiter">(</span><span title="java.lang.String(&quot;startWrite&quot;)" class="string">&quot;startWrite&quot;</span>, <a href="#44663" title="=&gt; Int">numLoaders</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.perf.intkey.WriteClient,edu.berkeley.cs.scads.perf.intkey.WritePerfResult]" id="39775">writeResults</a> = <a href="#39773" title="edu.berkeley.cs.scads.perf.ExperimentalScadsCluster">cluster</a>.<span title="[KeyType &lt;: org.apache.avro.specific.SpecificRecord, ValueType &lt;: org.apache.avro.specific.SpecificRecord](ns: String)(implicit evidence$1: Manifest[KeyType], implicit evidence$2: Manifest[ValueType])edu.berkeley.cs.scads.storage.SpecificNamespace[KeyType,ValueType]">getNamespace</span><span title="(ns: String)(implicit evidence$1: Manifest[edu.berkeley.cs.scads.perf.intkey.WriteClient], implicit evidence$2: Manifest[edu.berkeley.cs.scads.perf.intkey.WritePerfResult])edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.perf.intkey.WriteClient,edu.berkeley.cs.scads.perf.intkey.WritePerfResult]" class="delimiter">[</span><a href="#44688" title="edu.berkeley.cs.scads.perf.intkey.WriteClient">WriteClient</a>, <a href="#44684" title="edu.berkeley.cs.scads.perf.intkey.WritePerfResult">WritePerfResult</a><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[edu.berkeley.cs.scads.perf.intkey.WriteClient]" class="delimiter">(</span><span title="java.lang.String(&quot;writeResults&quot;)" class="string">&quot;writeResults&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.comm.IntRec,edu.berkeley.cs.scads.comm.IntRec]" id="39776">ns</a> = <a href="#39773" title="edu.berkeley.cs.scads.perf.ExperimentalScadsCluster">cluster</a>.<span title="[KeyType &lt;: org.apache.avro.specific.SpecificRecord, ValueType &lt;: org.apache.avro.specific.SpecificRecord](ns: String)(implicit evidence$1: Manifest[KeyType], implicit evidence$2: Manifest[ValueType])edu.berkeley.cs.scads.storage.SpecificNamespace[KeyType,ValueType]">getNamespace</span><span title="(ns: String)(implicit evidence$1: Manifest[edu.berkeley.cs.scads.comm.IntRec], implicit evidence$2: Manifest[edu.berkeley.cs.scads.comm.IntRec])edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.comm.IntRec,edu.berkeley.cs.scads.comm.IntRec]" class="delimiter">[</span><span title="edu.berkeley.cs.scads.comm.IntRec">IntRec</span>, <span title="edu.berkeley.cs.scads.comm.IntRec">IntRec</span><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[edu.berkeley.cs.scads.comm.IntRec]" class="delimiter">(</span><span title="java.lang.String(&quot;intkeytest&quot;)" class="string">&quot;intkeytest&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="39777">startKey</a> = <a href="#39774" title="Int">clientId</a> <span title="(x: Int)Int">*</span> <a href="#44669" title="=&gt; Int">recsPerServer</a>
    <span class="keyword">val</span> <a title="Int" id="39778">endKey</a> = <span class="delimiter">(</span><a href="#39774" title="Int">clientId</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(x: Int)Int">*</span> <a href="#44669" title="=&gt; Int">recsPerServer</a>

    <span class="keyword">val</span> <a title="Long" id="39779">startTime</a> = <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span>
    <a href="#44672" title="=&gt; net.lag.logging.Logger">logger</a>.<span title="(msg: String, items: Any*)Unit">info</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Starting bulk put&quot;)" class="string">&quot;Starting bulk put&quot;</span><span class="delimiter">)</span>
    <a href="#39776" title="edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.comm.IntRec,edu.berkeley.cs.scads.comm.IntRec]">ns</a> <span title="(that: TraversableOnce[(edu.berkeley.cs.scads.comm.IntRec, edu.berkeley.cs.scads.comm.IntRec)])Unit">++=</span> <span class="delimiter">(</span><a href="#39777" title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt">startKey</a> <span title="(end: Int)scala.collection.immutable.Range.Inclusive">to</span> <a href="#39778" title="Int">endKey</a><span class="delimiter">)</span>.<span title="=&gt; java.lang.Object with scala.collection.SeqView[Int,scala.collection.immutable.IndexedSeq[Int]]">view</span>.<span title="(f: Int =&gt; (edu.berkeley.cs.scads.comm.IntRec, edu.berkeley.cs.scads.comm.IntRec))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.SeqView[Int,scala.collection.immutable.IndexedSeq[Int]],(edu.berkeley.cs.scads.comm.IntRec, edu.berkeley.cs.scads.comm.IntRec),TraversableOnce[(edu.berkeley.cs.scads.comm.IntRec, edu.berkeley.cs.scads.comm.IntRec)]])TraversableOnce[(edu.berkeley.cs.scads.comm.IntRec, edu.berkeley.cs.scads.comm.IntRec)]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.SeqView.Coll,(edu.berkeley.cs.scads.comm.IntRec, edu.berkeley.cs.scads.comm.IntRec),scala.collection.SeqView[(edu.berkeley.cs.scads.comm.IntRec, edu.berkeley.cs.scads.comm.IntRec),Seq[_]]]" class="delimiter">(</span><a title="Int" id="42221">i</a> =&gt; <span title="(_1: edu.berkeley.cs.scads.comm.IntRec, _2: edu.berkeley.cs.scads.comm.IntRec)(edu.berkeley.cs.scads.comm.IntRec, edu.berkeley.cs.scads.comm.IntRec)" class="delimiter">(</span><span title="(f1: Int)edu.berkeley.cs.scads.comm.IntRec">IntRec</span><span class="delimiter">(</span><a href="#42221" title="Int">i</a><span class="delimiter">)</span>, <span title="(f1: Int)edu.berkeley.cs.scads.comm.IntRec">IntRec</span><span class="delimiter">(</span><a href="#42221" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#44672" title="=&gt; net.lag.logging.Logger">logger</a>.<span title="(msg: String, items: Any*)Unit">info</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Bulk put complete&quot;)" class="string">&quot;Bulk put complete&quot;</span><span class="delimiter">)</span>
    <a href="#39775" title="edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.perf.intkey.WriteClient,edu.berkeley.cs.scads.perf.intkey.WritePerfResult]">writeResults</a>.<span title="(key: edu.berkeley.cs.scads.perf.intkey.WriteClient, value: Option[edu.berkeley.cs.scads.perf.intkey.WritePerfResult])Unit">put</span><span class="delimiter">(</span><a href="#44688" title="(cluster: String, clientId: Int)edu.berkeley.cs.scads.perf.intkey.WriteClient">WriteClient</a><span class="delimiter">(</span><a href="#39771" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">clusterRoot</a>.<span title="=&gt; java.lang.String">canonicalAddress</span>, <a href="#39774" title="Int">clientId</a><span class="delimiter">)</span>, <a href="#44684" title="(numKeys: Int, startTime: Long, endTime: Long)edu.berkeley.cs.scads.perf.intkey.WritePerfResult">WritePerfResult</a><span title="(a: edu.berkeley.cs.scads.perf.intkey.WritePerfResult)Option[edu.berkeley.cs.scads.perf.intkey.WritePerfResult]" class="delimiter">(</span><a href="#44669" title="=&gt; Int">recsPerServer</a>, <a href="#39779" title="Long">startTime</a>, <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#39772" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">coordination</a>.<span title="(barrierName: String, count: Int, timeout: Long, unit: java.util.concurrent.TimeUnit)Int">registerAndAwait</span><span class="delimiter">(</span><span title="java.lang.String(&quot;endWrite&quot;)" class="string">&quot;endWrite&quot;</span>, <a href="#44663" title="=&gt; Int">numLoaders</a><span class="delimiter">)</span>

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#39774" title="Int">clientId</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <a href="#39771" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">clusterRoot</a>.<span title="(name: java.lang.String, data: Array[Byte], mode: org.apache.zookeeper.CreateMode)edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">createChild</span><span title="Unit" class="delimiter">(</span><span title="java.lang.String(&quot;clusterReady&quot;)" class="string">&quot;clusterReady&quot;</span>, data = <a href="#44672" title="(record: edu.berkeley.cs.scads.perf.intkey.DataLoader)edu.berkeley.cs.avro.runtime.RichIndexedRecord[edu.berkeley.cs.scads.perf.intkey.DataLoader]" class="keyword">this</a>.<span title="=&gt; String">toJson</span>.<span title="()Array[Byte]">getBytes</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

case <span class="keyword">class</span> <a href="#58578" title="class RandomLoadClient extends org.apache.avro.specific.SpecificRecordBase with edu.berkeley.cs.avro.runtime.HasAvroConversions with edu.berkeley.cs.scads.perf.ReplicatedExperimentTask with edu.berkeley.cs.avro.marker.AvroRecord with ScalaObject with Product with Serializable" id="44656">RandomLoadClient</a><a href="#44656" title="ScalaObject" class="delimiter">(</a>
  <span class="keyword">var</span> <a title="Int" id="44634">numClients</a>: <span title="Int">Int</span>,
  <span class="keyword">var</span> <a title="Int" id="44635">numIterations</a>: <span title="Int">Int</span>,
  <span class="keyword">var</span> <a title="String" id="44636">clusterAddress</a>: <span title="String">String</span>,
  <span class="keyword">var</span> <a title="Int" id="44647">loadCount</a>: <span title="Int">Int</span> = <span title="Int(10000)" class="int">10000</span>,
  <span class="keyword">var</span> <a title="Int" id="44648">loadThreads</a>: <span title="Int">Int</span> = <span title="Int(5)" class="int">5</span>,
  <span class="keyword">var</span> <a title="Double" id="44649">readPercentage</a>: <span title="Double">Double</span> = <span title="Double(0.8)" class="double">0.8</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="AvroClient.scala.html#9502" title="edu.berkeley.cs.scads.perf.ReplicatedExperimentTask">ReplicatedExperimentTask</a> <span class="keyword">with</span> <span title="edu.berkeley.cs.avro.marker.AvroRecord">AvroRecord</span> <span class="delimiter">{</span>
  <span class="keyword">var</span> <a title="String" id="43000">resultClusterAddress</a>: <span title="String">String</span> = _
  <span class="keyword">var</span> <a title="String" id="43003">experimentAddress</a>: <span title="String">String</span> = _

  <span class="keyword">def</span> <a title="()Unit" id="43005">run</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><span title="Double(0.0)" class="double">0.0</span> <span title="(x: Double)Boolean">&lt;=</span> <a href="#44649" title="=&gt; Double">readPercentage</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#44649" title="=&gt; Double">readPercentage</a> <span title="(x: Double)Boolean">&lt;=</span> <span title="Double(1.0)" class="double">1.0</span>, <span title="java.lang.String(&quot;Read percentage needs to be between [0.0, 1.0]&quot;)" class="string">&quot;Read percentage needs to be between [0.0, 1.0]&quot;</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode" id="43044">clusterRoot</a> = <span title="(uri: String)edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">ZooKeeperNode</span><span class="delimiter">(</span><a href="#44636" title="=&gt; String">clusterAddress</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode" id="43045">experimentRoot</a> = <span title="(uri: String)edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">ZooKeeperNode</span><span class="delimiter">(</span><a href="#43003" title="=&gt; String">experimentAddress</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode" id="43046">coordination</a> = <a href="#43045" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">experimentRoot</a>.<span title="(rpath: java.lang.String, tries: Int)edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">getOrCreate</span><span class="delimiter">(</span><span title="java.lang.String(&quot;coordination&quot;)" class="string">&quot;coordination&quot;</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.intkey.DataLoader" id="43047">dataLoader</a> = classOf<span title="java.lang.Class[edu.berkeley.cs.scads.perf.intkey.DataLoader](classOf[edu.berkeley.cs.scads.perf.intkey.DataLoader])" class="delimiter">[</span>DataLoader<span class="delimiter">]</span>.<span title="(record: edu.berkeley.cs.scads.perf.intkey.DataLoader)edu.berkeley.cs.avro.runtime.RichIndexedRecord[edu.berkeley.cs.scads.perf.intkey.DataLoader]">newInstance</span>.<span title="(data: String)edu.berkeley.cs.scads.perf.intkey.DataLoader">parse</span><span class="delimiter">(</span><span title="(x$1: Array[Byte])java.lang.String" class="keyword">new</span> <span title="java.lang.String">String</span><span class="delimiter">(</span><a href="#43044" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">clusterRoot</a>.<span title="(name: String, seqNumber: Option[Int], timeout: Long, unit: java.util.concurrent.TimeUnit)edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">awaitChild</span><span class="delimiter">(</span><span title="java.lang.String(&quot;clusterReady&quot;)" class="string">&quot;clusterReady&quot;</span><span class="delimiter">)</span>.<span title="=&gt; Array[Byte]">data</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="43048">maxInt</a> = <a href="#43047" title="edu.berkeley.cs.scads.perf.intkey.DataLoader">dataLoader</a>.<a href="#44662" title="=&gt; Int">numServers</a> <span title="(x: Int)Int">*</span> <a href="#43047" title="edu.berkeley.cs.scads.perf.intkey.DataLoader">dataLoader</a>.<a href="#44669" title="=&gt; Int">recsPerServer</a>

    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.ScadsCluster" id="43049">cluster</a> = <span title="edu.berkeley.cs.scads.storage.ScadsCluster" class="keyword">new</span> <span title="edu.berkeley.cs.scads.storage.ScadsCluster">ScadsCluster</span><span class="delimiter">(</span><a href="#43044" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">clusterRoot</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.comm.IntRec,edu.berkeley.cs.scads.comm.IntRec]" id="43050">ns</a> = <a href="#43049" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>.<span title="[KeyType &lt;: org.apache.avro.specific.SpecificRecord, ValueType &lt;: org.apache.avro.specific.SpecificRecord](ns: String)(implicit evidence$1: Manifest[KeyType], implicit evidence$2: Manifest[ValueType])edu.berkeley.cs.scads.storage.SpecificNamespace[KeyType,ValueType]">getNamespace</span><span title="(ns: String)(implicit evidence$1: Manifest[edu.berkeley.cs.scads.comm.IntRec], implicit evidence$2: Manifest[edu.berkeley.cs.scads.comm.IntRec])edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.comm.IntRec,edu.berkeley.cs.scads.comm.IntRec]" class="delimiter">[</span><span title="edu.berkeley.cs.scads.comm.IntRec">IntRec</span>, <span title="edu.berkeley.cs.scads.comm.IntRec">IntRec</span><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[edu.berkeley.cs.scads.comm.IntRec]" class="delimiter">(</span><span title="java.lang.String(&quot;intkeytest&quot;)" class="string">&quot;intkeytest&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.perf.intkey.LoadClient,edu.berkeley.cs.scads.perf.intkey.LoadPerfResult]" id="43051">loadResults</a> = <a href="#43049" title="edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>.<span title="[KeyType &lt;: org.apache.avro.specific.SpecificRecord, ValueType &lt;: org.apache.avro.specific.SpecificRecord](ns: String)(implicit evidence$1: Manifest[KeyType], implicit evidence$2: Manifest[ValueType])edu.berkeley.cs.scads.storage.SpecificNamespace[KeyType,ValueType]">getNamespace</span><span title="(ns: String)(implicit evidence$1: Manifest[edu.berkeley.cs.scads.perf.intkey.LoadClient], implicit evidence$2: Manifest[edu.berkeley.cs.scads.perf.intkey.LoadPerfResult])edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.perf.intkey.LoadClient,edu.berkeley.cs.scads.perf.intkey.LoadPerfResult]" class="delimiter">[</span><a href="#44680" title="edu.berkeley.cs.scads.perf.intkey.LoadClient">LoadClient</a>, <a href="#44676" title="edu.berkeley.cs.scads.perf.intkey.LoadPerfResult">LoadPerfResult</a><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[edu.berkeley.cs.scads.perf.intkey.LoadClient]" class="delimiter">(</span><span title="java.lang.String(&quot;loadResults&quot;)" class="string">&quot;loadResults&quot;</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="Int" id="43052">clientId</a> = <a href="#43046" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">coordination</a>.<span title="(barrierName: String, count: Int, timeout: Long, unit: java.util.concurrent.TimeUnit)Int">registerAndAwait</span><span class="delimiter">(</span><span title="java.lang.String(&quot;clientsStart&quot;)" class="string">&quot;clientsStart&quot;</span>, <a href="#44634" title="=&gt; Int">numClients</a><span class="delimiter">)</span>

    <span class="keyword">for</span> <span class="delimiter">(</span><a title="Int" id="43992">iteration</a> &lt;- <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</span> <span title="(f: Int =&gt; Int)Unit">to</span> <a href="#44635" title="=&gt; Int">numIterations</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#44656" title="=&gt; net.lag.logging.Logger">logger</a>.<span title="(msg: String, items: Any*)Unit">info</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Begining Iteration %d&quot;)" class="string">&quot;Begining Iteration %d&quot;</span>, <a href="#43992" title="Int">iteration</a><span class="delimiter">)</span>

      <a href="#43051" title="edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.perf.intkey.LoadClient,edu.berkeley.cs.scads.perf.intkey.LoadPerfResult]">loadResults</a> <span title="(that: TraversableOnce[(edu.berkeley.cs.scads.perf.intkey.LoadClient, edu.berkeley.cs.scads.perf.intkey.LoadPerfResult)])Unit">++=</span> <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</span> <span title="(itr: Iterable[Int])deploylib.ParallelSeq[Int]">to</span> <a href="#44648" title="=&gt; Int">loadThreads</a><span class="delimiter">)</span>.<span title="(f: Int =&gt; (edu.berkeley.cs.scads.perf.intkey.LoadClient, edu.berkeley.cs.scads.perf.intkey.LoadPerfResult))List[(edu.berkeley.cs.scads.perf.intkey.LoadClient, edu.berkeley.cs.scads.perf.intkey.LoadPerfResult)]">pmap</span><span class="delimiter">(</span><a title="Int" id="44108">threadId</a> =&gt; <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="44109">getTimes</a> = <a href="Histogram.scala.html#33378" title="(bucketSize: Int, bucketCount: Int)edu.berkeley.cs.scads.perf.Histogram">Histogram</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>, <span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.perf.Histogram" id="44110">putTimes</a> = <a href="Histogram.scala.html#33378" title="(bucketSize: Int, bucketCount: Int)edu.berkeley.cs.scads.perf.Histogram">Histogram</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>, <span title="Int(1000)" class="int">1000</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Long" id="44111">startTime</a> = <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">(</span><span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</span> <span title="(end: Int)scala.collection.immutable.Range.Inclusive">to</span> <a href="#44647" title="=&gt; Int">loadCount</a><span class="delimiter">)</span>.<span title="(f: Int =&gt; Any)Unit">foreach</span><span class="delimiter">(</span><a title="Int" id="44240">i</a> =&gt;
          <span class="keyword">try</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="Long" id="44241">startTime</a> = <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span>
            <span class="keyword">val</span> <a title="Int" id="44242">randRec</a> = scala.util.<span title="object scala.util.Random">Random</span>.<span title="(n: Int)Int">nextInt</span><span class="delimiter">(</span><a href="#43048" title="Int">maxInt</a><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="Boolean" id="44243">isRead</a> = scala.util.<span title="object scala.util.Random">Random</span>.<span title="()Double">nextDouble</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Double)Boolean">&lt;</span> <a href="#44649" title="=&gt; Double">readPercentage</a>

            <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#44243" title="Boolean">isRead</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#43050" title="edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.comm.IntRec,edu.berkeley.cs.scads.comm.IntRec]">ns</a>.<span title="(key: edu.berkeley.cs.scads.comm.IntRec)Option[edu.berkeley.cs.scads.comm.IntRec]">get</span><span class="delimiter">(</span><span title="(f1: Int)edu.berkeley.cs.scads.comm.IntRec">IntRec</span><span class="delimiter">(</span><a href="#44242" title="Int">randRec</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; edu.berkeley.cs.scads.comm.IntRec">get</span>.<span title="=&gt; Int">f1</span> <span title="(x: Int)Boolean">==</span> <a href="#44242" title="Int">randRec</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                <span class="keyword">val</span> <a title="Long" id="44400">endTime</a> = <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span>
                <a href="#44109" title="edu.berkeley.cs.scads.perf.Histogram">getTimes</a>.<a href="Histogram.scala.html#33408" title="(value: Long)edu.berkeley.cs.scads.perf.Histogram">add</a><span class="delimiter">(</span><a href="#44400" title="Long">endTime</a> <span title="(x: Long)Long">-</span> <a href="#44241" title="Long">startTime</a><span class="delimiter">)</span>
              <span class="delimiter">}</span> <span class="keyword">else</span>
                <a href="#44656" title="=&gt; net.lag.logging.Logger">logger</a>.<span title="(msg: String, items: Any*)Unit">warning</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Failed Read&quot;)" class="string">&quot;Failed Read&quot;</span><span class="delimiter">)</span>
            <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
              <a href="#43050" title="edu.berkeley.cs.scads.storage.SpecificNamespace[edu.berkeley.cs.scads.comm.IntRec,edu.berkeley.cs.scads.comm.IntRec]">ns</a>.<span title="(key: edu.berkeley.cs.scads.comm.IntRec, value: Option[edu.berkeley.cs.scads.comm.IntRec])Unit">put</span><span class="delimiter">(</span><span title="(f1: Int)edu.berkeley.cs.scads.comm.IntRec">IntRec</span><span class="delimiter">(</span><a href="#44242" title="Int">randRec</a><span class="delimiter">)</span>, <span title="(f1: Int)edu.berkeley.cs.scads.comm.IntRec">IntRec</span><span title="(a: edu.berkeley.cs.scads.comm.IntRec)Option[edu.berkeley.cs.scads.comm.IntRec]" class="delimiter">(</span><a href="#44242" title="Int">randRec</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">val</span> <a title="Long" id="44415">endTime</a> = <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span>
              <a href="#44110" title="edu.berkeley.cs.scads.perf.Histogram">putTimes</a>.<a href="Histogram.scala.html#33408" title="(value: Long)edu.berkeley.cs.scads.perf.Histogram">add</a><span class="delimiter">(</span><a href="#44415" title="Long">endTime</a> <span title="(x: Long)Long">-</span> <a href="#44241" title="Long">startTime</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="Unit" id="44433">e</a> =&gt; <a href="#44656" title="=&gt; net.lag.logging.Logger">logger</a>.<span title="(msg: String, items: Any*)Unit">debug</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Exception during operation %s&quot;)" class="string">&quot;Exception during operation %s&quot;</span>, <a href="#44433" title="java.lang.Throwable">e</a><span class="delimiter">)</span> <span class="delimiter">}</span><span class="delimiter">)</span>
        <span title="(_1: edu.berkeley.cs.scads.perf.intkey.LoadClient, _2: edu.berkeley.cs.scads.perf.intkey.LoadPerfResult)(edu.berkeley.cs.scads.perf.intkey.LoadClient, edu.berkeley.cs.scads.perf.intkey.LoadPerfResult)" class="delimiter">(</span><a href="#44680" title="(cluster: String, clientId: Int, threadId: Int, iteration: Int)edu.berkeley.cs.scads.perf.intkey.LoadClient">LoadClient</a><span class="delimiter">(</span><a href="#43044" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">clusterRoot</a>.<span title="=&gt; java.lang.String">canonicalAddress</span>, <a href="#43052" title="Int">clientId</a>, <a href="#44108" title="Int">threadId</a>, <a href="#43992" title="Int">iteration</a><span class="delimiter">)</span>, <a href="#44676" title="(startTime: Long, endTime: Long, getTimes: edu.berkeley.cs.scads.perf.Histogram, putTimes: edu.berkeley.cs.scads.perf.Histogram)edu.berkeley.cs.scads.perf.intkey.LoadPerfResult">LoadPerfResult</a><span class="delimiter">(</span><a href="#44111" title="Long">startTime</a>, <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span>, <a href="#44109" title="edu.berkeley.cs.scads.perf.Histogram">getTimes</a>, <a href="#44110" title="edu.berkeley.cs.scads.perf.Histogram">putTimes</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>

      <a href="#43046" title="edu.berkeley.cs.scads.comm.ZooKeeperProxy#ZooKeeperNode">coordination</a>.<span title="(barrierName: String, count: Int, timeout: Long, unit: java.util.concurrent.TimeUnit)Int">registerAndAwait</span><span class="delimiter">(</span><span title="java.lang.String(&quot;endRead&quot;)" class="string">&quot;endRead&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#43992" title="Int">iteration</a>, <a href="#44634" title="=&gt; Int">numClients</a><span class="delimiter">)</span>

    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>