<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>ScadrClient.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> edu.berkeley.cs
<span class="keyword">package</span> scads
<span class="keyword">package</span> piql
<span class="keyword">package</span> scadr

<span class="keyword">import</span> storage.ScadsCluster
<span class="keyword">import</span> avro.marker._

<span class="keyword">import</span> org.apache.avro.util._

case <span class="keyword">class</span> <a title="class User extends org.apache.avro.specific.SpecificRecordBase with edu.berkeley.cs.avro.runtime.HasAvroConversions with edu.berkeley.cs.avro.marker.AvroPair with ScalaObject with Product with Serializable" id="27277">User</a><a href="#27277" title="ScalaObject" class="delimiter">(</a><a href="#27277" title="()edu.berkeley.cs.scads.piql.scadr.User" id="41287" class="keyword">var</a> <a title="String" id="27274">username</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="edu.berkeley.cs.avro.marker.AvroPair">AvroPair</span> <span class="delimiter">{</span>
  <span class="keyword">var</span> <a title="String" id="12324">homeTown</a>: <span title="String">String</span> = _
  <span class="keyword">var</span> <a title="String" id="12327">password</a>: <span title="String">String</span> = _
<span class="delimiter">}</span>

case <span class="keyword">class</span> <a title="class Thought extends org.apache.avro.specific.SpecificRecordBase with edu.berkeley.cs.avro.runtime.HasAvroConversions with edu.berkeley.cs.avro.marker.AvroPair with ScalaObject with Product with Serializable" id="27270">Thought</a><a href="#27270" title="ScalaObject" class="delimiter">(</a><a href="#27270" title="()edu.berkeley.cs.scads.piql.scadr.Thought" id="41297" class="keyword">var</a> <a title="String" id="27265">owner</a>: <span title="String">String</span>, <span class="keyword">var</span> <a title="Int" id="27266">timestamp</a>: <span title="Int">Int</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="edu.berkeley.cs.avro.marker.AvroPair">AvroPair</span> <span class="delimiter">{</span>
  <span class="keyword">var</span> <a title="String" id="15559">text</a>: <span title="String">String</span> = _
<span class="delimiter">}</span>

case <span class="keyword">class</span> <a title="class Subscription extends org.apache.avro.specific.SpecificRecordBase with edu.berkeley.cs.avro.runtime.HasAvroConversions with edu.berkeley.cs.avro.marker.AvroPair with ScalaObject with Product with Serializable" id="27261">Subscription</a><a href="#27261" title="ScalaObject" class="delimiter">(</a><a href="#27261" title="()edu.berkeley.cs.scads.piql.scadr.Subscription" id="41307" class="keyword">var</a> <a title="String" id="27256">owner</a>: <span title="String">String</span>, <span class="keyword">var</span> <a title="String" id="27257">target</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="edu.berkeley.cs.avro.marker.AvroPair">AvroPair</span> <span class="delimiter">{</span>
  <span class="keyword">var</span> <a title="Boolean" id="17004">approved</a>: <span title="Boolean">Boolean</span> = _
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class ScadrClient extends java.lang.Object with ScalaObject" id="10086">ScadrClient</a><a href="#10086" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.ScadsCluster" id="27235">cluster</a>: <span title="edu.berkeley.cs.scads.storage.ScadsCluster">ScadsCluster</span>, <a title="edu.berkeley.cs.scads.piql.QueryExecutor" id="27238">executor</a>: <span title="edu.berkeley.cs.scads.piql.QueryExecutor">QueryExecutor</span> = <span title="edu.berkeley.cs.scads.piql.ParallelExecutor" class="keyword">new</span> <span title="edu.berkeley.cs.scads.piql.ParallelExecutor">ParallelExecutor</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">val</span> <a title="Int" id="17109">maxSubscriptions</a> = <span title="Int(10000)" class="int">10000</span>
  <span class="keyword">val</span> <a title="Int" id="17111">maxResultsPerPage</a> = <span title="Int(10000)" class="int">10000</span>
  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.QueryExecutor" id="17113">exec</a> = <a href="#27238" title="edu.berkeley.cs.scads.piql.QueryExecutor">executor</a>

  <span class="comment">// namespaces are declared to be lazy so as to allow for manual</span>
  <span class="comment">// createNamespace calls to happen first (and after instantiating this</span>
  <span class="comment">// class)</span>

  <span class="comment">//HACK: typecast to namespace</span>
  <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.scadr.User]" id="17115">users</a> = <a href="#27235" title="=&gt; edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>.<span title="[PairType &lt;: edu.berkeley.cs.avro.marker.AvroPair](ns: String)(implicit evidence$7: Manifest[PairType])edu.berkeley.cs.scads.storage.PairNamespace[PairType]">getNamespace</span><span title="(ns: String)(implicit evidence$7: Manifest[edu.berkeley.cs.scads.piql.scadr.User])edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.scadr.User]" class="delimiter">[</span><a href="#27277" title="edu.berkeley.cs.scads.piql.scadr.User">User</a><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[edu.berkeley.cs.scads.piql.scadr.User]" class="delimiter">(</span><span title="java.lang.String(&quot;users&quot;)" class="string">&quot;users&quot;</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.scadr.Thought]" id="17117">thoughts</a> = <a href="#27235" title="=&gt; edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>.<span title="[PairType &lt;: edu.berkeley.cs.avro.marker.AvroPair](ns: String)(implicit evidence$7: Manifest[PairType])edu.berkeley.cs.scads.storage.PairNamespace[PairType]">getNamespace</span><span title="(ns: String)(implicit evidence$7: Manifest[edu.berkeley.cs.scads.piql.scadr.Thought])edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.scadr.Thought]" class="delimiter">[</span><a href="#27270" title="edu.berkeley.cs.scads.piql.scadr.Thought">Thought</a><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[edu.berkeley.cs.scads.piql.scadr.Thought]" class="delimiter">(</span><span title="java.lang.String(&quot;thoughts&quot;)" class="string">&quot;thoughts&quot;</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.scadr.Subscription]" id="17119">subscriptions</a> = <a href="#27235" title="=&gt; edu.berkeley.cs.scads.storage.ScadsCluster">cluster</a>.<span title="[PairType &lt;: edu.berkeley.cs.avro.marker.AvroPair](ns: String)(implicit evidence$7: Manifest[PairType])edu.berkeley.cs.scads.storage.PairNamespace[PairType]">getNamespace</span><span title="(ns: String)(implicit evidence$7: Manifest[edu.berkeley.cs.scads.piql.scadr.Subscription])edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.scadr.Subscription]" class="delimiter">[</span><a href="#27261" title="edu.berkeley.cs.scads.piql.scadr.Subscription">Subscription</a><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[edu.berkeley.cs.scads.piql.scadr.Subscription]" class="delimiter">(</span><span title="java.lang.String(&quot;subscriptions&quot;)" class="string">&quot;subscriptions&quot;</span><span class="delimiter">)</span>

  <span class="keyword">val</span> <a title="List[edu.berkeley.cs.scads.storage.PairNamespace[_ &gt;: edu.berkeley.cs.scads.piql.scadr.Subscription with edu.berkeley.cs.scads.piql.scadr.Thought with edu.berkeley.cs.scads.piql.scadr.User &lt;: edu.berkeley.cs.avro.marker.AvroPair with Product with Serializable]]" id="17121">namespaces</a> = <span title="(xs: edu.berkeley.cs.scads.storage.PairNamespace[_ &gt;: edu.berkeley.cs.scads.piql.scadr.Subscription with edu.berkeley.cs.scads.piql.scadr.Thought with edu.berkeley.cs.scads.piql.scadr.User &lt;: edu.berkeley.cs.avro.marker.AvroPair with Product with Serializable]*)List[edu.berkeley.cs.scads.storage.PairNamespace[_ &gt;: edu.berkeley.cs.scads.piql.scadr.Subscription with edu.berkeley.cs.scads.piql.scadr.Thought with edu.berkeley.cs.scads.piql.scadr.User &lt;: edu.berkeley.cs.avro.marker.AvroPair with Product with Serializable]]">List</span><span class="delimiter">(</span><a href="#17115" title="=&gt; edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.scadr.User]">users</a>, <a href="#17117" title="=&gt; edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.scadr.Thought]">thoughts</a>, <a href="#17119" title="=&gt; edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.scadr.Subscription]">subscriptions</a><span class="delimiter">)</span>
  <span class="comment">//val allNamespaces = namespaces.flatMap(ns =&gt; ns :: ns.listIndexes.map(_._2).toList)</span>

  <span class="comment">/* Optimized queries */</span>
  <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.OptimizedQuery" id="17123">findUser</a> = <a href="#17115" title="(ns: edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.scadr.User])edu.berkeley.cs.scads.piql.Relation">users</a>.<span title="(predicate: edu.berkeley.cs.scads.piql.Predicate)edu.berkeley.cs.scads.piql.Selection">where</span><a href="#17113" title="implicit edu.berkeley.cs.scads.piql.package.toPiql : (logicalPlan: edu.berkeley.cs.scads.piql.Queryable)(implicit executor: edu.berkeley.cs.scads.piql.QueryExecutor)java.lang.Object{def toPiql(queryName: Option[String]): edu.berkeley.cs.scads.piql.OptimizedQuery; def toPiql$default$1: Option[String]}" class="delimiter">(</a><span title="implicit edu.berkeley.cs.scads.piql.package.toAttr : (s: String)java.lang.Object{def a: edu.berkeley.cs.scads.piql.UnboundAttributeValue}" class="string">&quot;username&quot;</span>.<span title="=&gt; edu.berkeley.cs.scads.piql.UnboundAttributeValue">a</span> <span title="(value: edu.berkeley.cs.scads.piql.Value)edu.berkeley.cs.scads.piql.EqualityPredicate">===</span> <span class="delimiter">(</span><span title="implicit edu.berkeley.cs.scads.piql.package.toParameter : (o: Double)java.lang.Object{def ?: edu.berkeley.cs.scads.piql.ParameterValue}" class="double">0.</span><span title="=&gt; edu.berkeley.cs.scads.piql.ParameterValue">?</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(queryName: Option[String])edu.berkeley.cs.scads.piql.OptimizedQuery">toPiql</span><span class="delimiter">(</span><span title="(a: java.lang.String)Option[java.lang.String]" class="string">&quot;findUser&quot;</span><span class="delimiter">)</span>

  <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.OptimizedQuery" id="17125">myThoughts</a> = <span class="delimiter">(</span>
    <a href="#17117" title="(ns: edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.scadr.Thought])edu.berkeley.cs.scads.piql.Relation">thoughts</a>.<span title="(predicate: edu.berkeley.cs.scads.piql.Predicate)edu.berkeley.cs.scads.piql.Selection">where</span><span class="delimiter">(</span><span title="implicit edu.berkeley.cs.scads.piql.package.toAttr : (s: String)java.lang.Object{def a: edu.berkeley.cs.scads.piql.UnboundAttributeValue}" class="string">&quot;thoughts.owner&quot;</span>.<span title="=&gt; edu.berkeley.cs.scads.piql.UnboundAttributeValue">a</span> <span title="(value: edu.berkeley.cs.scads.piql.Value)edu.berkeley.cs.scads.piql.EqualityPredicate">===</span> <span class="delimiter">(</span><span title="implicit edu.berkeley.cs.scads.piql.package.toParameter : (o: Double)java.lang.Object{def ?: edu.berkeley.cs.scads.piql.ParameterValue}" class="double">0.</span><span title="=&gt; edu.berkeley.cs.scads.piql.ParameterValue">?</span><span class="delimiter">)</span><span class="delimiter">)</span>
	    .<span title="(attributes: Seq[edu.berkeley.cs.scads.piql.Value], ascending: Boolean)edu.berkeley.cs.scads.piql.Sort">sort</span><span class="delimiter">(</span><span title="implicit edu.berkeley.cs.scads.piql.package.toAttr : (s: String)java.lang.Object{def a: edu.berkeley.cs.scads.piql.UnboundAttributeValue}" class="string">&quot;thoughts.timestamp&quot;</span>.<span title="=&gt; edu.berkeley.cs.scads.piql.UnboundAttributeValue">a</span> <a href="#26803" title="(x: edu.berkeley.cs.scads.piql.UnboundAttributeValue)List[edu.berkeley.cs.scads.piql.UnboundAttributeValue]">::</a> <span title="object Nil">Nil</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
	    .<span title="(parameter: edu.berkeley.cs.scads.piql.ParameterValue, max: Int)edu.berkeley.cs.scads.piql.StopAfter">limit</span><a href="#17113" title="implicit edu.berkeley.cs.scads.piql.package.toPiql : (logicalPlan: edu.berkeley.cs.scads.piql.Queryable)(implicit executor: edu.berkeley.cs.scads.piql.QueryExecutor)java.lang.Object{def toPiql(queryName: Option[String]): edu.berkeley.cs.scads.piql.OptimizedQuery; def toPiql$default$1: Option[String]}" class="delimiter">(</a><span title="implicit edu.berkeley.cs.scads.piql.package.toParameter : (o: Double)java.lang.Object{def ?: edu.berkeley.cs.scads.piql.ParameterValue}" class="double">1.</span><span title="=&gt; edu.berkeley.cs.scads.piql.ParameterValue">?</span>, <a href="#17111" title="=&gt; Int">maxResultsPerPage</a><span class="delimiter">)</span>
  <span class="delimiter">)</span>.<span title="(queryName: Option[String])edu.berkeley.cs.scads.piql.OptimizedQuery">toPiql</span><span class="delimiter">(</span><span title="(a: java.lang.String)Option[java.lang.String]" class="string">&quot;myThoughts&quot;</span><span class="delimiter">)</span>

  <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.OptimizedQuery" id="17127">usersFollowedBy</a> = <span class="delimiter">(</span>
    <a href="#17119" title="(ns: edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.scadr.Subscription])edu.berkeley.cs.scads.piql.Relation">subscriptions</a>.<span title="(predicate: edu.berkeley.cs.scads.piql.Predicate)edu.berkeley.cs.scads.piql.Selection">where</span><span class="delimiter">(</span><span title="implicit edu.berkeley.cs.scads.piql.package.toAttr : (s: String)java.lang.Object{def a: edu.berkeley.cs.scads.piql.UnboundAttributeValue}" class="string">&quot;subscriptions.owner&quot;</span>.<span title="=&gt; edu.berkeley.cs.scads.piql.UnboundAttributeValue">a</span> <span title="(value: edu.berkeley.cs.scads.piql.Value)edu.berkeley.cs.scads.piql.EqualityPredicate">===</span> <span class="delimiter">(</span><span title="implicit edu.berkeley.cs.scads.piql.package.toParameter : (o: Double)java.lang.Object{def ?: edu.berkeley.cs.scads.piql.ParameterValue}" class="double">0.</span><span title="=&gt; edu.berkeley.cs.scads.piql.ParameterValue">?</span><span class="delimiter">)</span><span class="delimiter">)</span>
	 .<span title="(parameter: edu.berkeley.cs.scads.piql.ParameterValue, max: Int)edu.berkeley.cs.scads.piql.StopAfter">limit</span><span class="delimiter">(</span><span title="implicit edu.berkeley.cs.scads.piql.package.toParameter : (o: Double)java.lang.Object{def ?: edu.berkeley.cs.scads.piql.ParameterValue}" class="double">1.</span><span title="=&gt; edu.berkeley.cs.scads.piql.ParameterValue">?</span>, <a href="#17111" title="=&gt; Int">maxResultsPerPage</a><span class="delimiter">)</span>
	 .<span title="(inner: edu.berkeley.cs.scads.piql.Queryable)edu.berkeley.cs.scads.piql.Join">join</span><span class="delimiter">(</span><a href="#17115" title="(ns: edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.scadr.User])edu.berkeley.cs.scads.piql.Relation">users</a><span class="delimiter">)</span>
	 .<span title="(predicate: edu.berkeley.cs.scads.piql.Predicate)edu.berkeley.cs.scads.piql.Selection">where</span><a href="#17113" title="implicit edu.berkeley.cs.scads.piql.package.toPiql : (logicalPlan: edu.berkeley.cs.scads.piql.Queryable)(implicit executor: edu.berkeley.cs.scads.piql.QueryExecutor)java.lang.Object{def toPiql(queryName: Option[String]): edu.berkeley.cs.scads.piql.OptimizedQuery; def toPiql$default$1: Option[String]}" class="delimiter">(</a><span title="implicit edu.berkeley.cs.scads.piql.package.toAttr : (s: String)java.lang.Object{def a: edu.berkeley.cs.scads.piql.UnboundAttributeValue}" class="string">&quot;subscriptions.target&quot;</span>.<span title="=&gt; edu.berkeley.cs.scads.piql.UnboundAttributeValue">a</span> <span title="(value: edu.berkeley.cs.scads.piql.Value)edu.berkeley.cs.scads.piql.EqualityPredicate">===</span> <span title="implicit edu.berkeley.cs.scads.piql.package.toAttr : (s: String)java.lang.Object{def a: edu.berkeley.cs.scads.piql.UnboundAttributeValue}" class="string">&quot;users.username&quot;</span>.<span title="=&gt; edu.berkeley.cs.scads.piql.UnboundAttributeValue">a</span><span class="delimiter">)</span>
  <span class="delimiter">)</span>.<span title="(queryName: Option[String])edu.berkeley.cs.scads.piql.OptimizedQuery">toPiql</span><span class="delimiter">(</span><span title="(a: java.lang.String)Option[java.lang.String]" class="string">&quot;usersFollowedBy&quot;</span><span class="delimiter">)</span>


  <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.OptimizedQuery" id="17129">thoughtstream</a> = <span class="delimiter">(</span>
    <a href="#17119" title="(ns: edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.scadr.Subscription])edu.berkeley.cs.scads.piql.Relation">subscriptions</a>.<span title="(predicate: edu.berkeley.cs.scads.piql.Predicate)edu.berkeley.cs.scads.piql.Selection">where</span><span class="delimiter">(</span><span title="implicit edu.berkeley.cs.scads.piql.package.toAttr : (s: String)java.lang.Object{def a: edu.berkeley.cs.scads.piql.UnboundAttributeValue}" class="string">&quot;subscriptions.owner&quot;</span>.<span title="=&gt; edu.berkeley.cs.scads.piql.UnboundAttributeValue">a</span> <span title="(value: edu.berkeley.cs.scads.piql.Value)edu.berkeley.cs.scads.piql.EqualityPredicate">===</span> <span class="delimiter">(</span><span title="implicit edu.berkeley.cs.scads.piql.package.toParameter : (o: Double)java.lang.Object{def ?: edu.berkeley.cs.scads.piql.ParameterValue}" class="double">0.</span><span title="=&gt; edu.berkeley.cs.scads.piql.ParameterValue">?</span><span class="delimiter">)</span><span class="delimiter">)</span>
		 .<span title="(count: Int)edu.berkeley.cs.scads.piql.DataStopAfter">dataLimit</span><span class="delimiter">(</span><a href="#17109" title="=&gt; Int">maxSubscriptions</a><span class="delimiter">)</span>
		 .<span title="(inner: edu.berkeley.cs.scads.piql.Queryable)edu.berkeley.cs.scads.piql.Join">join</span><span class="delimiter">(</span><a href="#17117" title="(ns: edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.scadr.Thought])edu.berkeley.cs.scads.piql.Relation">thoughts</a><span class="delimiter">)</span>
		 .<span title="(predicate: edu.berkeley.cs.scads.piql.Predicate)edu.berkeley.cs.scads.piql.Selection">where</span><span class="delimiter">(</span><span title="implicit edu.berkeley.cs.scads.piql.package.toAttr : (s: String)java.lang.Object{def a: edu.berkeley.cs.scads.piql.UnboundAttributeValue}" class="string">&quot;thoughts.owner&quot;</span>.<span title="=&gt; edu.berkeley.cs.scads.piql.UnboundAttributeValue">a</span> <span title="(value: edu.berkeley.cs.scads.piql.Value)edu.berkeley.cs.scads.piql.EqualityPredicate">===</span> <span title="implicit edu.berkeley.cs.scads.piql.package.toAttr : (s: String)java.lang.Object{def a: edu.berkeley.cs.scads.piql.UnboundAttributeValue}" class="string">&quot;subscriptions.target&quot;</span>.<span title="=&gt; edu.berkeley.cs.scads.piql.UnboundAttributeValue">a</span><span class="delimiter">)</span>
		 .<span title="(attributes: Seq[edu.berkeley.cs.scads.piql.Value], ascending: Boolean)edu.berkeley.cs.scads.piql.Sort">sort</span><span class="delimiter">(</span><span title="implicit edu.berkeley.cs.scads.piql.package.toAttr : (s: String)java.lang.Object{def a: edu.berkeley.cs.scads.piql.UnboundAttributeValue}" class="string">&quot;thoughts.timestamp&quot;</span>.<span title="=&gt; edu.berkeley.cs.scads.piql.UnboundAttributeValue">a</span> <a href="#27186" title="(x: edu.berkeley.cs.scads.piql.UnboundAttributeValue)List[edu.berkeley.cs.scads.piql.UnboundAttributeValue]">::</a> <span title="object Nil">Nil</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
		 .<span title="(parameter: edu.berkeley.cs.scads.piql.ParameterValue, max: Int)edu.berkeley.cs.scads.piql.StopAfter">limit</span><a href="#17113" title="implicit edu.berkeley.cs.scads.piql.package.toPiql : (logicalPlan: edu.berkeley.cs.scads.piql.Queryable)(implicit executor: edu.berkeley.cs.scads.piql.QueryExecutor)java.lang.Object{def toPiql(queryName: Option[String]): edu.berkeley.cs.scads.piql.OptimizedQuery; def toPiql$default$1: Option[String]}" class="delimiter">(</a><span title="implicit edu.berkeley.cs.scads.piql.package.toParameter : (o: Double)java.lang.Object{def ?: edu.berkeley.cs.scads.piql.ParameterValue}" class="double">1.</span><span title="=&gt; edu.berkeley.cs.scads.piql.ParameterValue">?</span>, <a href="#17111" title="=&gt; Int">maxResultsPerPage</a><span class="delimiter">)</span>
  <span class="delimiter">)</span>.<span title="(queryName: Option[String])edu.berkeley.cs.scads.piql.OptimizedQuery">toPiql</span><span class="delimiter">(</span><span title="(a: java.lang.String)Option[java.lang.String]" class="string">&quot;thoughtstream&quot;</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Who is following ME?
   */</span>
  <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.OptimizedQuery" id="17131">usersFollowing</a> = <span class="delimiter">(</span>
    <a href="#17119" title="(ns: edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.scadr.Subscription])edu.berkeley.cs.scads.piql.Relation">subscriptions</a>.<span title="(predicate: edu.berkeley.cs.scads.piql.Predicate)edu.berkeley.cs.scads.piql.Selection">where</span><span class="delimiter">(</span><span title="implicit edu.berkeley.cs.scads.piql.package.toAttr : (s: String)java.lang.Object{def a: edu.berkeley.cs.scads.piql.UnboundAttributeValue}" class="string">&quot;subscriptions.target&quot;</span>.<span title="=&gt; edu.berkeley.cs.scads.piql.UnboundAttributeValue">a</span> <span title="(value: edu.berkeley.cs.scads.piql.Value)edu.berkeley.cs.scads.piql.EqualityPredicate">===</span> <span class="delimiter">(</span><span title="implicit edu.berkeley.cs.scads.piql.package.toParameter : (o: Double)java.lang.Object{def ?: edu.berkeley.cs.scads.piql.ParameterValue}" class="double">0.</span><span title="=&gt; edu.berkeley.cs.scads.piql.ParameterValue">?</span><span class="delimiter">)</span><span class="delimiter">)</span>
		 .<span title="(parameter: edu.berkeley.cs.scads.piql.ParameterValue, max: Int)edu.berkeley.cs.scads.piql.StopAfter">limit</span><span class="delimiter">(</span><span title="implicit edu.berkeley.cs.scads.piql.package.toParameter : (o: Double)java.lang.Object{def ?: edu.berkeley.cs.scads.piql.ParameterValue}" class="double">1.</span><span title="=&gt; edu.berkeley.cs.scads.piql.ParameterValue">?</span>, <a href="#17111" title="=&gt; Int">maxResultsPerPage</a><span class="delimiter">)</span>
		 .<span title="(inner: edu.berkeley.cs.scads.piql.Queryable)edu.berkeley.cs.scads.piql.Join">join</span><span class="delimiter">(</span><a href="#17115" title="(ns: edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.scadr.User])edu.berkeley.cs.scads.piql.Relation">users</a><span class="delimiter">)</span>
		 .<span title="(predicate: edu.berkeley.cs.scads.piql.Predicate)edu.berkeley.cs.scads.piql.Selection">where</span><a href="#17113" title="implicit edu.berkeley.cs.scads.piql.package.toPiql : (logicalPlan: edu.berkeley.cs.scads.piql.Queryable)(implicit executor: edu.berkeley.cs.scads.piql.QueryExecutor)java.lang.Object{def toPiql(queryName: Option[String]): edu.berkeley.cs.scads.piql.OptimizedQuery; def toPiql$default$1: Option[String]}" class="delimiter">(</a><span title="implicit edu.berkeley.cs.scads.piql.package.toAttr : (s: String)java.lang.Object{def a: edu.berkeley.cs.scads.piql.UnboundAttributeValue}" class="string">&quot;users.username&quot;</span>.<span title="=&gt; edu.berkeley.cs.scads.piql.UnboundAttributeValue">a</span> <span title="(value: edu.berkeley.cs.scads.piql.Value)edu.berkeley.cs.scads.piql.EqualityPredicate">===</span> <span title="implicit edu.berkeley.cs.scads.piql.package.toAttr : (s: String)java.lang.Object{def a: edu.berkeley.cs.scads.piql.UnboundAttributeValue}" class="string">&quot;subscriptions.owner&quot;</span>.<span title="=&gt; edu.berkeley.cs.scads.piql.UnboundAttributeValue">a</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>.<span title="(queryName: Option[String])edu.berkeley.cs.scads.piql.OptimizedQuery">toPiql</span><span class="delimiter">(</span><span title="(a: java.lang.String)Option[java.lang.String]" class="string">&quot;usersFollowing&quot;</span><span class="delimiter">)</span>
  
  <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.piql.OptimizedQuery" id="17133">findSubscription</a> = <span class="delimiter">(</span>
    <a href="#17119" title="(ns: edu.berkeley.cs.scads.storage.PairNamespace[edu.berkeley.cs.scads.piql.scadr.Subscription])edu.berkeley.cs.scads.piql.Relation">subscriptions</a>.<span title="(predicate: edu.berkeley.cs.scads.piql.Predicate)edu.berkeley.cs.scads.piql.Selection">where</span><span class="delimiter">(</span><span title="implicit edu.berkeley.cs.scads.piql.package.toAttr : (s: String)java.lang.Object{def a: edu.berkeley.cs.scads.piql.UnboundAttributeValue}" class="string">&quot;subscriptions.owner&quot;</span>.<span title="=&gt; edu.berkeley.cs.scads.piql.UnboundAttributeValue">a</span> <span title="(value: edu.berkeley.cs.scads.piql.Value)edu.berkeley.cs.scads.piql.EqualityPredicate">===</span> <span class="delimiter">(</span><span title="implicit edu.berkeley.cs.scads.piql.package.toParameter : (o: Double)java.lang.Object{def ?: edu.berkeley.cs.scads.piql.ParameterValue}" class="double">0.</span><span title="=&gt; edu.berkeley.cs.scads.piql.ParameterValue">?</span><span class="delimiter">)</span><span class="delimiter">)</span>
		 .<span title="(predicate: edu.berkeley.cs.scads.piql.Predicate)edu.berkeley.cs.scads.piql.Selection">where</span><a href="#17113" title="implicit edu.berkeley.cs.scads.piql.package.toPiql : (logicalPlan: edu.berkeley.cs.scads.piql.Queryable)(implicit executor: edu.berkeley.cs.scads.piql.QueryExecutor)java.lang.Object{def toPiql(queryName: Option[String]): edu.berkeley.cs.scads.piql.OptimizedQuery; def toPiql$default$1: Option[String]}" class="delimiter">(</a><span title="implicit edu.berkeley.cs.scads.piql.package.toAttr : (s: String)java.lang.Object{def a: edu.berkeley.cs.scads.piql.UnboundAttributeValue}" class="string">&quot;subscriptions.target&quot;</span>.<span title="=&gt; edu.berkeley.cs.scads.piql.UnboundAttributeValue">a</span> <span title="(value: edu.berkeley.cs.scads.piql.Value)edu.berkeley.cs.scads.piql.EqualityPredicate">===</span> <span class="delimiter">(</span><span title="implicit edu.berkeley.cs.scads.piql.package.toParameter : (o: Double)java.lang.Object{def ?: edu.berkeley.cs.scads.piql.ParameterValue}" class="double">1.</span><span title="=&gt; edu.berkeley.cs.scads.piql.ParameterValue">?</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>.<span title="(queryName: Option[String])edu.berkeley.cs.scads.piql.OptimizedQuery">toPiql</span><span class="delimiter">(</span><span title="(a: java.lang.String)Option[java.lang.String]" class="string">&quot;findSubscription&quot;</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>