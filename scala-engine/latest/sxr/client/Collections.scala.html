<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>client/Collections.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> edu.berkeley.cs.scads.storage

<span class="keyword">import</span> org.apache.avro.generic._
<span class="keyword">import</span> collection.mutable._

<span class="comment">/**
 * Provides a set of implicit conversions on namespaces to be used
 * as scala collections
 */</span>
<span class="keyword">object</span> <a title="object edu.berkeley.cs.scads.storage.Collections" id="9525">Collections</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="comment">//implicit def nsToIterable[K &lt;: IndexedRecord, V &lt;: IndexedRecord](ns: RangeKeyValueStore[K, V]) = new Iterable[(K, V)] {</span>
  <span class="comment">//  override def iterator = ns.iterator</span>
  <span class="comment">//}</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[K &lt;: org.apache.avro.generic.IndexedRecord, V &lt;: org.apache.avro.generic.IndexedRecord](ns: edu.berkeley.cs.scads.storage.RangeKeyValueStore[K,V])java.lang.Object with scala.collection.mutable.Map[K,V]" id="33487">nsToMap</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="33490">K</a> &lt;: IndexedRecord, <a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="33491">V</a> &lt;: IndexedRecord<span class="delimiter">]</span><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.storage.RangeKeyValueStore[K,V]" id="33493">ns</a>: <a href="Stores.scala.html#9720" title="edu.berkeley.cs.scads.storage.RangeKeyValueStore[K,V]">RangeKeyValueStore</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#33496" title="java.lang.Object with scala.collection.mutable.Map[K,V]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scala.collection.mutable.Map[K,V]" id="33496">Map</a><span class="delimiter">[</span>K, V<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(k: K)Option[V]" id="33498">get</a><span class="delimiter">(</span><a title="K" id="33505">k</a>: <a href="#33490" title="K">K</a><span class="delimiter">)</span> = <a href="#33493" title="edu.berkeley.cs.scads.storage.RangeKeyValueStore[K,V]">ns</a>.<a href="Stores.scala.html#33563" title="(key: K)Option[V]">get</a><span class="delimiter">(</span><a href="#33505" title="K">k</a><span class="delimiter">)</span>
    <span class="comment">/** WARNING: ns.put(k, null) is a delete */</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(k: K, v: V)Option[V]" id="33499">put</a><span class="delimiter">(</span><a title="K" id="33578">k</a>: <a href="#33490" title="K">K</a>, <a title="V" id="33579">v</a>: <a href="#33491" title="V">V</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Option[V]" id="33584">old</a> = <a href="#33493" title="edu.berkeley.cs.scads.storage.RangeKeyValueStore[K,V]">ns</a>.<a href="Stores.scala.html#33563" title="(key: K)Option[V]">get</a><span class="delimiter">(</span><a href="#33578" title="K">k</a><span class="delimiter">)</span>
      <a href="#33493" title="edu.berkeley.cs.scads.storage.RangeKeyValueStore[K,V]">ns</a>.<a href="Stores.scala.html#33564" title="(key: K, value: Option[V])Unit">put</a><span class="delimiter">(</span><a href="#33578" title="K">k</a>, <span title="(x: V)Option[V]">Option</span><span class="delimiter">(</span><a href="#33579" title="V">v</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#33584" title="Option[V]">old</a>
    <span class="delimiter">}</span>
    <span class="comment">/** WARNING: ns.update(k, null) is a delete */</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(k: K, v: V)Unit" id="33500">update</a><span class="delimiter">(</span><a title="K" id="33600">k</a>: <a href="#33490" title="K">K</a>, <a title="V" id="33601">v</a>: <a href="#33491" title="V">V</a><span class="delimiter">)</span> = <a href="#33499" title="(k: K, v: V)Option[V]">put</a><span title="Unit" class="delimiter">(</span><a href="#33600" title="K">k</a>, <a href="#33601" title="V">v</a><span class="delimiter">)</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(k: K)Option[V]" id="33501">remove</a><span class="delimiter">(</span><a title="K" id="33606">k</a>: <a href="#33490" title="K">K</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Option[V]" id="33610">old</a> = <a href="#33493" title="edu.berkeley.cs.scads.storage.RangeKeyValueStore[K,V]">ns</a>.<a href="Stores.scala.html#33563" title="(key: K)Option[V]">get</a><span class="delimiter">(</span><a href="#33606" title="K">k</a><span class="delimiter">)</span>
      <a href="#33493" title="edu.berkeley.cs.scads.storage.RangeKeyValueStore[K,V]">ns</a>.<a href="Stores.scala.html#33564" title="(key: K, value: Option[V])Unit">put</a><span class="delimiter">(</span><a href="#33606" title="K">k</a>, <span title="object None">None</span><span class="delimiter">)</span>
      <a href="#33610" title="Option[V]">old</a>
    <span class="delimiter">}</span>
    <span class="comment">/** WARNING: ns += Tuple2(k, null) is a delete */</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(kv: (K, V))this.type" id="33502">+=</a><span class="delimiter">(</span><a title="(K, V)" id="33611">kv</a>: <span title="(K, V)" class="delimiter">(</span>K, V<span class="delimiter">)</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#33493" title="edu.berkeley.cs.scads.storage.RangeKeyValueStore[K,V]">ns</a>.<a href="Stores.scala.html#33564" title="(key: K, value: Option[V])Unit">put</a><span class="delimiter">(</span><a href="#33611" title="(K, V)">kv</a>.<span title="=&gt; K">_1</span>, <span title="(x: V)Some[V]">Some</span><span class="delimiter">(</span><a href="#33611" title="(K, V)">kv</a>.<span title="=&gt; V">_2</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#33496" title="this.type" class="keyword">this</a>
    <span class="delimiter">}</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(k: K)this.type" id="33503">-=</a><span class="delimiter">(</span><a title="K" id="33642">k</a>: <a href="#33490" title="K">K</a><span class="delimiter">)</span> = <span class="delimiter">{</span> 
      <a href="#33493" title="edu.berkeley.cs.scads.storage.RangeKeyValueStore[K,V]">ns</a>.<a href="Stores.scala.html#33564" title="(key: K, value: Option[V])Unit">put</a><span class="delimiter">(</span><a href="#33642" title="K">k</a>, <span title="object None">None</span><span class="delimiter">)</span> 
      <a href="#33496" title="this.type" class="keyword">this</a>
    <span class="delimiter">}</span> 
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Iterator[(K, V)]" id="33504">iterator</a> = <a href="#33493" title="edu.berkeley.cs.scads.storage.RangeKeyValueStore[K,V]">ns</a>.<a href="Stores.scala.html#33560" title="=&gt; Iterator[(K, V)]">iterator</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>