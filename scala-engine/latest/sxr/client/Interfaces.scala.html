<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>client/Interfaces.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> edu.berkeley.cs.scads.storage

<span class="keyword">import</span> edu.berkeley.cs.avro.marker._
<span class="keyword">import</span> edu.berkeley.cs.scads.comm._
<span class="keyword">import</span> edu.berkeley.cs.scads.util._

<span class="keyword">import</span> org.apache.avro.Schema
<span class="keyword">import</span> org.apache.avro.generic._

<span class="keyword">trait</span> <a title="trait PersistentStore[BulkPutType] extends java.lang.Object" id="9839">PersistentStore</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="9840">BulkPutType</a><span class="delimiter">]</span> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(that: TraversableOnce[BulkPutType])Unit" id="36712">++=</a><span class="delimiter">(</span><a title="TraversableOnce[BulkPutType]" id="47114">that</a>: <span title="TraversableOnce[BulkPutType]">TraversableOnce</span><span class="delimiter">[</span>BulkPutType<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
<span class="delimiter">}</span>
<span class="keyword">trait</span> <a title="trait KeyValueStoreLike[KeyType &lt;: org.apache.avro.generic.IndexedRecord, ValueType &lt;: org.apache.avro.generic.IndexedRecord, BulkPutType] extends java.lang.Object with edu.berkeley.cs.scads.storage.PersistentStore[BulkPutType]" id="9841">KeyValueStoreLike</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9842">KeyType</a> &lt;: IndexedRecord, 
                        <a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9843">ValueType</a> &lt;: IndexedRecord,
                        <a title="&gt;: Nothing &lt;: Any" id="9844">BulkPutType</a><span class="delimiter">]</span>
  <span class="keyword">extends</span> <a href="#9839" title="edu.berkeley.cs.scads.storage.PersistentStore[BulkPutType]">PersistentStore</a><span class="delimiter">[</span>BulkPutType<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(key: KeyType)Option[ValueType]" id="36713">get</a><span class="delimiter">(</span><a title="KeyType" id="37682">key</a>: <a href="#9842" title="KeyType">KeyType</a><span class="delimiter">)</span>: <span title="Option[ValueType]">Option</span><span class="delimiter">[</span>ValueType<span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(key: KeyType, value: Option[ValueType])Unit" id="36714">put</a><span class="delimiter">(</span><a title="KeyType" id="37698">key</a>: <a href="#9842" title="KeyType">KeyType</a>, <a title="Option[ValueType]" id="37699">value</a>: <span title="Option[ValueType]">Option</span><span class="delimiter">[</span>ValueType<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">def</span> <a title="(key: KeyType, value: Option[ValueType])edu.berkeley.cs.scads.comm.ScadsFuture[Unit]" id="36715">asyncPut</a><span class="delimiter">(</span><a title="KeyType" id="53574">key</a>: <a href="#9842" title="KeyType">KeyType</a>, <a title="Option[ValueType]" id="53575">value</a>: <span title="Option[ValueType]">Option</span><span class="delimiter">[</span>ValueType<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Unit]">ScadsFuture</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(key: KeyType)edu.berkeley.cs.scads.comm.ScadsFuture[Option[ValueType]]" id="36716">asyncGet</a><span class="delimiter">(</span><a title="KeyType" id="46405">key</a>: <a href="#9842" title="KeyType">KeyType</a><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Option[ValueType]]">ScadsFuture</span><span class="delimiter">[</span>Option<span class="delimiter">[</span>ValueType<span class="delimiter">]</span><span class="delimiter">]</span>
<span class="delimiter">}</span>
<span class="keyword">trait</span> <a title="trait RangeKeyValueStoreLike[KeyType &lt;: org.apache.avro.generic.IndexedRecord, ValueType &lt;: org.apache.avro.generic.IndexedRecord, RangeType] extends java.lang.Object with edu.berkeley.cs.scads.storage.KeyValueStoreLike[KeyType,ValueType,RangeType]" id="9845">RangeKeyValueStoreLike</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9846">KeyType</a> &lt;: IndexedRecord,
                             <a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9847">ValueType</a> &lt;: IndexedRecord,
                             <a title="&gt;: Nothing &lt;: Any" id="9848">RangeType</a><span class="delimiter">]</span>
  <span class="keyword">extends</span> <a href="#9841" title="edu.berkeley.cs.scads.storage.KeyValueStoreLike[KeyType,ValueType,RangeType]">KeyValueStoreLike</a><span class="delimiter">[</span>KeyType, ValueType, RangeType<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(start: Option[KeyType], end: Option[KeyType], limit: Option[Int], offset: Option[Int], ascending: Boolean)Seq[RangeType]" id="36717">getRange</a><span class="delimiter">(</span><a title="Option[KeyType]" id="50556">start</a>: <span title="Option[KeyType]">Option</span><span class="delimiter">[</span>KeyType<span class="delimiter">]</span>, 
               <a title="Option[KeyType]" id="50557">end</a>: <span title="Option[KeyType]">Option</span><span class="delimiter">[</span>KeyType<span class="delimiter">]</span>, 
               <a title="Option[Int]" id="50562">limit</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span title="object None">None</span>, 
               <a title="Option[Int]" id="50563">offset</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span title="object None">None</span>, 
               <a title="Boolean" id="50564">ascending</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: <span title="Seq[RangeType]">Seq</span><span class="delimiter">[</span>RangeType<span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(start: Option[KeyType], end: Option[KeyType], limit: Option[Int], offset: Option[Int], ascending: Boolean)edu.berkeley.cs.scads.comm.ScadsFuture[Seq[RangeType]]" id="36718">asyncGetRange</a><span class="delimiter">(</span><a title="Option[KeyType]" id="53578">start</a>: <span title="Option[KeyType]">Option</span><span class="delimiter">[</span>KeyType<span class="delimiter">]</span>, 
                    <a title="Option[KeyType]" id="53579">end</a>: <span title="Option[KeyType]">Option</span><span class="delimiter">[</span>KeyType<span class="delimiter">]</span>, 
                    <a title="Option[Int]" id="53584">limit</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span title="object None">None</span>, 
                    <a title="Option[Int]" id="53585">offset</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span title="object None">None</span>, 
                    <a title="Boolean" id="53586">ascending</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Seq[RangeType]]">ScadsFuture</span><span class="delimiter">[</span>Seq<span class="delimiter">[</span>RangeType<span class="delimiter">]</span><span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait Serializer[KeyType &lt;: org.apache.avro.generic.IndexedRecord, ValueType &lt;: org.apache.avro.generic.IndexedRecord, BulkType] extends java.lang.Object" id="9849">Serializer</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9850">KeyType</a> &lt;: IndexedRecord, <a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9851">ValueType</a> &lt;: IndexedRecord, <a title="&gt;: Nothing &lt;: Any" id="9852">BulkType</a><span class="delimiter">]</span> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(bytes: Array[Byte])KeyType" id="36270">bytesToKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="36293">bytes</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#9850" title="KeyType">KeyType</a>
  <span class="keyword">def</span> <a title="(bytes: Array[Byte])ValueType" id="36271">bytesToValue</a><span class="delimiter">(</span><a title="Array[Byte]" id="36300">bytes</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#9851" title="ValueType">ValueType</a>
  <span class="keyword">def</span> <a title="(k: Array[Byte], v: Array[Byte])BulkType" id="36272">bytesToBulk</a><span class="delimiter">(</span><a title="Array[Byte]" id="36308">k</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Array[Byte]" id="36309">v</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#9852" title="BulkType">BulkType</a>
  <span class="keyword">def</span> <a title="(key: KeyType)Array[Byte]" id="36273">keyToBytes</a><span class="delimiter">(</span><a title="KeyType" id="36318">key</a>: <a href="#9850" title="KeyType">KeyType</a><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(value: ValueType)Array[Byte]" id="36274">valueToBytes</a><span class="delimiter">(</span><a title="ValueType" id="36323">value</a>: <a href="#9851" title="ValueType">ValueType</a><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(b: BulkType)(Array[Byte], Array[Byte])" id="36275">bulkToBytes</a><span class="delimiter">(</span><a title="BulkType" id="36328">b</a>: <a href="#9852" title="BulkType">BulkType</a><span class="delimiter">)</span>: <span title="(Array[Byte], Array[Byte])" class="delimiter">(</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(schema: org.apache.avro.Schema)org.apache.avro.generic.IndexedRecord" id="36276">newRecord</a><span class="delimiter">(</span><a title="org.apache.avro.Schema" id="36341">schema</a>: <span title="org.apache.avro.Schema">Schema</span><span class="delimiter">)</span>: <span title="org.apache.avro.generic.IndexedRecord">IndexedRecord</span>
  <span class="keyword">def</span> <a title="=&gt; KeyType" id="36277">newKeyInstance</a>: <a href="#9850" title="KeyType">KeyType</a>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait KeyValueSerializer[KeyType &lt;: org.apache.avro.generic.IndexedRecord, ValueType &lt;: org.apache.avro.generic.IndexedRecord] extends java.lang.Object with edu.berkeley.cs.scads.storage.Serializer[KeyType,ValueType,(KeyType, ValueType)]" id="9853">KeyValueSerializer</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9854">KeyType</a> &lt;: IndexedRecord, <a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9855">ValueType</a> &lt;: IndexedRecord<span class="delimiter">]</span> 
  <span class="keyword">extends</span> <a href="#9849" title="edu.berkeley.cs.scads.storage.Serializer[KeyType,ValueType,(KeyType, ValueType)]">Serializer</a><span class="delimiter">[</span>KeyType, ValueType, <span class="delimiter">(</span>KeyType, ValueType<span class="delimiter">)</span><span class="delimiter">]</span>

<span class="keyword">trait</span> <a title="trait PairSerializer[PairType &lt;: edu.berkeley.cs.avro.marker.AvroPair] extends java.lang.Object with edu.berkeley.cs.scads.storage.Serializer[org.apache.avro.generic.IndexedRecord,org.apache.avro.generic.IndexedRecord,PairType]" id="9856">PairSerializer</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: edu.berkeley.cs.avro.marker.AvroPair" id="9857">PairType</a> &lt;: AvroPair<span class="delimiter">]</span> 
  <span class="keyword">extends</span> <a href="#9849" title="edu.berkeley.cs.scads.storage.Serializer[org.apache.avro.generic.IndexedRecord,org.apache.avro.generic.IndexedRecord,PairType]">Serializer</a><span class="delimiter">[</span>IndexedRecord, IndexedRecord, PairType<span class="delimiter">]</span>

<span class="keyword">trait</span> <a title="trait Protocol extends java.lang.Object" id="9858">Protocol</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(key: Array[Byte])Option[Array[Byte]]" id="27850">getBytes</a><span class="delimiter">(</span><a title="Array[Byte]" id="44769">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(key: Array[Byte], value: Option[Array[Byte]])Unit" id="27851">putBytes</a><span class="delimiter">(</span><a title="Array[Byte]" id="53599">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Option[Array[Byte]]" id="53600">value</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">def</span> <a title="(key: Array[Byte], value: Option[Array[Byte]])edu.berkeley.cs.scads.comm.ScadsFuture[Unit]" id="27852">asyncPutBytes</a><span class="delimiter">(</span><a title="Array[Byte]" id="53601">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Option[Array[Byte]]" id="53602">value</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Unit]">ScadsFuture</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span>

  <span class="comment">/* TODO: Thread safety? */</span>
  <span class="keyword">def</span> <a title="()Unit" id="27853">flushBulkBytes</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">def</span> <a title="(key: Array[Byte], value: Array[Byte])Unit" id="27854">putBulkBytes</a><span class="delimiter">(</span><a title="Array[Byte]" id="47197">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Array[Byte]" id="47198">value</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="keyword">def</span> <a title="(key: Array[Byte])edu.berkeley.cs.scads.comm.ScadsFuture[Option[Array[Byte]]]" id="27855">asyncGetBytes</a><span class="delimiter">(</span><a title="Array[Byte]" id="44749">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Option[Array[Byte]]]">ScadsFuture</span><span class="delimiter">[</span>Option<span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span>
<span class="delimiter">}</span>
<span class="keyword">trait</span> <a title="trait RangeProtocol extends java.lang.Object with edu.berkeley.cs.scads.storage.Protocol" id="9859">RangeProtocol</a> <span class="keyword">extends</span> <a href="#9858" title="edu.berkeley.cs.scads.storage.Protocol">Protocol</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(start: Option[Array[Byte]], end: Option[Array[Byte]], limit: Option[Int], offset: Option[Int], ascending: Boolean)Seq[(Array[Byte], Array[Byte])]" id="36738">getKeys</a><span class="delimiter">(</span><a title="Option[Array[Byte]]" id="50571">start</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, 
              <a title="Option[Array[Byte]]" id="50572">end</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, 
              <a title="Option[Int]" id="50573">limit</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>, 
              <a title="Option[Int]" id="50574">offset</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>, 
              <a title="Boolean" id="50575">ascending</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Seq[(Array[Byte], Array[Byte])]">Seq</span><span class="delimiter">[</span><span class="delimiter">(</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(start: Option[Array[Byte]], end: Option[Array[Byte]], limit: Option[Int], offset: Option[Int], ascending: Boolean)edu.berkeley.cs.scads.comm.ScadsFuture[Seq[(Array[Byte], Array[Byte])]]" id="36739">asyncGetKeys</a><span class="delimiter">(</span><a title="Option[Array[Byte]]" id="53604">start</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, 
                   <a title="Option[Array[Byte]]" id="53605">end</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, 
                   <a title="Option[Int]" id="53606">limit</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>, 
                   <a title="Option[Int]" id="53607">offset</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>, 
                   <a title="Boolean" id="53608">ascending</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Seq[(Array[Byte], Array[Byte])]]">ScadsFuture</span><span class="delimiter">[</span>Seq<span class="delimiter">[</span><span class="delimiter">(</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(parser: edu.berkeley.cs.scads.storage.RecParser, locations: Array[String], firstKey: Option[Array[Byte]], lastKey: Option[Array[Byte]])Unit" id="36740">putBulkLocations</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.storage.RecParser" id="53610">parser</a>:<a href="../server/PartitionHandler.scala.html#10056" title="edu.berkeley.cs.scads.storage.RecParser">RecParser</a>,
                       <a title="Array[String]" id="53611">locations</a>:<span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span>,
                       <a title="Option[Array[Byte]]" id="53612">firstKey</a>:<span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>,
                       <a title="Option[Array[Byte]]" id="53613">lastKey</a>:<span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait KeyRoutable extends java.lang.Object" id="9860">KeyRoutable</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(key: Array[Byte])Seq[edu.berkeley.cs.scads.storage.PartitionService]" id="27929">serversForKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="53620">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Seq[edu.berkeley.cs.scads.storage.PartitionService]">Seq</span><span class="delimiter">[</span>PartitionService<span class="delimiter">]</span>

  <span class="comment">// type of partition this routable talks to</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="27930">partitionType</a>:<span title="String">String</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(newTable: Array[Byte])Unit" id="27931">onRoutingTableChanged</a><span class="delimiter">(</span><a title="Array[Byte]" id="53621">newTable</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(key: Array[Byte])Array[Byte]" id="27932">convertToRoutingKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="53622">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>
<span class="delimiter">}</span>

case <span class="keyword">class</span> <a title="class RangeDesc extends java.lang.Object with ScalaObject with Product with Serializable" id="53734">RangeDesc</a><a href="#53734" title="ScalaObject" class="delimiter">(</a><a title="Option[Array[Byte]]" id="53727">startKey</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="Option[Array[Byte]]" id="53728">endKey</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="Seq[edu.berkeley.cs.scads.storage.PartitionService]" id="53729">servers</a>: <span title="Seq[edu.berkeley.cs.scads.storage.PartitionService]">Seq</span><span class="delimiter">[</span>PartitionService<span class="delimiter">]</span><span class="delimiter">)</span>
<span class="keyword">trait</span> <a title="trait KeyRangeRoutable extends java.lang.Object with edu.berkeley.cs.scads.storage.KeyRoutable" id="9864">KeyRangeRoutable</a> <span class="keyword">extends</span> <a href="#9860" title="edu.berkeley.cs.scads.storage.KeyRoutable">KeyRoutable</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(start: Option[Array[Byte]], end: Option[Array[Byte]])Seq[edu.berkeley.cs.scads.storage.RangeDesc]" id="27961">serversForKeyRange</a><span class="delimiter">(</span><a title="Option[Array[Byte]]" id="30614">start</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="Option[Array[Byte]]" id="30615">end</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Seq[edu.berkeley.cs.scads.storage.RangeDesc]">Seq</span><span class="delimiter">[</span>RangeDesc<span class="delimiter">]</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(key: Array[Byte])Array[Byte]" id="27962">convertFromRoutingKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="53700">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait KeyPartitionable extends java.lang.Object" id="9865">KeyPartitionable</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(splitKeys: Seq[Array[Byte]])Unit" id="41740">splitPartition</a><span class="delimiter">(</span><a title="Seq[Array[Byte]]" id="53703">splitKeys</a>: <span title="Seq[Array[Byte]]">Seq</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">def</span> <a title="(mergeKeys: Seq[Array[Byte]])Unit" id="41741">mergePartition</a><span class="delimiter">(</span><a title="Seq[Array[Byte]]" id="53704">mergeKeys</a>: <span title="Seq[Array[Byte]]">Seq</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="keyword">def</span> <a title="(partitionHandlers: Seq[edu.berkeley.cs.scads.storage.PartitionService])Unit" id="41742">deletePartitions</a><span class="delimiter">(</span><a title="Seq[edu.berkeley.cs.scads.storage.PartitionService]" id="53705">partitionHandlers</a>: <span title="Seq[edu.berkeley.cs.scads.storage.PartitionService]">Seq</span><span class="delimiter">[</span>PartitionService<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="comment">/** For each target, replace the PartitionService on the StorageService */</span>
  <span class="keyword">def</span> <a title="(targets: Seq[(edu.berkeley.cs.scads.storage.PartitionService, edu.berkeley.cs.scads.storage.StorageService)])Seq[edu.berkeley.cs.scads.storage.PartitionService]" id="41743">replicatePartitions</a><span class="delimiter">(</span><a title="Seq[(edu.berkeley.cs.scads.storage.PartitionService, edu.berkeley.cs.scads.storage.StorageService)]" id="53706">targets</a>: <span title="Seq[(edu.berkeley.cs.scads.storage.PartitionService, edu.berkeley.cs.scads.storage.StorageService)]">Seq</span><span class="delimiter">[</span><span class="delimiter">(</span>PartitionService, StorageService<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Seq[edu.berkeley.cs.scads.storage.PartitionService]">Seq</span><span class="delimiter">[</span>PartitionService<span class="delimiter">]</span>

  <span class="comment">/** sets the partition scheme to be exactly that which is represented by the input.
   * any previously existing partitions are thrown away. it is required that
   * length of (scheme) &gt;= 1 and that the 1st split key is None */</span>
  <span class="keyword">def</span> <a title="(scheme: Seq[(Option[Array[Byte]], Seq[edu.berkeley.cs.scads.storage.StorageService])])Unit" id="41744">setPartitionScheme</a><span class="delimiter">(</span><a title="Seq[(Option[Array[Byte]], Seq[edu.berkeley.cs.scads.storage.StorageService])]" id="53707">scheme</a>: <span title="Seq[(Option[Array[Byte]], Seq[edu.berkeley.cs.scads.storage.StorageService])]">Seq</span><span class="delimiter">[</span><span class="delimiter">(</span>Option<span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, Seq<span class="delimiter">[</span>StorageService<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="keyword">def</span> <a title="=&gt; edu.berkeley.cs.scads.util.RangeTable[Array[Byte],edu.berkeley.cs.scads.storage.PartitionService]" id="41745">routingTable</a>: <a href="util/RangeTable.scala.html#10593" title="edu.berkeley.cs.scads.util.RangeTable[Array[Byte],edu.berkeley.cs.scads.storage.PartitionService]">RangeTable</a><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, PartitionService<span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait GlobalMetadata extends java.lang.Object" id="9866">GlobalMetadata</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="27939">name</a>: <span title="String">String</span>

  <span class="keyword">def</span> <a title="=&gt; org.apache.avro.Schema" id="27940">keySchema</a>: <span title="org.apache.avro.Schema">Schema</span>
  <span class="keyword">def</span> <a title="=&gt; org.apache.avro.Schema" id="27941">valueSchema</a>: <span title="org.apache.avro.Schema">Schema</span>

  <span class="keyword">def</span> <a title="=&gt; String" id="27942">valueClass</a>: <span title="String">String</span>

  <span class="keyword">def</span> <a title="=&gt; org.apache.avro.Schema" id="27943">remoteKeySchema</a>: <span title="org.apache.avro.Schema">Schema</span>
  <span class="keyword">def</span> <a title="=&gt; org.apache.avro.Schema" id="27944">remoteValueSchema</a>: <span title="org.apache.avro.Schema">Schema</span>

  <span class="comment">/** The GlobalMetadata catalogue is implementation agnostic, but must
   * support a simple persistent key/value configuration map (string -&gt; byte array) */</span>
  <span class="keyword">def</span> <a title="(key: String, func: () =&gt; Unit)Array[Byte]" id="27945">watchMetadata</a><span class="delimiter">(</span><a title="String" id="53709">key</a>: <span title="String">String</span>, <a title="() =&gt; Unit" id="53710">func</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(key: String)Option[Array[Byte]]" id="27946">getMetadata</a><span class="delimiter">(</span><a title="String" id="49061">key</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span> 
  <span class="keyword">def</span> <a title="(key: String, value: Array[Byte])Unit" id="27947">putMetadata</a><span class="delimiter">(</span><a title="String" id="50543">key</a>: <span title="String">String</span>, <a title="Array[Byte]" id="50544">value</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> 
  <span class="keyword">def</span> <a title="(key: String)Unit" id="27948">deleteMetadata</a><span class="delimiter">(</span><a title="String" id="53711">key</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">def</span> <a title="()Unit" id="27949">waitUntilMetadataPropagated</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait PairGlobalMetadata extends java.lang.Object with edu.berkeley.cs.scads.storage.GlobalMetadata" id="9867">PairGlobalMetadata</a> <span class="keyword">extends</span> <a href="#9866" title="edu.berkeley.cs.scads.storage.GlobalMetadata">GlobalMetadata</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; org.apache.avro.Schema" id="36425">pairSchema</a>: <span title="org.apache.avro.Schema">Schema</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait RecordMetadata extends java.lang.Object" id="9868">RecordMetadata</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(x: Array[Byte], y: Array[Byte])Int" id="27933">compareKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="53716">x</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Array[Byte]" id="53717">y</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Int">Int</span>
  <span class="keyword">def</span> <a title="(x: Array[Byte])Int" id="27934">hashKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="53718">x</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Int">Int</span>

  <span class="comment">/** Create a value w/ metadata prepended */</span>
  <span class="keyword">def</span> <a title="(rec: Array[Byte])Array[Byte]" id="27935">createMetadata</a><span class="delimiter">(</span><a title="Array[Byte]" id="53719">rec</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>

  <span class="comment">/** Compare 2 values based on metadata */</span>
  <span class="keyword">def</span> <a title="(lhs: Array[Byte], rhs: Array[Byte])Int" id="27936">compareMetadata</a><span class="delimiter">(</span><a title="Array[Byte]" id="53720">lhs</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Array[Byte]" id="53721">rhs</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Int">Int</span>

  <span class="comment">/** Given a byte string which contains both value and metadata, extracts
   * this information and returns a tuple of (metadata, value) */</span>
  <span class="keyword">def</span> <a title="(value: Array[Byte])(Array[Byte], Array[Byte])" id="27937">extractMetadataAndRecordFromValue</a><span class="delimiter">(</span><a title="Array[Byte]" id="53722">value</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="(Array[Byte], Array[Byte])" class="delimiter">(</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>

  <span class="comment">/** strips out the metadata from the value. exists for performance
   reasons (is NOT implemented as extractMetadataAndRecordFromValue(value)._2) */</span>
  <span class="keyword">def</span> <a title="(value: Array[Byte])Array[Byte]" id="27938">extractRecordFromValue</a><span class="delimiter">(</span><a title="Array[Byte]" id="53723">value</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span> 
<span class="delimiter">}</span>

        </pre>
    </body>
</html>