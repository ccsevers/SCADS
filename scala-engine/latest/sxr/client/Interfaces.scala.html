<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>client/Interfaces.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> edu.berkeley.cs.scads.storage

<span class="keyword">import</span> edu.berkeley.cs.avro.marker._
<span class="keyword">import</span> edu.berkeley.cs.scads.comm._
<span class="keyword">import</span> edu.berkeley.cs.scads.util._

<span class="keyword">import</span> org.apache.avro.Schema
<span class="keyword">import</span> org.apache.avro.generic._

<span class="keyword">trait</span> <a title="trait PersistentStore[BulkPutType] extends java.lang.Object" id="9591">PersistentStore</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="9592">BulkPutType</a><span class="delimiter">]</span> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(that: TraversableOnce[BulkPutType])Unit" id="33541">++=</a><span class="delimiter">(</span><a title="TraversableOnce[BulkPutType]" id="43382">that</a>: <span title="TraversableOnce[BulkPutType]">TraversableOnce</span><span class="delimiter">[</span>BulkPutType<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
<span class="delimiter">}</span>
<span class="keyword">trait</span> <a title="trait KeyValueStoreLike[KeyType &lt;: org.apache.avro.generic.IndexedRecord, ValueType &lt;: org.apache.avro.generic.IndexedRecord, BulkPutType] extends java.lang.Object with edu.berkeley.cs.scads.storage.PersistentStore[BulkPutType]" id="9593">KeyValueStoreLike</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9594">KeyType</a> &lt;: IndexedRecord, 
                        <a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9595">ValueType</a> &lt;: IndexedRecord,
                        <a title="&gt;: Nothing &lt;: Any" id="9596">BulkPutType</a><span class="delimiter">]</span>
  <span class="keyword">extends</span> <a href="#9591" title="edu.berkeley.cs.scads.storage.PersistentStore[BulkPutType]">PersistentStore</a><span class="delimiter">[</span>BulkPutType<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(key: KeyType)Option[ValueType]" id="33542">get</a><span class="delimiter">(</span><a title="KeyType" id="33572">key</a>: <a href="#9594" title="KeyType">KeyType</a><span class="delimiter">)</span>: <span title="Option[ValueType]">Option</span><span class="delimiter">[</span>ValueType<span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(key: KeyType, value: Option[ValueType])Unit" id="33543">put</a><span class="delimiter">(</span><a title="KeyType" id="33588">key</a>: <a href="#9594" title="KeyType">KeyType</a>, <a title="Option[ValueType]" id="33589">value</a>: <span title="Option[ValueType]">Option</span><span class="delimiter">[</span>ValueType<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">def</span> <a title="(key: KeyType, value: Option[ValueType])edu.berkeley.cs.scads.comm.ScadsFuture[Unit]" id="33544">asyncPut</a><span class="delimiter">(</span><a title="KeyType" id="49838">key</a>: <a href="#9594" title="KeyType">KeyType</a>, <a title="Option[ValueType]" id="49839">value</a>: <span title="Option[ValueType]">Option</span><span class="delimiter">[</span>ValueType<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Unit]">ScadsFuture</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(key: KeyType)edu.berkeley.cs.scads.comm.ScadsFuture[Option[ValueType]]" id="33545">asyncGet</a><span class="delimiter">(</span><a title="KeyType" id="42677">key</a>: <a href="#9594" title="KeyType">KeyType</a><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Option[ValueType]]">ScadsFuture</span><span class="delimiter">[</span>Option<span class="delimiter">[</span>ValueType<span class="delimiter">]</span><span class="delimiter">]</span>
<span class="delimiter">}</span>
<span class="keyword">trait</span> <a title="trait RangeKeyValueStoreLike[KeyType &lt;: org.apache.avro.generic.IndexedRecord, ValueType &lt;: org.apache.avro.generic.IndexedRecord, RangeType] extends java.lang.Object with edu.berkeley.cs.scads.storage.KeyValueStoreLike[KeyType,ValueType,RangeType]" id="9597">RangeKeyValueStoreLike</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9598">KeyType</a> &lt;: IndexedRecord,
                             <a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9599">ValueType</a> &lt;: IndexedRecord,
                             <a title="&gt;: Nothing &lt;: Any" id="9600">RangeType</a><span class="delimiter">]</span>
  <span class="keyword">extends</span> <a href="#9593" title="edu.berkeley.cs.scads.storage.KeyValueStoreLike[KeyType,ValueType,RangeType]">KeyValueStoreLike</a><span class="delimiter">[</span>KeyType, ValueType, RangeType<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(start: Option[KeyType], end: Option[KeyType], limit: Option[Int], offset: Option[Int], ascending: Boolean)Seq[RangeType]" id="33546">getRange</a><span class="delimiter">(</span><a title="Option[KeyType]" id="46824">start</a>: <span title="Option[KeyType]">Option</span><span class="delimiter">[</span>KeyType<span class="delimiter">]</span>, 
               <a title="Option[KeyType]" id="46825">end</a>: <span title="Option[KeyType]">Option</span><span class="delimiter">[</span>KeyType<span class="delimiter">]</span>, 
               <a title="Option[Int]" id="46830">limit</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span title="object None">None</span>, 
               <a title="Option[Int]" id="46831">offset</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span title="object None">None</span>, 
               <a title="Boolean" id="46832">ascending</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: <span title="Seq[RangeType]">Seq</span><span class="delimiter">[</span>RangeType<span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(start: Option[KeyType], end: Option[KeyType], limit: Option[Int], offset: Option[Int], ascending: Boolean)edu.berkeley.cs.scads.comm.ScadsFuture[Seq[RangeType]]" id="33547">asyncGetRange</a><span class="delimiter">(</span><a title="Option[KeyType]" id="49842">start</a>: <span title="Option[KeyType]">Option</span><span class="delimiter">[</span>KeyType<span class="delimiter">]</span>, 
                    <a title="Option[KeyType]" id="49843">end</a>: <span title="Option[KeyType]">Option</span><span class="delimiter">[</span>KeyType<span class="delimiter">]</span>, 
                    <a title="Option[Int]" id="49848">limit</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span title="object None">None</span>, 
                    <a title="Option[Int]" id="49849">offset</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span title="object None">None</span>, 
                    <a title="Boolean" id="49850">ascending</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Seq[RangeType]]">ScadsFuture</span><span class="delimiter">[</span>Seq<span class="delimiter">[</span>RangeType<span class="delimiter">]</span><span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait Serializer[KeyType &lt;: org.apache.avro.generic.IndexedRecord, ValueType &lt;: org.apache.avro.generic.IndexedRecord, BulkType] extends java.lang.Object" id="9601">Serializer</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9602">KeyType</a> &lt;: IndexedRecord, <a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9603">ValueType</a> &lt;: IndexedRecord, <a title="&gt;: Nothing &lt;: Any" id="9604">BulkType</a><span class="delimiter">]</span> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(bytes: Array[Byte])KeyType" id="33092">bytesToKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="33115">bytes</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#9602" title="KeyType">KeyType</a>
  <span class="keyword">def</span> <a title="(bytes: Array[Byte])ValueType" id="33093">bytesToValue</a><span class="delimiter">(</span><a title="Array[Byte]" id="33122">bytes</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#9603" title="ValueType">ValueType</a>
  <span class="keyword">def</span> <a title="(k: Array[Byte], v: Array[Byte])BulkType" id="33094">bytesToBulk</a><span class="delimiter">(</span><a title="Array[Byte]" id="33130">k</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Array[Byte]" id="33131">v</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#9604" title="BulkType">BulkType</a>
  <span class="keyword">def</span> <a title="(key: KeyType)Array[Byte]" id="33095">keyToBytes</a><span class="delimiter">(</span><a title="KeyType" id="33140">key</a>: <a href="#9602" title="KeyType">KeyType</a><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(value: ValueType)Array[Byte]" id="33096">valueToBytes</a><span class="delimiter">(</span><a title="ValueType" id="33145">value</a>: <a href="#9603" title="ValueType">ValueType</a><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(b: BulkType)(Array[Byte], Array[Byte])" id="33097">bulkToBytes</a><span class="delimiter">(</span><a title="BulkType" id="33150">b</a>: <a href="#9604" title="BulkType">BulkType</a><span class="delimiter">)</span>: <span title="(Array[Byte], Array[Byte])" class="delimiter">(</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(schema: org.apache.avro.Schema)org.apache.avro.generic.IndexedRecord" id="33098">newRecord</a><span class="delimiter">(</span><a title="org.apache.avro.Schema" id="33163">schema</a>: <span title="org.apache.avro.Schema">Schema</span><span class="delimiter">)</span>: <span title="org.apache.avro.generic.IndexedRecord">IndexedRecord</span>
  <span class="keyword">def</span> <a title="=&gt; KeyType" id="33099">newKeyInstance</a>: <a href="#9602" title="KeyType">KeyType</a>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait KeyValueSerializer[KeyType &lt;: org.apache.avro.generic.IndexedRecord, ValueType &lt;: org.apache.avro.generic.IndexedRecord] extends java.lang.Object with edu.berkeley.cs.scads.storage.Serializer[KeyType,ValueType,(KeyType, ValueType)]" id="9605">KeyValueSerializer</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9606">KeyType</a> &lt;: IndexedRecord, <a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9607">ValueType</a> &lt;: IndexedRecord<span class="delimiter">]</span> 
  <span class="keyword">extends</span> <a href="#9601" title="edu.berkeley.cs.scads.storage.Serializer[KeyType,ValueType,(KeyType, ValueType)]">Serializer</a><span class="delimiter">[</span>KeyType, ValueType, <span class="delimiter">(</span>KeyType, ValueType<span class="delimiter">)</span><span class="delimiter">]</span>

<span class="keyword">trait</span> <a title="trait PairSerializer[PairType &lt;: edu.berkeley.cs.avro.marker.AvroPair] extends java.lang.Object with edu.berkeley.cs.scads.storage.Serializer[org.apache.avro.generic.IndexedRecord,org.apache.avro.generic.IndexedRecord,PairType]" id="9608">PairSerializer</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: edu.berkeley.cs.avro.marker.AvroPair" id="9609">PairType</a> &lt;: AvroPair<span class="delimiter">]</span> 
  <span class="keyword">extends</span> <a href="#9601" title="edu.berkeley.cs.scads.storage.Serializer[org.apache.avro.generic.IndexedRecord,org.apache.avro.generic.IndexedRecord,PairType]">Serializer</a><span class="delimiter">[</span>IndexedRecord, IndexedRecord, PairType<span class="delimiter">]</span>

<span class="keyword">trait</span> <a title="trait Protocol extends java.lang.Object" id="9610">Protocol</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(key: Array[Byte])Option[Array[Byte]]" id="13530">getBytes</a><span class="delimiter">(</span><a title="Array[Byte]" id="40942">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(key: Array[Byte], value: Option[Array[Byte]])Unit" id="13531">putBytes</a><span class="delimiter">(</span><a title="Array[Byte]" id="49863">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Option[Array[Byte]]" id="49864">value</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">def</span> <a title="(key: Array[Byte], value: Option[Array[Byte]])edu.berkeley.cs.scads.comm.ScadsFuture[Unit]" id="13532">asyncPutBytes</a><span class="delimiter">(</span><a title="Array[Byte]" id="49865">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Option[Array[Byte]]" id="49866">value</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Unit]">ScadsFuture</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span>

  <span class="comment">/* TODO: Thread safety? */</span>
  <span class="keyword">def</span> <a title="()Unit" id="13533">flushBulkBytes</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">def</span> <a title="(key: Array[Byte], value: Array[Byte])Unit" id="13534">putBulkBytes</a><span class="delimiter">(</span><a title="Array[Byte]" id="43465">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Array[Byte]" id="43466">value</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="keyword">def</span> <a title="(key: Array[Byte])edu.berkeley.cs.scads.comm.ScadsFuture[Option[Array[Byte]]]" id="13535">asyncGetBytes</a><span class="delimiter">(</span><a title="Array[Byte]" id="40922">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Option[Array[Byte]]]">ScadsFuture</span><span class="delimiter">[</span>Option<span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span>
<span class="delimiter">}</span>
<span class="keyword">trait</span> <a title="trait RangeProtocol extends java.lang.Object with edu.berkeley.cs.scads.storage.Protocol" id="9611">RangeProtocol</a> <span class="keyword">extends</span> <a href="#9610" title="edu.berkeley.cs.scads.storage.Protocol">Protocol</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(start: Option[Array[Byte]], end: Option[Array[Byte]], limit: Option[Int], offset: Option[Int], ascending: Boolean)Seq[(Array[Byte], Array[Byte])]" id="33567">getKeys</a><span class="delimiter">(</span><a title="Option[Array[Byte]]" id="46839">start</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, 
              <a title="Option[Array[Byte]]" id="46840">end</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, 
              <a title="Option[Int]" id="46841">limit</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>, 
              <a title="Option[Int]" id="46842">offset</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>, 
              <a title="Boolean" id="46843">ascending</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Seq[(Array[Byte], Array[Byte])]">Seq</span><span class="delimiter">[</span><span class="delimiter">(</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(start: Option[Array[Byte]], end: Option[Array[Byte]], limit: Option[Int], offset: Option[Int], ascending: Boolean)edu.berkeley.cs.scads.comm.ScadsFuture[Seq[(Array[Byte], Array[Byte])]]" id="33568">asyncGetKeys</a><span class="delimiter">(</span><a title="Option[Array[Byte]]" id="49868">start</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, 
                   <a title="Option[Array[Byte]]" id="49869">end</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, 
                   <a title="Option[Int]" id="49870">limit</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>, 
                   <a title="Option[Int]" id="49871">offset</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>, 
                   <a title="Boolean" id="49872">ascending</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Seq[(Array[Byte], Array[Byte])]]">ScadsFuture</span><span class="delimiter">[</span>Seq<span class="delimiter">[</span><span class="delimiter">(</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(parser: edu.berkeley.cs.scads.storage.RecParser, locations: Array[String], firstKey: Option[Array[Byte]], lastKey: Option[Array[Byte]])Unit" id="33569">putBulkLocations</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.storage.RecParser" id="49874">parser</a>:<a href="../server/PartitionHandler.scala.html#9812" title="edu.berkeley.cs.scads.storage.RecParser">RecParser</a>,
                       <a title="Array[String]" id="49875">locations</a>:<span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span>,
                       <a title="Option[Array[Byte]]" id="49876">firstKey</a>:<span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>,
                       <a title="Option[Array[Byte]]" id="49877">lastKey</a>:<span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait KeyRoutable extends java.lang.Object" id="9612">KeyRoutable</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(key: Array[Byte])Seq[edu.berkeley.cs.scads.comm.PartitionService]" id="13616">serversForKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="49884">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Seq[edu.berkeley.cs.scads.comm.PartitionService]">Seq</span><span class="delimiter">[</span>PartitionService<span class="delimiter">]</span>

  <span class="comment">// type of partition this routable talks to</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="13617">partitionType</a>:<span title="String">String</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(newTable: Array[Byte])Unit" id="13618">onRoutingTableChanged</a><span class="delimiter">(</span><a title="Array[Byte]" id="49885">newTable</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(key: Array[Byte])Array[Byte]" id="13619">convertToRoutingKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="49886">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>
<span class="delimiter">}</span>

case <span class="keyword">class</span> <a title="class RangeDesc extends java.lang.Object with ScalaObject with Product with Serializable" id="50048">RangeDesc</a><a href="#50048" title="ScalaObject" class="delimiter">(</a><a title="Option[Array[Byte]]" id="50041">startKey</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="Option[Array[Byte]]" id="50042">endKey</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="Seq[edu.berkeley.cs.scads.comm.PartitionService]" id="50043">servers</a>: <span title="Seq[edu.berkeley.cs.scads.comm.PartitionService]">Seq</span><span class="delimiter">[</span>PartitionService<span class="delimiter">]</span><span class="delimiter">)</span>
<span class="keyword">trait</span> <a title="trait KeyRangeRoutable extends java.lang.Object with edu.berkeley.cs.scads.storage.KeyRoutable" id="9616">KeyRangeRoutable</a> <span class="keyword">extends</span> <a href="#9612" title="edu.berkeley.cs.scads.storage.KeyRoutable">KeyRoutable</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(start: Option[Array[Byte]], end: Option[Array[Byte]])Seq[edu.berkeley.cs.scads.storage.RangeDesc]" id="13648">serversForKeyRange</a><span class="delimiter">(</span><a title="Option[Array[Byte]]" id="27023">start</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="Option[Array[Byte]]" id="27024">end</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Seq[edu.berkeley.cs.scads.storage.RangeDesc]">Seq</span><span class="delimiter">[</span>RangeDesc<span class="delimiter">]</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(key: Array[Byte])Array[Byte]" id="13649">convertFromRoutingKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="49964">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait KeyPartitionable extends java.lang.Object" id="9617">KeyPartitionable</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(splitKeys: Seq[Array[Byte]])Unit" id="37999">splitPartition</a><span class="delimiter">(</span><a title="Seq[Array[Byte]]" id="49967">splitKeys</a>: <span title="Seq[Array[Byte]]">Seq</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">def</span> <a title="(mergeKeys: Seq[Array[Byte]])Unit" id="38000">mergePartition</a><span class="delimiter">(</span><a title="Seq[Array[Byte]]" id="49968">mergeKeys</a>: <span title="Seq[Array[Byte]]">Seq</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="keyword">def</span> <a title="(partitionHandlers: Seq[edu.berkeley.cs.scads.comm.PartitionService])Unit" id="38001">deletePartitions</a><span class="delimiter">(</span><a title="Seq[edu.berkeley.cs.scads.comm.PartitionService]" id="49969">partitionHandlers</a>: <span title="Seq[edu.berkeley.cs.scads.comm.PartitionService]">Seq</span><span class="delimiter">[</span>PartitionService<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="comment">/** For each target, replace the PartitionService on the StorageService */</span>
  <span class="keyword">def</span> <a title="(targets: Seq[(edu.berkeley.cs.scads.comm.PartitionService, edu.berkeley.cs.scads.comm.StorageService)])Seq[edu.berkeley.cs.scads.comm.PartitionService]" id="38002">replicatePartitions</a><span class="delimiter">(</span><a title="Seq[(edu.berkeley.cs.scads.comm.PartitionService, edu.berkeley.cs.scads.comm.StorageService)]" id="49970">targets</a>: <span title="Seq[(edu.berkeley.cs.scads.comm.PartitionService, edu.berkeley.cs.scads.comm.StorageService)]">Seq</span><span class="delimiter">[</span><span class="delimiter">(</span>PartitionService, StorageService<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Seq[edu.berkeley.cs.scads.comm.PartitionService]">Seq</span><span class="delimiter">[</span>PartitionService<span class="delimiter">]</span>

  <span class="comment">/** sets the partition scheme to be exactly that which is represented by the input.
   * any previously existing partitions are thrown away. it is required that
   * length of (scheme) &gt;= 1 and that the 1st split key is None */</span>
  <span class="keyword">def</span> <a title="(scheme: Seq[(Option[Array[Byte]], Seq[edu.berkeley.cs.scads.comm.StorageService])])Unit" id="38003">setPartitionScheme</a><span class="delimiter">(</span><a title="Seq[(Option[Array[Byte]], Seq[edu.berkeley.cs.scads.comm.StorageService])]" id="50021">scheme</a>: <span title="Seq[(Option[Array[Byte]], Seq[edu.berkeley.cs.scads.comm.StorageService])]">Seq</span><span class="delimiter">[</span><span class="delimiter">(</span>Option<span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, Seq<span class="delimiter">[</span>StorageService<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="keyword">def</span> <a title="=&gt; edu.berkeley.cs.scads.util.RangeTable[Array[Byte],edu.berkeley.cs.scads.comm.PartitionService]" id="38004">routingTable</a>: <a href="../util/RangeTable.scala.html#9978" title="edu.berkeley.cs.scads.util.RangeTable[Array[Byte],edu.berkeley.cs.scads.comm.PartitionService]">RangeTable</a><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, PartitionService<span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait GlobalMetadata extends java.lang.Object" id="9618">GlobalMetadata</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="13626">name</a>: <span title="String">String</span>

  <span class="keyword">def</span> <a title="=&gt; org.apache.avro.Schema" id="13627">keySchema</a>: <span title="org.apache.avro.Schema">Schema</span>
  <span class="keyword">def</span> <a title="=&gt; org.apache.avro.Schema" id="13628">valueSchema</a>: <span title="org.apache.avro.Schema">Schema</span>

  <span class="keyword">def</span> <a title="=&gt; String" id="13629">valueClass</a>: <span title="String">String</span>

  <span class="keyword">def</span> <a title="=&gt; org.apache.avro.Schema" id="13630">remoteKeySchema</a>: <span title="org.apache.avro.Schema">Schema</span>
  <span class="keyword">def</span> <a title="=&gt; org.apache.avro.Schema" id="13631">remoteValueSchema</a>: <span title="org.apache.avro.Schema">Schema</span>

  <span class="comment">/** The GlobalMetadata catalogue is implementation agnostic, but must
   * support a simple persistent key/value configuration map (string -&gt; byte array) */</span>
  <span class="keyword">def</span> <a title="(key: String, func: () =&gt; Unit)Array[Byte]" id="13632">watchMetadata</a><span class="delimiter">(</span><a title="String" id="50023">key</a>: <span title="String">String</span>, <a title="() =&gt; Unit" id="50024">func</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(key: String)Option[Array[Byte]]" id="13633">getMetadata</a><span class="delimiter">(</span><a title="String" id="45329">key</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span> 
  <span class="keyword">def</span> <a title="(key: String, value: Array[Byte])Unit" id="13634">putMetadata</a><span class="delimiter">(</span><a title="String" id="46811">key</a>: <span title="String">String</span>, <a title="Array[Byte]" id="46812">value</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> 
  <span class="keyword">def</span> <a title="(key: String)Unit" id="13635">deleteMetadata</a><span class="delimiter">(</span><a title="String" id="50025">key</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">def</span> <a title="()Unit" id="13636">waitUntilMetadataPropagated</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait PairGlobalMetadata extends java.lang.Object with edu.berkeley.cs.scads.storage.GlobalMetadata" id="9619">PairGlobalMetadata</a> <span class="keyword">extends</span> <a href="#9618" title="edu.berkeley.cs.scads.storage.GlobalMetadata">GlobalMetadata</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; org.apache.avro.Schema" id="33254">pairSchema</a>: <span title="org.apache.avro.Schema">Schema</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait RecordMetadata extends java.lang.Object" id="9620">RecordMetadata</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(x: Array[Byte], y: Array[Byte])Int" id="13620">compareKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="50030">x</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Array[Byte]" id="50031">y</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Int">Int</span>
  <span class="keyword">def</span> <a title="(x: Array[Byte])Int" id="13621">hashKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="50032">x</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Int">Int</span>

  <span class="comment">/** Create a value w/ metadata prepended */</span>
  <span class="keyword">def</span> <a title="(rec: Array[Byte])Array[Byte]" id="13622">createMetadata</a><span class="delimiter">(</span><a title="Array[Byte]" id="50033">rec</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>

  <span class="comment">/** Compare 2 values based on metadata */</span>
  <span class="keyword">def</span> <a title="(lhs: Array[Byte], rhs: Array[Byte])Int" id="13623">compareMetadata</a><span class="delimiter">(</span><a title="Array[Byte]" id="50034">lhs</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Array[Byte]" id="50035">rhs</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Int">Int</span>

  <span class="comment">/** Given a byte string which contains both value and metadata, extracts
   * this information and returns a tuple of (metadata, value) */</span>
  <span class="keyword">def</span> <a title="(value: Array[Byte])(Array[Byte], Array[Byte])" id="13624">extractMetadataAndRecordFromValue</a><span class="delimiter">(</span><a title="Array[Byte]" id="50036">value</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="(Array[Byte], Array[Byte])" class="delimiter">(</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>

  <span class="comment">/** strips out the metadata from the value. exists for performance
   reasons (is NOT implemented as extractMetadataAndRecordFromValue(value)._2) */</span>
  <span class="keyword">def</span> <a title="(value: Array[Byte])Array[Byte]" id="13625">extractRecordFromValue</a><span class="delimiter">(</span><a title="Array[Byte]" id="50037">value</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span> 
<span class="delimiter">}</span>

        </pre>
    </body>
</html>