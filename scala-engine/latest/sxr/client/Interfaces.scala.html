<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>client/Interfaces.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> edu.berkeley.cs.scads.storage

<span class="keyword">import</span> edu.berkeley.cs.avro.marker._
<span class="keyword">import</span> edu.berkeley.cs.scads.comm._
<span class="keyword">import</span> edu.berkeley.cs.scads.util._

<span class="keyword">import</span> org.apache.avro.Schema
<span class="keyword">import</span> org.apache.avro.generic._

<span class="keyword">trait</span> <a title="trait PersistentStore[BulkPutType] extends java.lang.Object" id="9594">PersistentStore</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="9595">BulkPutType</a><span class="delimiter">]</span> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(that: TraversableOnce[BulkPutType])Unit" id="33544">++=</a><span class="delimiter">(</span><a title="TraversableOnce[BulkPutType]" id="43387">that</a>: <span title="TraversableOnce[BulkPutType]">TraversableOnce</span><span class="delimiter">[</span>BulkPutType<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
<span class="delimiter">}</span>
<span class="keyword">trait</span> <a title="trait KeyValueStoreLike[KeyType &lt;: org.apache.avro.generic.IndexedRecord, ValueType &lt;: org.apache.avro.generic.IndexedRecord, BulkPutType] extends java.lang.Object with edu.berkeley.cs.scads.storage.PersistentStore[BulkPutType]" id="9596">KeyValueStoreLike</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9597">KeyType</a> &lt;: IndexedRecord, 
                        <a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9598">ValueType</a> &lt;: IndexedRecord,
                        <a title="&gt;: Nothing &lt;: Any" id="9599">BulkPutType</a><span class="delimiter">]</span>
  <span class="keyword">extends</span> <a href="#9594" title="edu.berkeley.cs.scads.storage.PersistentStore[BulkPutType]">PersistentStore</a><span class="delimiter">[</span>BulkPutType<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(key: KeyType)Option[ValueType]" id="33545">get</a><span class="delimiter">(</span><a title="KeyType" id="33575">key</a>: <a href="#9597" title="KeyType">KeyType</a><span class="delimiter">)</span>: <span title="Option[ValueType]">Option</span><span class="delimiter">[</span>ValueType<span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(key: KeyType, value: Option[ValueType])Unit" id="33546">put</a><span class="delimiter">(</span><a title="KeyType" id="33591">key</a>: <a href="#9597" title="KeyType">KeyType</a>, <a title="Option[ValueType]" id="33592">value</a>: <span title="Option[ValueType]">Option</span><span class="delimiter">[</span>ValueType<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">def</span> <a title="(key: KeyType, value: Option[ValueType])edu.berkeley.cs.scads.comm.ScadsFuture[Unit]" id="33547">asyncPut</a><span class="delimiter">(</span><a title="KeyType" id="49843">key</a>: <a href="#9597" title="KeyType">KeyType</a>, <a title="Option[ValueType]" id="49844">value</a>: <span title="Option[ValueType]">Option</span><span class="delimiter">[</span>ValueType<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Unit]">ScadsFuture</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(key: KeyType)edu.berkeley.cs.scads.comm.ScadsFuture[Option[ValueType]]" id="33548">asyncGet</a><span class="delimiter">(</span><a title="KeyType" id="42682">key</a>: <a href="#9597" title="KeyType">KeyType</a><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Option[ValueType]]">ScadsFuture</span><span class="delimiter">[</span>Option<span class="delimiter">[</span>ValueType<span class="delimiter">]</span><span class="delimiter">]</span>
<span class="delimiter">}</span>
<span class="keyword">trait</span> <a title="trait RangeKeyValueStoreLike[KeyType &lt;: org.apache.avro.generic.IndexedRecord, ValueType &lt;: org.apache.avro.generic.IndexedRecord, RangeType] extends java.lang.Object with edu.berkeley.cs.scads.storage.KeyValueStoreLike[KeyType,ValueType,RangeType]" id="9600">RangeKeyValueStoreLike</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9601">KeyType</a> &lt;: IndexedRecord,
                             <a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9602">ValueType</a> &lt;: IndexedRecord,
                             <a title="&gt;: Nothing &lt;: Any" id="9603">RangeType</a><span class="delimiter">]</span>
  <span class="keyword">extends</span> <a href="#9596" title="edu.berkeley.cs.scads.storage.KeyValueStoreLike[KeyType,ValueType,RangeType]">KeyValueStoreLike</a><span class="delimiter">[</span>KeyType, ValueType, RangeType<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(start: Option[KeyType], end: Option[KeyType], limit: Option[Int], offset: Option[Int], ascending: Boolean)Seq[RangeType]" id="33549">getRange</a><span class="delimiter">(</span><a title="Option[KeyType]" id="46829">start</a>: <span title="Option[KeyType]">Option</span><span class="delimiter">[</span>KeyType<span class="delimiter">]</span>, 
               <a title="Option[KeyType]" id="46830">end</a>: <span title="Option[KeyType]">Option</span><span class="delimiter">[</span>KeyType<span class="delimiter">]</span>, 
               <a title="Option[Int]" id="46835">limit</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span title="object None">None</span>, 
               <a title="Option[Int]" id="46836">offset</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span title="object None">None</span>, 
               <a title="Boolean" id="46837">ascending</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: <span title="Seq[RangeType]">Seq</span><span class="delimiter">[</span>RangeType<span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(start: Option[KeyType], end: Option[KeyType], limit: Option[Int], offset: Option[Int], ascending: Boolean)edu.berkeley.cs.scads.comm.ScadsFuture[Seq[RangeType]]" id="33550">asyncGetRange</a><span class="delimiter">(</span><a title="Option[KeyType]" id="49847">start</a>: <span title="Option[KeyType]">Option</span><span class="delimiter">[</span>KeyType<span class="delimiter">]</span>, 
                    <a title="Option[KeyType]" id="49848">end</a>: <span title="Option[KeyType]">Option</span><span class="delimiter">[</span>KeyType<span class="delimiter">]</span>, 
                    <a title="Option[Int]" id="49853">limit</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span title="object None">None</span>, 
                    <a title="Option[Int]" id="49854">offset</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span title="object None">None</span>, 
                    <a title="Boolean" id="49855">ascending</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Seq[RangeType]]">ScadsFuture</span><span class="delimiter">[</span>Seq<span class="delimiter">[</span>RangeType<span class="delimiter">]</span><span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait Serializer[KeyType &lt;: org.apache.avro.generic.IndexedRecord, ValueType &lt;: org.apache.avro.generic.IndexedRecord, BulkType] extends java.lang.Object" id="9604">Serializer</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9605">KeyType</a> &lt;: IndexedRecord, <a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9606">ValueType</a> &lt;: IndexedRecord, <a title="&gt;: Nothing &lt;: Any" id="9607">BulkType</a><span class="delimiter">]</span> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(bytes: Array[Byte])KeyType" id="33095">bytesToKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="33118">bytes</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#9605" title="KeyType">KeyType</a>
  <span class="keyword">def</span> <a title="(bytes: Array[Byte])ValueType" id="33096">bytesToValue</a><span class="delimiter">(</span><a title="Array[Byte]" id="33125">bytes</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#9606" title="ValueType">ValueType</a>
  <span class="keyword">def</span> <a title="(k: Array[Byte], v: Array[Byte])BulkType" id="33097">bytesToBulk</a><span class="delimiter">(</span><a title="Array[Byte]" id="33133">k</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Array[Byte]" id="33134">v</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#9607" title="BulkType">BulkType</a>
  <span class="keyword">def</span> <a title="(key: KeyType)Array[Byte]" id="33098">keyToBytes</a><span class="delimiter">(</span><a title="KeyType" id="33143">key</a>: <a href="#9605" title="KeyType">KeyType</a><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(value: ValueType)Array[Byte]" id="33099">valueToBytes</a><span class="delimiter">(</span><a title="ValueType" id="33148">value</a>: <a href="#9606" title="ValueType">ValueType</a><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(b: BulkType)(Array[Byte], Array[Byte])" id="33100">bulkToBytes</a><span class="delimiter">(</span><a title="BulkType" id="33153">b</a>: <a href="#9607" title="BulkType">BulkType</a><span class="delimiter">)</span>: <span title="(Array[Byte], Array[Byte])" class="delimiter">(</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(schema: org.apache.avro.Schema)org.apache.avro.generic.IndexedRecord" id="33101">newRecord</a><span class="delimiter">(</span><a title="org.apache.avro.Schema" id="33166">schema</a>: <span title="org.apache.avro.Schema">Schema</span><span class="delimiter">)</span>: <span title="org.apache.avro.generic.IndexedRecord">IndexedRecord</span>
  <span class="keyword">def</span> <a title="=&gt; KeyType" id="33102">newKeyInstance</a>: <a href="#9605" title="KeyType">KeyType</a>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait KeyValueSerializer[KeyType &lt;: org.apache.avro.generic.IndexedRecord, ValueType &lt;: org.apache.avro.generic.IndexedRecord] extends java.lang.Object with edu.berkeley.cs.scads.storage.Serializer[KeyType,ValueType,(KeyType, ValueType)]" id="9608">KeyValueSerializer</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9609">KeyType</a> &lt;: IndexedRecord, <a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9610">ValueType</a> &lt;: IndexedRecord<span class="delimiter">]</span> 
  <span class="keyword">extends</span> <a href="#9604" title="edu.berkeley.cs.scads.storage.Serializer[KeyType,ValueType,(KeyType, ValueType)]">Serializer</a><span class="delimiter">[</span>KeyType, ValueType, <span class="delimiter">(</span>KeyType, ValueType<span class="delimiter">)</span><span class="delimiter">]</span>

<span class="keyword">trait</span> <a title="trait PairSerializer[PairType &lt;: edu.berkeley.cs.avro.marker.AvroPair] extends java.lang.Object with edu.berkeley.cs.scads.storage.Serializer[org.apache.avro.generic.IndexedRecord,org.apache.avro.generic.IndexedRecord,PairType]" id="9611">PairSerializer</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: edu.berkeley.cs.avro.marker.AvroPair" id="9612">PairType</a> &lt;: AvroPair<span class="delimiter">]</span> 
  <span class="keyword">extends</span> <a href="#9604" title="edu.berkeley.cs.scads.storage.Serializer[org.apache.avro.generic.IndexedRecord,org.apache.avro.generic.IndexedRecord,PairType]">Serializer</a><span class="delimiter">[</span>IndexedRecord, IndexedRecord, PairType<span class="delimiter">]</span>

<span class="keyword">trait</span> <a title="trait Protocol extends java.lang.Object" id="9613">Protocol</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(key: Array[Byte])Option[Array[Byte]]" id="13540">getBytes</a><span class="delimiter">(</span><a title="Array[Byte]" id="40947">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(key: Array[Byte], value: Option[Array[Byte]])Unit" id="13541">putBytes</a><span class="delimiter">(</span><a title="Array[Byte]" id="49868">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Option[Array[Byte]]" id="49869">value</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">def</span> <a title="(key: Array[Byte], value: Option[Array[Byte]])edu.berkeley.cs.scads.comm.ScadsFuture[Unit]" id="13542">asyncPutBytes</a><span class="delimiter">(</span><a title="Array[Byte]" id="49870">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Option[Array[Byte]]" id="49871">value</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Unit]">ScadsFuture</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span>

  <span class="comment">/* TODO: Thread safety? */</span>
  <span class="keyword">def</span> <a title="()Unit" id="13543">flushBulkBytes</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">def</span> <a title="(key: Array[Byte], value: Array[Byte])Unit" id="13544">putBulkBytes</a><span class="delimiter">(</span><a title="Array[Byte]" id="43470">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Array[Byte]" id="43471">value</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="keyword">def</span> <a title="(key: Array[Byte])edu.berkeley.cs.scads.comm.ScadsFuture[Option[Array[Byte]]]" id="13545">asyncGetBytes</a><span class="delimiter">(</span><a title="Array[Byte]" id="40927">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Option[Array[Byte]]]">ScadsFuture</span><span class="delimiter">[</span>Option<span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span>
<span class="delimiter">}</span>
<span class="keyword">trait</span> <a title="trait RangeProtocol extends java.lang.Object with edu.berkeley.cs.scads.storage.Protocol" id="9614">RangeProtocol</a> <span class="keyword">extends</span> <a href="#9613" title="edu.berkeley.cs.scads.storage.Protocol">Protocol</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(start: Option[Array[Byte]], end: Option[Array[Byte]], limit: Option[Int], offset: Option[Int], ascending: Boolean)Seq[(Array[Byte], Array[Byte])]" id="33570">getKeys</a><span class="delimiter">(</span><a title="Option[Array[Byte]]" id="46844">start</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, 
              <a title="Option[Array[Byte]]" id="46845">end</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, 
              <a title="Option[Int]" id="46846">limit</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>, 
              <a title="Option[Int]" id="46847">offset</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>, 
              <a title="Boolean" id="46848">ascending</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Seq[(Array[Byte], Array[Byte])]">Seq</span><span class="delimiter">[</span><span class="delimiter">(</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(start: Option[Array[Byte]], end: Option[Array[Byte]], limit: Option[Int], offset: Option[Int], ascending: Boolean)edu.berkeley.cs.scads.comm.ScadsFuture[Seq[(Array[Byte], Array[Byte])]]" id="33571">asyncGetKeys</a><span class="delimiter">(</span><a title="Option[Array[Byte]]" id="49873">start</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, 
                   <a title="Option[Array[Byte]]" id="49874">end</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, 
                   <a title="Option[Int]" id="49875">limit</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>, 
                   <a title="Option[Int]" id="49876">offset</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>, 
                   <a title="Boolean" id="49877">ascending</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Seq[(Array[Byte], Array[Byte])]]">ScadsFuture</span><span class="delimiter">[</span>Seq<span class="delimiter">[</span><span class="delimiter">(</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(parser: edu.berkeley.cs.scads.storage.RecParser, locations: Array[String], firstKey: Option[Array[Byte]], lastKey: Option[Array[Byte]])Unit" id="33572">putBulkLocations</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.storage.RecParser" id="49879">parser</a>:<a href="../server/PartitionHandler.scala.html#9816" title="edu.berkeley.cs.scads.storage.RecParser">RecParser</a>,
                       <a title="Array[String]" id="49880">locations</a>:<span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span>,
                       <a title="Option[Array[Byte]]" id="49881">firstKey</a>:<span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>,
                       <a title="Option[Array[Byte]]" id="49882">lastKey</a>:<span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait KeyRoutable extends java.lang.Object" id="9615">KeyRoutable</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(key: Array[Byte])Seq[edu.berkeley.cs.scads.comm.PartitionService]" id="13619">serversForKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="49889">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Seq[edu.berkeley.cs.scads.comm.PartitionService]">Seq</span><span class="delimiter">[</span>PartitionService<span class="delimiter">]</span>

  <span class="comment">// type of partition this routable talks to</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="13620">partitionType</a>:<span title="String">String</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(newTable: Array[Byte])Unit" id="13621">onRoutingTableChanged</a><span class="delimiter">(</span><a title="Array[Byte]" id="49890">newTable</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(key: Array[Byte])Array[Byte]" id="13622">convertToRoutingKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="49891">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>
<span class="delimiter">}</span>

case <span class="keyword">class</span> <a title="class RangeDesc extends java.lang.Object with ScalaObject with Product with Serializable" id="50053">RangeDesc</a><a href="#50053" title="ScalaObject" class="delimiter">(</a><a title="Option[Array[Byte]]" id="50046">startKey</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="Option[Array[Byte]]" id="50047">endKey</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="Seq[edu.berkeley.cs.scads.comm.PartitionService]" id="50048">servers</a>: <span title="Seq[edu.berkeley.cs.scads.comm.PartitionService]">Seq</span><span class="delimiter">[</span>PartitionService<span class="delimiter">]</span><span class="delimiter">)</span>
<span class="keyword">trait</span> <a title="trait KeyRangeRoutable extends java.lang.Object with edu.berkeley.cs.scads.storage.KeyRoutable" id="9619">KeyRangeRoutable</a> <span class="keyword">extends</span> <a href="#9615" title="edu.berkeley.cs.scads.storage.KeyRoutable">KeyRoutable</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(start: Option[Array[Byte]], end: Option[Array[Byte]])Seq[edu.berkeley.cs.scads.storage.RangeDesc]" id="13651">serversForKeyRange</a><span class="delimiter">(</span><a title="Option[Array[Byte]]" id="27026">start</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="Option[Array[Byte]]" id="27027">end</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Seq[edu.berkeley.cs.scads.storage.RangeDesc]">Seq</span><span class="delimiter">[</span>RangeDesc<span class="delimiter">]</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(key: Array[Byte])Array[Byte]" id="13652">convertFromRoutingKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="49969">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait KeyPartitionable extends java.lang.Object" id="9620">KeyPartitionable</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(splitKeys: Seq[Array[Byte]])Unit" id="38002">splitPartition</a><span class="delimiter">(</span><a title="Seq[Array[Byte]]" id="49972">splitKeys</a>: <span title="Seq[Array[Byte]]">Seq</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">def</span> <a title="(mergeKeys: Seq[Array[Byte]])Unit" id="38003">mergePartition</a><span class="delimiter">(</span><a title="Seq[Array[Byte]]" id="49973">mergeKeys</a>: <span title="Seq[Array[Byte]]">Seq</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="keyword">def</span> <a title="(partitionHandlers: Seq[edu.berkeley.cs.scads.comm.PartitionService])Unit" id="38004">deletePartitions</a><span class="delimiter">(</span><a title="Seq[edu.berkeley.cs.scads.comm.PartitionService]" id="49974">partitionHandlers</a>: <span title="Seq[edu.berkeley.cs.scads.comm.PartitionService]">Seq</span><span class="delimiter">[</span>PartitionService<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="comment">/** For each target, replace the PartitionService on the StorageService */</span>
  <span class="keyword">def</span> <a title="(targets: Seq[(edu.berkeley.cs.scads.comm.PartitionService, edu.berkeley.cs.scads.comm.StorageService)])Seq[edu.berkeley.cs.scads.comm.PartitionService]" id="38005">replicatePartitions</a><span class="delimiter">(</span><a title="Seq[(edu.berkeley.cs.scads.comm.PartitionService, edu.berkeley.cs.scads.comm.StorageService)]" id="49975">targets</a>: <span title="Seq[(edu.berkeley.cs.scads.comm.PartitionService, edu.berkeley.cs.scads.comm.StorageService)]">Seq</span><span class="delimiter">[</span><span class="delimiter">(</span>PartitionService, StorageService<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Seq[edu.berkeley.cs.scads.comm.PartitionService]">Seq</span><span class="delimiter">[</span>PartitionService<span class="delimiter">]</span>

  <span class="comment">/** sets the partition scheme to be exactly that which is represented by the input.
   * any previously existing partitions are thrown away. it is required that
   * length of (scheme) &gt;= 1 and that the 1st split key is None */</span>
  <span class="keyword">def</span> <a title="(scheme: Seq[(Option[Array[Byte]], Seq[edu.berkeley.cs.scads.comm.StorageService])])Unit" id="38006">setPartitionScheme</a><span class="delimiter">(</span><a title="Seq[(Option[Array[Byte]], Seq[edu.berkeley.cs.scads.comm.StorageService])]" id="50026">scheme</a>: <span title="Seq[(Option[Array[Byte]], Seq[edu.berkeley.cs.scads.comm.StorageService])]">Seq</span><span class="delimiter">[</span><span class="delimiter">(</span>Option<span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, Seq<span class="delimiter">[</span>StorageService<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="keyword">def</span> <a title="=&gt; edu.berkeley.cs.scads.util.RangeTable[Array[Byte],edu.berkeley.cs.scads.comm.PartitionService]" id="38007">routingTable</a>: <a href="../util/RangeTable.scala.html#9986" title="edu.berkeley.cs.scads.util.RangeTable[Array[Byte],edu.berkeley.cs.scads.comm.PartitionService]">RangeTable</a><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, PartitionService<span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait GlobalMetadata extends java.lang.Object" id="9621">GlobalMetadata</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="13629">name</a>: <span title="String">String</span>

  <span class="keyword">def</span> <a title="=&gt; org.apache.avro.Schema" id="13630">keySchema</a>: <span title="org.apache.avro.Schema">Schema</span>
  <span class="keyword">def</span> <a title="=&gt; org.apache.avro.Schema" id="13631">valueSchema</a>: <span title="org.apache.avro.Schema">Schema</span>

  <span class="keyword">def</span> <a title="=&gt; String" id="13632">valueClass</a>: <span title="String">String</span>

  <span class="keyword">def</span> <a title="=&gt; org.apache.avro.Schema" id="13633">remoteKeySchema</a>: <span title="org.apache.avro.Schema">Schema</span>
  <span class="keyword">def</span> <a title="=&gt; org.apache.avro.Schema" id="13634">remoteValueSchema</a>: <span title="org.apache.avro.Schema">Schema</span>

  <span class="comment">/** The GlobalMetadata catalogue is implementation agnostic, but must
   * support a simple persistent key/value configuration map (string -&gt; byte array) */</span>
  <span class="keyword">def</span> <a title="(key: String, func: () =&gt; Unit)Array[Byte]" id="13635">watchMetadata</a><span class="delimiter">(</span><a title="String" id="50028">key</a>: <span title="String">String</span>, <a title="() =&gt; Unit" id="50029">func</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(key: String)Option[Array[Byte]]" id="13636">getMetadata</a><span class="delimiter">(</span><a title="String" id="45334">key</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span> 
  <span class="keyword">def</span> <a title="(key: String, value: Array[Byte])Unit" id="13637">putMetadata</a><span class="delimiter">(</span><a title="String" id="46816">key</a>: <span title="String">String</span>, <a title="Array[Byte]" id="46817">value</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> 
  <span class="keyword">def</span> <a title="(key: String)Unit" id="13638">deleteMetadata</a><span class="delimiter">(</span><a title="String" id="50030">key</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">def</span> <a title="()Unit" id="13639">waitUntilMetadataPropagated</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait PairGlobalMetadata extends java.lang.Object with edu.berkeley.cs.scads.storage.GlobalMetadata" id="9622">PairGlobalMetadata</a> <span class="keyword">extends</span> <a href="#9621" title="edu.berkeley.cs.scads.storage.GlobalMetadata">GlobalMetadata</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; org.apache.avro.Schema" id="33257">pairSchema</a>: <span title="org.apache.avro.Schema">Schema</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait RecordMetadata extends java.lang.Object" id="9623">RecordMetadata</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(x: Array[Byte], y: Array[Byte])Int" id="13623">compareKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="50035">x</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Array[Byte]" id="50036">y</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Int">Int</span>
  <span class="keyword">def</span> <a title="(x: Array[Byte])Int" id="13624">hashKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="50037">x</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Int">Int</span>

  <span class="comment">/** Create a value w/ metadata prepended */</span>
  <span class="keyword">def</span> <a title="(rec: Array[Byte])Array[Byte]" id="13625">createMetadata</a><span class="delimiter">(</span><a title="Array[Byte]" id="50038">rec</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>

  <span class="comment">/** Compare 2 values based on metadata */</span>
  <span class="keyword">def</span> <a title="(lhs: Array[Byte], rhs: Array[Byte])Int" id="13626">compareMetadata</a><span class="delimiter">(</span><a title="Array[Byte]" id="50039">lhs</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Array[Byte]" id="50040">rhs</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Int">Int</span>

  <span class="comment">/** Given a byte string which contains both value and metadata, extracts
   * this information and returns a tuple of (metadata, value) */</span>
  <span class="keyword">def</span> <a title="(value: Array[Byte])(Array[Byte], Array[Byte])" id="13627">extractMetadataAndRecordFromValue</a><span class="delimiter">(</span><a title="Array[Byte]" id="50041">value</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="(Array[Byte], Array[Byte])" class="delimiter">(</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>

  <span class="comment">/** strips out the metadata from the value. exists for performance
   reasons (is NOT implemented as extractMetadataAndRecordFromValue(value)._2) */</span>
  <span class="keyword">def</span> <a title="(value: Array[Byte])Array[Byte]" id="13628">extractRecordFromValue</a><span class="delimiter">(</span><a title="Array[Byte]" id="50042">value</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span> 
<span class="delimiter">}</span>

        </pre>
    </body>
</html>