<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>client/Interfaces.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> edu.berkeley.cs.scads.storage

<span class="keyword">import</span> edu.berkeley.cs.avro.marker._
<span class="keyword">import</span> edu.berkeley.cs.scads.comm._
<span class="keyword">import</span> edu.berkeley.cs.scads.util._

<span class="keyword">import</span> org.apache.avro.Schema
<span class="keyword">import</span> org.apache.avro.generic._

<span class="keyword">trait</span> <a title="trait PersistentStore[BulkPutType] extends java.lang.Object" id="9589">PersistentStore</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="9590">BulkPutType</a><span class="delimiter">]</span> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(that: TraversableOnce[BulkPutType])Unit" id="33545">++=</a><span class="delimiter">(</span><a title="TraversableOnce[BulkPutType]" id="43386">that</a>: <span title="TraversableOnce[BulkPutType]">TraversableOnce</span><span class="delimiter">[</span>BulkPutType<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
<span class="delimiter">}</span>
<span class="keyword">trait</span> <a title="trait KeyValueStoreLike[KeyType &lt;: org.apache.avro.generic.IndexedRecord, ValueType &lt;: org.apache.avro.generic.IndexedRecord, BulkPutType] extends java.lang.Object with edu.berkeley.cs.scads.storage.PersistentStore[BulkPutType]" id="9591">KeyValueStoreLike</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9592">KeyType</a> &lt;: IndexedRecord, 
                        <a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9593">ValueType</a> &lt;: IndexedRecord,
                        <a title="&gt;: Nothing &lt;: Any" id="9594">BulkPutType</a><span class="delimiter">]</span>
  <span class="keyword">extends</span> <a href="#9589" title="edu.berkeley.cs.scads.storage.PersistentStore[BulkPutType]">PersistentStore</a><span class="delimiter">[</span>BulkPutType<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(key: KeyType)Option[ValueType]" id="33546">get</a><span class="delimiter">(</span><a title="KeyType" id="33576">key</a>: <a href="#9592" title="KeyType">KeyType</a><span class="delimiter">)</span>: <span title="Option[ValueType]">Option</span><span class="delimiter">[</span>ValueType<span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(key: KeyType, value: Option[ValueType])Unit" id="33547">put</a><span class="delimiter">(</span><a title="KeyType" id="33592">key</a>: <a href="#9592" title="KeyType">KeyType</a>, <a title="Option[ValueType]" id="33593">value</a>: <span title="Option[ValueType]">Option</span><span class="delimiter">[</span>ValueType<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">def</span> <a title="(key: KeyType, value: Option[ValueType])edu.berkeley.cs.scads.comm.ScadsFuture[Unit]" id="33548">asyncPut</a><span class="delimiter">(</span><a title="KeyType" id="49842">key</a>: <a href="#9592" title="KeyType">KeyType</a>, <a title="Option[ValueType]" id="49843">value</a>: <span title="Option[ValueType]">Option</span><span class="delimiter">[</span>ValueType<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Unit]">ScadsFuture</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(key: KeyType)edu.berkeley.cs.scads.comm.ScadsFuture[Option[ValueType]]" id="33549">asyncGet</a><span class="delimiter">(</span><a title="KeyType" id="42681">key</a>: <a href="#9592" title="KeyType">KeyType</a><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Option[ValueType]]">ScadsFuture</span><span class="delimiter">[</span>Option<span class="delimiter">[</span>ValueType<span class="delimiter">]</span><span class="delimiter">]</span>
<span class="delimiter">}</span>
<span class="keyword">trait</span> <a title="trait RangeKeyValueStoreLike[KeyType &lt;: org.apache.avro.generic.IndexedRecord, ValueType &lt;: org.apache.avro.generic.IndexedRecord, RangeType] extends java.lang.Object with edu.berkeley.cs.scads.storage.KeyValueStoreLike[KeyType,ValueType,RangeType]" id="9595">RangeKeyValueStoreLike</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9596">KeyType</a> &lt;: IndexedRecord,
                             <a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9597">ValueType</a> &lt;: IndexedRecord,
                             <a title="&gt;: Nothing &lt;: Any" id="9598">RangeType</a><span class="delimiter">]</span>
  <span class="keyword">extends</span> <a href="#9591" title="edu.berkeley.cs.scads.storage.KeyValueStoreLike[KeyType,ValueType,RangeType]">KeyValueStoreLike</a><span class="delimiter">[</span>KeyType, ValueType, RangeType<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(start: Option[KeyType], end: Option[KeyType], limit: Option[Int], offset: Option[Int], ascending: Boolean)Seq[RangeType]" id="33550">getRange</a><span class="delimiter">(</span><a title="Option[KeyType]" id="46828">start</a>: <span title="Option[KeyType]">Option</span><span class="delimiter">[</span>KeyType<span class="delimiter">]</span>, 
               <a title="Option[KeyType]" id="46829">end</a>: <span title="Option[KeyType]">Option</span><span class="delimiter">[</span>KeyType<span class="delimiter">]</span>, 
               <a title="Option[Int]" id="46834">limit</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span title="object None">None</span>, 
               <a title="Option[Int]" id="46835">offset</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span title="object None">None</span>, 
               <a title="Boolean" id="46836">ascending</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: <span title="Seq[RangeType]">Seq</span><span class="delimiter">[</span>RangeType<span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(start: Option[KeyType], end: Option[KeyType], limit: Option[Int], offset: Option[Int], ascending: Boolean)edu.berkeley.cs.scads.comm.ScadsFuture[Seq[RangeType]]" id="33551">asyncGetRange</a><span class="delimiter">(</span><a title="Option[KeyType]" id="49846">start</a>: <span title="Option[KeyType]">Option</span><span class="delimiter">[</span>KeyType<span class="delimiter">]</span>, 
                    <a title="Option[KeyType]" id="49847">end</a>: <span title="Option[KeyType]">Option</span><span class="delimiter">[</span>KeyType<span class="delimiter">]</span>, 
                    <a title="Option[Int]" id="49852">limit</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span title="object None">None</span>, 
                    <a title="Option[Int]" id="49853">offset</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span title="object None">None</span>, 
                    <a title="Boolean" id="49854">ascending</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Seq[RangeType]]">ScadsFuture</span><span class="delimiter">[</span>Seq<span class="delimiter">[</span>RangeType<span class="delimiter">]</span><span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait Serializer[KeyType &lt;: org.apache.avro.generic.IndexedRecord, ValueType &lt;: org.apache.avro.generic.IndexedRecord, BulkType] extends java.lang.Object" id="9599">Serializer</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9600">KeyType</a> &lt;: IndexedRecord, <a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9601">ValueType</a> &lt;: IndexedRecord, <a title="&gt;: Nothing &lt;: Any" id="9602">BulkType</a><span class="delimiter">]</span> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(bytes: Array[Byte])KeyType" id="33096">bytesToKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="33119">bytes</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#9600" title="KeyType">KeyType</a>
  <span class="keyword">def</span> <a title="(bytes: Array[Byte])ValueType" id="33097">bytesToValue</a><span class="delimiter">(</span><a title="Array[Byte]" id="33126">bytes</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#9601" title="ValueType">ValueType</a>
  <span class="keyword">def</span> <a title="(k: Array[Byte], v: Array[Byte])BulkType" id="33098">bytesToBulk</a><span class="delimiter">(</span><a title="Array[Byte]" id="33134">k</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Array[Byte]" id="33135">v</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#9602" title="BulkType">BulkType</a>
  <span class="keyword">def</span> <a title="(key: KeyType)Array[Byte]" id="33099">keyToBytes</a><span class="delimiter">(</span><a title="KeyType" id="33144">key</a>: <a href="#9600" title="KeyType">KeyType</a><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(value: ValueType)Array[Byte]" id="33100">valueToBytes</a><span class="delimiter">(</span><a title="ValueType" id="33149">value</a>: <a href="#9601" title="ValueType">ValueType</a><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(b: BulkType)(Array[Byte], Array[Byte])" id="33101">bulkToBytes</a><span class="delimiter">(</span><a title="BulkType" id="33154">b</a>: <a href="#9602" title="BulkType">BulkType</a><span class="delimiter">)</span>: <span title="(Array[Byte], Array[Byte])" class="delimiter">(</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(schema: org.apache.avro.Schema)org.apache.avro.generic.IndexedRecord" id="33102">newRecord</a><span class="delimiter">(</span><a title="org.apache.avro.Schema" id="33167">schema</a>: <span title="org.apache.avro.Schema">Schema</span><span class="delimiter">)</span>: <span title="org.apache.avro.generic.IndexedRecord">IndexedRecord</span>
  <span class="keyword">def</span> <a title="=&gt; KeyType" id="33103">newKeyInstance</a>: <a href="#9600" title="KeyType">KeyType</a>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait KeyValueSerializer[KeyType &lt;: org.apache.avro.generic.IndexedRecord, ValueType &lt;: org.apache.avro.generic.IndexedRecord] extends java.lang.Object with edu.berkeley.cs.scads.storage.Serializer[KeyType,ValueType,(KeyType, ValueType)]" id="9603">KeyValueSerializer</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9604">KeyType</a> &lt;: IndexedRecord, <a title="&gt;: Nothing &lt;: org.apache.avro.generic.IndexedRecord" id="9605">ValueType</a> &lt;: IndexedRecord<span class="delimiter">]</span> 
  <span class="keyword">extends</span> <a href="#9599" title="edu.berkeley.cs.scads.storage.Serializer[KeyType,ValueType,(KeyType, ValueType)]">Serializer</a><span class="delimiter">[</span>KeyType, ValueType, <span class="delimiter">(</span>KeyType, ValueType<span class="delimiter">)</span><span class="delimiter">]</span>

<span class="keyword">trait</span> <a title="trait PairSerializer[PairType &lt;: edu.berkeley.cs.avro.marker.AvroPair] extends java.lang.Object with edu.berkeley.cs.scads.storage.Serializer[org.apache.avro.generic.IndexedRecord,org.apache.avro.generic.IndexedRecord,PairType]" id="9606">PairSerializer</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: edu.berkeley.cs.avro.marker.AvroPair" id="9607">PairType</a> &lt;: AvroPair<span class="delimiter">]</span> 
  <span class="keyword">extends</span> <a href="#9599" title="edu.berkeley.cs.scads.storage.Serializer[org.apache.avro.generic.IndexedRecord,org.apache.avro.generic.IndexedRecord,PairType]">Serializer</a><span class="delimiter">[</span>IndexedRecord, IndexedRecord, PairType<span class="delimiter">]</span>

<span class="keyword">trait</span> <a title="trait Protocol extends java.lang.Object" id="9608">Protocol</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(key: Array[Byte])Option[Array[Byte]]" id="13534">getBytes</a><span class="delimiter">(</span><a title="Array[Byte]" id="40946">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(key: Array[Byte], value: Option[Array[Byte]])Unit" id="13535">putBytes</a><span class="delimiter">(</span><a title="Array[Byte]" id="49867">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Option[Array[Byte]]" id="49868">value</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">def</span> <a title="(key: Array[Byte], value: Option[Array[Byte]])edu.berkeley.cs.scads.comm.ScadsFuture[Unit]" id="13536">asyncPutBytes</a><span class="delimiter">(</span><a title="Array[Byte]" id="49869">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Option[Array[Byte]]" id="49870">value</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Unit]">ScadsFuture</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span>

  <span class="comment">/* TODO: Thread safety? */</span>
  <span class="keyword">def</span> <a title="()Unit" id="13537">flushBulkBytes</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">def</span> <a title="(key: Array[Byte], value: Array[Byte])Unit" id="13538">putBulkBytes</a><span class="delimiter">(</span><a title="Array[Byte]" id="43469">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Array[Byte]" id="43470">value</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="keyword">def</span> <a title="(key: Array[Byte])edu.berkeley.cs.scads.comm.ScadsFuture[Option[Array[Byte]]]" id="13539">asyncGetBytes</a><span class="delimiter">(</span><a title="Array[Byte]" id="40926">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Option[Array[Byte]]]">ScadsFuture</span><span class="delimiter">[</span>Option<span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">]</span>
<span class="delimiter">}</span>
<span class="keyword">trait</span> <a title="trait RangeProtocol extends java.lang.Object with edu.berkeley.cs.scads.storage.Protocol" id="9609">RangeProtocol</a> <span class="keyword">extends</span> <a href="#9608" title="edu.berkeley.cs.scads.storage.Protocol">Protocol</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(start: Option[Array[Byte]], end: Option[Array[Byte]], limit: Option[Int], offset: Option[Int], ascending: Boolean)Seq[(Array[Byte], Array[Byte])]" id="33571">getKeys</a><span class="delimiter">(</span><a title="Option[Array[Byte]]" id="46843">start</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, 
              <a title="Option[Array[Byte]]" id="46844">end</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, 
              <a title="Option[Int]" id="46845">limit</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>, 
              <a title="Option[Int]" id="46846">offset</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>, 
              <a title="Boolean" id="46847">ascending</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Seq[(Array[Byte], Array[Byte])]">Seq</span><span class="delimiter">[</span><span class="delimiter">(</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(start: Option[Array[Byte]], end: Option[Array[Byte]], limit: Option[Int], offset: Option[Int], ascending: Boolean)edu.berkeley.cs.scads.comm.ScadsFuture[Seq[(Array[Byte], Array[Byte])]]" id="33572">asyncGetKeys</a><span class="delimiter">(</span><a title="Option[Array[Byte]]" id="49872">start</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, 
                   <a title="Option[Array[Byte]]" id="49873">end</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, 
                   <a title="Option[Int]" id="49874">limit</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>, 
                   <a title="Option[Int]" id="49875">offset</a>: <span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>, 
                   <a title="Boolean" id="49876">ascending</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="edu.berkeley.cs.scads.comm.ScadsFuture[Seq[(Array[Byte], Array[Byte])]]">ScadsFuture</span><span class="delimiter">[</span>Seq<span class="delimiter">[</span><span class="delimiter">(</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(parser: edu.berkeley.cs.scads.storage.RecParser, locations: Array[String], firstKey: Option[Array[Byte]], lastKey: Option[Array[Byte]])Unit" id="33573">putBulkLocations</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.storage.RecParser" id="49878">parser</a>:<a href="../server/PartitionHandler.scala.html#9810" title="edu.berkeley.cs.scads.storage.RecParser">RecParser</a>,
                       <a title="Array[String]" id="49879">locations</a>:<span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span>,
                       <a title="Option[Array[Byte]]" id="49880">firstKey</a>:<span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>,
                       <a title="Option[Array[Byte]]" id="49881">lastKey</a>:<span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait KeyRoutable extends java.lang.Object" id="9610">KeyRoutable</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(key: Array[Byte])Seq[edu.berkeley.cs.scads.comm.PartitionService]" id="13620">serversForKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="49888">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Seq[edu.berkeley.cs.scads.comm.PartitionService]">Seq</span><span class="delimiter">[</span>PartitionService<span class="delimiter">]</span>

  <span class="comment">// type of partition this routable talks to</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="13621">partitionType</a>:<span title="String">String</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(newTable: Array[Byte])Unit" id="13622">onRoutingTableChanged</a><span class="delimiter">(</span><a title="Array[Byte]" id="49889">newTable</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(key: Array[Byte])Array[Byte]" id="13623">convertToRoutingKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="49890">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>
<span class="delimiter">}</span>

case <span class="keyword">class</span> <a title="class RangeDesc extends java.lang.Object with ScalaObject with Product with Serializable" id="50052">RangeDesc</a><a href="#50052" title="ScalaObject" class="delimiter">(</a><a title="Option[Array[Byte]]" id="50045">startKey</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="Option[Array[Byte]]" id="50046">endKey</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="Seq[edu.berkeley.cs.scads.comm.PartitionService]" id="50047">servers</a>: <span title="Seq[edu.berkeley.cs.scads.comm.PartitionService]">Seq</span><span class="delimiter">[</span>PartitionService<span class="delimiter">]</span><span class="delimiter">)</span>
<span class="keyword">trait</span> <a title="trait KeyRangeRoutable extends java.lang.Object with edu.berkeley.cs.scads.storage.KeyRoutable" id="9614">KeyRangeRoutable</a> <span class="keyword">extends</span> <a href="#9610" title="edu.berkeley.cs.scads.storage.KeyRoutable">KeyRoutable</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(start: Option[Array[Byte]], end: Option[Array[Byte]])Seq[edu.berkeley.cs.scads.storage.RangeDesc]" id="13652">serversForKeyRange</a><span class="delimiter">(</span><a title="Option[Array[Byte]]" id="27027">start</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="Option[Array[Byte]]" id="27028">end</a>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Seq[edu.berkeley.cs.scads.storage.RangeDesc]">Seq</span><span class="delimiter">[</span>RangeDesc<span class="delimiter">]</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(key: Array[Byte])Array[Byte]" id="13653">convertFromRoutingKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="49968">key</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait KeyPartitionable extends java.lang.Object" id="9615">KeyPartitionable</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(splitKeys: Seq[Array[Byte]])Unit" id="38003">splitPartition</a><span class="delimiter">(</span><a title="Seq[Array[Byte]]" id="49971">splitKeys</a>: <span title="Seq[Array[Byte]]">Seq</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">def</span> <a title="(mergeKeys: Seq[Array[Byte]])Unit" id="38004">mergePartition</a><span class="delimiter">(</span><a title="Seq[Array[Byte]]" id="49972">mergeKeys</a>: <span title="Seq[Array[Byte]]">Seq</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="keyword">def</span> <a title="(partitionHandlers: Seq[edu.berkeley.cs.scads.comm.PartitionService])Unit" id="38005">deletePartitions</a><span class="delimiter">(</span><a title="Seq[edu.berkeley.cs.scads.comm.PartitionService]" id="49973">partitionHandlers</a>: <span title="Seq[edu.berkeley.cs.scads.comm.PartitionService]">Seq</span><span class="delimiter">[</span>PartitionService<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="comment">/** For each target, replace the PartitionService on the StorageService */</span>
  <span class="keyword">def</span> <a title="(targets: Seq[(edu.berkeley.cs.scads.comm.PartitionService, edu.berkeley.cs.scads.comm.StorageService)])Seq[edu.berkeley.cs.scads.comm.PartitionService]" id="38006">replicatePartitions</a><span class="delimiter">(</span><a title="Seq[(edu.berkeley.cs.scads.comm.PartitionService, edu.berkeley.cs.scads.comm.StorageService)]" id="49974">targets</a>: <span title="Seq[(edu.berkeley.cs.scads.comm.PartitionService, edu.berkeley.cs.scads.comm.StorageService)]">Seq</span><span class="delimiter">[</span><span class="delimiter">(</span>PartitionService, StorageService<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Seq[edu.berkeley.cs.scads.comm.PartitionService]">Seq</span><span class="delimiter">[</span>PartitionService<span class="delimiter">]</span>

  <span class="comment">/** sets the partition scheme to be exactly that which is represented by the input.
   * any previously existing partitions are thrown away. it is required that
   * length of (scheme) &gt;= 1 and that the 1st split key is None */</span>
  <span class="keyword">def</span> <a title="(scheme: Seq[(Option[Array[Byte]], Seq[edu.berkeley.cs.scads.comm.StorageService])])Unit" id="38007">setPartitionScheme</a><span class="delimiter">(</span><a title="Seq[(Option[Array[Byte]], Seq[edu.berkeley.cs.scads.comm.StorageService])]" id="50025">scheme</a>: <span title="Seq[(Option[Array[Byte]], Seq[edu.berkeley.cs.scads.comm.StorageService])]">Seq</span><span class="delimiter">[</span><span class="delimiter">(</span>Option<span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span>, Seq<span class="delimiter">[</span>StorageService<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>

  <span class="keyword">def</span> <a title="=&gt; edu.berkeley.cs.scads.util.RangeTable[Array[Byte],edu.berkeley.cs.scads.comm.PartitionService]" id="38008">routingTable</a>: <a href="../util/RangeTable.scala.html#9980" title="edu.berkeley.cs.scads.util.RangeTable[Array[Byte],edu.berkeley.cs.scads.comm.PartitionService]">RangeTable</a><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, PartitionService<span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait GlobalMetadata extends java.lang.Object" id="9616">GlobalMetadata</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; String" id="13630">name</a>: <span title="String">String</span>

  <span class="keyword">def</span> <a title="=&gt; org.apache.avro.Schema" id="13631">keySchema</a>: <span title="org.apache.avro.Schema">Schema</span>
  <span class="keyword">def</span> <a title="=&gt; org.apache.avro.Schema" id="13632">valueSchema</a>: <span title="org.apache.avro.Schema">Schema</span>

  <span class="keyword">def</span> <a title="=&gt; String" id="13633">valueClass</a>: <span title="String">String</span>

  <span class="keyword">def</span> <a title="=&gt; org.apache.avro.Schema" id="13634">remoteKeySchema</a>: <span title="org.apache.avro.Schema">Schema</span>
  <span class="keyword">def</span> <a title="=&gt; org.apache.avro.Schema" id="13635">remoteValueSchema</a>: <span title="org.apache.avro.Schema">Schema</span>

  <span class="comment">/** The GlobalMetadata catalogue is implementation agnostic, but must
   * support a simple persistent key/value configuration map (string -&gt; byte array) */</span>
  <span class="keyword">def</span> <a title="(key: String, func: () =&gt; Unit)Array[Byte]" id="13636">watchMetadata</a><span class="delimiter">(</span><a title="String" id="50027">key</a>: <span title="String">String</span>, <a title="() =&gt; Unit" id="50028">func</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(key: String)Option[Array[Byte]]" id="13637">getMetadata</a><span class="delimiter">(</span><a title="String" id="45333">key</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[Array[Byte]]">Option</span><span class="delimiter">[</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">]</span> 
  <span class="keyword">def</span> <a title="(key: String, value: Array[Byte])Unit" id="13638">putMetadata</a><span class="delimiter">(</span><a title="String" id="46815">key</a>: <span title="String">String</span>, <a title="Array[Byte]" id="46816">value</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> 
  <span class="keyword">def</span> <a title="(key: String)Unit" id="13639">deleteMetadata</a><span class="delimiter">(</span><a title="String" id="50029">key</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
  <span class="keyword">def</span> <a title="()Unit" id="13640">waitUntilMetadataPropagated</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait PairGlobalMetadata extends java.lang.Object with edu.berkeley.cs.scads.storage.GlobalMetadata" id="9617">PairGlobalMetadata</a> <span class="keyword">extends</span> <a href="#9616" title="edu.berkeley.cs.scads.storage.GlobalMetadata">GlobalMetadata</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; org.apache.avro.Schema" id="33258">pairSchema</a>: <span title="org.apache.avro.Schema">Schema</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait RecordMetadata extends java.lang.Object" id="9618">RecordMetadata</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(x: Array[Byte], y: Array[Byte])Int" id="13624">compareKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="50034">x</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Array[Byte]" id="50035">y</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Int">Int</span>
  <span class="keyword">def</span> <a title="(x: Array[Byte])Int" id="13625">hashKey</a><span class="delimiter">(</span><a title="Array[Byte]" id="50036">x</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Int">Int</span>

  <span class="comment">/** Create a value w/ metadata prepended */</span>
  <span class="keyword">def</span> <a title="(rec: Array[Byte])Array[Byte]" id="13626">createMetadata</a><span class="delimiter">(</span><a title="Array[Byte]" id="50037">rec</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>

  <span class="comment">/** Compare 2 values based on metadata */</span>
  <span class="keyword">def</span> <a title="(lhs: Array[Byte], rhs: Array[Byte])Int" id="13627">compareMetadata</a><span class="delimiter">(</span><a title="Array[Byte]" id="50038">lhs</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Array[Byte]" id="50039">rhs</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Int">Int</span>

  <span class="comment">/** Given a byte string which contains both value and metadata, extracts
   * this information and returns a tuple of (metadata, value) */</span>
  <span class="keyword">def</span> <a title="(value: Array[Byte])(Array[Byte], Array[Byte])" id="13628">extractMetadataAndRecordFromValue</a><span class="delimiter">(</span><a title="Array[Byte]" id="50040">value</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="(Array[Byte], Array[Byte])" class="delimiter">(</span>Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span>, Array<span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>

  <span class="comment">/** strips out the metadata from the value. exists for performance
   reasons (is NOT implemented as extractMetadataAndRecordFromValue(value)._2) */</span>
  <span class="keyword">def</span> <a title="(value: Array[Byte])Array[Byte]" id="13629">extractRecordFromValue</a><span class="delimiter">(</span><a title="Array[Byte]" id="50041">value</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span> 
<span class="delimiter">}</span>

        </pre>
    </body>
</html>