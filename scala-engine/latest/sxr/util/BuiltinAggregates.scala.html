<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>util/BuiltinAggregates.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> edu.berkeley.cs.scads.util
<span class="keyword">import</span> org.apache.avro.Schema
<span class="keyword">import</span> edu.berkeley.cs.avro.marker.AvroRecord
<span class="keyword">import</span> edu.berkeley.cs.avro.runtime.ScalaSpecificRecord

case <span class="keyword">class</span> <a href="#180692" title="class ValueAggContainer extends org.apache.avro.specific.SpecificRecordBase with edu.berkeley.cs.avro.runtime.HasAvroConversions with edu.berkeley.cs.avro.marker.AvroRecord with ScalaObject with Product with Serializable" id="109909">ValueAggContainer</a><a href="#109909" title="ScalaObject" class="delimiter">(</a><a href="#109909" title="()edu.berkeley.cs.scads.util.ValueAggContainer" id="133613" class="keyword">var</a> <a title="Double" id="109574">curval</a>: <span title="Double">Double</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="edu.berkeley.cs.avro.marker.AvroRecord">AvroRecord</span>
case <span class="keyword">class</span> <a href="#180702" title="class CountAggContainer extends org.apache.avro.specific.SpecificRecordBase with edu.berkeley.cs.avro.runtime.HasAvroConversions with edu.berkeley.cs.avro.marker.AvroRecord with ScalaObject with Product with Serializable" id="109905">CountAggContainer</a><a href="#109905" title="ScalaObject" class="delimiter">(</a><a href="#109905" title="()edu.berkeley.cs.scads.util.CountAggContainer" id="133623" class="keyword">var</a> <a title="Int" id="109483">curcount</a>: <span title="Int">Int</span>, <span class="keyword">var</span> <a title="Double" id="109484">curval</a>: <span title="Double">Double</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="edu.berkeley.cs.avro.marker.AvroRecord">AvroRecord</span>

<span class="comment">// average</span>
<span class="keyword">class</span> <a title="class AvgRemote extends java.lang.Object with edu.berkeley.cs.scads.util.RemoteAggregate[edu.berkeley.cs.scads.util.CountAggContainer,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord] with ScalaObject" id="10496">AvgRemote</a><a href="#10496" title="ScalaObject" class="delimiter">(</a><a title="String" id="109481">field</a>:<span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="AnalyticsUtils.scala.html#10478" title="edu.berkeley.cs.scads.util.RemoteAggregate[edu.berkeley.cs.scads.util.CountAggContainer,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord]">RemoteAggregate</a><span class="delimiter">[</span>CountAggContainer, ScalaSpecificRecord, ScalaSpecificRecord<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">var</span> <a title="Int" id="109474">pos</a> = -<span title="Int(-1)" class="int">1</span> <span class="comment">// will be updated first time we see a record</span>

  <span class="keyword">def</span> <a title="()edu.berkeley.cs.scads.util.CountAggContainer" id="109476">init</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#109905" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a> = <span class="delimiter">{</span>
    <a href="#109905" title="(curcount: Int, curval: Double)edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <span title="Double(0.0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(ag: edu.berkeley.cs.scads.util.CountAggContainer, key: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord, value: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord)edu.berkeley.cs.scads.util.CountAggContainer" id="109477">applyAggregate</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.CountAggContainer" id="109490">ag</a>: <a href="#109905" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a>, <a title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="109491">key</a>: <span title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">ScalaSpecificRecord</span>, <a title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="109492">value</a>: <span title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">ScalaSpecificRecord</span><span class="delimiter">)</span>: <a href="#109905" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#109474" title="=&gt; Int">pos</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <a href="#109474" title="(x$1: Int)Unit">pos</a> = <a href="#109492" title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">value</a>.<span title="()org.apache.avro.Schema">getSchema</span>.<span title="(x$1: java.lang.String)org.apache.avro.Schema.Field">getField</span><span class="delimiter">(</span><a href="#109481" title="String">field</a><span class="delimiter">)</span>.<span title="()Int">pos</span>
    <a href="#109490" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#109483" title="(x$1: Int)Unit">curcount</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
    <a href="#109490" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#109484" title="(x$1: Double)Unit">curval</a> = <a href="#109490" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#109484" title="=&gt; Double">curval</a> <span title="(x: Double)Double">+</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="AnalyticsUtils.scala.html#34633" title="(v: Any)Double">toDouble</a><span class="delimiter">(</span><a href="#109492" title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">value</a>.<span title="(x$1: Int)java.lang.Object">get</span><span class="delimiter">(</span><a href="#109474" title="=&gt; Int">pos</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x: Double)Double">-</span> <a href="#109490" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#109484" title="=&gt; Double">curval</a><span class="delimiter">)</span> <span title="(x: Int)Double">/</span> <a href="#109490" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#109483" title="=&gt; Int">curcount</a><span class="delimiter">)</span>
    <a href="#109490" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>    
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class AvgLocal extends edu.berkeley.cs.scads.util.LocalAggregate[edu.berkeley.cs.scads.util.CountAggContainer,Double] with ScalaObject" id="10497">AvgLocal</a> <a href="#10497" title="ScalaObject" class="keyword">extends</a> <a href="AnalyticsUtils.scala.html#10475" title="edu.berkeley.cs.scads.util.LocalAggregate[edu.berkeley.cs.scads.util.CountAggContainer,Double]">LocalAggregate</a><span class="delimiter">[</span>CountAggContainer, Double<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="()edu.berkeley.cs.scads.util.CountAggContainer" id="109519">init</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#109905" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a> = <span class="delimiter">{</span>
    <a href="#109905" title="(curcount: Int, curval: Double)edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <span title="Double(0.0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(cur: edu.berkeley.cs.scads.util.CountAggContainer, next: edu.berkeley.cs.scads.util.CountAggContainer)edu.berkeley.cs.scads.util.CountAggContainer" id="109520">foldFunction</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.CountAggContainer" id="109535">cur</a>: <a href="#109905" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a>, <a title="edu.berkeley.cs.scads.util.CountAggContainer" id="109536">next</a>: <a href="#109905" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a><span class="delimiter">)</span>: <a href="#109905" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a> = <span class="delimiter">{</span>
    <a href="#109535" title="edu.berkeley.cs.scads.util.CountAggContainer">cur</a>.<a href="#109483" title="(x$1: Int)Unit">curcount</a> <span title="(x: Int)Int">+=</span> <a href="#109536" title="edu.berkeley.cs.scads.util.CountAggContainer">next</a>.<a href="#109483" title="=&gt; Int">curcount</a>
    <a href="#109535" title="edu.berkeley.cs.scads.util.CountAggContainer">cur</a>.<a href="#109484" title="(x$1: Double)Unit">curval</a> = <a href="#109535" title="edu.berkeley.cs.scads.util.CountAggContainer">cur</a>.<a href="#109484" title="=&gt; Double">curval</a> <span title="(x: Double)Double">+</span> <span class="delimiter">(</span><a href="#109536" title="edu.berkeley.cs.scads.util.CountAggContainer">next</a>.<a href="#109484" title="=&gt; Double">curval</a> <span title="(x: Int)Double">*</span> <a href="#109536" title="edu.berkeley.cs.scads.util.CountAggContainer">next</a>.<a href="#109483" title="=&gt; Int">curcount</a><span class="delimiter">)</span>
    <a href="#109535" title="edu.berkeley.cs.scads.util.CountAggContainer">cur</a>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(f: edu.berkeley.cs.scads.util.CountAggContainer)Double" id="109521">finalize</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.CountAggContainer" id="109552">f</a>: <a href="#109905" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a><span class="delimiter">)</span>: <span title="Double">Double</span> = <span class="delimiter">{</span>
    <a href="#109552" title="edu.berkeley.cs.scads.util.CountAggContainer">f</a>.<a href="#109484" title="=&gt; Double">curval</a> <span title="(x: Int)Double">/</span> <a href="#109552" title="edu.berkeley.cs.scads.util.CountAggContainer">f</a>.<a href="#109483" title="=&gt; Int">curcount</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


<span class="comment">// max</span>
<span class="keyword">class</span> <a title="class MaxRemote extends java.lang.Object with edu.berkeley.cs.scads.util.RemoteAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord] with ScalaObject" id="10498">MaxRemote</a><a href="#10498" title="ScalaObject" class="delimiter">(</a><a title="String" id="109572">field</a>:<span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="AnalyticsUtils.scala.html#10478" title="edu.berkeley.cs.scads.util.RemoteAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord]">RemoteAggregate</a><span class="delimiter">[</span>ValueAggContainer, ScalaSpecificRecord, ScalaSpecificRecord<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">var</span> <a title="Int" id="109565">pos</a> = -<span title="Int(-1)" class="int">1</span> <span class="comment">// will be updated first time we see a record</span>

  <span class="keyword">def</span> <a title="()edu.berkeley.cs.scads.util.ValueAggContainer" id="109567">init</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <a href="#109909" title="(curval: Double)edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">(</span>java.lang.Double.<span title="Double(4.9E-324)">MIN_VALUE</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(ag: edu.berkeley.cs.scads.util.ValueAggContainer, key: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord, value: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord)edu.berkeley.cs.scads.util.ValueAggContainer" id="109568">applyAggregate</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="109578">ag</a>: <a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a>, <a title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="109579">key</a>: <span title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">ScalaSpecificRecord</span>, <a title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="109580">value</a>: <span title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">ScalaSpecificRecord</span><span class="delimiter">)</span>: <a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#109565" title="=&gt; Int">pos</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <a href="#109565" title="(x$1: Int)Unit">pos</a> = <a href="#109580" title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">value</a>.<span title="()org.apache.avro.Schema">getSchema</span>.<span title="(x$1: java.lang.String)org.apache.avro.Schema.Field">getField</span><span class="delimiter">(</span><a href="#109572" title="String">field</a><span class="delimiter">)</span>.<span title="()Int">pos</span>
    <span class="keyword">val</span> <a title="Double" id="109585">v</a> = <a href="AnalyticsUtils.scala.html#34633" title="(v: Any)Double">toDouble</a><span class="delimiter">(</span><a href="#109580" title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">value</a>.<span title="(x$1: Int)java.lang.Object">get</span><span class="delimiter">(</span><a href="#109565" title="=&gt; Int">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#109585" title="Double">v</a> <span title="(x: Double)Boolean">&gt;</span> <a href="#109578" title="edu.berkeley.cs.scads.util.ValueAggContainer">ag</a>.<a href="#109574" title="=&gt; Double">curval</a><span class="delimiter">)</span>
      <a href="#109578" title="edu.berkeley.cs.scads.util.ValueAggContainer">ag</a>.<a href="#109574" title="(x$1: Double)Unit">curval</a> = <a href="#109585" title="Double">v</a>
    <a href="#109578" title="edu.berkeley.cs.scads.util.ValueAggContainer">ag</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class MaxLocal extends edu.berkeley.cs.scads.util.LocalAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,Double] with ScalaObject" id="10499">MaxLocal</a> <a href="#10499" title="ScalaObject" class="keyword">extends</a> <a href="AnalyticsUtils.scala.html#10475" title="edu.berkeley.cs.scads.util.LocalAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,Double]">LocalAggregate</a><span class="delimiter">[</span>ValueAggContainer, Double<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="()edu.berkeley.cs.scads.util.ValueAggContainer" id="109595">init</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <a href="#109909" title="(curval: Double)edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">(</span>java.lang.Double.<span title="Double(4.9E-324)">MIN_VALUE</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(cur: edu.berkeley.cs.scads.util.ValueAggContainer, next: edu.berkeley.cs.scads.util.ValueAggContainer)edu.berkeley.cs.scads.util.ValueAggContainer" id="109596">foldFunction</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="109611">cur</a>: <a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a>, <a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="109612">next</a>: <a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">)</span>:<a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#109611" title="edu.berkeley.cs.scads.util.ValueAggContainer">cur</a>.<a href="#109574" title="=&gt; Double">curval</a> <span title="(x: Double)Boolean">&lt;</span> <a href="#109612" title="edu.berkeley.cs.scads.util.ValueAggContainer">next</a>.<a href="#109574" title="=&gt; Double">curval</a><span class="delimiter">)</span>
      <a href="#109611" title="edu.berkeley.cs.scads.util.ValueAggContainer">cur</a>.<a href="#109574" title="(x$1: Double)Unit">curval</a> = <a href="#109612" title="edu.berkeley.cs.scads.util.ValueAggContainer">next</a>.<a href="#109574" title="=&gt; Double">curval</a>
    <a href="#109611" title="edu.berkeley.cs.scads.util.ValueAggContainer">cur</a>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(f: edu.berkeley.cs.scads.util.ValueAggContainer)Double" id="109597">finalize</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="109620">f</a>: <a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">)</span>:<span title="Double">Double</span> = <span class="delimiter">{</span>
    <a href="#109620" title="edu.berkeley.cs.scads.util.ValueAggContainer">f</a>.<a href="#109574" title="=&gt; Double">curval</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


<span class="comment">// min</span>
<span class="keyword">class</span> <a title="class MinRemote extends java.lang.Object with edu.berkeley.cs.scads.util.RemoteAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord] with ScalaObject" id="10500">MinRemote</a><a href="#10500" title="ScalaObject" class="delimiter">(</a><a title="String" id="109636">field</a>:<span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="AnalyticsUtils.scala.html#10478" title="edu.berkeley.cs.scads.util.RemoteAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord]">RemoteAggregate</a><span class="delimiter">[</span>ValueAggContainer, ScalaSpecificRecord, ScalaSpecificRecord<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">var</span> <a title="Int" id="109629">pos</a> = -<span title="Int(-1)" class="int">1</span> <span class="comment">// will be updated first time we see a record</span>

  <span class="keyword">def</span> <a title="()edu.berkeley.cs.scads.util.ValueAggContainer" id="109631">init</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <a href="#109909" title="(curval: Double)edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">(</span>java.lang.Double.<span title="Double(1.7976931348623157E308)">MAX_VALUE</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(ag: edu.berkeley.cs.scads.util.ValueAggContainer, key: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord, value: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord)edu.berkeley.cs.scads.util.ValueAggContainer" id="109632">applyAggregate</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="109638">ag</a>: <a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a>, <a title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="109639">key</a>: <span title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">ScalaSpecificRecord</span>, <a title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="109640">value</a>: <span title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">ScalaSpecificRecord</span><span class="delimiter">)</span>: <a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#109629" title="=&gt; Int">pos</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <a href="#109629" title="(x$1: Int)Unit">pos</a> = <a href="#109640" title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">value</a>.<span title="()org.apache.avro.Schema">getSchema</span>.<span title="(x$1: java.lang.String)org.apache.avro.Schema.Field">getField</span><span class="delimiter">(</span><a href="#109636" title="String">field</a><span class="delimiter">)</span>.<span title="()Int">pos</span>
    <span class="keyword">val</span> <a title="Double" id="109645">v</a> = <a href="AnalyticsUtils.scala.html#34633" title="(v: Any)Double">toDouble</a><span class="delimiter">(</span><a href="#109640" title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">value</a>.<span title="(x$1: Int)java.lang.Object">get</span><span class="delimiter">(</span><a href="#109629" title="=&gt; Int">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#109645" title="Double">v</a> <span title="(x: Double)Boolean">&lt;</span> <a href="#109638" title="edu.berkeley.cs.scads.util.ValueAggContainer">ag</a>.<a href="#109574" title="=&gt; Double">curval</a><span class="delimiter">)</span>
      <a href="#109638" title="edu.berkeley.cs.scads.util.ValueAggContainer">ag</a>.<a href="#109574" title="(x$1: Double)Unit">curval</a> = <a href="#109645" title="Double">v</a>
    <a href="#109638" title="edu.berkeley.cs.scads.util.ValueAggContainer">ag</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class MinLocal extends edu.berkeley.cs.scads.util.LocalAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,Double] with ScalaObject" id="10501">MinLocal</a> <a href="#10501" title="ScalaObject" class="keyword">extends</a> <a href="AnalyticsUtils.scala.html#10475" title="edu.berkeley.cs.scads.util.LocalAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,Double]">LocalAggregate</a><span class="delimiter">[</span>ValueAggContainer, Double<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="()edu.berkeley.cs.scads.util.ValueAggContainer" id="109655">init</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <a href="#109909" title="(curval: Double)edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">(</span>java.lang.Double.<span title="Double(1.7976931348623157E308)">MAX_VALUE</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(cur: edu.berkeley.cs.scads.util.ValueAggContainer, next: edu.berkeley.cs.scads.util.ValueAggContainer)edu.berkeley.cs.scads.util.ValueAggContainer" id="109656">foldFunction</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="109671">cur</a>: <a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a>, <a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="109672">next</a>: <a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">)</span>:<a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#109671" title="edu.berkeley.cs.scads.util.ValueAggContainer">cur</a>.<a href="#109574" title="=&gt; Double">curval</a> <span title="(x: Double)Boolean">&gt;</span> <a href="#109672" title="edu.berkeley.cs.scads.util.ValueAggContainer">next</a>.<a href="#109574" title="=&gt; Double">curval</a><span class="delimiter">)</span>
      <a href="#109671" title="edu.berkeley.cs.scads.util.ValueAggContainer">cur</a>.<a href="#109574" title="(x$1: Double)Unit">curval</a> = <a href="#109672" title="edu.berkeley.cs.scads.util.ValueAggContainer">next</a>.<a href="#109574" title="=&gt; Double">curval</a>
    <a href="#109671" title="edu.berkeley.cs.scads.util.ValueAggContainer">cur</a>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(f: edu.berkeley.cs.scads.util.ValueAggContainer)Double" id="109657">finalize</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="109680">f</a>: <a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">)</span>:<span title="Double">Double</span> = <span class="delimiter">{</span>
    <a href="#109680" title="edu.berkeley.cs.scads.util.ValueAggContainer">f</a>.<a href="#109574" title="=&gt; Double">curval</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>



<span class="comment">// sum</span>
<span class="keyword">class</span> <a title="class SumRemote extends java.lang.Object with edu.berkeley.cs.scads.util.RemoteAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord] with ScalaObject" id="10502">SumRemote</a><a href="#10502" title="ScalaObject" class="delimiter">(</a><a title="String" id="109696">field</a>:<span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="AnalyticsUtils.scala.html#10478" title="edu.berkeley.cs.scads.util.RemoteAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord]">RemoteAggregate</a><span class="delimiter">[</span>ValueAggContainer, ScalaSpecificRecord, ScalaSpecificRecord<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">var</span> <a title="Int" id="109689">pos</a> = -<span title="Int(-1)" class="int">1</span> <span class="comment">// will be updated first time we see a record</span>

  <span class="keyword">def</span> <a title="()edu.berkeley.cs.scads.util.ValueAggContainer" id="109691">init</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <a href="#109909" title="(curval: Double)edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">(</span><span title="Double(0.0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(ag: edu.berkeley.cs.scads.util.ValueAggContainer, key: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord, value: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord)edu.berkeley.cs.scads.util.ValueAggContainer" id="109692">applyAggregate</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="109698">ag</a>: <a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a>, <a title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="109699">key</a>: <span title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">ScalaSpecificRecord</span>, <a title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="109700">value</a>: <span title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">ScalaSpecificRecord</span><span class="delimiter">)</span>: <a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#109689" title="=&gt; Int">pos</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <a href="#109689" title="(x$1: Int)Unit">pos</a> = <a href="#109700" title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">value</a>.<span title="()org.apache.avro.Schema">getSchema</span>.<span title="(x$1: java.lang.String)org.apache.avro.Schema.Field">getField</span><span class="delimiter">(</span><a href="#109696" title="String">field</a><span class="delimiter">)</span>.<span title="()Int">pos</span>
    <a href="#109698" title="edu.berkeley.cs.scads.util.ValueAggContainer">ag</a>.<a href="#109574" title="(x$1: Double)Unit">curval</a> <span title="(x: Double)Double">+=</span> <a href="AnalyticsUtils.scala.html#34633" title="(v: Any)Double">toDouble</a><span class="delimiter">(</span><a href="#109700" title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">value</a>.<span title="(x$1: Int)java.lang.Object">get</span><span class="delimiter">(</span><a href="#109689" title="=&gt; Int">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#109698" title="edu.berkeley.cs.scads.util.ValueAggContainer">ag</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class SumLocal extends edu.berkeley.cs.scads.util.LocalAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,Double] with ScalaObject" id="10503">SumLocal</a> <a href="#10503" title="ScalaObject" class="keyword">extends</a> <a href="AnalyticsUtils.scala.html#10475" title="edu.berkeley.cs.scads.util.LocalAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,Double]">LocalAggregate</a><span class="delimiter">[</span>ValueAggContainer, Double<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="()edu.berkeley.cs.scads.util.ValueAggContainer" id="109714">init</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <a href="#109909" title="(curval: Double)edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">(</span><span title="Double(0.0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(cur: edu.berkeley.cs.scads.util.ValueAggContainer, next: edu.berkeley.cs.scads.util.ValueAggContainer)edu.berkeley.cs.scads.util.ValueAggContainer" id="109715">foldFunction</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="109730">cur</a>: <a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a>, <a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="109731">next</a>: <a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">)</span>:<a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <a href="#109730" title="edu.berkeley.cs.scads.util.ValueAggContainer">cur</a>.<a href="#109574" title="(x$1: Double)Unit">curval</a> <span title="(x: Double)Double">+=</span> <a href="#109731" title="edu.berkeley.cs.scads.util.ValueAggContainer">next</a>.<a href="#109574" title="=&gt; Double">curval</a>
    <a href="#109730" title="edu.berkeley.cs.scads.util.ValueAggContainer">cur</a>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(f: edu.berkeley.cs.scads.util.ValueAggContainer)Double" id="109716">finalize</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="109739">f</a>: <a href="#109909" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">)</span>:<span title="Double">Double</span> = <span class="delimiter">{</span>
    <a href="#109739" title="edu.berkeley.cs.scads.util.ValueAggContainer">f</a>.<a href="#109574" title="=&gt; Double">curval</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>




<span class="comment">// average over limited number of records</span>
<span class="comment">// if hard is true, EXACTLY limit records will be averaged, </span>
<span class="comment">// otherwise, AT LEAST limit records will be averaged</span>
<span class="keyword">class</span> <a title="class SampleAvgRemote extends java.lang.Object with edu.berkeley.cs.scads.util.RemoteAggregate[edu.berkeley.cs.scads.util.CountAggContainer,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord] with ScalaObject" id="109901">SampleAvgRemote</a><a href="#109901" title="ScalaObject" class="delimiter">(</a><a title="String" id="109785">field</a>:<span title="String">String</span>,<a title="Int" id="109786">limit</a>:<span title="Int">Int</span>,<a title="Boolean" id="109789">hard</a>:<span title="Boolean">Boolean</span>=<span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="AnalyticsUtils.scala.html#10478" title="edu.berkeley.cs.scads.util.RemoteAggregate[edu.berkeley.cs.scads.util.CountAggContainer,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord]">RemoteAggregate</a><span class="delimiter">[</span>CountAggContainer, ScalaSpecificRecord, ScalaSpecificRecord<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">var</span> <a title="Int" id="109752">pos</a> = -<span title="Int(-1)" class="int">1</span> <span class="comment">// will be updated first time we see a record</span>

  <span class="keyword">def</span> <a title="()edu.berkeley.cs.scads.util.CountAggContainer" id="109754">init</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#109905" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a> = <span class="delimiter">{</span>
    <a href="#109905" title="(curcount: Int, curval: Double)edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <span title="Double(0.0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/* -- some internal private vars for maintaining error counts -- */</span>
  <span class="comment">// for welford's variance</span>
  <span class="keyword">var</span> <a title="Double" id="109756">Mk</a>:<span title="Double">Double</span> = <span title="Double(0.0)" class="double">0.0</span>
  <span class="keyword">var</span> <a title="Double" id="109759">Mkp</a>:<span title="Double">Double</span> = <span title="Double(0.0)" class="double">0.0</span>
  <span class="keyword">var</span> <a title="Double" id="109762">Sk</a>:<span title="Double">Double</span> = <span title="Double(0.0)" class="double">0.0</span>
  <span class="keyword">var</span> <a title="Double" id="109765">Skp</a>:<span title="Double">Double</span> = <span title="Double(0.0)" class="double">0.0</span>

  <span class="keyword">var</span> <a title="Double" id="109768">welvar</a>:<span title="Double">Double</span> = <span title="Double(0.0)" class="double">0.0</span>
  <span class="keyword">var</span> <a title="Double" id="109771">stderr</a>:<span title="Double">Double</span> = <span title="Double(0.0)" class="double">0.0</span>

  <span class="keyword">def</span> <a title="(ag: edu.berkeley.cs.scads.util.CountAggContainer, key: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord, value: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord)edu.berkeley.cs.scads.util.CountAggContainer" id="109773">applyAggregate</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.CountAggContainer" id="109791">ag</a>: <a href="#109905" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a>, <a title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="109792">key</a>: <span title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">ScalaSpecificRecord</span>, <a title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="109793">value</a>: <span title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">ScalaSpecificRecord</span><span class="delimiter">)</span>: <a href="#109905" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a> = <span class="delimiter">{</span>
    <a href="#109791" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#109483" title="(x$1: Int)Unit">curcount</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#109791" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#109483" title="=&gt; Int">curcount</a> <span title="(x: Int)Boolean">&gt;</span> <a href="#109786" title="Int">limit</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="AnalyticsUtils.scala.html#34631" title="(x$1: Boolean)Unit">stop</a> = <span title="Boolean(true)" class="keyword">true</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#109789" title="Boolean">hard</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <a href="#109791" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>
    <span class="delimiter">}</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#109752" title="=&gt; Int">pos</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#109752" title="(x$1: Int)Unit">pos</a> = <a href="#109793" title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">value</a>.<span title="()org.apache.avro.Schema">getSchema</span>.<span title="(x$1: java.lang.String)org.apache.avro.Schema.Field">getField</span><span class="delimiter">(</span><a href="#109785" title="String">field</a><span class="delimiter">)</span>.<span title="()Int">pos</span>
      <a href="#109756" title="(x$1: Double)Unit">Mk</a> = <a href="AnalyticsUtils.scala.html#34633" title="(v: Any)Double">toDouble</a><span class="delimiter">(</span><a href="#109793" title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">value</a>.<span title="(x$1: Int)java.lang.Object">get</span><span class="delimiter">(</span><a href="#109752" title="=&gt; Int">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#109759" title="(x$1: Double)Unit">Mkp</a> = <a href="#109756" title="=&gt; Double">Mk</a>
      <a href="#109765" title="(x$1: Double)Unit">Skp</a> = <span title="Double(0.0)" class="double">0.0</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="comment">// compute sample variance and mean using welford's method </span>
      <span class="keyword">val</span> <a title="Double" id="109810">x</a> = <a href="AnalyticsUtils.scala.html#34633" title="(v: Any)Double">toDouble</a><span class="delimiter">(</span><a href="#109793" title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">value</a>.<span title="(x$1: Int)java.lang.Object">get</span><span class="delimiter">(</span><a href="#109752" title="=&gt; Int">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#109756" title="(x$1: Double)Unit">Mk</a> = <a href="#109759" title="=&gt; Double">Mkp</a> <span title="(x: Double)Double">+</span> <span class="delimiter">(</span><a href="#109810" title="Double">x</a> <span title="(x: Double)Double">-</span> <a href="#109759" title="=&gt; Double">Mkp</a><span class="delimiter">)</span><span title="(x: Int)Double">/</span><a href="#109791" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#109483" title="=&gt; Int">curcount</a>;
      <a href="#109762" title="(x$1: Double)Unit">Sk</a> = <a href="#109765" title="=&gt; Double">Skp</a> <span title="(x: Double)Double">+</span> <span class="delimiter">(</span><a href="#109810" title="Double">x</a> <span title="(x: Double)Double">-</span> <a href="#109759" title="=&gt; Double">Mkp</a><span class="delimiter">)</span><span title="(x: Double)Double">*</span><span class="delimiter">(</span><a href="#109810" title="Double">x</a> <span title="(x: Double)Double">-</span> <a href="#109756" title="=&gt; Double">Mk</a><span class="delimiter">)</span>;
    
      <a href="#109759" title="(x$1: Double)Unit">Mkp</a> = <a href="#109756" title="=&gt; Double">Mk</a>
      <a href="#109765" title="(x$1: Double)Unit">Skp</a> = <a href="#109762" title="=&gt; Double">Sk</a>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#109791" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#109483" title="=&gt; Int">curcount</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#109768" title="(x$1: Double)Unit">welvar</a> =  <a href="#109762" title="=&gt; Double">Sk</a><span title="(x: Int)Double">/</span><span class="delimiter">(</span><a href="#109791" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#109483" title="=&gt; Int">curcount</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
        <a href="#109771" title="(x$1: Double)Unit">stderr</a> = <a href="#109768" title="=&gt; Double">welvar</a> <span title="(x: Double)Double">/</span> scala.math.<span title="(x: Double)Double">sqrt</span><span class="delimiter">(</span><a href="#109791" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#109483" title="=&gt; Double">curcount</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="#109791" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#109484" title="(x$1: Double)Unit">curval</a> = <a href="#109756" title="=&gt; Double">Mk</a>
    <a href="#109791" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class SampleAvgLocal extends edu.berkeley.cs.scads.util.LocalAggregate[edu.berkeley.cs.scads.util.CountAggContainer,Double] with ScalaObject" id="10507">SampleAvgLocal</a> <a href="#10507" title="ScalaObject" class="keyword">extends</a> <a href="AnalyticsUtils.scala.html#10475" title="edu.berkeley.cs.scads.util.LocalAggregate[edu.berkeley.cs.scads.util.CountAggContainer,Double]">LocalAggregate</a><span class="delimiter">[</span>CountAggContainer, Double<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="()edu.berkeley.cs.scads.util.CountAggContainer" id="109856">init</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#109905" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a> = <span class="delimiter">{</span>
    <a href="#109905" title="(curcount: Int, curval: Double)edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <span title="Double(0.0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(cur: edu.berkeley.cs.scads.util.CountAggContainer, next: edu.berkeley.cs.scads.util.CountAggContainer)edu.berkeley.cs.scads.util.CountAggContainer" id="109857">foldFunction</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.CountAggContainer" id="109872">cur</a>: <a href="#109905" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a>, <a title="edu.berkeley.cs.scads.util.CountAggContainer" id="109873">next</a>: <a href="#109905" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a><span class="delimiter">)</span>: <a href="#109905" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a> = <span class="delimiter">{</span>
    <a href="#109872" title="edu.berkeley.cs.scads.util.CountAggContainer">cur</a>.<a href="#109483" title="(x$1: Int)Unit">curcount</a> <span title="(x: Int)Int">+=</span> <a href="#109873" title="edu.berkeley.cs.scads.util.CountAggContainer">next</a>.<a href="#109483" title="=&gt; Int">curcount</a>
    <a href="#109872" title="edu.berkeley.cs.scads.util.CountAggContainer">cur</a>.<a href="#109484" title="(x$1: Double)Unit">curval</a> = <a href="#109872" title="edu.berkeley.cs.scads.util.CountAggContainer">cur</a>.<a href="#109484" title="=&gt; Double">curval</a> <span title="(x: Double)Double">+</span> <span class="delimiter">(</span><a href="#109873" title="edu.berkeley.cs.scads.util.CountAggContainer">next</a>.<a href="#109484" title="=&gt; Double">curval</a> <span title="(x: Int)Double">*</span> <a href="#109873" title="edu.berkeley.cs.scads.util.CountAggContainer">next</a>.<a href="#109483" title="=&gt; Int">curcount</a><span class="delimiter">)</span>
    <a href="#109872" title="edu.berkeley.cs.scads.util.CountAggContainer">cur</a>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(f: edu.berkeley.cs.scads.util.CountAggContainer)Double" id="109858">finalize</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.CountAggContainer" id="109889">f</a>: <a href="#109905" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a><span class="delimiter">)</span>: <span title="Double">Double</span> = <span class="delimiter">{</span>
    <a href="#109889" title="edu.berkeley.cs.scads.util.CountAggContainer">f</a>.<a href="#109484" title="=&gt; Double">curval</a> <span title="(x: Int)Double">/</span> <a href="#109889" title="edu.berkeley.cs.scads.util.CountAggContainer">f</a>.<a href="#109483" title="=&gt; Int">curcount</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>