<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>util/BuiltinAggregates.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> edu.berkeley.cs.scads.util
<span class="keyword">import</span> org.apache.avro.Schema
<span class="keyword">import</span> edu.berkeley.cs.avro.marker.AvroRecord
<span class="keyword">import</span> edu.berkeley.cs.avro.runtime.ScalaSpecificRecord

case <span class="keyword">class</span> <a href="#115620" title="class ValueAggContainer extends org.apache.avro.specific.SpecificRecordBase with edu.berkeley.cs.avro.runtime.HasAvroConversions with edu.berkeley.cs.avro.marker.AvroRecord with ScalaObject with Product with Serializable" id="91100">ValueAggContainer</a><a href="#91100" title="ScalaObject" class="delimiter">(</a><a href="#91100" title="()edu.berkeley.cs.scads.util.ValueAggContainer" id="108896" class="keyword">var</a> <a title="Double" id="90765">curval</a>: <span title="Double">Double</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="edu.berkeley.cs.avro.marker.AvroRecord">AvroRecord</span>
case <span class="keyword">class</span> <a href="#115630" title="class CountAggContainer extends org.apache.avro.specific.SpecificRecordBase with edu.berkeley.cs.avro.runtime.HasAvroConversions with edu.berkeley.cs.avro.marker.AvroRecord with ScalaObject with Product with Serializable" id="91096">CountAggContainer</a><a href="#91096" title="ScalaObject" class="delimiter">(</a><a href="#91096" title="()edu.berkeley.cs.scads.util.CountAggContainer" id="108906" class="keyword">var</a> <a title="Int" id="90674">curcount</a>: <span title="Int">Int</span>, <span class="keyword">var</span> <a title="Double" id="90675">curval</a>: <span title="Double">Double</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="edu.berkeley.cs.avro.marker.AvroRecord">AvroRecord</span>

<span class="comment">// average</span>
<span class="keyword">class</span> <a title="class AvgRemote extends java.lang.Object with edu.berkeley.cs.scads.util.RemoteAggregate[edu.berkeley.cs.scads.util.CountAggContainer,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord] with ScalaObject" id="9890">AvgRemote</a><a href="#9890" title="ScalaObject" class="delimiter">(</a><a title="String" id="90672">field</a>:<span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="AnalyticsUtils.scala.html#9872" title="edu.berkeley.cs.scads.util.RemoteAggregate[edu.berkeley.cs.scads.util.CountAggContainer,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord]">RemoteAggregate</a><span class="delimiter">[</span>CountAggContainer, ScalaSpecificRecord, ScalaSpecificRecord<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">var</span> <a title="Int" id="90665">pos</a> = -<span title="Int(-1)" class="int">1</span> <span class="comment">// will be updated first time we see a record</span>

  <span class="keyword">def</span> <a title="()edu.berkeley.cs.scads.util.CountAggContainer" id="90667">init</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#91096" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a> = <span class="delimiter">{</span>
    <a href="#91096" title="(curcount: Int, curval: Double)edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <span title="Double(0.0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(ag: edu.berkeley.cs.scads.util.CountAggContainer, key: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord, value: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord)edu.berkeley.cs.scads.util.CountAggContainer" id="90668">applyAggregate</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.CountAggContainer" id="90681">ag</a>: <a href="#91096" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a>, <a title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="90682">key</a>: <span title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">ScalaSpecificRecord</span>, <a title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="90683">value</a>: <span title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">ScalaSpecificRecord</span><span class="delimiter">)</span>: <a href="#91096" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#90665" title="=&gt; Int">pos</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <a href="#90665" title="(x$1: Int)Unit">pos</a> = <a href="#90683" title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">value</a>.<span title="()org.apache.avro.Schema">getSchema</span>.<span title="(x$1: java.lang.String)org.apache.avro.Schema.Field">getField</span><span class="delimiter">(</span><a href="#90672" title="String">field</a><span class="delimiter">)</span>.<span title="()Int">pos</span>
    <a href="#90681" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#90674" title="(x$1: Int)Unit">curcount</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
    <a href="#90681" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#90675" title="(x$1: Double)Unit">curval</a> = <a href="#90681" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#90675" title="=&gt; Double">curval</a> <span title="(x: Double)Double">+</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="AnalyticsUtils.scala.html#26757" title="(v: Any)Double">toDouble</a><span class="delimiter">(</span><a href="#90683" title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">value</a>.<span title="(x$1: Int)java.lang.Object">get</span><span class="delimiter">(</span><a href="#90665" title="=&gt; Int">pos</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x: Double)Double">-</span> <a href="#90681" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#90675" title="=&gt; Double">curval</a><span class="delimiter">)</span> <span title="(x: Int)Double">/</span> <a href="#90681" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#90674" title="=&gt; Int">curcount</a><span class="delimiter">)</span>
    <a href="#90681" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>    
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class AvgLocal extends edu.berkeley.cs.scads.util.LocalAggregate[edu.berkeley.cs.scads.util.CountAggContainer,Double] with ScalaObject" id="9891">AvgLocal</a> <a href="#9891" title="ScalaObject" class="keyword">extends</a> <a href="AnalyticsUtils.scala.html#9869" title="edu.berkeley.cs.scads.util.LocalAggregate[edu.berkeley.cs.scads.util.CountAggContainer,Double]">LocalAggregate</a><span class="delimiter">[</span>CountAggContainer, Double<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="()edu.berkeley.cs.scads.util.CountAggContainer" id="90710">init</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#91096" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a> = <span class="delimiter">{</span>
    <a href="#91096" title="(curcount: Int, curval: Double)edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <span title="Double(0.0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(cur: edu.berkeley.cs.scads.util.CountAggContainer, next: edu.berkeley.cs.scads.util.CountAggContainer)edu.berkeley.cs.scads.util.CountAggContainer" id="90711">foldFunction</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.CountAggContainer" id="90726">cur</a>: <a href="#91096" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a>, <a title="edu.berkeley.cs.scads.util.CountAggContainer" id="90727">next</a>: <a href="#91096" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a><span class="delimiter">)</span>: <a href="#91096" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a> = <span class="delimiter">{</span>
    <a href="#90726" title="edu.berkeley.cs.scads.util.CountAggContainer">cur</a>.<a href="#90674" title="(x$1: Int)Unit">curcount</a> <span title="(x: Int)Int">+=</span> <a href="#90727" title="edu.berkeley.cs.scads.util.CountAggContainer">next</a>.<a href="#90674" title="=&gt; Int">curcount</a>
    <a href="#90726" title="edu.berkeley.cs.scads.util.CountAggContainer">cur</a>.<a href="#90675" title="(x$1: Double)Unit">curval</a> = <a href="#90726" title="edu.berkeley.cs.scads.util.CountAggContainer">cur</a>.<a href="#90675" title="=&gt; Double">curval</a> <span title="(x: Double)Double">+</span> <span class="delimiter">(</span><a href="#90727" title="edu.berkeley.cs.scads.util.CountAggContainer">next</a>.<a href="#90675" title="=&gt; Double">curval</a> <span title="(x: Int)Double">*</span> <a href="#90727" title="edu.berkeley.cs.scads.util.CountAggContainer">next</a>.<a href="#90674" title="=&gt; Int">curcount</a><span class="delimiter">)</span>
    <a href="#90726" title="edu.berkeley.cs.scads.util.CountAggContainer">cur</a>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(f: edu.berkeley.cs.scads.util.CountAggContainer)Double" id="90712">finalize</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.CountAggContainer" id="90743">f</a>: <a href="#91096" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a><span class="delimiter">)</span>: <span title="Double">Double</span> = <span class="delimiter">{</span>
    <a href="#90743" title="edu.berkeley.cs.scads.util.CountAggContainer">f</a>.<a href="#90675" title="=&gt; Double">curval</a> <span title="(x: Int)Double">/</span> <a href="#90743" title="edu.berkeley.cs.scads.util.CountAggContainer">f</a>.<a href="#90674" title="=&gt; Int">curcount</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


<span class="comment">// max</span>
<span class="keyword">class</span> <a title="class MaxRemote extends java.lang.Object with edu.berkeley.cs.scads.util.RemoteAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord] with ScalaObject" id="9892">MaxRemote</a><a href="#9892" title="ScalaObject" class="delimiter">(</a><a title="String" id="90763">field</a>:<span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="AnalyticsUtils.scala.html#9872" title="edu.berkeley.cs.scads.util.RemoteAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord]">RemoteAggregate</a><span class="delimiter">[</span>ValueAggContainer, ScalaSpecificRecord, ScalaSpecificRecord<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">var</span> <a title="Int" id="90756">pos</a> = -<span title="Int(-1)" class="int">1</span> <span class="comment">// will be updated first time we see a record</span>

  <span class="keyword">def</span> <a title="()edu.berkeley.cs.scads.util.ValueAggContainer" id="90758">init</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <a href="#91100" title="(curval: Double)edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">(</span>java.lang.Double.<span title="Double(4.9E-324)">MIN_VALUE</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(ag: edu.berkeley.cs.scads.util.ValueAggContainer, key: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord, value: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord)edu.berkeley.cs.scads.util.ValueAggContainer" id="90759">applyAggregate</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="90769">ag</a>: <a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a>, <a title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="90770">key</a>: <span title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">ScalaSpecificRecord</span>, <a title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="90771">value</a>: <span title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">ScalaSpecificRecord</span><span class="delimiter">)</span>: <a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#90756" title="=&gt; Int">pos</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <a href="#90756" title="(x$1: Int)Unit">pos</a> = <a href="#90771" title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">value</a>.<span title="()org.apache.avro.Schema">getSchema</span>.<span title="(x$1: java.lang.String)org.apache.avro.Schema.Field">getField</span><span class="delimiter">(</span><a href="#90763" title="String">field</a><span class="delimiter">)</span>.<span title="()Int">pos</span>
    <span class="keyword">val</span> <a title="Double" id="90776">v</a> = <a href="AnalyticsUtils.scala.html#26757" title="(v: Any)Double">toDouble</a><span class="delimiter">(</span><a href="#90771" title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">value</a>.<span title="(x$1: Int)java.lang.Object">get</span><span class="delimiter">(</span><a href="#90756" title="=&gt; Int">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#90776" title="Double">v</a> <span title="(x: Double)Boolean">&gt;</span> <a href="#90769" title="edu.berkeley.cs.scads.util.ValueAggContainer">ag</a>.<a href="#90765" title="=&gt; Double">curval</a><span class="delimiter">)</span>
      <a href="#90769" title="edu.berkeley.cs.scads.util.ValueAggContainer">ag</a>.<a href="#90765" title="(x$1: Double)Unit">curval</a> = <a href="#90776" title="Double">v</a>
    <a href="#90769" title="edu.berkeley.cs.scads.util.ValueAggContainer">ag</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class MaxLocal extends edu.berkeley.cs.scads.util.LocalAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,Double] with ScalaObject" id="9893">MaxLocal</a> <a href="#9893" title="ScalaObject" class="keyword">extends</a> <a href="AnalyticsUtils.scala.html#9869" title="edu.berkeley.cs.scads.util.LocalAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,Double]">LocalAggregate</a><span class="delimiter">[</span>ValueAggContainer, Double<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="()edu.berkeley.cs.scads.util.ValueAggContainer" id="90786">init</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <a href="#91100" title="(curval: Double)edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">(</span>java.lang.Double.<span title="Double(4.9E-324)">MIN_VALUE</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(cur: edu.berkeley.cs.scads.util.ValueAggContainer, next: edu.berkeley.cs.scads.util.ValueAggContainer)edu.berkeley.cs.scads.util.ValueAggContainer" id="90787">foldFunction</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="90802">cur</a>: <a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a>, <a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="90803">next</a>: <a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">)</span>:<a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#90802" title="edu.berkeley.cs.scads.util.ValueAggContainer">cur</a>.<a href="#90765" title="=&gt; Double">curval</a> <span title="(x: Double)Boolean">&lt;</span> <a href="#90803" title="edu.berkeley.cs.scads.util.ValueAggContainer">next</a>.<a href="#90765" title="=&gt; Double">curval</a><span class="delimiter">)</span>
      <a href="#90802" title="edu.berkeley.cs.scads.util.ValueAggContainer">cur</a>.<a href="#90765" title="(x$1: Double)Unit">curval</a> = <a href="#90803" title="edu.berkeley.cs.scads.util.ValueAggContainer">next</a>.<a href="#90765" title="=&gt; Double">curval</a>
    <a href="#90802" title="edu.berkeley.cs.scads.util.ValueAggContainer">cur</a>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(f: edu.berkeley.cs.scads.util.ValueAggContainer)Double" id="90788">finalize</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="90811">f</a>: <a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">)</span>:<span title="Double">Double</span> = <span class="delimiter">{</span>
    <a href="#90811" title="edu.berkeley.cs.scads.util.ValueAggContainer">f</a>.<a href="#90765" title="=&gt; Double">curval</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


<span class="comment">// min</span>
<span class="keyword">class</span> <a title="class MinRemote extends java.lang.Object with edu.berkeley.cs.scads.util.RemoteAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord] with ScalaObject" id="9894">MinRemote</a><a href="#9894" title="ScalaObject" class="delimiter">(</a><a title="String" id="90827">field</a>:<span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="AnalyticsUtils.scala.html#9872" title="edu.berkeley.cs.scads.util.RemoteAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord]">RemoteAggregate</a><span class="delimiter">[</span>ValueAggContainer, ScalaSpecificRecord, ScalaSpecificRecord<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">var</span> <a title="Int" id="90820">pos</a> = -<span title="Int(-1)" class="int">1</span> <span class="comment">// will be updated first time we see a record</span>

  <span class="keyword">def</span> <a title="()edu.berkeley.cs.scads.util.ValueAggContainer" id="90822">init</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <a href="#91100" title="(curval: Double)edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">(</span>java.lang.Double.<span title="Double(1.7976931348623157E308)">MAX_VALUE</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(ag: edu.berkeley.cs.scads.util.ValueAggContainer, key: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord, value: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord)edu.berkeley.cs.scads.util.ValueAggContainer" id="90823">applyAggregate</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="90829">ag</a>: <a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a>, <a title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="90830">key</a>: <span title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">ScalaSpecificRecord</span>, <a title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="90831">value</a>: <span title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">ScalaSpecificRecord</span><span class="delimiter">)</span>: <a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#90820" title="=&gt; Int">pos</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <a href="#90820" title="(x$1: Int)Unit">pos</a> = <a href="#90831" title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">value</a>.<span title="()org.apache.avro.Schema">getSchema</span>.<span title="(x$1: java.lang.String)org.apache.avro.Schema.Field">getField</span><span class="delimiter">(</span><a href="#90827" title="String">field</a><span class="delimiter">)</span>.<span title="()Int">pos</span>
    <span class="keyword">val</span> <a title="Double" id="90836">v</a> = <a href="AnalyticsUtils.scala.html#26757" title="(v: Any)Double">toDouble</a><span class="delimiter">(</span><a href="#90831" title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">value</a>.<span title="(x$1: Int)java.lang.Object">get</span><span class="delimiter">(</span><a href="#90820" title="=&gt; Int">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#90836" title="Double">v</a> <span title="(x: Double)Boolean">&lt;</span> <a href="#90829" title="edu.berkeley.cs.scads.util.ValueAggContainer">ag</a>.<a href="#90765" title="=&gt; Double">curval</a><span class="delimiter">)</span>
      <a href="#90829" title="edu.berkeley.cs.scads.util.ValueAggContainer">ag</a>.<a href="#90765" title="(x$1: Double)Unit">curval</a> = <a href="#90836" title="Double">v</a>
    <a href="#90829" title="edu.berkeley.cs.scads.util.ValueAggContainer">ag</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class MinLocal extends edu.berkeley.cs.scads.util.LocalAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,Double] with ScalaObject" id="9895">MinLocal</a> <a href="#9895" title="ScalaObject" class="keyword">extends</a> <a href="AnalyticsUtils.scala.html#9869" title="edu.berkeley.cs.scads.util.LocalAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,Double]">LocalAggregate</a><span class="delimiter">[</span>ValueAggContainer, Double<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="()edu.berkeley.cs.scads.util.ValueAggContainer" id="90846">init</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <a href="#91100" title="(curval: Double)edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">(</span>java.lang.Double.<span title="Double(1.7976931348623157E308)">MAX_VALUE</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(cur: edu.berkeley.cs.scads.util.ValueAggContainer, next: edu.berkeley.cs.scads.util.ValueAggContainer)edu.berkeley.cs.scads.util.ValueAggContainer" id="90847">foldFunction</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="90862">cur</a>: <a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a>, <a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="90863">next</a>: <a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">)</span>:<a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#90862" title="edu.berkeley.cs.scads.util.ValueAggContainer">cur</a>.<a href="#90765" title="=&gt; Double">curval</a> <span title="(x: Double)Boolean">&gt;</span> <a href="#90863" title="edu.berkeley.cs.scads.util.ValueAggContainer">next</a>.<a href="#90765" title="=&gt; Double">curval</a><span class="delimiter">)</span>
      <a href="#90862" title="edu.berkeley.cs.scads.util.ValueAggContainer">cur</a>.<a href="#90765" title="(x$1: Double)Unit">curval</a> = <a href="#90863" title="edu.berkeley.cs.scads.util.ValueAggContainer">next</a>.<a href="#90765" title="=&gt; Double">curval</a>
    <a href="#90862" title="edu.berkeley.cs.scads.util.ValueAggContainer">cur</a>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(f: edu.berkeley.cs.scads.util.ValueAggContainer)Double" id="90848">finalize</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="90871">f</a>: <a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">)</span>:<span title="Double">Double</span> = <span class="delimiter">{</span>
    <a href="#90871" title="edu.berkeley.cs.scads.util.ValueAggContainer">f</a>.<a href="#90765" title="=&gt; Double">curval</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>



<span class="comment">// sum</span>
<span class="keyword">class</span> <a title="class SumRemote extends java.lang.Object with edu.berkeley.cs.scads.util.RemoteAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord] with ScalaObject" id="9896">SumRemote</a><a href="#9896" title="ScalaObject" class="delimiter">(</a><a title="String" id="90887">field</a>:<span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="AnalyticsUtils.scala.html#9872" title="edu.berkeley.cs.scads.util.RemoteAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord]">RemoteAggregate</a><span class="delimiter">[</span>ValueAggContainer, ScalaSpecificRecord, ScalaSpecificRecord<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">var</span> <a title="Int" id="90880">pos</a> = -<span title="Int(-1)" class="int">1</span> <span class="comment">// will be updated first time we see a record</span>

  <span class="keyword">def</span> <a title="()edu.berkeley.cs.scads.util.ValueAggContainer" id="90882">init</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <a href="#91100" title="(curval: Double)edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">(</span><span title="Double(0.0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(ag: edu.berkeley.cs.scads.util.ValueAggContainer, key: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord, value: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord)edu.berkeley.cs.scads.util.ValueAggContainer" id="90883">applyAggregate</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="90889">ag</a>: <a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a>, <a title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="90890">key</a>: <span title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">ScalaSpecificRecord</span>, <a title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="90891">value</a>: <span title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">ScalaSpecificRecord</span><span class="delimiter">)</span>: <a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#90880" title="=&gt; Int">pos</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <a href="#90880" title="(x$1: Int)Unit">pos</a> = <a href="#90891" title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">value</a>.<span title="()org.apache.avro.Schema">getSchema</span>.<span title="(x$1: java.lang.String)org.apache.avro.Schema.Field">getField</span><span class="delimiter">(</span><a href="#90887" title="String">field</a><span class="delimiter">)</span>.<span title="()Int">pos</span>
    <a href="#90889" title="edu.berkeley.cs.scads.util.ValueAggContainer">ag</a>.<a href="#90765" title="(x$1: Double)Unit">curval</a> <span title="(x: Double)Double">+=</span> <a href="AnalyticsUtils.scala.html#26757" title="(v: Any)Double">toDouble</a><span class="delimiter">(</span><a href="#90891" title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">value</a>.<span title="(x$1: Int)java.lang.Object">get</span><span class="delimiter">(</span><a href="#90880" title="=&gt; Int">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#90889" title="edu.berkeley.cs.scads.util.ValueAggContainer">ag</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class SumLocal extends edu.berkeley.cs.scads.util.LocalAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,Double] with ScalaObject" id="9897">SumLocal</a> <a href="#9897" title="ScalaObject" class="keyword">extends</a> <a href="AnalyticsUtils.scala.html#9869" title="edu.berkeley.cs.scads.util.LocalAggregate[edu.berkeley.cs.scads.util.ValueAggContainer,Double]">LocalAggregate</a><span class="delimiter">[</span>ValueAggContainer, Double<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="()edu.berkeley.cs.scads.util.ValueAggContainer" id="90905">init</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <a href="#91100" title="(curval: Double)edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">(</span><span title="Double(0.0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(cur: edu.berkeley.cs.scads.util.ValueAggContainer, next: edu.berkeley.cs.scads.util.ValueAggContainer)edu.berkeley.cs.scads.util.ValueAggContainer" id="90906">foldFunction</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="90921">cur</a>: <a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a>, <a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="90922">next</a>: <a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">)</span>:<a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a> = <span class="delimiter">{</span>
    <a href="#90921" title="edu.berkeley.cs.scads.util.ValueAggContainer">cur</a>.<a href="#90765" title="(x$1: Double)Unit">curval</a> <span title="(x: Double)Double">+=</span> <a href="#90922" title="edu.berkeley.cs.scads.util.ValueAggContainer">next</a>.<a href="#90765" title="=&gt; Double">curval</a>
    <a href="#90921" title="edu.berkeley.cs.scads.util.ValueAggContainer">cur</a>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(f: edu.berkeley.cs.scads.util.ValueAggContainer)Double" id="90907">finalize</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.ValueAggContainer" id="90930">f</a>: <a href="#91100" title="edu.berkeley.cs.scads.util.ValueAggContainer">ValueAggContainer</a><span class="delimiter">)</span>:<span title="Double">Double</span> = <span class="delimiter">{</span>
    <a href="#90930" title="edu.berkeley.cs.scads.util.ValueAggContainer">f</a>.<a href="#90765" title="=&gt; Double">curval</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>




<span class="comment">// average over limited number of records</span>
<span class="comment">// if hard is true, EXACTLY limit records will be averaged, </span>
<span class="comment">// otherwise, AT LEAST limit records will be averaged</span>
<span class="keyword">class</span> <a title="class SampleAvgRemote extends java.lang.Object with edu.berkeley.cs.scads.util.RemoteAggregate[edu.berkeley.cs.scads.util.CountAggContainer,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord] with ScalaObject" id="91092">SampleAvgRemote</a><a href="#91092" title="ScalaObject" class="delimiter">(</a><a title="String" id="90976">field</a>:<span title="String">String</span>,<a title="Int" id="90977">limit</a>:<span title="Int">Int</span>,<a title="Boolean" id="90980">hard</a>:<span title="Boolean">Boolean</span>=<span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="AnalyticsUtils.scala.html#9872" title="edu.berkeley.cs.scads.util.RemoteAggregate[edu.berkeley.cs.scads.util.CountAggContainer,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord,edu.berkeley.cs.avro.runtime.ScalaSpecificRecord]">RemoteAggregate</a><span class="delimiter">[</span>CountAggContainer, ScalaSpecificRecord, ScalaSpecificRecord<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">var</span> <a title="Int" id="90943">pos</a> = -<span title="Int(-1)" class="int">1</span> <span class="comment">// will be updated first time we see a record</span>

  <span class="keyword">def</span> <a title="()edu.berkeley.cs.scads.util.CountAggContainer" id="90945">init</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#91096" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a> = <span class="delimiter">{</span>
    <a href="#91096" title="(curcount: Int, curval: Double)edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <span title="Double(0.0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/* -- some internal private vars for maintaining error counts -- */</span>
  <span class="comment">// for welford's variance</span>
  <span class="keyword">var</span> <a title="Double" id="90947">Mk</a>:<span title="Double">Double</span> = <span title="Double(0.0)" class="double">0.0</span>
  <span class="keyword">var</span> <a title="Double" id="90950">Mkp</a>:<span title="Double">Double</span> = <span title="Double(0.0)" class="double">0.0</span>
  <span class="keyword">var</span> <a title="Double" id="90953">Sk</a>:<span title="Double">Double</span> = <span title="Double(0.0)" class="double">0.0</span>
  <span class="keyword">var</span> <a title="Double" id="90956">Skp</a>:<span title="Double">Double</span> = <span title="Double(0.0)" class="double">0.0</span>

  <span class="keyword">var</span> <a title="Double" id="90959">welvar</a>:<span title="Double">Double</span> = <span title="Double(0.0)" class="double">0.0</span>
  <span class="keyword">var</span> <a title="Double" id="90962">stderr</a>:<span title="Double">Double</span> = <span title="Double(0.0)" class="double">0.0</span>

  <span class="keyword">def</span> <a title="(ag: edu.berkeley.cs.scads.util.CountAggContainer, key: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord, value: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord)edu.berkeley.cs.scads.util.CountAggContainer" id="90964">applyAggregate</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.CountAggContainer" id="90982">ag</a>: <a href="#91096" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a>, <a title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="90983">key</a>: <span title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">ScalaSpecificRecord</span>, <a title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="90984">value</a>: <span title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">ScalaSpecificRecord</span><span class="delimiter">)</span>: <a href="#91096" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a> = <span class="delimiter">{</span>
    <a href="#90982" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#90674" title="(x$1: Int)Unit">curcount</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#90982" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#90674" title="=&gt; Int">curcount</a> <span title="(x: Int)Boolean">&gt;</span> <a href="#90977" title="Int">limit</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="AnalyticsUtils.scala.html#26755" title="(x$1: Boolean)Unit">stop</a> = <span title="Boolean(true)" class="keyword">true</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#90980" title="Boolean">hard</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <a href="#90982" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>
    <span class="delimiter">}</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#90943" title="=&gt; Int">pos</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#90943" title="(x$1: Int)Unit">pos</a> = <a href="#90984" title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">value</a>.<span title="()org.apache.avro.Schema">getSchema</span>.<span title="(x$1: java.lang.String)org.apache.avro.Schema.Field">getField</span><span class="delimiter">(</span><a href="#90976" title="String">field</a><span class="delimiter">)</span>.<span title="()Int">pos</span>
      <a href="#90947" title="(x$1: Double)Unit">Mk</a> = <a href="AnalyticsUtils.scala.html#26757" title="(v: Any)Double">toDouble</a><span class="delimiter">(</span><a href="#90984" title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">value</a>.<span title="(x$1: Int)java.lang.Object">get</span><span class="delimiter">(</span><a href="#90943" title="=&gt; Int">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#90950" title="(x$1: Double)Unit">Mkp</a> = <a href="#90947" title="=&gt; Double">Mk</a>
      <a href="#90956" title="(x$1: Double)Unit">Skp</a> = <span title="Double(0.0)" class="double">0.0</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="comment">// compute sample variance and mean using welford's method </span>
      <span class="keyword">val</span> <a title="Double" id="91001">x</a> = <a href="AnalyticsUtils.scala.html#26757" title="(v: Any)Double">toDouble</a><span class="delimiter">(</span><a href="#90984" title="edu.berkeley.cs.avro.runtime.ScalaSpecificRecord">value</a>.<span title="(x$1: Int)java.lang.Object">get</span><span class="delimiter">(</span><a href="#90943" title="=&gt; Int">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#90947" title="(x$1: Double)Unit">Mk</a> = <a href="#90950" title="=&gt; Double">Mkp</a> <span title="(x: Double)Double">+</span> <span class="delimiter">(</span><a href="#91001" title="Double">x</a> <span title="(x: Double)Double">-</span> <a href="#90950" title="=&gt; Double">Mkp</a><span class="delimiter">)</span><span title="(x: Int)Double">/</span><a href="#90982" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#90674" title="=&gt; Int">curcount</a>;
      <a href="#90953" title="(x$1: Double)Unit">Sk</a> = <a href="#90956" title="=&gt; Double">Skp</a> <span title="(x: Double)Double">+</span> <span class="delimiter">(</span><a href="#91001" title="Double">x</a> <span title="(x: Double)Double">-</span> <a href="#90950" title="=&gt; Double">Mkp</a><span class="delimiter">)</span><span title="(x: Double)Double">*</span><span class="delimiter">(</span><a href="#91001" title="Double">x</a> <span title="(x: Double)Double">-</span> <a href="#90947" title="=&gt; Double">Mk</a><span class="delimiter">)</span>;
    
      <a href="#90950" title="(x$1: Double)Unit">Mkp</a> = <a href="#90947" title="=&gt; Double">Mk</a>
      <a href="#90956" title="(x$1: Double)Unit">Skp</a> = <a href="#90953" title="=&gt; Double">Sk</a>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#90982" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#90674" title="=&gt; Int">curcount</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#90959" title="(x$1: Double)Unit">welvar</a> =  <a href="#90953" title="=&gt; Double">Sk</a><span title="(x: Int)Double">/</span><span class="delimiter">(</span><a href="#90982" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#90674" title="=&gt; Int">curcount</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
        <a href="#90962" title="(x$1: Double)Unit">stderr</a> = <a href="#90959" title="=&gt; Double">welvar</a> <span title="(x: Double)Double">/</span> scala.math.<span title="(x: Double)Double">sqrt</span><span class="delimiter">(</span><a href="#90982" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#90674" title="=&gt; Double">curcount</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="#90982" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>.<a href="#90675" title="(x$1: Double)Unit">curval</a> = <a href="#90947" title="=&gt; Double">Mk</a>
    <a href="#90982" title="edu.berkeley.cs.scads.util.CountAggContainer">ag</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class SampleAvgLocal extends edu.berkeley.cs.scads.util.LocalAggregate[edu.berkeley.cs.scads.util.CountAggContainer,Double] with ScalaObject" id="9901">SampleAvgLocal</a> <a href="#9901" title="ScalaObject" class="keyword">extends</a> <a href="AnalyticsUtils.scala.html#9869" title="edu.berkeley.cs.scads.util.LocalAggregate[edu.berkeley.cs.scads.util.CountAggContainer,Double]">LocalAggregate</a><span class="delimiter">[</span>CountAggContainer, Double<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="()edu.berkeley.cs.scads.util.CountAggContainer" id="91047">init</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#91096" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a> = <span class="delimiter">{</span>
    <a href="#91096" title="(curcount: Int, curval: Double)edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <span title="Double(0.0)" class="int">0</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(cur: edu.berkeley.cs.scads.util.CountAggContainer, next: edu.berkeley.cs.scads.util.CountAggContainer)edu.berkeley.cs.scads.util.CountAggContainer" id="91048">foldFunction</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.CountAggContainer" id="91063">cur</a>: <a href="#91096" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a>, <a title="edu.berkeley.cs.scads.util.CountAggContainer" id="91064">next</a>: <a href="#91096" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a><span class="delimiter">)</span>: <a href="#91096" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a> = <span class="delimiter">{</span>
    <a href="#91063" title="edu.berkeley.cs.scads.util.CountAggContainer">cur</a>.<a href="#90674" title="(x$1: Int)Unit">curcount</a> <span title="(x: Int)Int">+=</span> <a href="#91064" title="edu.berkeley.cs.scads.util.CountAggContainer">next</a>.<a href="#90674" title="=&gt; Int">curcount</a>
    <a href="#91063" title="edu.berkeley.cs.scads.util.CountAggContainer">cur</a>.<a href="#90675" title="(x$1: Double)Unit">curval</a> = <a href="#91063" title="edu.berkeley.cs.scads.util.CountAggContainer">cur</a>.<a href="#90675" title="=&gt; Double">curval</a> <span title="(x: Double)Double">+</span> <span class="delimiter">(</span><a href="#91064" title="edu.berkeley.cs.scads.util.CountAggContainer">next</a>.<a href="#90675" title="=&gt; Double">curval</a> <span title="(x: Int)Double">*</span> <a href="#91064" title="edu.berkeley.cs.scads.util.CountAggContainer">next</a>.<a href="#90674" title="=&gt; Int">curcount</a><span class="delimiter">)</span>
    <a href="#91063" title="edu.berkeley.cs.scads.util.CountAggContainer">cur</a>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(f: edu.berkeley.cs.scads.util.CountAggContainer)Double" id="91049">finalize</a><span class="delimiter">(</span><a title="edu.berkeley.cs.scads.util.CountAggContainer" id="91080">f</a>: <a href="#91096" title="edu.berkeley.cs.scads.util.CountAggContainer">CountAggContainer</a><span class="delimiter">)</span>: <span title="Double">Double</span> = <span class="delimiter">{</span>
    <a href="#91080" title="edu.berkeley.cs.scads.util.CountAggContainer">f</a>.<a href="#90675" title="=&gt; Double">curval</a> <span title="(x: Int)Double">/</span> <a href="#91080" title="edu.berkeley.cs.scads.util.CountAggContainer">f</a>.<a href="#90674" title="=&gt; Int">curcount</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>