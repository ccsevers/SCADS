<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>util/AnalyticsUtils.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> edu.berkeley.cs.scads.util

<span class="keyword">import</span> org.apache.avro.Schema
<span class="keyword">import</span> org.apache.avro.generic.<span class="delimiter">{</span>GenericData,GenericDatumReader,GenericDatumWriter,IndexedRecord<span class="delimiter">}</span>
<span class="keyword">import</span> org.apache.avro.io.<span class="delimiter">{</span>DecoderFactory,EncoderFactory<span class="delimiter">}</span>

<span class="keyword">import</span> edu.berkeley.cs.avro.runtime.ScalaSpecificRecord

<span class="keyword">import</span> java.io.ByteArrayInputStream

<span class="keyword">import</span> scala.collection.<span title="object scala.collection.JavaConversions">JavaConversions</span>._
<span class="keyword">import</span> scala.collection.mutable.StringBuilder
<span class="keyword">import</span> scala.tools.nsc.interpreter.AbstractFileClassLoader
<span class="keyword">import</span> scala.tools.nsc.io.AbstractFile

<span class="keyword">import</span> scala.collection.mutable.<span class="delimiter">{</span>ArrayBuilder,HashMap<span class="delimiter">}</span>


<span class="keyword">trait</span> <a title="trait Filter[R &lt;: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord] extends java.lang.Object with Serializable" id="9873">Filter</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="9874">R</a> &lt;: ScalaSpecificRecord<span class="delimiter">]</span> <span class="keyword">extends</span> <span title="Serializable">Serializable</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(r: R)Boolean" id="24219">applyFilter</a><span class="delimiter">(</span><a title="R" id="71364">r</a>:<a href="#9874" title="R">R</a><span class="delimiter">)</span>:<span title="Boolean">Boolean</span>
<span class="delimiter">}</span>

<span class="comment">// this is a class right now as we need the type parameter</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class LocalAggregate[TransType &lt;: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord, ResultType] extends java.lang.Object with ScalaObject" id="9875">LocalAggregate</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="9876">TransType</a> &lt;: ScalaSpecificRecord,
                              <a title="&gt;: Nothing &lt;: Any" id="9877">ResultType</a> &lt;: Any<span class="delimiter">]</span><a href="#9875" title="ScalaObject" class="delimiter">(</a><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[TransType]" id="87915">transType</a>:scala.reflect.<span title="scala.reflect.Manifest[TransType]">Manifest</span><span class="delimiter">[</span>TransType<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="()TransType" id="26898">init</a><span class="delimiter">(</span><span class="delimiter">)</span>:<a href="#9876" title="TransType">TransType</a>
  <span class="keyword">def</span> <a title="(cur: TransType, next: TransType)TransType" id="26899">foldFunction</a><span class="delimiter">(</span><a title="TransType" id="87917">cur</a>:<a href="#9876" title="TransType">TransType</a>,<a title="TransType" id="87918">next</a>:<a href="#9876" title="TransType">TransType</a><span class="delimiter">)</span>:<a href="#9876" title="TransType">TransType</a>
  <span class="keyword">def</span> <a title="(a: TransType)ResultType" id="26900">finalize</a><span class="delimiter">(</span><a title="TransType" id="87920">a</a>:<a href="#9876" title="TransType">TransType</a><span class="delimiter">)</span>:<a href="#9877" title="ResultType">ResultType</a>

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="scala.collection.mutable.ArrayBuilder[TransType]" id="26902">curBuilder</a>:<span title="scala.collection.mutable.ArrayBuilder[TransType]">ArrayBuilder</span><span class="delimiter">[</span>TransType<span class="delimiter">]</span> = <span title="Null(null)" class="keyword">null</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[org.apache.avro.generic.GenericData.Record,scala.collection.mutable.ArrayBuilder[TransType]]" id="26904">replyMap</a> = <span title="()scala.collection.mutable.HashMap[org.apache.avro.generic.GenericData.Record,scala.collection.mutable.ArrayBuilder[TransType]]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[org.apache.avro.generic.GenericData.Record,scala.collection.mutable.ArrayBuilder[TransType]]">HashMap</span><span class="delimiter">[</span>GenericData.Record,ArrayBuilder<span class="delimiter">[</span>TransType<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(group: org.apache.avro.generic.GenericData.Record, ar: Array[Byte])Unit" id="26906">addForGroup</a><span class="delimiter">(</span><a title="org.apache.avro.generic.GenericData.Record" id="30632">group</a>:GenericData.<span title="org.apache.avro.generic.GenericData.Record">Record</span>,<a title="Array[Byte]" id="30633">ar</a>:<span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#26902" title="(x$1: scala.collection.mutable.ArrayBuilder[TransType])Unit">curBuilder</a> = 
      <span title="scala.collection.mutable.ArrayBuilder[TransType]" class="keyword">if</span> <span class="delimiter">(</span><a href="#30632" title="org.apache.avro.generic.GenericData.Record">group</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="comment">// not grouping</span>
        <span title="scala.collection.mutable.ArrayBuilder[TransType]" class="keyword">if</span> <span class="delimiter">(</span><a href="#26902" title="=&gt; scala.collection.mutable.ArrayBuilder[TransType]">curBuilder</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> 
          <a href="#87915" title="scala.collection.mutable.ArrayBuilder.ofRef[TransType]" class="keyword">new</a> ArrayBuilder.<span title="scala.collection.mutable.ArrayBuilder.ofRef[TransType]">ofRef</span><span class="delimiter">[</span>TransType<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="keyword">else</span>
          <a href="#26902" title="=&gt; scala.collection.mutable.ArrayBuilder[TransType]">curBuilder</a>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#26904" title="=&gt; scala.collection.mutable.HashMap[org.apache.avro.generic.GenericData.Record,scala.collection.mutable.ArrayBuilder[TransType]]">replyMap</a>.<span title="(key: org.apache.avro.generic.GenericData.Record)Option[scala.collection.mutable.ArrayBuilder[TransType]]">get</span><span class="delimiter">(</span><a href="#30632" title="org.apache.avro.generic.GenericData.Record">group</a><span class="delimiter">)</span> <span title="scala.collection.mutable.ArrayBuilder[TransType]" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="scala.collection.mutable.ArrayBuilder[TransType]">Some</span><span class="delimiter">(</span><a title="scala.collection.mutable.ArrayBuilder[TransType]" id="87939">thing</a><span class="delimiter">)</span> =&gt; <a href="#87939" title="scala.collection.mutable.ArrayBuilder[TransType]">thing</a>
          <span class="keyword">case</span> <span title="scala.collection.mutable.ArrayBuilder.ofRef[TransType]">None</span> =&gt; <a href="#87915" title="scala.collection.mutable.ArrayBuilder.ofRef[TransType]" class="keyword">new</a> ArrayBuilder.<span title="scala.collection.mutable.ArrayBuilder.ofRef[TransType]">ofRef</span><span class="delimiter">[</span>TransType<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="TransType" id="87922">x</a> = <a href="#87915" title="scala.reflect.Manifest[TransType]">transType</a>.<span title="=&gt; java.lang.Class[_]">erasure</span>.<span title="()_$1">newInstance</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="TransType" class="delimiter">[</span><a href="#9876" title="TransType">TransType</a><span class="delimiter">]</span>
    <a href="#87922" title="TransType">x</a>.<span title="(data: Array[Byte])x.type">parse</span><span class="delimiter">(</span><a href="#30633" title="Array[Byte]">ar</a><span class="delimiter">)</span>
    <a href="#26902" title="=&gt; scala.collection.mutable.ArrayBuilder[TransType]">curBuilder</a> <span title="(elem: TransType)scala.collection.mutable.ArrayBuilder[TransType]">+=</span> <a href="#87922" title="TransType">x</a>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#30632" title="org.apache.avro.generic.GenericData.Record">group</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <a href="#26904" title="=&gt; scala.collection.mutable.HashMap[org.apache.avro.generic.GenericData.Record,scala.collection.mutable.ArrayBuilder[TransType]]">replyMap</a> <span title="(kv: (org.apache.avro.generic.GenericData.Record, scala.collection.mutable.ArrayBuilder[TransType]))LocalAggregate.this.replyMap.type">+=</span> <span class="delimiter">(</span><span title="(_1: org.apache.avro.generic.GenericData.Record, _2: scala.collection.mutable.ArrayBuilder[TransType])(org.apache.avro.generic.GenericData.Record, scala.collection.mutable.ArrayBuilder[TransType])" class="delimiter">(</span><a href="#30632" title="org.apache.avro.generic.GenericData.Record">group</a>,<a href="#26902" title="=&gt; scala.collection.mutable.ArrayBuilder[TransType]">curBuilder</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(group: org.apache.avro.generic.GenericData.Record)ResultType" id="26907">finishForGroup</a><span class="delimiter">(</span><a title="org.apache.avro.generic.GenericData.Record" id="31176">group</a>:GenericData.<span title="org.apache.avro.generic.GenericData.Record">Record</span><span class="delimiter">)</span>:<a href="#9877" title="ResultType">ResultType</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuilder[TransType]" id="87980">vls</a> = 
      <span title="scala.collection.mutable.ArrayBuilder[TransType]" class="keyword">if</span> <span class="delimiter">(</span><a href="#31176" title="org.apache.avro.generic.GenericData.Record">group</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
        <a href="#26902" title="=&gt; scala.collection.mutable.ArrayBuilder[TransType]">curBuilder</a>
      <span class="keyword">else</span>
        <a href="#26904" title="(key: org.apache.avro.generic.GenericData.Record)scala.collection.mutable.ArrayBuilder[TransType]">replyMap</a><span class="delimiter">(</span><a href="#31176" title="org.apache.avro.generic.GenericData.Record">group</a><span class="delimiter">)</span>
    <a href="#26900" title="(a: TransType)ResultType">finalize</a><span class="delimiter">(</span><a href="#87980" title="scala.collection.mutable.ArrayBuilder[TransType]">vls</a>.<span title="(xs: Array[TransType])scala.collection.mutable.ArrayOps[TransType]">result</span>.<span title="(z: TransType)(op: (TransType, TransType) =&gt; TransType)TransType">foldLeft</span><span class="delimiter">(</span><a href="#26898" title="()TransType">init</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#26899" title="(cur: TransType, next: TransType)TransType">foldFunction</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()TransType" id="26908">replyInstance</a><span class="delimiter">(</span><span class="delimiter">)</span>:<a href="#9876" title="TransType">TransType</a> = <span class="delimiter">{</span>
    <a href="#87915" title="scala.reflect.Manifest[TransType]">transType</a>.<span title="=&gt; java.lang.Class[_]">erasure</span>.<span title="()_$1">newInstance</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="TransType" class="delimiter">[</span><a href="#9876" title="TransType">TransType</a><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Iterable[org.apache.avro.generic.GenericData.Record]" id="26909">groups</a><span class="delimiter">(</span><span class="delimiter">)</span>:<span title="Iterable[org.apache.avro.generic.GenericData.Record]">Iterable</span><span class="delimiter">[</span>GenericData.Record<span class="delimiter">]</span> = <a href="#26904" title="=&gt; scala.collection.mutable.HashMap[org.apache.avro.generic.GenericData.Record,scala.collection.mutable.ArrayBuilder[TransType]]">replyMap</a>.<span title="=&gt; Iterable[org.apache.avro.generic.GenericData.Record]">keys</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait RemoteAggregate[TransType &lt;: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord, KeyType &lt;: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord, ValueType &lt;: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord] extends java.lang.Object with Serializable with ScalaObject" id="9878">RemoteAggregate</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="9879">TransType</a> &lt;: ScalaSpecificRecord,
                <a title="&gt;: Nothing &lt;: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="9880">KeyType</a> &lt;: ScalaSpecificRecord,
                <a title="&gt;: Nothing &lt;: edu.berkeley.cs.avro.runtime.ScalaSpecificRecord" id="9881">ValueType</a> &lt;: ScalaSpecificRecord<span class="delimiter">]</span> <span title="ScalaObject" class="keyword">extends</span> <span title="Serializable">Serializable</span><span class="delimiter">{</span>
  <span class="keyword">var</span> <a title="Boolean" id="26758">stop</a>:<span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(v: Any)Double" id="26760">toDouble</a><span class="delimiter">(</span><a title="Any" id="88422">v</a>:<span title="Any">Any</span><span class="delimiter">)</span>:<span title="Double">Double</span> = <span class="delimiter">{</span>
    <a href="#88422" title="Any">v</a> <span title="Double" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Double" id="88424">x</a>:java.lang.<span title="java.lang.Integer">Integer</span> =&gt; <a href="#88424" title="java.lang.Integer">x</a>.<span title="()Double">doubleValue</span>
      <span class="keyword">case</span> <a title="Double" id="88425">x</a>:java.lang.<span title="java.lang.Long">Long</span> =&gt; <a href="#88425" title="java.lang.Long">x</a>.<span title="()Double">doubleValue</span>
      <span class="keyword">case</span> <a title="Double" id="88426">x</a>:java.lang.<span title="java.lang.Float">Float</span> =&gt; <a href="#88426" title="java.lang.Float">x</a>.<span title="()Double">doubleValue</span>
      <span class="keyword">case</span> <a title="Double" id="88427">x</a>:java.lang.<span title="java.lang.Double">Double</span> =&gt; <a href="#88427" title="java.lang.Double">x</a>.<span title="()Double">doubleValue</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="()TransType" id="26761">init</a><span class="delimiter">(</span><span class="delimiter">)</span>:<a href="#9879" title="TransType">TransType</a>
  <span class="keyword">def</span> <a title="(a: TransType, k: KeyType, v: ValueType)TransType" id="26762">applyAggregate</a><span class="delimiter">(</span><a title="TransType" id="73289">a</a>:<a href="#9879" title="TransType">TransType</a>,<a title="KeyType" id="73290">k</a>:<a href="#9880" title="KeyType">KeyType</a>,<a title="ValueType" id="73291">v</a>:<a href="#9881" title="ValueType">ValueType</a><span class="delimiter">)</span>:<a href="#9879" title="TransType">TransType</a>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object edu.berkeley.cs.scads.util.AnalyticsUtils" id="9882">AnalyticsUtils</a> <span title="ScalaObject" class="delimiter">{</span>

  <span class="keyword">val</span> <a title="org.apache.avro.generic.GenericDatumReader[org.apache.avro.generic.GenericData.Record]" id="26868">reader</a> = <span title="org.apache.avro.generic.GenericDatumReader[org.apache.avro.generic.GenericData.Record]" class="keyword">new</span> <span title="org.apache.avro.generic.GenericDatumReader[org.apache.avro.generic.GenericData.Record]">GenericDatumReader</span><span class="delimiter">[</span>GenericData.Record<span class="delimiter">]</span>
  <span class="keyword">val</span> <a title="org.apache.avro.generic.GenericDatumWriter[java.lang.Object]" id="26870">writer</a> = <span title="org.apache.avro.generic.GenericDatumWriter[java.lang.Object]" class="keyword">new</span> <span title="org.apache.avro.generic.GenericDatumWriter[java.lang.Object]">GenericDatumWriter</span><span class="delimiter">[</span>Object<span class="delimiter">]</span>

  <span class="keyword">val</span> <a title="StringBuilder" id="26872">groupBuilder</a> = <span title="()StringBuilder" class="keyword">new</span> <span title="StringBuilder">StringBuilder</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="edu.berkeley.cs.scads.util.AnalyticsUtils.ShippedClassLoader" id="26874">shippedLoader</a> = <a href="#88618" title="edu.berkeley.cs.scads.util.AnalyticsUtils.ShippedClassLoader" class="keyword">new</a> <a href="#26883" title="edu.berkeley.cs.scads.util.AnalyticsUtils.ShippedClassLoader">ShippedClassLoader</a>
  
  <span class="keyword">def</span> <a title="(fields: Seq[String], original: org.apache.avro.Schema)org.apache.avro.Schema" id="26876">getSubSchema</a><span class="delimiter">(</span><a title="Seq[String]" id="28103">fields</a>:<span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span>,
                   <a title="org.apache.avro.Schema" id="28104">original</a>:<span title="org.apache.avro.Schema">Schema</span><span class="delimiter">)</span>:<span title="org.apache.avro.Schema">Schema</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.apache.avro.Schema" id="88644">rec</a> = <span title="object org.apache.avro.Schema">Schema</span>.<span title="(x$1: java.lang.String, x$2: java.lang.String, x$3: java.lang.String, x$4: Boolean)org.apache.avro.Schema">createRecord</span><span class="delimiter">(</span><a href="#28104" title="org.apache.avro.Schema">original</a>.<span title="()java.lang.String">getName</span>,
                                  <a href="#28104" title="org.apache.avro.Schema">original</a>.<span title="()java.lang.String">getDoc</span>,
                                  <a href="#28104" title="org.apache.avro.Schema">original</a>.<span title="()java.lang.String">getNamespace</span>,
                                  <a href="#28104" title="org.apache.avro.Schema">original</a>.<span title="()Boolean">isError</span><span class="delimiter">)</span>
    <a href="#88644" title="org.apache.avro.Schema">rec</a>.<span title="(x$1: java.util.List[org.apache.avro.Schema.Field])Unit">setFields</span><span class="delimiter">(</span>
      <a href="#28103" title="Seq[String]">fields</a> <span title="(b: Seq[org.apache.avro.Schema.Field])java.util.List[org.apache.avro.Schema.Field]">map</span><span class="delimiter">(</span><a title="String" id="88691">fn</a> =&gt; <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="org.apache.avro.Schema.Field" id="88692">of</a> = <a href="#28104" title="org.apache.avro.Schema">original</a>.<span title="(x$1: java.lang.String)org.apache.avro.Schema.Field">getField</span><span class="delimiter">(</span><a href="#88691" title="String">fn</a><span class="delimiter">)</span>
        <span title="org.apache.avro.Schema.Field" class="keyword">new</span> <span title="object org.apache.avro.Schema">Schema</span>.<span title="org.apache.avro.Schema.Field">Field</span><span class="delimiter">(</span><a href="#88692" title="org.apache.avro.Schema.Field">of</a>.<span title="()java.lang.String">name</span>,
                         <a href="#88692" title="org.apache.avro.Schema.Field">of</a>.<span title="()org.apache.avro.Schema">schema</span>,
                         <a href="#88692" title="org.apache.avro.Schema.Field">of</a>.<span title="()java.lang.String">doc</span>,
                         <a href="#88692" title="org.apache.avro.Schema.Field">of</a>.<span title="()org.codehaus.jackson.JsonNode">defaultValue</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>
    <a href="#88644" title="org.apache.avro.Schema">rec</a>
  <span class="delimiter">}</span>

  <span class="comment">// this is gross and slow</span>
  <span class="keyword">def</span> <a title="(groups: Seq[Int], groupSchemas: Seq[org.apache.avro.Schema], rec: org.apache.avro.generic.IndexedRecord)Array[Byte]" id="26877">getGroupBytes</a><span class="delimiter">(</span><a title="Seq[Int]" id="71663">groups</a>:<span title="Seq[Int]">Seq</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>, <a title="Seq[org.apache.avro.Schema]" id="71664">groupSchemas</a>:<span title="Seq[org.apache.avro.Schema]">Seq</span><span class="delimiter">[</span>Schema<span class="delimiter">]</span>, <a title="org.apache.avro.generic.IndexedRecord" id="71665">rec</a>:<span title="org.apache.avro.generic.IndexedRecord">IndexedRecord</span><span class="delimiter">)</span>:<span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.io.ByteArrayOutputStream" id="88721">out</a> = <span title="(x$1: Int)java.io.ByteArrayOutputStream" class="keyword">new</span> java.io.<span title="java.io.ByteArrayOutputStream">ByteArrayOutputStream</span><span class="delimiter">(</span><span title="Int(128)" class="int">128</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="org.apache.avro.io.BinaryEncoder" id="88722">encoder</a> = <span title="object org.apache.avro.io.EncoderFactory">EncoderFactory</span>.<span title="()org.apache.avro.io.EncoderFactory">get</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(x$1: java.io.OutputStream, x$2: org.apache.avro.io.BinaryEncoder)org.apache.avro.io.BinaryEncoder">binaryEncoder</span><span class="delimiter">(</span><a href="#88721" title="java.io.ByteArrayOutputStream">out</a>,<span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
    <a href="#71663" title="Seq[Int]">groups</a>.<span title="=&gt; java.lang.Object with scala.collection.SeqView[Int,Seq[Int]]">view</span>.<span title="(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.SeqView[Int,Seq[Int]],(Int, Int),scala.collection.SeqView[(Int, Int),Seq[_]]])scala.collection.SeqView[(Int, Int),Seq[_]]">zipWithIndex</span> <span title="(f: (Int, Int) =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a title="(Int, Int)" id="88885">ge</a> =&gt; <span class="delimiter">{</span>
      <a href="#26870" title="=&gt; org.apache.avro.generic.GenericDatumWriter[java.lang.Object]">writer</a>.<span title="(x$1: org.apache.avro.Schema)Unit">setSchema</span><span class="delimiter">(</span><a href="#71664" title="(idx: Int)org.apache.avro.Schema">groupSchemas</a><span class="delimiter">(</span><a href="#88885" title="(Int, Int)">ge</a>.<span title="=&gt; Int">_2</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#26870" title="=&gt; org.apache.avro.generic.GenericDatumWriter[java.lang.Object]">writer</a>.<span title="(x$1: java.lang.Object, x$2: org.apache.avro.io.Encoder)Unit">write</span><span class="delimiter">(</span><a href="#71665" title="org.apache.avro.generic.IndexedRecord">rec</a>.<span title="(x$1: Int)java.lang.Object">get</span><span class="delimiter">(</span><a href="#88885" title="(Int, Int)">ge</a>.<span title="=&gt; Int">_1</span><span class="delimiter">)</span>,<a href="#88722" title="org.apache.avro.io.BinaryEncoder">encoder</a><span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>
    <a href="#88722" title="org.apache.avro.io.BinaryEncoder">encoder</a>.<span title="()Unit">flush</span>
    <a href="#88721" title="java.io.ByteArrayOutputStream">out</a>.<span title="()Array[Byte]">toByteArray</span>
  <span class="delimiter">}</span>


  <span class="keyword">def</span> <a title="(filterSchema: org.apache.avro.Schema, bytes: Array[Byte])org.apache.avro.generic.GenericData.Record" id="26878">getRecord</a><span class="delimiter">(</span><a title="org.apache.avro.Schema" id="30607">filterSchema</a>:<span title="org.apache.avro.Schema">Schema</span>,
                <a title="Array[Byte]" id="30608">bytes</a>:<span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>:GenericData.<span title="org.apache.avro.generic.GenericData.Record">Record</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.apache.avro.io.BinaryDecoder" id="88905">inStream</a> = <span title="object org.apache.avro.io.DecoderFactory">DecoderFactory</span>.<span title="()org.apache.avro.io.DecoderFactory">get</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(x$1: Array[Byte], x$2: org.apache.avro.io.BinaryDecoder)org.apache.avro.io.BinaryDecoder">binaryDecoder</span><span class="delimiter">(</span><a href="#30608" title="Array[Byte]">bytes</a>, <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> 
    <a href="#26868" title="=&gt; org.apache.avro.generic.GenericDatumReader[org.apache.avro.generic.GenericData.Record]">reader</a>.<span title="(x$1: org.apache.avro.Schema)Unit">setSchema</span><span class="delimiter">(</span><a href="#30607" title="org.apache.avro.Schema">filterSchema</a><span class="delimiter">)</span>
    <a href="#26868" title="=&gt; org.apache.avro.generic.GenericDatumReader[org.apache.avro.generic.GenericData.Record]">reader</a>.<span title="(x$1: org.apache.avro.Schema)Unit">setExpected</span><span class="delimiter">(</span><a href="#30607" title="org.apache.avro.Schema">filterSchema</a><span class="delimiter">)</span>
    <a href="#26868" title="=&gt; org.apache.avro.generic.GenericDatumReader[org.apache.avro.generic.GenericData.Record]">reader</a>.<span title="(x$1: org.apache.avro.generic.GenericData.Record, x$2: org.apache.avro.io.Decoder)org.apache.avro.generic.GenericData.Record">read</span><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>,<a href="#88905" title="org.apache.avro.io.BinaryDecoder">inStream</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(originalSchema: org.apache.avro.Schema, filterSchema: org.apache.avro.Schema, bytes: Array[Byte], reuse: org.apache.avro.generic.GenericData.Record)org.apache.avro.generic.GenericData.Record" id="26879">extractFilterFields</a><span class="delimiter">(</span><a title="org.apache.avro.Schema" id="88917">originalSchema</a>:<span title="org.apache.avro.Schema">Schema</span>,
                          <a title="org.apache.avro.Schema" id="88918">filterSchema</a>:<span title="org.apache.avro.Schema">Schema</span>,
                          <a title="Array[Byte]" id="88919">bytes</a>:<span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>,
                          <a title="org.apache.avro.generic.GenericData.Record" id="88920">reuse</a>:GenericData.<span title="org.apache.avro.generic.GenericData.Record">Record</span><span class="delimiter">)</span>:GenericData.<span title="org.apache.avro.generic.GenericData.Record">Record</span> = <span class="delimiter">{</span>
    <span class="comment">// NB: We offset by 16 here to skip the metadata.  Will need to change if metadata format changes</span>
    <span class="keyword">val</span> <a title="org.apache.avro.io.BinaryDecoder" id="88922">dec</a> = <span title="object org.apache.avro.io.DecoderFactory">DecoderFactory</span>.<span title="()org.apache.avro.io.DecoderFactory">get</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(x$1: java.io.InputStream, x$2: org.apache.avro.io.BinaryDecoder)org.apache.avro.io.BinaryDecoder">binaryDecoder</span><span class="delimiter">(</span><span title="(x$1: Array[Byte], x$2: Int, x$3: Int)java.io.ByteArrayInputStream" class="keyword">new</span> <span title="java.io.ByteArrayInputStream">ByteArrayInputStream</span><span class="delimiter">(</span><a href="#88919" title="Array[Byte]">bytes</a>,<span title="Int(16)" class="int">16</span>,<span class="delimiter">(</span><a href="#88919" title="Array[Byte]">bytes</a>.<span title="=&gt; Int">length</span><span title="(x: Int)Int">-</span><span title="Int(16)" class="int">16</span><span class="delimiter">)</span><span class="delimiter">)</span>,<span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
    <a href="#26868" title="=&gt; org.apache.avro.generic.GenericDatumReader[org.apache.avro.generic.GenericData.Record]">reader</a>.<span title="(x$1: org.apache.avro.Schema)Unit">setSchema</span><span class="delimiter">(</span><a href="#88917" title="org.apache.avro.Schema">originalSchema</a><span class="delimiter">)</span>
    <a href="#26868" title="=&gt; org.apache.avro.generic.GenericDatumReader[org.apache.avro.generic.GenericData.Record]">reader</a>.<span title="(x$1: org.apache.avro.Schema)Unit">setExpected</span><span class="delimiter">(</span><a href="#88918" title="org.apache.avro.Schema">filterSchema</a><span class="delimiter">)</span>
    <a href="#26868" title="=&gt; org.apache.avro.generic.GenericDatumReader[org.apache.avro.generic.GenericData.Record]">reader</a>.<span title="(x$1: org.apache.avro.generic.GenericData.Record, x$2: org.apache.avro.io.Decoder)org.apache.avro.generic.GenericData.Record">read</span><span class="delimiter">(</span><a href="#88920" title="org.apache.avro.generic.GenericData.Record">reuse</a>,<a href="#88922" title="org.apache.avro.io.BinaryDecoder">dec</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/* Groups should be int positions of groups to pull out. */</span>
  <span class="keyword">def</span> <a title="(groups: Seq[Int], rec: org.apache.avro.generic.IndexedRecord)java.lang.CharSequence" id="26880">getGroupKey</a><span class="delimiter">(</span><a title="Seq[Int]" id="71528">groups</a>:<span title="Seq[Int]">Seq</span><span class="delimiter">[</span>Int<span class="delimiter">]</span>, <a title="org.apache.avro.generic.IndexedRecord" id="71529">rec</a>:<span title="org.apache.avro.generic.IndexedRecord">IndexedRecord</span><span class="delimiter">)</span>:<span title="java.lang.CharSequence">CharSequence</span> = <span class="delimiter">{</span>
    <a href="#26872" title="=&gt; StringBuilder">groupBuilder</a>.<span title="()Unit">clear</span>
    <a href="#71528" title="Seq[Int]">groups</a>.<span title="(f: Int =&gt; StringBuilder)Unit">foreach</span><span class="delimiter">(</span><a title="Int" id="88954">group</a> =&gt; <span class="delimiter">{</span><a href="#26872" title="=&gt; StringBuilder">groupBuilder</a>.<span title="(x: Any)StringBuilder">append</span><span class="delimiter">(</span><a href="#71529" title="org.apache.avro.generic.IndexedRecord">rec</a>.<span title="(x$1: Int)java.lang.Object">get</span><span class="delimiter">(</span><a href="#88954" title="Int">group</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">}</span><span class="delimiter">)</span>
    <a href="#26872" title="=&gt; StringBuilder">groupBuilder</a>.<span title="()java.lang.String">toString</span>
  <span class="delimiter">}</span>

  <span class="comment">/* get array of bytes which is the compiled version of cl */</span>
  <span class="keyword">def</span> <a title="(cl: AnyRef)Array[Byte]" id="26881">getClassBytes</a><span class="delimiter">(</span><a title="AnyRef" id="26886">cl</a>:<span title="AnyRef">AnyRef</span><span class="delimiter">)</span>:<span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.ClassLoader" id="88982">ldr</a> = <a href="#26886" title="AnyRef">cl</a>.<span title="()java.lang.Class[_]">getClass</span>.<span title="()java.lang.ClassLoader">getClassLoader</span>
    <a href="#88982" title="java.lang.ClassLoader">ldr</a> <span title="Array[Byte]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Array[Byte]" id="88985">afcl</a>:<span title="scala.tools.nsc.interpreter.AbstractFileClassLoader">AbstractFileClassLoader</span> =&gt; <span class="delimiter">{</span>
        <span class="comment">// can't use getResourceAsStream here because it always returns null on an AFCL</span>
        <span class="keyword">val</span> <a title="java.lang.String" id="90021">name</a> = <a href="#26886" title="AnyRef">cl</a>.<span title="()java.lang.Class[_]">getClass</span>.<span title="()java.lang.String">getName</span>
        <span class="keyword">val</span> <a title="java.lang.reflect.Field" id="90022">rootField</a> = <a href="#88985" title="scala.tools.nsc.interpreter.AbstractFileClassLoader">afcl</a>.<span title="()java.lang.Class[_]">getClass</span>.<span title="(x$1: java.lang.String)java.lang.reflect.Field">getDeclaredField</span><span class="delimiter">(</span><span title="java.lang.String(&quot;root&quot;)" class="string">&quot;root&quot;</span><span class="delimiter">)</span>
        <a href="#90022" title="java.lang.reflect.Field">rootField</a>.<span title="(x$1: Boolean)Unit">setAccessible</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
        <span class="keyword">var</span> <a title="scala.tools.nsc.io.AbstractFile" id="90023">file</a>: <span title="scala.tools.nsc.io.AbstractFile">AbstractFile</span> = <a href="#90022" title="java.lang.reflect.Field">rootField</a>.<span title="(x$1: Any)java.lang.Object">get</span><span class="delimiter">(</span><a href="#88985" title="scala.tools.nsc.interpreter.AbstractFileClassLoader">afcl</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scala.tools.nsc.io.AbstractFile" class="delimiter">[</span><span title="scala.tools.nsc.io.AbstractFile">AbstractFile</span><span class="delimiter">]</span>
        <span class="keyword">val</span> <a title="List[java.lang.String]" id="90024">pathParts</a> = <a href="#90021" title="java.lang.String">name</a>.<span title="(x$1: java.lang.String)Array[java.lang.String]">split</span><span title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]" class="delimiter">(</span><span title="java.lang.String(&quot;[./]&quot;)" class="string">&quot;[./]&quot;</span><span class="delimiter">)</span>.<span title="=&gt; List[java.lang.String]">toList</span>
        <span class="keyword">for</span> <span class="delimiter">(</span><a title="java.lang.String" id="90347">dirPart</a> &lt;- <a href="#90024" title="List[java.lang.String]">pathParts</a>.<span title="(f: java.lang.String =&gt; Unit)Unit">init</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#90023" title="scala.tools.nsc.io.AbstractFile">file</a> = <a href="#90023" title="scala.tools.nsc.io.AbstractFile">file</a>.<span title="(name: String, directory: Boolean)scala.tools.nsc.io.AbstractFile">lookupName</span><span class="delimiter">(</span><a href="#90347" title="java.lang.String">dirPart</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#90023" title="scala.tools.nsc.io.AbstractFile">file</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.ClassNotFoundException" class="keyword">new</span> <span title="java.lang.ClassNotFoundException">ClassNotFoundException</span><span class="delimiter">(</span><a href="#90021" title="java.lang.String">name</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <a href="#90023" title="scala.tools.nsc.io.AbstractFile">file</a> = <a href="#90023" title="scala.tools.nsc.io.AbstractFile">file</a>.<span title="(name: String, directory: Boolean)scala.tools.nsc.io.AbstractFile">lookupName</span><span class="delimiter">(</span><a href="#90024" title="List[java.lang.String]">pathParts</a>.<span title="=&gt; java.lang.String">last</span><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;.class&quot;)" class="string">&quot;.class&quot;</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#90023" title="scala.tools.nsc.io.AbstractFile">file</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.ClassNotFoundException" class="keyword">new</span> <span title="java.lang.ClassNotFoundException">ClassNotFoundException</span><span class="delimiter">(</span><a href="#90021" title="java.lang.String">name</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <a href="#90023" title="scala.tools.nsc.io.AbstractFile">file</a>.<span title="=&gt; Array[Byte]">toByteArray</span>
      <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="Array[Byte]" id="90371">rcl</a>:<span title="java.lang.ClassLoader">ClassLoader</span> =&gt; <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="java.lang.String" id="90372">name</a> = <a href="#26886" title="AnyRef">cl</a>.<span title="()java.lang.Class[_]">getClass</span>.<span title="()java.lang.String">getName</span>.<span title="(x$1: Char, x$2: Char)java.lang.String">replace</span><span class="delimiter">(</span><span title="Char(\'.\')" class="char">'.'</span>, <span title="Char(\'/\')" class="char">'/'</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.class&quot;)" class="string">&quot;.class&quot;</span>
        <span class="keyword">val</span> <a title="java.io.InputStream" id="90373">istream</a> = <a href="#90371" title="java.lang.ClassLoader">rcl</a>.<span title="(x$1: java.lang.String)java.io.InputStream">getResourceAsStream</span><span class="delimiter">(</span><a href="#90372" title="java.lang.String">name</a><span class="delimiter">)</span>
        <span title="Array[Byte]" class="keyword">if</span> <span class="delimiter">(</span><a href="#90373" title="java.io.InputStream">istream</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.ClassNotFoundException" class="keyword">new</span> <span title="java.lang.ClassNotFoundException">ClassNotFoundException</span><span class="delimiter">(</span><a href="#90372" title="java.lang.String">name</a><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Array[Byte]" id="90386">buf</a> = <span title="Array[Byte]" class="keyword">new</span> <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">(</span><span title="Int(1024)" class="int">1024</span><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="java.io.ByteArrayOutputStream" id="90387">os</a> = <span title="(x$1: Int)java.io.ByteArrayOutputStream" class="keyword">new</span> java.io.<span title="java.io.ByteArrayOutputStream">ByteArrayOutputStream</span><span class="delimiter">(</span><span title="Int(1024)" class="int">1024</span><span class="delimiter">)</span>
          <span class="keyword">var</span> <a title="Int" id="90388">br</a> = <a href="#90373" title="java.io.InputStream">istream</a>.<span title="(x$1: Array[Byte])Int">read</span><span class="delimiter">(</span><a href="#90386" title="Array[Byte]">buf</a><span class="delimiter">)</span>
          <span title="Unit" class="keyword">while</span><span class="delimiter">(</span><a href="#90388" title="Int">br</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#90389" title="()Unit" class="delimiter">{</a>
            <a href="#90387" title="java.io.ByteArrayOutputStream">os</a>.<span title="(x$1: Array[Byte], x$2: Int, x$3: Int)Unit">write</span><span class="delimiter">(</span><a href="#90386" title="Array[Byte]">buf</a>,<span title="Int(0)" class="int">0</span>,<a href="#90388" title="Int">br</a><span class="delimiter">)</span>
            <a href="#90388" title="Int">br</a> = <a href="#90373" title="java.io.InputStream">istream</a>.<span title="(x$1: Array[Byte])Int">read</span><span class="delimiter">(</span><a href="#90386" title="Array[Byte]">buf</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <a href="#90387" title="java.io.ByteArrayOutputStream">os</a>.<span title="()Array[Byte]">toByteArray</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">class</span> <a title="class ShippedClassLoader extends java.lang.ClassLoader with ScalaObject" id="26883">ShippedClassLoader</a><a href="#26883" title="ScalaObject" class="delimiter">(</a><span class="keyword">var</span> <a title="Array[Byte]" id="88618">bytes</a>:<span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span> = <span title="Null(null)" class="keyword">null</span>,<span class="keyword">var</span> <a title="String" id="88619">targetClass</a>:<span title="String">String</span> = <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="java.lang.ClassLoader">ClassLoader</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(name: String)Class[_]" id="88614">findClass</a><span class="delimiter">(</span><a title="String" id="88634">name</a>:<span title="String">String</span><span class="delimiter">)</span>:<span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span title="java.lang.Class[_141]" class="keyword">if</span> <span class="delimiter">(</span><a href="#88634" title="String">name</a>.<span title="(x$1: Any)Boolean">equals</span><span class="delimiter">(</span><a href="#88619" title="=&gt; String">targetClass</a><span class="delimiter">)</span><span class="delimiter">)</span> 
        <a href="#26883" title="(x$1: java.lang.String, x$2: Array[Byte], x$3: Int, x$4: Int)java.lang.Class[_]">defineClass</a><span class="delimiter">(</span><a href="#88634" title="String">name</a>, <a href="#88618" title="=&gt; Array[Byte]">bytes</a>, <span title="Int(0)" class="int">0</span>, <a href="#88618" title="=&gt; Array[Byte]">bytes</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span>
      <span class="keyword">else</span> 
        <span title="object java.lang.Class">Class</span>.<span title="(x$1: java.lang.String)java.lang.Class[_]">forName</span><span class="delimiter">(</span><a href="#88634" title="String">name</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(name: String, ba: Array[Byte])Any" id="26885">deserializeCode</a><span class="delimiter">(</span><a title="String" id="90485">name</a>:<span title="String">String</span>, <a title="Array[Byte]" id="90486">ba</a>:<span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>:<span title="Any">Any</span> = <span class="delimiter">{</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <a href="#26874" title="=&gt; edu.berkeley.cs.scads.util.AnalyticsUtils.ShippedClassLoader">shippedLoader</a>.<a href="#88618" title="(x$1: Array[Byte])Unit">bytes</a> = <a href="#90486" title="Array[Byte]">ba</a>
      <a href="#26874" title="=&gt; edu.berkeley.cs.scads.util.AnalyticsUtils.ShippedClassLoader">shippedLoader</a>.<a href="#88619" title="(x$1: String)Unit">targetClass</a> = <a href="#90485" title="String">name</a>
      <span title="object java.lang.Class">Class</span>.<span title="(x$1: java.lang.String, x$2: Boolean, x$3: java.lang.ClassLoader)java.lang.Class[_]">forName</span><span class="delimiter">(</span><a href="#90485" title="String">name</a>,<span title="Boolean(false)" class="keyword">false</span>,<a href="#26874" title="=&gt; edu.berkeley.cs.scads.util.AnalyticsUtils.ShippedClassLoader">shippedLoader</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="(Null, Int)" id="90492">ex</a>:java.io.<span title="java.io.IOException">IOException</span> =&gt; <span class="delimiter">{</span>
        <a href="#90492" title="java.io.IOException">ex</a>.<span title="()Unit">printStackTrace</span>
        <span title="(_1: Null, _2: Int)(Null, Int)" class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>,<span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> 
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>